/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "./public/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./config/keys.js":
/*!************************!*\
  !*** ./config/keys.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    soundcloudKey: 'e9a719bdc5f31a321c113282cb48387d',\n    soundcloudClientSecretKey: 'c9c905a4930d5c1341ed5c51675ccadb'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb25maWcva2V5cy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb25maWcva2V5cy5qcz85NjlmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHNvdW5kY2xvdWRLZXk6ICdlOWE3MTliZGM1ZjMxYTMyMWMxMTMyODJjYjQ4Mzg3ZCcsXHJcblx0c291bmRjbG91ZENsaWVudFNlY3JldEtleTogJ2M5YzkwNWE0OTMwZDVjMTM0MWVkNWM1MTY3NWNjYWRiJyxcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFGQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./config/keys.js\n");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcz9mMjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/process/browser.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/decode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/decode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2RlY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzPzkxZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gSWYgb2JqLmhhc093blByb3BlcnR5IGhhcyBiZWVuIG92ZXJyaWRkZW4sIHRoZW4gY2FsbGluZ1xuLy8gb2JqLmhhc093blByb3BlcnR5KHByb3ApIHdpbGwgYnJlYWsuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgdmFyIG9iaiA9IHt9O1xuXG4gIGlmICh0eXBlb2YgcXMgIT09ICdzdHJpbmcnIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgcmVnZXhwID0gL1xcKy9nO1xuICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cbiAgdmFyIG1heEtleXMgPSAxMDAwO1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuICAgIG1heEtleXMgPSBvcHRpb25zLm1heEtleXM7XG4gIH1cblxuICB2YXIgbGVuID0gcXMubGVuZ3RoO1xuICAvLyBtYXhLZXlzIDw9IDAgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbm90IGxpbWl0IGtleXMgY291bnRcbiAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcbiAgICBsZW4gPSBtYXhLZXlzO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSxcbiAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcbiAgICAgICAga3N0ciwgdnN0ciwgaywgdjtcblxuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAga3N0ciA9IHguc3Vic3RyKDAsIGlkeCk7XG4gICAgICB2c3RyID0geC5zdWJzdHIoaWR4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtzdHIgPSB4O1xuICAgICAgdnN0ciA9ICcnO1xuICAgIH1cblxuICAgIGsgPSBkZWNvZGVVUklDb21wb25lbnQoa3N0cik7XG4gICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblxuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgb2JqW2tdID0gdjtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgb2JqW2tdLnB1c2godik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrXSA9IFtvYmpba10sIHZdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/decode.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/encode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/encode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZW5jb2RlLmpzP2UwOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG1hcChvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBtYXAob2JqW2tdLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG4gIGlmICh4cy5tYXApIHJldHVybiB4cy5tYXAoZik7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/encode.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/index.js":
/*!***********************************************!*\
  !*** ./node_modules/querystring-es3/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.decode = exports.parse = __webpack_require__(/*! ./decode */ \"./node_modules/querystring-es3/decode.js\");\nexports.encode = exports.stringify = __webpack_require__(/*! ./encode */ \"./node_modules/querystring-es3/encode.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9pbmRleC5qcz9iMzgzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/index.js\n");

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzPzYwMTciXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/setimmediate/setImmediate.js\n");

/***/ }),

/***/ "./node_modules/soundcloud/sdk.js":
/*!****************************************!*\
  !*** ./node_modules/soundcloud/sdk.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(setImmediate, clearImmediate) {!function(e,t){if(true)module.exports=t();else { var n, r; }}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){(function(t){\"use strict\";var n=r(4),o=r(8),i=r(3),a=r(9),s=r(2).Promise,u=r(16),l=r(17);e.exports=t.SC={initialize:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i.set(\"oauth_token\",e.oauth_token),i.set(\"client_id\",e.client_id),i.set(\"redirect_uri\",e.redirect_uri),i.set(\"baseURL\",e.baseURL),i.set(\"connectURL\",e.connectURL)},get:function(e,t){return n.request(\"GET\",e,t)},post:function(e,t){return n.request(\"POST\",e,t)},put:function(e,t){return n.request(\"PUT\",e,t)},delete:function(e){return n.request(\"DELETE\",e)},upload:function(e){return n.upload(e)},connect:function(e){return a(e)},isConnected:function(){return void 0!==i.get(\"oauth_token\")},oEmbed:function(e,t){return n.oEmbed(e,t)},resolve:function(e){return n.resolve(e)},Recorder:u,Promise:s,stream:function(e,t){return l(e,t)},connectCallback:function(){o.notifyDialog(this.location)}}}).call(t,function(){return this}())},function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){e.exports={SCAudio:r(1),SCAudioPublicApiStreamURLRetriever:r(9),MaestroCore:r(2),MaestroLoaders:r(8),MaestroHTML5Player:r(7),MaestroHLSMSEPlayer:r(3)}},function(e,t,r){!function(t,n){e.exports=n(r(2),function(){try{return r(!function(){var e=new Error('Cannot find module \"@sc/maestro-chromecast-player\"');throw e.code=\"MODULE_NOT_FOUND\",e}())}catch(e){}}(),function(){try{return r(!function(){var e=new Error('Cannot find module \"@sc/maestro-flipper-player\"');throw e.code=\"MODULE_NOT_FOUND\",e}())}catch(e){}}(),function(){try{return r(3)}catch(e){}}(),function(){try{return r(7)}catch(e){}}(),r(8))}(this,function(e,t,r,n,o,i){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=95)}([function(t,r){t.exports=e},function(e,t,r){\"use strict\";var n=r(4);e.exports=function(e){if(!n(e))throw new TypeError(\"Cannot use null or undefined\");return e}},function(e,t,r){\"use strict\";e.exports=function(e){if(\"function\"!=typeof e)throw new TypeError(e+\" is not a function\");return e}},function(e,t,r){\"use strict\";e.exports=r(64)()?Symbol:r(66)},function(e,t,r){\"use strict\";var n=r(17)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){\"use strict\";var n,o=r(9),i=r(19),a=r(50),s=r(22);n=e.exports=function(e,t){var r,n,a,u,l;return arguments.length<2||\"string\"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(r=a=!0,n=!1):(r=s.call(e,\"c\"),n=s.call(e,\"e\"),a=s.call(e,\"w\")),l={value:t,configurable:r,enumerable:n,writable:a},u?o(i(u),l):l},n.gs=function(e,t,r){var n,u,l,c;return\"string\"!=typeof e?(l=r,r=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==r?r=void 0:a(r)||(l=r,r=void 0):(l=t,t=r=void 0),null==e?(n=!0,u=!1):(n=s.call(e,\"c\"),u=s.call(e,\"e\")),c={get:t,set:r,configurable:n,enumerable:u},l?o(i(l),c):c}},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t,r){void 0===r&&(r=\"API error.\");var n=e.call(this,r)||this;return n.statusCode=t,n}return n(t,e),t.prototype.getCode=function(){return\"SCAUDIO.API_ERROR.\"+(this.statusCode||\"TIMEOUT\")},t.prototype.getStatusCode=function(){return this.statusCode},t}(o.errors.PlayerFatalError);t.ApiError=i},function(e,t,r){\"use strict\";var n=Object.prototype.toString,o=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===o}},function(e,t,r){\"use strict\";var n=Object.prototype.toString,o=n.call(\"\");e.exports=function(e){return\"string\"==typeof e||e&&\"object\"==typeof e&&(e instanceof String||n.call(e)===o)||!1}},function(e,t,r){\"use strict\";e.exports=r(45)()?Object.assign:r(46)},function(e,t,r){\"use strict\";e.exports=r(20)()?Object.setPrototypeOf:r(21)},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t){return e.call(this,t||\"There was no format available that a player was able to play.\")||this}return n(t,e),t.prototype.getCode=function(){return\"SCAUDIO.NOT_SUPPORTED_ERROR\"},t}(o.errors.PlayerFatalError);t.NotSupportedError=i},function(e,t,r){\"use strict\";function n(e){return new i({startPos:0,endPos:e,startLevel:0,endLevel:1,fromEnd:!1})}function o(e){return new i({startPos:e,endPos:0,startLevel:1,endLevel:0,fromEnd:!0})}Object.defineProperty(t,\"__esModule\",{value:!0}),t.buildFadeIn=n,t.buildFadeOut=o;var i=function(){function e(e){var t=e.startPos,r=e.endPos,n=e.startLevel,o=e.endLevel,i=e.fromEnd,a=void 0!==i&&i;if(t<0)throw new Error(\"startPos invalid.\");if(r<0||!a&&r<t||a&&t<r)throw new Error(\"endPos invalid.\");if(n<0||n>1)throw new Error(\"startLevel invalid.\");if(o<0||o>1)throw new Error(\"endLevel invalid.\");this._startPos=t,this._endPos=r,this._startLevel=n,this._endLevel=o,this._fromEnd=a}return e.prototype.calculate=function(e,t){var r=this._fromEnd?t-500-this._startPos:this._startPos,n=this._fromEnd?t-500-this._endPos:this._endPos;if(e<r)return{level:this._startLevel,nextCalculatePosition:r-e};if(e<=n){var o=(e-r)/(n-r),i=Math.cos(o*Math.PI)/-2+.5,a=this._startLevel+(this._endLevel-this._startLevel)*i;return{level:a,nextCalculatePosition:e}}return{level:this._endLevel,nextCalculatePosition:1/0}},e}();t.Fade=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){}return e}();t.BaseStreamUrlRetriever=n},function(e,t,r){\"use strict\";function n(e,t,r){return Math.min(t,Math.max(e,r))}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(0),a=r(12),s=i.eventDispatcher.EventDispatcher,u=i.helpers.Promise,l=i.helpers.deferred.buildDeferred,c=100,d=5e3,f=1500,p=function(e){function t(t,r){var n=e.call(this,t)||this;return n._onPreloadingEnabled=new s,n._onPreloadingDisabled=new s,n._onConnectionRequired=new s,n._onConnectionRecovered=new s,n._volumeAutomators=[],n._volumeScale=1,n._userVolume=1,n._volumeAutomationSupported=!1,n._timer=null,n._pauseFadeTimer=null,n._pauseFadeDeferred=null,n._pauseFade=null,n._connectionRequired=!1,n._connectionLossTimer=null,n.onPreloadingEnabled=n._onPreloadingEnabled.getHandle(),n.onPreloadingDisabled=n._onPreloadingDisabled.getHandle(),n.onConnectionRequired=n._onConnectionRequired.getHandle(),n.onConnectionRecovered=n._onConnectionRecovered.getHandle(),n._reloadStreamUrls=r,n._pausedMaxBufferLength=t.pausedMaxBufferLength,n._playingMaxBufferLength=t.playingMaxBufferLength,n._preloadingEnabled=t.preloadingEnabled,n.onPlayerProvided.subscribe(function(){return n._updateMaxBufferLength()}),n.onChange.subscribe(function(e){n.isDead()||((e.playing===!1||e.positionJumped||e.stalled||e.ended)&&n._completePauseFade(),n._pauseFade&&(e.actuallyPlaying===!1||e.ended)&&(n.removeVolumeAutomator(n._pauseFade),n._pauseFade=null),(e.positionJumped||void 0!==e.actuallyPlaying||void 0!==e.stalled)&&n._updateVolume(),void 0!==e.playing&&n._updateMaxBufferLength(),void 0!==e.loading&&n._calculateIfConnectionRequired())}),window.addEventListener(\"online\",function(){return n._calculateIfConnectionRequired()}),window.addEventListener(\"offline\",function(){return n._calculateIfConnectionRequired()}),n._calculateIfConnectionRequired(),n}return o(t,e),t.prototype.reload=function(){this._ensureNotDead(),this._reloadStreamUrls()},t.prototype.enablePreloading=function(){this.isDead()||this._preloadingEnabled||(this._preloadingEnabled=!0,this._updateMaxBufferLength(),this._onPreloadingEnabled.dispatch(void 0))},t.prototype.disablePreloading=function(){this.isDead()||this._preloadingEnabled&&(this._preloadingEnabled=!1,this._updateMaxBufferLength(),this._onPreloadingDisabled.dispatch(void 0))},t.prototype.isPreloadingEnabled=function(){return this._preloadingEnabled},t.prototype.pauseAfterFade=function(e){var t=this;if(this._ensureNotDead(),this._pauseFadeDeferred)return this._pauseFadeDeferred.promise;if(!this.isPlaying()||!this.isActuallyPlaying())return u.resolve(this.pause());var r=l();this._pauseFadeDeferred=r;var n=this.getPosition();if(this._pauseFade)throw new Error(\"Fade should not already be assigned.\");return this._pauseFade=new a.Fade({startPos:n,endPos:n+e,startLevel:1,endLevel:0}),this.addVolumeAutomator(this._pauseFade),this._pauseFadeTimer=window.setTimeout(function(){t._pauseFadeDeferred=null,r.resolve(t.pause())},e+50),r.promise},t.prototype.isConnectionRequired=function(){return this._connectionRequired},t.prototype.getVolume=function(){return this._volumeAutomationSupported?this._userVolume:e.prototype.getVolume.call(this)},t.prototype.addVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);t<0&&(this._volumeAutomators.push(e),this._updateVolume())},t.prototype.removeVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);t>=0&&(this._volumeAutomators.splice(t,1),this._updateVolume())},t.prototype._triggerError=function(t){e.prototype._triggerError.call(this,t)},t.prototype.providePlayer=function(t,r,n){void 0===n&&(n=!0),this._volumeAutomationSupported=n,e.prototype.providePlayer.call(this,t,r)},t.prototype._setVolume=function(e){this._userVolume=e,this._calculateAndSetVolume()},t.prototype._kill=function(){this._timer&&window.clearTimeout(this._timer),null!==this._connectionLossTimer&&window.clearTimeout(this._connectionLossTimer),this._abortPauseFade(),e.prototype._kill.call(this)},t.prototype._calculateIfConnectionRequired=function(){var e=this,t=this.isLoading()&&\"navigator\"in window&&!window.navigator.onLine;t?null===this._connectionLossTimer&&(this._connectionLossTimer=window.setTimeout(function(){e._connectionLossTimer=null,e._connectionRequired=!0,e._onConnectionRequired.dispatch(void 0)},f)):this._connectionRequired?(this._connectionRequired=!1,this._onConnectionRecovered.dispatch(void 0)):null!==this._connectionLossTimer&&(window.clearTimeout(this._connectionLossTimer),this._connectionLossTimer=null)},t.prototype._completePauseFade=function(){if(this._pauseFadeDeferred){this._pauseFadeTimer&&window.clearTimeout(this._pauseFadeTimer);var e=this._pauseFadeDeferred;this._pauseFadeDeferred=null,e.resolve(this.pause())}},t.prototype._abortPauseFade=function(){this._pauseFadeTimer&&(window.clearTimeout(this._pauseFadeTimer),this._pauseFadeTimer=null),this._pauseFadeDeferred&&(this._pauseFadeDeferred.reject(new Error(\"Player was killed.\")),this._pauseFadeDeferred=null)},t.prototype._updateVolume=function(){var e=this;if(this._volumeAutomationSupported){this._ensureNotDead(),this._timer&&(window.clearTimeout(this._timer),this._timer=null);var t=this.getDuration();if(null!==t){var r=this._volumeAutomators,o=this.getPosition(),i=1/0,a=1;r.forEach(function(e){var r=e.calculate(o,t),s=r.nextCalculatePosition,u=r.level;a*=n(0,1,u),s<i&&(i=s)}),this._volumeScale!==a&&(this._volumeScale=a,this._calculateAndSetVolume()),i<1/0&&this.isActuallyPlaying()&&!this.isStalled()&&(this._timer=window.setTimeout(function(){e._timer=null,e._updateVolume()},n(c,d,i-this.getPosition())))}}},t.prototype._calculateAndSetVolume=function(){this._volumeAutomationSupported?e.prototype._setVolume.call(this,this._userVolume*this._volumeScale):e.prototype._setVolume.call(this,this._userVolume)},t.prototype._updateMaxBufferLength=function(){var e=this.getPlayer(),t=e&&e.getBufferController();t&&(this.isPlaying()?t.setMaxBufferLength(this._playingMaxBufferLength):t.setMaxBufferLength(this._preloadingEnabled?this._pausedMaxBufferLength:0))},t}(i.ProxyPlayer);t.Player=p},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(88);t.renditions=n.renditions},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e){this.statusCode=e}return e.prototype.getStatusCode=function(){return this.statusCode},e}();t.RequestError=n},function(e,t,r){\"use strict\";e.exports=function(){}},function(e,t,r){\"use strict\";var n=r(4),o={function:!0,object:!0};e.exports=function(e){return n(e)&&o[typeof e]||!1}},function(e,t,r){\"use strict\";var n=r(4),o=Array.prototype.forEach,i=Object.create,a=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return o.call(arguments,function(e){n(e)&&a(Object(e),t)}),t}},function(e,t,r){\"use strict\";var n=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return\"function\"==typeof e&&o(e(t(null),i))===i}},function(e,t,r){\"use strict\";var n,o=r(18),i=r(1),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(e,t){if(i(e),null===t||o(t))return e;throw new TypeError(\"Prototype must be null or an object\")},e.exports=function(e){var t,r;return e?(2===e.level?e.set?(r=e.set,t=function(e,t){return r.call(n(e,t),t),e}):t=function(e,t){return n(e,t).__proto__=t,e}:t=function e(t,r){var o;return n(t,r),o=a.call(e.nullPolyfill,t),o&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,o&&s(e.nullPolyfill,\"__proto__\",u),t},Object.defineProperty(t,\"level\",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\");if(n){try{e=n.set,e.call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:(t={},t.__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),r(48)},function(e,t,r){\"use strict\";e.exports=r(56)()?String.prototype.contains:r(57)},function(e,t,r){\"use strict\";var n=r(7),o=r(8),i=r(59),a=r(62),s=r(63),u=r(3).iterator;e.exports=function(e){return\"function\"==typeof s(e)[u]?e[u]():n(e)?new i(e):o(e)?new a(e):new i(e)}},function(e,t,r){\"use strict\";var n,o=r(34),i=r(9),a=r(2),s=r(1),u=r(5),l=r(33),c=r(3),d=Object.defineProperty,f=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");f(this,{__list__:u(\"w\",s(e)),__context__:u(\"w\",t),__nextIndex__:u(\"w\",0)}),t&&(a(t.on),t.on(\"_add\",this._onAdd),t.on(\"_delete\",this._onDelete),t.on(\"_clear\",this._onClear))},delete n.prototype.constructor,f(n.prototype,i({_next:u(function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift(),void 0!==e)?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off(\"_add\",this._onAdd),this.__context__.off(\"_delete\",this._onDelete),this.__context__.off(\"_clear\",this._onClear),this.__context__=null)}),toString:u(function(){return\"[object \"+(this[c.toStringTag]||\"Object\")+\"]\"})},l({_onAdd:u(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,\"__redo__\",u(\"c\",[e]));this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:u(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,r){t>e&&(this.__redo__[r]=--t)},this)))}),_onClear:u(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),d(n.prototype,c.iterator,u(function(){return this}))},function(e,t,r){\"use strict\";function n(e){return e.match(s)[0]}function o(e,t){if(t instanceof e.errors.RetrievalError){var r=t.getCause();if(r instanceof e.retrievalErrors.UnacceptableResponseStatusCodeError)return 403===r.getStatusCode()}return!1}function i(e,t,r,i,s,u,l,c,d){d=a.logger.prefixLogger(d,\"HLSMSEPlayer Controller\");var f=null,p=n(c);r.onChange.subscribe(function(e){var t=e.dead;t&&f&&(d.debug(\"Aborting URL retrieve because player was killed.\"),f.abort())}),r.onError.subscribe(function(t){if(!(t instanceof a.errors.NotSupportedError)){if(i){if(t instanceof a.errors.URLUpdateError)return d.error(\"URL refresh failed for some reason.\",t),void s({retryPlayer:!0});if(o(e,t))return f?void d.debug(\"Got a 403 status code, but URL refresh already in progress.\"):(d.info(\"Got a 403 status code. Peforming a URL refresh...\"),f=l.getUrl(),void f.whenComplete().then(function(e){if(e){var t=e.url,o=e.rendition;n(t)!==p||JSON.stringify(u)!==JSON.stringify(o)?(d.warn(\"Got a new URL but the rendition did not match the original.\"),s({retryPlayer:!1})):(f=null,d.info(\"Got a new URL. Updating...\"),r.getUrlController().updateUrl(t))}else d.warn(\"Could not get a new URL.\"),s({retryPlayer:!1})}).catch(function(e){d.error(\"Unexpected error when trying to retrieve a new URL.\",e),s({retryPlayer:!1})}))}d.error(\"Unexpected player error.\",t),s({retryPlayer:!1})}}),t.providePlayer(r)}Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(0),s=/^[^\\?#]*/;t.isErrorWhichShouldTriggerURLRefresh=o,t.takeControlHLSMSEPlayer=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(6),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"SCAUDIO.GEOBLOCKED_ERROR\"},t}(o.ApiError);t.GeoBlockedError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(11),i=function(e){function t(){return e.call(this,\"There were no stream URLs.\")||this}return n(t,e),t.prototype.getCode=function(){return\"SCAUDIO.NO_STREAMS\"},t}(o.NotSupportedError);t.NoStreamsError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(6),i=function(e){function t(){return e.call(this,null,\"Request timed out too many times.\")||this}return n(t,e),t.prototype.getCode=function(){return\"SCAUDIO.TIMED_OUT_ERROR\"},t}(o.ApiError);t.TimedOutError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(6),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"SCAUDIO.UNAVAILABLE_ERROR\"},t}(o.ApiError);t.UnavailableError=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(6),i=r(26),a=r(11),s=r(28),u=r(29),l=r(27);!function(e){e.ApiError=o.ApiError,e.GeoBlockedError=i.GeoBlockedError,e.NotSupportedError=a.NotSupportedError,e.TimedOutError=s.TimedOutError,e.UnavailableError=u.UnavailableError,e.NoStreamsError=l.NoStreamsError}(n=t.errors||(t.errors={}))},function(e,t,r){\"use strict\";function n(){return re?re:(re=document.createElement(\"audio\"),o(re),re)}function o(e){e.load()}function i(e){return e===Y||e===X}function a(e){return e.constructor===X}function s(e){return e.constructor===Y}function u(e){return e.constructor===Z}function l(e){return e.constructor===$}function c(e){var t=e.split(\"//\",2);return 1===t.length?t[0].split(\"/\",1)[0]:t[1]?t[1].split(\"/\",1)[0]:\"\"}function d(e){var t=ee.exec(e);return t&&t[0]||\"\"}function f(){for(var e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",t=\"\",r=0;r<20;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function p(e){if(\"number\"!=typeof e)throw new Error(\"level must be a number.\");if(e<0||e>1)throw new Error(\"Invalid volume level.\");se=e,ae.forEach(function(t){return t.setVolume(e)})}function h(){return se}function _(e){if(\"boolean\"!=typeof e)throw new Error(\"muteEnabled must be a boolean.\");ue=e,ae.forEach(function(t){return t.setMuted(e)})}function g(){return ue}function y(){n()}function v(e){function t(){return je?g(je):null}function r(){if(Be&&window.clearTimeout(Be),De.debug(\"Performing retrieve.\"),Ue)throw new Error(\"Player job already running. Only one instance of the job is allowed at once.\");if(Ie.isDead())throw new Error(\"Proxy is dead.\");var e=new B(function(){function e(){function t(e){if(e!==m.helpers.abortableJob.abortedError)if(e instanceof T.RequestError){var t=e.getStatusCode();switch(t){case 401:Ie._triggerError(new x.GeoBlockedError(t,\"Geoblocked (logged out).\"));break;case 403:Ie._triggerError(new x.GeoBlockedError(t,\"Geoblocked (logged in).\"));break;case 404:Ie._triggerError(new O.UnavailableError(t,\"Track unavailable.\"));break;case null:throw new Error(\"Status code should not be null.\");default:Ie._triggerError(new A.ApiError(t))}}else e===m.helpers.retry.noMoreAttemptsError?Ie._triggerError(new D.TimedOutError):(De.error(\"Unexpected error.\",e),Ie._triggerError(new m.errors.PlayerFatalError(\"An unexpected error occurred.\",e)))}a=o(),a.onCompletion(function(r){if(r)try{Ne=r,Le||(Le=p());var o=Le[0];o?n():(De.debug(\"Excluding rendition.\",r.rendition),v.excludeRendition(r.rendition),Le=null,e())}catch(e){t(e)}else Ne?(De.error(\"There were no stream formats that were supported.\"),Ie._triggerError(new M.NotSupportedError)):(De.error(\"There were no streams available.\"),Ie._triggerError(new G.NoStreamsError))}),a.onError(t)}function n(){function e(e){if(!u&&!i&&(u=!0,De.debug(\"Player releasing control.\",e),t.abort(e),!Ie.isDead()))if(e&&e.retryPlayer){var n=qe.getDelay();n>0?(De.debug(\"Waiting \"+n+\" ms.\"),Be=window.setTimeout(function(){return r()},n)):r()}else r()}var n=Le&&Le[0];if(!n)throw new Error(\"No player to build.\");if(!Ne)throw new Error(\"No rendition.\");var o=Ne.url,a=Ne.rendition,s=new m.Descriptor(o,a.maestroProtocol,a.maestroFormat,a.maestroSegmentFormat),u=!1;De.debug(\"Building player...\");var l=void 0,c=void 0;try{c=n(s,Ne,e)}catch(e){l=e}void 0===c?(De.error(\"Exception occurred whilst building player.\",l),e()):null===c?(De.debug(\"Player not supported for current descriptor.\"),e()):(Ce.set(c,Ne),je=c,De.debug(\"Built player.\"),je.isDead()?(De.debug(\"Player died during construction.\"),e()):(le.addPlayer(je),je.onChange.subscribe(function(t){var r=t.dead;r&&(De.debug(\"Player died.\"),e())})))}var i=!1,a=null;return e(),{result:m.helpers.deferred.buildDeferred().promise,abort:function(e){i=!0,De.info(\"Player job aborted.\",e),Ue=null,a&&a.abort(),Le&&(e&&e.retryPlayer?De.debug(\"Player might be used again for current rendition.\"):(De.debug(\"Player will not be used again for current rendition.\"),Le.shift()),Ie.getPlayer()&&Ie.removePlayer(),je&&(je.kill(),je=null),Ne=null)}}}),t=e.run();return Ue=t}function o(){return H(function(){return new B(function(){var e=v.getUrl();De.debug(\"Retrieving a URL...\");var t=e.whenComplete().then(function(e){return e?De.debug(\"Retrieved URL.\",{rendition:e.rendition,bitrate:e.bitrate}):De.debug(\"No URL provided.\"),e&&te.indexOf(e.rendition)<0?(De.warn(\"Unknown rendition. Skipping...\",e.rendition),{success:!1}):{result:e,success:!0}}).catch(function(e){if(e instanceof T.RequestError){var t=e.getStatusCode();if(null===t||0===t)return null===t?De.warn(\"Timed out when retrieving URL. Will retry.\"):De.warn(\"Network error when retrieving URL. Will retry.\"),{success:!1}}throw e!==m.helpers.abortableJob.abortedError&&De.error(\"Error retrieving URL.\",e),e});return{result:t,abort:function(){return e.abort()}}})},Pe)}function p(){var e=[];return $&&y.indexOf($)>=0&&(De.debug(\"ChromecastPlayer found.\",Q.version),xe?e.push(function(e){var t=new $(e,{name:Ae,castContext:xe,logger:ye});return Ie.providePlayer(t,{syncPosition:!1,syncVolume:!1},!1),t}):De.warn(\"Could not construct chromecast player because context not provided.\")),Z&&y.indexOf(Z)>=0&&(De.debug(\"FlipperPlayer found.\",J.version),e.push(function(e){var t=new Z(e,{name:Ae,logger:ye});return C.takeControlFlipperPlayer(Ie,t,De,Fe||void 0),t})),X&&y.indexOf(X)>=0&&(De.debug(\"HLSMSEPlayer found.\",W.version),e.push(function(e,t,r){var n=new X(e,{name:Ae,playlistLoader:E.stringLoader,segmentLoader:E.arrayBufferLoader,keyLoader:E.arrayBufferLoader,logger:ye});return _(n,function(){return r()}),I.takeControlHLSMSEPlayer(W,Ie,n,Te,r,t.rendition,v,t.url,De),n})),Y&&y.indexOf(Y)>=0&&(De.debug(\"HTML5Player found.\",K.version),e.push(function(e,t,r){var n=t.timeRetrieved;if(Te&&(\"hls\"===e.getProtocol().name||void 0===n))return null;var o;if(Te){if(void 0===n)throw new Error(\"Expecting timeUrlRetrieved to be set.\");o={urlExpires:!0,timeUrlRetrieved:n}}else o={urlExpires:!1};var i=new Y(e,{name:Ae,logger:ye});return _(i,function(){return r()}),k.takeControlHTML5Player(K,Ie,i,o,r,De),i})),e}function h(){Ue?(De.debug(\"Reloading stream URLs...\"),De.debug(\"Aborting player job that is in progress.\"),Ue.abort(),Le=null,r()):De.debug(\"Reload requested, but not reloading as there is nothing to reload.\")}function _(e,t){function r(){var t=e.getMediaElement();t&&t!==re&&(De.debug(\"Revoking audio element that was created internally because player is ready now.\"),e.revokeMediaElement())}function o(){var r=e.getMediaElement();if(r&&r!==re&&(De.debug(\"Revoking audio element that was created internally, even though player is not ready.\"),e.revokeMediaElement()),!e.getMediaElement()){ne&&!ne.isDead()&&(De.info(\"Revoking audio element from a player.\"),ne.isPlaying()&&De.warn(\"The audio element is being revoked from a player which is playing. Only one player should be playing at once.\"),ne.revokeMediaElement()),ne=e,De.info(\"Providing audio element to a different player.\");var o=oe={};e.provideMediaElement(n()).catch(function(r){e.isDead()||oe!==o||(De.error(\"An unexpected error occurred when trying to provide the audio element to a player.\",r),t())})}}e.isReady()?r():e.onReady.subscribe(r),Ie.onPlayIntent.subscribe(function(){e.isDead()||o()}),Ie.isPlaying()&&(e.isDead()||o())}function g(e){var t=Ce.get(e);if(!t)return null;var r=s(e)?\"MaestroHTML5\":a(e)?\"MaestroHLSMSE\":u(e)?\"MaestroFlipper\":l(e)?\"MaestroChromecast\":null;if(!r)throw new Error(\"Unknown player.\");return{name:r,bitrate:t.bitrate,protocol:t.rendition.scProtocol,host:c(t.url),url:d(t.url),format:t.rendition.scFormat}}var y=e.playerClasses,v=e.streamUrlRetriever,L=e.duration,F=void 0===L?null:L,q=e.preloadingEnabled,ee=void 0!==q&&q,ce=e.pausedMaxBufferLength,de=void 0===ce?2e3:ce,fe=e.playingMaxBufferLength,pe=void 0===fe?9e4:fe,he=e.fadeOutDuration,_e=void 0===he?0:he,ge=e.logger,ye=void 0===ge?m.logger.noOpLogger:ge,ve=e.audioPerformanceReporter,me=e.audioReporter,Ee=e.audioCheckpointInterval,be=void 0===Ee?3e4:Ee,we=e.errorReporter,Se=e.urlProviderRetryDelayCalculator,Pe=void 0===Se?z():Se,Re=e.streamUrlsExpire,Te=void 0===Re||Re,xe=e.chromecastContext;if(!(v instanceof b.BaseStreamUrlRetriever))throw new Error(\"StreamUrlRetriever invalid.\");if(null!==F&&(\"number\"!=typeof F||F<0))throw new Error(\"duration invalid.\");if(\"boolean\"!=typeof ee)throw new Error(\"preloadingEnabled invalid.\");if(null!==de&&(\"number\"!=typeof de||de<0))throw new Error(\"pausedMaxBufferLength invalid.\");if(null!==pe&&(\"number\"!=typeof pe||pe<0))throw new Error(\"playingMaxBufferLength invalid.\");if(null!==_e&&(\"number\"!=typeof _e||_e<0))throw new Error(\"fadeOutDuration invalid.\");if(null!==ye&&\"function\"!=typeof ye&&\"object\"!=typeof ye)throw new Error(\"logger invalid.\");if(void 0!==me&&\"function\"!=typeof me)throw new Error(\"audioReporter invalid.\");if(null!==be&&(\"number\"!=typeof be||be<0))throw new Error(\"audioCheckpointInterval invalid.\");if(void 0!==ve&&\"function\"!=typeof ve)throw new Error(\"audioPerformanceReporter invalid.\");if(void 0!==we&&\"function\"!=typeof we)throw new Error(\"errorReporter invalid.\");if(void 0!==Pe&&\"function\"!=typeof Pe)throw new Error(\"retryDelayCalculator invalid.\");var Ae=\"SCAudio-\"+ ++ie,Oe=v.getTrackId();null!==Oe&&(Ae+=\"-\"+Oe);var Me=new N.LogCollector;ye=m.logger.cloneLogger(Me,ye);var De=m.logger.prefixLogger(ye,Ae),ke=f();De.info(\"Building player...\",{ua:navigator.userAgent,logId:ke});var Ie=new R.Player({name:Ae+\"-Proxy\",logger:ye,mediaSessionEnabled:!0,pausedMaxBufferLength:de,playingMaxBufferLength:pe,preloadingEnabled:ee},h);ae.push(Ie),Ie.setVolume(se),Ie.setMuted(ue),_e>0&&Ie.addVolumeAutomator(w.buildFadeOut(_e));var Ce=new V.SCWeakMap,Le=null,je=null,Ne=null,Ue=null,Fe=null,Be=null,qe=new j.DecayingExponentialDelayCalculator;if(ve&&(Fe=new S.AudioPerformanceEventGenerator(Ie,ve,De,t)),me&&new U.AudioEventGenerator(Ie,me,be,De,t),we&&new P.ErrorEventGenerator(Ie,Me,ke,Oe,we,De,g,W||null,Te),Ie.onChange.subscribe(function(e){var t=e.dead,r=e.playing;if(t)De.info(\"Player killed.\"),ae.splice(ae.indexOf(Ie),1),Ue&&Ue.abort(),Be&&window.clearTimeout(Be);else if(r===!0){var o=y.some(function(e){return i(e)});o&&n()}}),null!==F&&(De.debug(\"Setting initial duration.\",F),Ie.setInitialDuration(F)),ee)De.debug(\"Preloading is enabled, so performing retrieve immediately.\"),r();else{De.debug(\"Preloading is disabled, so deferring retrieve until either a play intent or preloading is enabled.\");var He=function(){ze.remove(),Ge.remove(),De.debug(\"Preloading now enabled or received a play request. Peforming retrieve.\"),r()},ze=Ie.onPreloadingEnabled.subscribe(He),Ge=Ie.onPlayIntent.subscribe(He)}return Ie}Object.defineProperty(t,\"__esModule\",{value:!0});var m=r(0),E=r(94),b=r(13),w=r(12),S=r(73),P=r(78),R=r(14),T=r(16),x=r(26),A=r(6),O=r(29),M=r(11),D=r(28),k=r(76),I=r(25),C=r(75),L=r(15),j=r(77),N=r(80),U=r(72),F=r(74),B=m.helpers.abortableJob.AbortableJob,q=m.helpers.retry,H=q.retry,z=q.buildExponentialDelayCalculator,G=r(27),V=r(79),K=void 0;\ntry{K=r(93)}catch(e){}var W=void 0;try{W=r(92)}catch(e){}var J=void 0;try{J=r(91)}catch(e){}var Q=void 0;try{Q=r(90)}catch(e){}var Y=K?K.HTML5Player:null,X=W?W.HLSMSEPlayer:null,Z=J?J.FlipperPlayer:null,$=Q?Q.ChromecastPlayer:null,ee=/^[^?#]*/,te=Object.keys(L.renditions).map(function(e){return L.renditions[e]}),re=null,ne=null,oe={},ie=-1,ae=[],se=1,ue=!1,le=new F.CacheManager(15e7,m.logger.noOpLogger);t.setGlobalVolume=p,t.getGlobalVolume=h,t.setGlobalMuted=_,t.getGlobalMuted=g,t.activateAudioElement=y,t.buildPlayer=v},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(12);!function(e){e.Fade=o.Fade,e.buildFadeIn=o.buildFadeIn,e.buildFadeOut=o.buildFadeOut}(n=t.volumeAutomation||(t.volumeAutomation={}))},function(e,t,r){\"use strict\";var n,o=r(47),i=r(19),a=r(2),s=r(54),u=r(2),l=r(1),c=Function.prototype.bind,d=Object.defineProperty,f=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=l(t)&&u(t.value);return n=o(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&f.call(this,e)?i:(t.value=c.call(i,r.resolveContext?r.resolveContext(this):this),d(this,e,t),this[e])},n},e.exports=function(e){var t=i(arguments[1]);return null!=t.resolveContext&&a(t.resolveContext),s(e,function(e,r){return n(r,e,t)})}},function(e,t,r){\"use strict\";var n=r(1);e.exports=function(){return n(this).length=0,this}},function(e,t,r){\"use strict\";e.exports=r(36)()?Array.from:r(37)},function(e,t,r){\"use strict\";e.exports=function(){var e,t,r=Array.from;return\"function\"==typeof r&&(e=[\"raz\",\"dwa\"],t=r(e),Boolean(t&&t!==e&&\"dwa\"===t[1]))}},function(e,t,r){\"use strict\";var n=r(3).iterator,o=r(7),i=r(38),a=r(43),s=r(2),u=r(1),l=r(4),c=r(8),d=Array.isArray,f=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;e.exports=function(e){var t,r,_,g,y,v,m,E,b,w,S=arguments[1],P=arguments[2];if(e=Object(u(e)),l(S)&&s(S),this&&this!==Array&&i(this))t=this;else{if(!S){if(o(e))return y=e.length,1!==y?Array.apply(null,e):(g=new Array(1),g[0]=e[0],g);if(d(e)){for(g=new Array(y=e.length),r=0;r<y;++r)g[r]=e[r];return g}}g=[]}if(!d(e))if(void 0!==(b=e[n])){for(m=s(b).call(e),t&&(g=new t),E=m.next(),r=0;!E.done;)w=S?f.call(S,P,E.value,r):E.value,t?(p.value=w,h(g,r,p)):g[r]=w,E=m.next(),++r;y=r}else if(c(e)){for(y=e.length,t&&(g=new t),r=0,_=0;r<y;++r)w=e[r],r+1<y&&(v=w.charCodeAt(0),v>=55296&&v<=56319&&(w+=e[++r])),w=S?f.call(S,P,w,_):w,t?(p.value=w,h(g,_,p)):g[_]=w,++_;y=_}if(void 0===y)for(y=a(e.length),t&&(g=new t(y)),r=0;r<y;++r)w=S?f.call(S,P,e[r],r):e[r],t?(p.value=w,h(g,r,p)):g[r]=w;return t&&(p.value=null,g.length=y),g}},function(e,t,r){\"use strict\";var n=Object.prototype.toString,o=n.call(r(17));e.exports=function(e){return\"function\"==typeof e&&n.call(e)===o}},function(e,t,r){\"use strict\";e.exports=r(40)()?Math.sign:r(41)},function(e,t,r){\"use strict\";e.exports=function(){var e=Math.sign;return\"function\"==typeof e&&1===e(10)&&e(-20)===-1}},function(e,t,r){\"use strict\";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,r){\"use strict\";var n=r(39),o=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?n(e)*i(o(e)):e)}},function(e,t,r){\"use strict\";var n=r(42),o=Math.max;e.exports=function(e){return o(0,n(e))}},function(e,t,r){\"use strict\";var n=r(2),o=r(1),i=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,l){var c,d=arguments[2],f=arguments[3];return r=Object(o(r)),n(l),c=s(r),f&&c.sort(\"function\"==typeof f?i.call(f,r):void 0),\"function\"!=typeof e&&(e=c[e]),a.call(e,c,function(e,n){return u.call(r,e)?a.call(l,d,r[e],e,r,n):t})}}},function(e,t,r){\"use strict\";e.exports=function(){var e,t=Object.assign;return\"function\"==typeof t&&(e={foo:\"raz\"},t(e,{bar:\"dwa\"},{trzy:\"trzy\"}),e.foo+e.bar+e.trzy===\"razdwatrzy\")}},function(e,t,r){\"use strict\";var n=r(51),o=r(1),i=Math.max;e.exports=function(e,t){var r,a,s,u=i(arguments.length,2);for(e=Object(o(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},a=1;a<u;++a)t=arguments[a],n(t).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){\"use strict\";var n=r(35),o=r(9),i=r(1);e.exports=function(e){var t=Object(i(e)),r=arguments[1],a=Object(arguments[2]);if(t!==e&&!r)return t;var s={};return r?n(r,function(t){(a.ensure||t in e)&&(s[t]=e[t])}):o(s,e),s}},function(e,t,r){\"use strict\";var n,o=Object.create;r(20)()||(n=r(21)),e.exports=function(){var e,t,r;return n?1!==n.level?o:(e={},t={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return\"__proto__\"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=r)}),Object.defineProperties(e,t),Object.defineProperty(n,\"nullPolyfill\",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,r){return o(null===t?e:t,r)}):o}()},function(e,t,r){\"use strict\";e.exports=r(44)(\"forEach\")},function(e,t,r){\"use strict\";e.exports=function(e){return\"function\"==typeof e}},function(e,t,r){\"use strict\";e.exports=r(52)()?Object.keys:r(53)},function(e,t,r){\"use strict\";e.exports=function(){try{return Object.keys(\"primitive\"),!0}catch(e){return!1}}},function(e,t,r){\"use strict\";var n=r(4),o=Object.keys;e.exports=function(e){return o(n(e)?Object(e):e)}},function(e,t,r){\"use strict\";var n=r(2),o=r(49),i=Function.prototype.call;e.exports=function(e,t){var r={},a=arguments[2];return n(t),o(e,function(e,n,o,s){r[n]=i.call(t,a,e,n,o,s)}),r}},function(e,t,r){\"use strict\";var n=r(18);e.exports=function(e){if(!n(e))throw new TypeError(e+\" is not an Object\");return e}},function(e,t,r){\"use strict\";var n=\"razdwatrzy\";e.exports=function(){return\"function\"==typeof n.contains&&n.contains(\"dwa\")===!0&&n.contains(\"foo\")===!1}},function(e,t,r){\"use strict\";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){\"use strict\";var n=Object.create(null),o=Math.random;e.exports=function(){var e;do e=o().toString(36).slice(2);while(n[e]);return e}},function(e,t,r){\"use strict\";var n,o=r(10),i=r(22),a=r(5),s=r(3),u=r(24),l=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");u.call(this,e),t=t?i.call(t,\"key+value\")?\"key+value\":i.call(t,\"key\")?\"key\":\"value\":\"value\",l(this,\"__kind__\",a(\"\",t))},o&&o(n,u),delete n.prototype.constructor,n.prototype=Object.create(u.prototype,{_resolve:a(function(e){return\"value\"===this.__kind__?this.__list__[e]:\"key+value\"===this.__kind__?[e,this.__list__[e]]:e})}),l(n.prototype,s.toStringTag,a(\"c\",\"Array Iterator\"))},function(e,t,r){\"use strict\";var n=r(7),o=r(2),i=r(8),a=r(23),s=Array.isArray,u=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var r,c,d,f,p,h,_,g,y=arguments[2];if(s(e)||n(e)?r=\"array\":i(e)?r=\"string\":e=a(e),o(t),d=function(){f=!0},\"array\"===r)return void l.call(e,function(e){return u.call(t,y,e,d),f});if(\"string\"!==r)for(c=e.next();!c.done;){if(u.call(t,y,c.value,d),f)return;c=e.next()}else for(h=e.length,p=0;p<h&&(_=e[p],p+1<h&&(g=_.charCodeAt(0),g>=55296&&g<=56319&&(_+=e[++p])),u.call(t,y,_,d),!f);++p);}},function(e,t,r){\"use strict\";var n=r(7),o=r(4),i=r(8),a=r(3).iterator,s=Array.isArray;e.exports=function(e){return!(!o(e)||!s(e)&&!i(e)&&!n(e)&&\"function\"!=typeof e[a])}},function(e,t,r){\"use strict\";var n,o=r(10),i=r(5),a=r(3),s=r(24),u=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");e=String(e),s.call(this,e),u(this,\"__length__\",i(\"\",e.length))},o&&o(n,s),delete n.prototype.constructor,n.prototype=Object.create(s.prototype,{_next:i(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:i(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0),t>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),u(n.prototype,a.toStringTag,i(\"c\",\"String Iterator\"))},function(e,t,r){\"use strict\";var n=r(61);e.exports=function(e){if(!n(e))throw new TypeError(e+\" is not iterable\");return e}},function(e,t,r){\"use strict\";var n={object:!0,symbol:!0};e.exports=function(){var e;if(\"function\"!=typeof Symbol)return!1;e=Symbol(\"test symbol\");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}},function(e,t,r){\"use strict\";e.exports=function(e){return!!e&&(\"symbol\"==typeof e||!!e.constructor&&\"Symbol\"===e.constructor.name&&\"Symbol\"===e[e.constructor.toStringTag])}},function(e,t,r){\"use strict\";var n,o,i,a,s=r(5),u=r(67),l=Object.create,c=Object.defineProperties,d=Object.defineProperty,f=Object.prototype,p=l(null);if(\"function\"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var r,n,o=0;e[t+(o||\"\")];)++o;return t+=o||\"\",e[t]=!0,r=\"@@\"+t,d(f,r,s.gs(null,function(e){n||(n=!0,d(this,r,s(e)),n=!1)})),r}}();i=function(e){if(this instanceof i)throw new TypeError(\"Symbol is not a constructor\");return o(e)},e.exports=o=function e(t){var r;if(this instanceof e)throw new TypeError(\"Symbol is not a constructor\");return a?n(t):(r=l(i.prototype),t=void 0===t?\"\":String(t),c(r,{__description__:s(\"\",t),__name__:s(\"\",h(t))}))},c(o,{for:s(function(e){return p[e]?p[e]:p[e]=o(String(e))}),keyFor:s(function(e){var t;u(e);for(t in p)if(p[t]===e)return t}),hasInstance:s(\"\",n&&n.hasInstance||o(\"hasInstance\")),isConcatSpreadable:s(\"\",n&&n.isConcatSpreadable||o(\"isConcatSpreadable\")),iterator:s(\"\",n&&n.iterator||o(\"iterator\")),match:s(\"\",n&&n.match||o(\"match\")),replace:s(\"\",n&&n.replace||o(\"replace\")),search:s(\"\",n&&n.search||o(\"search\")),species:s(\"\",n&&n.species||o(\"species\")),split:s(\"\",n&&n.split||o(\"split\")),toPrimitive:s(\"\",n&&n.toPrimitive||o(\"toPrimitive\")),toStringTag:s(\"\",n&&n.toStringTag||o(\"toStringTag\")),unscopables:s(\"\",n&&n.unscopables||o(\"unscopables\"))}),c(i.prototype,{constructor:s(o),toString:s(\"\",function(){return this.__name__})}),c(o.prototype,{toString:s(function(){return\"Symbol (\"+u(this).__description__+\")\"}),valueOf:s(function(){return u(this)})}),d(o.prototype,o.toPrimitive,s(\"\",function(){var e=u(this);return\"symbol\"==typeof e?e:e.toString()})),d(o.prototype,o.toStringTag,s(\"c\",\"Symbol\")),d(i.prototype,o.toStringTag,s(\"c\",o.prototype[o.toStringTag])),d(i.prototype,o.toPrimitive,s(\"c\",o.prototype[o.toPrimitive]))},function(e,t,r){\"use strict\";var n=r(65);e.exports=function(e){if(!n(e))throw new TypeError(e+\" is not a symbol\");return e}},function(e,t,r){\"use strict\";e.exports=r(69)()?WeakMap:r(71)},function(e,t,r){\"use strict\";e.exports=function(){var e,t;if(\"function\"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},\"one\"],[{},\"two\"],[{},\"three\"]])}catch(e){return!1}return\"[object WeakMap]\"===String(e)&&\"function\"==typeof e.set&&e.set({},1)===e&&\"function\"==typeof e.delete&&\"function\"==typeof e.has&&\"one\"===e.get(t)}},function(e,t,r){\"use strict\";e.exports=function(){return\"function\"==typeof WeakMap&&\"[object WeakMap]\"===Object.prototype.toString.call(new WeakMap)}()},function(e,t,r){\"use strict\";var n,o=r(10),i=r(55),a=r(1),s=r(58),u=r(5),l=r(23),c=r(60),d=r(3).toStringTag,f=r(70),p=Array.isArray,h=Object.defineProperty,_=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=n=function(){var e,t=arguments[0];if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");return e=f&&o&&WeakMap!==n?o(new WeakMap,g(this)):this,null!=t&&(p(t)||(t=l(t))),h(e,\"__weakMapData__\",u(\"c\",\"$weakMap$\"+s())),t?(c(t,function(t){a(t),e.set(t[0],t[1])}),e):e},f&&(o&&o(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:u(n)})),Object.defineProperties(n.prototype,{delete:u(function(e){return!!_.call(i(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:u(function(e){if(_.call(i(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:u(function(e){return _.call(i(e),this.__weakMapData__)}),set:u(function(e,t){return h(i(e),this.__weakMapData__,u(\"c\",t)),this}),toString:u(function(){return\"[object WeakMap]\"})}),h(n.prototype,d,u(\"c\",\"WeakMap\"))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=1e3,i=function(){function e(e,t,r,i,a){this._checkpointTimer=null,this._logger=n.logger.prefixLogger(i,\"AudioEventGenerator\"),this._player=e,this._eventReporter=t,this._checkpointInterval=null!==r?Math.max(o,r):null,this._getPlayerDetails=a,this._startReporting()}return e.prototype._startReporting=function(){var e=this,t=this._player;t.onChange.subscribe(function(r){var n=r.actuallyPlaying,o=r.ended;n===!0&&!t.isEnded()||o===!1&&t.isActuallyPlaying()?(null===e._checkpointInterval||e._checkpointTimer||(e._checkpointTimer=window.setInterval(function(){e._reportEvent(\"checkpoint\")},e._checkpointInterval)),e._reportEvent(\"play\")):(n===!1&&!t.isEnded()||o===!0&&t.isActuallyPlaying())&&(e._checkpointTimer&&(window.clearInterval(e._checkpointTimer),e._checkpointTimer=null),e._reportEvent(\"pause\"))})},e.prototype._reportEvent=function(e){var t=this._getPlayerDetails();if(!t)return void this._logger.warn(\"Cannot report event because there is no player.\",e);var r=this._player.getDuration();if(null===r)throw new Error(\"Duration should exist now.\");var n={type:e,position:this._player.getPosition(),duration:r,playerType:t.name};this._logger.debug(\"Generated audio event.\",n),this._eventReporter(n)},e}();t.AudioEventGenerator=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(89),i=3e4,a=function(){function e(e,t,r,o){this._logger=n.logger.prefixLogger(r,\"AudioPerformanceEventGenerator\"),this._player=e,this._eventReporter=t,this._getPlayerDetails=o,this._measureGeneralEvents()}return e.prototype.reportManualEvent=function(e){this._logger.debug(\"Reporting manual audio performance event.\",e),this._eventReporter(e)},e.prototype._measureGeneralEvents=function(){var e=this,t=this._player,r=null,n=null,a=null,s=null,u=!0;t.onChange.subscribe(function(l){var c=l.playing,d=l.actuallyPlaying,f=l.seeking,p=l.stalled,h=l.ended;if(t.isDead())return void(s&&window.clearTimeout(s));c===!0&&(r||(r=new o.Timer,r.start(),s=window.setTimeout(function(){e._reportEvent(\"longInitialBuffering\",0)},i),0===t.getPosition()&&(u=!1))),c===!1&&(s&&window.clearTimeout(s),r&&!r.isComplete()&&(r=null)),d===!0&&r&&!r.isComplete()&&(r.stop(),s&&window.clearTimeout(s),e._reportEvent(\"play\",r.getTime())),f===!0&&t.isReady()&&(n=new o.Timer,n.start()),f===!1&&n&&(n.stop(),e._reportEvent(\"seek\",n.getTime())),p===!0&&t.isPlaying()&&r&&r.isComplete()&&(a=new o.Timer,a.start(),e._reportEvent(\"rebufferingStart\",0)),p===!1&&a&&(a.stop(),e._reportEvent(\"rebufferingEnd\",a.getTime()),a=null),h!==!0||u||(e._reportEvent(\"uninterruptedPlay\",0),u=!0);var _=t.getSeekState(),g=_&&\"IN_PROGRESS\"===_.state;!g&&p===!0&&t.isActuallyPlaying()&&(u=!0)})},e.prototype._reportEvent=function(e,t){var r=this._getPlayerDetails();if(!r)return void this._logger.warn(\"Cannot report event because there is no player.\",e,t);var n={type:e,latency:t,protocol:r.protocol,playerType:r.name,host:r.host,bitrate:r.bitrate,format:r.format||void 0};this._logger.debug(\"Generated audio performance event.\",n),this._eventReporter(n)},e}();t.AudioPerformanceEventGenerator=a},function(e,t,r){\"use strict\";function n(e,t){var r=e.getMemoryCacheController();r&&r.setMaxCacheSize(t)}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=2e4,a=function(){function e(e,t){this._maxCacheSize=e,this._players=[],this._updateTimer=null,this._logger=o.logger.prefixLogger(t,\"CacheManager\"),this._logger.debug(\"Initialized with cache size \"+e+\" bytes.\")}return e.prototype.addPlayer=function(e){var t=this;if(this._logger.debug(\"Adding player to cache manager.\"),e.isDead())return void this._logger.debug(\"Player was dead.\");var r=this._players;e.onChange.subscribe(function(n){var o=n.playing,i=n.dead;i===!0?(t._logger.debug(\"Removing player that became dead.\"),r.splice(r.indexOf(e),1),t._update()):o===!0?(t._logger.debug(\"Updating because player started playing.\"),r.splice(r.indexOf(e),1),r.unshift(e),t._update()):o===!1&&(t._logger.debug(\"Updating because player became paused.\"),t._update())}),e.isPlaying()?r.unshift(e):r.push(e),this._update()},e.prototype._update=function(){var e=this;if(this._updateTimer&&(window.clearTimeout(this._updateTimer),this._updateTimer=null),0===this._players.length)return void this._logger.debug(\"There are no longer any players to manage.\");var t=this._players.reduce(function(e,t){return t.isPlaying()?e.playingPlayers.push(t):e.pausedPlayers.push(t),e},{playingPlayers:[],pausedPlayers:[]}),r=t.playingPlayers,o=t.pausedPlayers,a=r.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0),s=o.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0);if(a>this._maxCacheSize){this._logger.debug(\"All playing players are using more than the max cache size. Cleaning...\",a,this._maxCacheSize);var u=this._maxCacheSize/r.length;r.forEach(function(e){return n(e,u)}),o.forEach(function(e){return n(e,0)})}else this._logger.debug(\"Recalculating cache sizes...\",a+s,this._maxCacheSize),r.concat(o).reduce(function(t,r){return n(r,Math.max(0,e._maxCacheSize-t)),t+(r.getMemoryCacheUsage()||0)},0);this._updateTimer=window.setTimeout(function(){return e._update()},i)},e}();t.CacheManager=a},function(e,t,r){\"use strict\";function n(e,t,r,n){r=o.logger.prefixLogger(r,\"FlipperPlayer Controller\"),n&&t.onAudioPerformanceEvent.subscribe(function(e){var t=e.protocol,o=e.type,i=e.latency,a=e.player_type,s=e.host,u=e.bitrate,l=e.format,c=\"Flipper\";if(a!==c)return void r.warn(\"Ignoring audio performance event from flipper because the player_type was incorrect.\",a);var d={protocol:t,type:o,latency:i,playerType:c,host:s,bitrate:u,format:l};n.reportManualEvent(d)}),e.providePlayer(t)}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0);t.takeControlFlipperPlayer=n},function(e,t,r){\"use strict\";function n(e,t,r,n,a,s){function u(){var e=r.getDuration(),t=l();if(null!==e&&null!==t){var n=e-r.getPosition();i()+n>t&&(s.info(\"Releasing control because stream URL would expire before reaching end.\"),a({retryPlayer:!0}))}}function l(){if(!n.urlExpires)return null;var e=r.getDuration();return null===e?null:n.timeUrlRetrieved+e+105e3}function c(){var e=l();return null!==e&&e<=i()}s=o.logger.prefixLogger(s,\"HTML5Player Controller\"),r.onError.subscribe(function(t){t instanceof o.errors.NotSupportedError||(t instanceof e.errors.NetworkError&&c()?(s.info(\"Releasing control as a network error occurred, and the URL has expired.\"),a({retryPlayer:!0})):(s.error(\"Unexpected player error.\",t),a({retryPlayer:!1})))}),n.urlExpires&&(r.onPlayIntent.subscribe(function(){return u()}),r.onSeekIntent.subscribe(function(){return u()})),t.providePlayer(r)}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=o.helpers.time.now;t.takeControlHTML5Player=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){this._delayFactor=0,this._lastRequestTime=0}return e.prototype.getDelay=function(){var e=Date.now()-this._lastRequestTime;return this._lastRequestTime=Date.now(),this._delayFactor=Math.max(0,this._delayFactor-e/15e3),this._delayFactor+=1,Math.pow(2,this._delayFactor)},e}();t.DecayingExponentialDelayCalculator=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(25),i=1e3,a=function(){function e(e,t,r,o,i,a,s,u,l){this._logger=n.logger.prefixLogger(a,\"ErrorGenerator\"),this._player=e,this._logCollector=t,this._logId=r,this._trackId=o,this._eventReporter=i,this._getPlayerDetails=s,this._MaestroHLSMSEPlayer=u,this._streamUrlsExpire=l,this._listenForErrors()}return e.prototype._listenForErrors=function(){var e=this;this._player.onError.subscribe(function(t){t instanceof n.errors.PlayerFatalError&&e._reportEvent(t.getCode(),null)});var t=this._player.getDuration();this._player.onDurationChange.subscribe(function(r){null!==t&&Math.abs(r-t)>i&&(e._logger.warn(\"Duration changed more than \"+i+\"ms.\",t,r),e._reportEvent(\"DURATION_MISMATCH\",e._player)),t=r}),this._player.onPlayerProvided.subscribe(function(t){t.onError.subscribe(function(r){if(!(e._streamUrlsExpire&&e._MaestroHLSMSEPlayer&&o.isErrorWhichShouldTriggerURLRefresh(e._MaestroHLSMSEPlayer,r))){var i=r.getCode();r instanceof n.errors.NotSupportedError||e._reportEvent(i,t)}})})},e.prototype._reportEvent=function(e,t){var r=t?this._getPlayerDetails(t)||void 0:void 0,n={errorCode:e,log:this._logCollector.getLog(),logId:this._logId,trackId:this._trackId,protocol:r&&r.protocol,playerType:r?r.name:\"MaestroUnknown\",host:r&&r.host,bitrate:r&&r.bitrate,format:r&&(r.format||void 0),url:r&&r.url};this._logger.debug(\"Generated audio error event.\",n),this._eventReporter(n)},e}();t.ErrorEventGenerator=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(68),o=function(){function e(){this._map=new n}return e.prototype.get=function(e){return this._map.get(e)},e.prototype.set=function(e,t){this._map.set(e,t)},e.prototype.has=function(e){return this._map.has(e)},e.prototype.delete=function(e){return this._map.delete(e)},e}();t.SCWeakMap=o},function(e,t,r){\"use strict\";function n(e){return e.map(function(e){try{return JSON.stringify(e)}catch(e){return\"<unavailable>\"}})}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e){void 0===e&&(e=200),this._bufferSize=e,this._log=[]}return e.prototype.getLog=function(){return this._log},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:\"debug\",msg:e,data:n(t),time:Date.now()})},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:\"info\",msg:e,data:n(t),time:Date.now()})},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:\"warn\",msg:e,data:n(t),time:Date.now()})},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:\"error\",msg:e,data:n(t),time:Date.now()})},e.prototype._push=function(e){this._log.push(e)>this._bufferSize&&this._log.shift()},e}();t.LogCollector=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.apiMobile={scProtocol:\"sc.api-mobile\",maestroProtocol:{name:\"sc.api-mobile\"},maestroFormat:{}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.encryptedHlsMp3={scProtocol:\"encrypted-hls\",scFormat:\"mp3\",maestroProtocol:{name:\"hls\"},maestroFormat:{mimeType:\"application/x-mpegURL\"},maestroSegmentFormat:{mimeType:\"audio/mpeg\"}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.encryptedHlsOpus={scProtocol:\"encrypted-hls\",scFormat:\"opus\",maestroProtocol:{name:\"hls\"},maestroFormat:{mimeType:\"application/x-mpegURL\"},maestroSegmentFormat:{mimeType:\"audio/ogg\",audioCodec:{id:\"opus\"}}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.hlsMp3={scProtocol:\"hls\",scFormat:\"mp3\",maestroProtocol:{name:\"hls\"},maestroFormat:{mimeType:\"application/x-mpegURL\"},maestroSegmentFormat:{mimeType:\"audio/mpeg\"}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.hlsOpus={scProtocol:\"hls\",scFormat:\"opus\",maestroProtocol:{name:\"hls\"},maestroFormat:{mimeType:\"application/x-mpegURL\"},maestroSegmentFormat:{mimeType:\"audio/ogg\",audioCodec:{id:\"opus\"}}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.httpMp3={scProtocol:\"http\",scFormat:\"mp3\",maestroProtocol:{name:\"http\"},maestroFormat:{mimeType:\"audio/mpeg\"}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.maestroChromecast={scProtocol:\"maestro.chromecast\",maestroProtocol:{name:\"maestro.chromecast\"},maestroFormat:{}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(86),o=r(84),i=r(82),a=r(81),s=r(87),u=r(85),l=r(83);t.renditions={httpMp3:n.httpMp3,hlsMp3:o.hlsMp3,encryptedHlsMp3:i.encryptedHlsMp3,hlsOpus:u.hlsOpus,encryptedHlsOpus:l.encryptedHlsOpus,apiMobile:a.apiMobile,maestroChromecast:s.maestroChromecast}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=n.helpers.time.now,i=function(){function e(){this._start=null,this._end=null}return e.prototype.start=function(){if(this.isComplete())throw new Error(\"Timer completed.\");this._start=o()},e.prototype.isComplete=function(){return null!==this._end},e.prototype.stop=function(){if(null===this._start)throw new Error(\"Not started.\");this._end=o()},e.prototype.getTime=function(){if(null===this._end)throw new Error(\"Not completed.\");return this._end-this._start},e}();t.Timer=i},function(e,r){if(\"undefined\"==typeof t){var n=new Error('Cannot find module \"@sc/maestro-chromecast-player\"');throw n.code=\"MODULE_NOT_FOUND\",n}e.exports=t},function(e,t){if(\"undefined\"==typeof r){var n=new Error('Cannot find module \"@sc/maestro-flipper-player\"');throw n.code=\"MODULE_NOT_FOUND\",n}e.exports=r},function(e,t){if(\"undefined\"==typeof n){var r=new Error('Cannot find module \"@sc/maestro-hls-mse-player\"');throw r.code=\"MODULE_NOT_FOUND\",r}e.exports=n},function(e,t){if(\"undefined\"==typeof o){var r=new Error('Cannot find module \"@sc/maestro-html5-player\"');throw r.code=\"MODULE_NOT_FOUND\",r}e.exports=o},function(e,t){e.exports=i},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"12.0.0\",t.buildNumber=404;var o=r(32);t.volumeAutomation=o.volumeAutomation;var i=r(13);t.BaseStreamUrlRetriever=i.BaseStreamUrlRetriever;var a=r(16);t.RequestError=a.RequestError;var s=r(14);t.Player=s.Player;var u=r(15);t.renditions=u.renditions,n(r(30)),n(r(31))}])})},function(e,t,r){!function(t,r){e.exports=r()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=39)}([function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"PLAYER_FATAL_ERROR\"},t}(o.PlayerError);t.PlayerFatalError=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(8),o=function(){function e(){this._listeners=[],this.dispatch=this.dispatch.bind(this)}return e.prototype.subscribe=function(e){var t=this,r={fn:e,payloads:[]};return this._listeners.push(r),{remove:function(){var e=t._listeners.indexOf(r);return e>=0&&(t._listeners.splice(e,1),!0)},retrieve:function(){return t._dispatchListenerPayloads(r)}}},e.prototype.dispatch=function(e,t){var r=this,o=\"number\"==typeof t?{time:t}:t||{},i=void 0!==o.time?o.time:n.now(),a=this._listeners;a.forEach(function(t){return t.payloads.push({time:i,payload:e})});var s=!1;do s=!a.some(function(e){var t=e.fn,n=e.payloads,o=n.shift();return!!o&&(r._callHandler(t,o),!0)});while(!s)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype._dispatchListenerPayloads=function(e){for(var t=e.fn,r=e.payloads;;){var n=r.shift();if(!n)break;this._callHandler(t,n)}},e.prototype._callHandler=function(e,t){try{e(t.payload,t.time)}catch(e){window.setTimeout(function(){throw e},0)}},e}();t.EventDispatcher=o},function(e,t,r){\"use strict\";function n(){var e,t,r=!1,n=new o.Promise(function(r,n){e=r,t=n});return{promise:n,resolve:function(t){r||(r=!0,e(t))},reject:function(e){r||(r=!0,t(e))},isSettled:function(){return r}}}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(12);t.buildDeferred=n},function(e,t,r){\"use strict\";function n(e,t){return{debug:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.debug.apply(e,[\"[\"+t+\"] \"+r].concat(n))},error:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.error.apply(e,[\"[\"+t+\"] \"+r].concat(n))},info:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.info.apply(e,[\"[\"+t+\"] \"+r].concat(n))},warn:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.warn.apply(e,[\"[\"+t+\"] \"+r].concat(n))}}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{debug:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.debug.apply(e,[t].concat(r))})},error:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.error.apply(e,[t].concat(r))})},info:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.info.apply(e,[t].concat(r))})},warn:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.warn.apply(e,[t].concat(r))})}}}Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(19),a=i.isIE();t.noOpLogger={debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]}},t.consoleLogger={debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];a?console.log(e,t):(n=console.debug||console.log).call.apply(n,[console,e].concat(t));var n},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];a?console.log(e,t):(n=console.error||console.log).call.apply(n,[console,e].concat(t));var n},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];a?console.log(e,t):(n=console.info||console.log).call.apply(n,[console,e].concat(t));var n},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];a?console.log(e,t):(n=console.warn||console.log).call.apply(n,[console,e].concat(t));var n}},t.prefixLogger=n,t.cloneLogger=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getCode=function(){return\"PLAYER_ERROR\"},e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.PlayerError=n},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(16),i=function(e){function t(t,r,n){return void 0===n&&(n=\"The player that the proxy was controlling had a fatal error.\"),e.call(this,t,r,n)||this}return n(t,e),t.prototype.getCode=function(){return\"PROXY_PLAYER_PROVIDED_PLAYER_FATAL_ERROR\"},t}(o.ProxyProvidedPlayerError);t.ProxyProvidedPlayerFatalError=i},function(e,t,r){\"use strict\";function n(e){try{e()}catch(e){window.setTimeout(function(){throw e},0)}}Object.defineProperty(t,\"__esModule\",{\nvalue:!0}),t.deferException=n},function(e,t,r){\"use strict\";function n(e,t){var r=void 0;return e.some(function(e){return!!t(e)&&(r=e,!0)}),r}Object.defineProperty(t,\"__esModule\",{value:!0}),t.find=n},function(e,t,r){\"use strict\";function n(){return\"performance\"in window&&window.performance.now?window.performance.now():Date.now()-o}Object.defineProperty(t,\"__esModule\",{value:!0});var o=Date.now();t.now=n},function(e,t,r){\"use strict\";function n(){return{actuallyPlaying:!1,ended:!1,loading:!1,playing:!1,playDeferred:null,pauseDeferred:null,ready:!1,seeking:!1,seek:null,positionJumped:null,stalled:!0,duration:null,dead:!1,state:c.State.PAUSED,fatalError:null,errorOccurred:null,position:0}}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=r(15),a=r(1),s=r(2),u=r(7),l=r(8),c=r(11),d=r(3),f=r(35),p=r(13),h=r(14),_=\"undefined\"!=typeof navigator&&\"mediaSession\"in navigator,g=5e3,y=_?navigator.mediaSession:null,v=function(){function e(e){var t=this;this._stateManager=new f.StateManager(n(),{afterUpdate:function(e,r){return t._afterUpdate(e,r)},afterDispatches:function(){return t._afterDispatches()},beforeUpdate:function(e){if(!e.dead){var r=t._getPosition(),n=e.duration;if(r<0)throw t._logger.error(\"Player provided invalid position.\",r,n),t._triggerError(new h.ImplementationError(\"Player provided a position that was invalid.\")),new Error(\"Player provided invalid position.\");if(null!==n&&r>n)throw t._logger.error(\"Player provided invalid position.\",r,n),t._triggerError(new h.ImplementationError(\"Player provided a position that was invalid.\")),new Error(\"Player provided invalid position.\");e.position=r,t._updateEndedInState(e)}}}),this._onError=new a.EventDispatcher,this._errors=[],this._loadingDelayTimer=null,this._stalled=!1,this._queuedDuration=null,this._readyDeferred=s.buildDeferred(),this._queuedSeekDeferreds=[],this._lastPlayError=null,this._lastPauseError=null,this._lastPlayedPosition=null,this._listenTimeBase=0,this._timePlaybackStarted=null,this._positionAfterLastUpdate=0;var r=e.name;return this._logger=d.prefixLogger(e.logger,\"BasePlayer\"+(r?\"-\"+r:\"\")),this._mediaSessionEnabled=!!e.mediaSessionEnabled,e.loadingDelay&&e.loadingDelay<0?void this._triggerError(new p.DependencyError(\"loadingDelay must be >= 0.\")):(this._loadingDelay=void 0!==e.loadingDelay?e.loadingDelay:400,this.onError=this._onError.getHandle(),this.whenReady=this._readyDeferred.promise,this._stateManager.subscribe(function(e,r){return t._onChange(e,r)}),this._stateManager.subscribe(function(e,r){var n=e.playing,o=e.actuallyPlaying,i=r.dead;if(!i&&void 0!==n&&o!==n)try{t._handlePlayPauseChange(n)}catch(e){t._triggerError(new h.ImplementationError(\"Exception occurred whilst handling play/pause change.\",e))}}),this._stateManager.subscribe(function(e,r){var n=e.seek,o=r.dead;if(!o&&n&&\"IN_PROGRESS\"===n.state)try{t._handleSeekChange(n.position)}catch(e){t._triggerError(new h.ImplementationError(\"Exception occurred whilst handling seek change.\",e))}}),this._registerMediaSessionActionHandlers(),this._notifyMediaSessionPaused(),this.onChange=this._buildEventHandle(function(e,r){var n=r.ready;if(void 0!==n&&n!==!0)throw new Error(\"Ready state is invalid.\");var o=r.duration;if(void 0!==o&&null===o)throw new Error(\"Duration state is invalid.\");var i=r.dead;if(void 0!==i&&i!==!0)throw new Error(\"Dead state is invalid.\");var a={ready:n,ended:r.ended,duration:o,playing:r.playing,actuallyPlaying:r.actuallyPlaying,stalled:r.stalled,loading:r.loading,playRejection:r.playing===!1?t._lastPlayError||void 0:void 0,pauseRejection:r.playing===!0?t._lastPauseError||void 0:void 0,seeking:r.seeking,seek:r.seek||void 0,positionJumped:void 0!==r.positionJumped||void 0,state:r.state,fatalError:r.fatalError||void 0,dead:i};Object.keys(a).some(function(e){return void 0!==a[e]})&&e(a)}),this.onDurationChange=this._buildEventHandle(function(e,t){var r=t.duration;void 0!==r&&null!==r&&e(r)}),this.onReady=this._buildEventHandle(function(e,t){var r=t.ready;r===!0&&e(void 0)}),this.onStateChange=this._buildEventHandle(function(e,t){var r=t.state;void 0!==r&&e(r)}),this.onPlay=this._buildEventHandle(function(e,t){var r=t.actuallyPlaying;r===!0&&e(void 0)}),this.onPlayIntent=this._buildEventHandle(function(e,t){var r=t.playing;r===!0&&e(void 0)}),this.onPlayRejection=this._buildEventHandle(function(e,r){var n=r.playing;n===!1&&t._lastPlayError&&e(t._lastPlayError)}),this.onPause=this._buildEventHandle(function(e,t){var r=t.actuallyPlaying;r===!1&&e(void 0)}),this.onPauseIntent=this._buildEventHandle(function(e,t){var r=t.playing;r===!1&&e(void 0)}),this.onPauseRejection=this._buildEventHandle(function(e,r){var n=r.playing;n===!0&&t._lastPauseError&&e(t._lastPauseError)}),this.onSeek=this._buildEventHandle(function(e,t){var r=t.seek;r&&\"COMPLETED\"===r.state&&e(void 0)}),this.onSeekIntent=this._buildEventHandle(function(e,t){var r=t.seeking;r===!0&&e(void 0)}),this.onSeekRejection=this._buildEventHandle(function(e,t){var r=t.seek;r&&\"ERROR\"===r.state&&e(r.error)}),this.onPositionJumped=this._buildEventHandle(function(e,t){var r=t.positionJumped;void 0!==r&&e(void 0)}),this.onEnded=this._buildEventHandle(function(e,t){var r=t.ended;r===!0&&e(void 0)}),this.onLeftEnded=this._buildEventHandle(function(e,t){var r=t.ended;r===!1&&e(void 0)}),this.onStallStart=this._buildEventHandle(function(e,t){var r=t.stalled;r===!0&&e(void 0)}),this.onStallEnd=this._buildEventHandle(function(e,t){var r=t.stalled;r===!1&&e(void 0)}),this.onLoadStart=this._buildEventHandle(function(e,t){var r=t.loading;r===!0&&e(void 0)}),void(this.onLoadEnd=this._buildEventHandle(function(e,t){var r=t.loading;r===!1&&e(void 0)})))}return e.prototype.isReady=function(){return this._stateManager.getState().ready},e.prototype.getPosition=function(){return this._getPositionOrPositionSeekingTo()},e.prototype.getLastPlayedPosition=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.stalled;return t&&!r?this.getPosition():this._lastPlayedPosition},e.prototype.getListenTime=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.ended,n=this._listenTimeBase;return t&&!r&&(n+=l.now()-this._timePlaybackStarted),n},e.prototype.isStalled=function(){return this._stateManager.getState().stalled},e.prototype.isLoading=function(){return this._stateManager.getState().loading},e.prototype.isPlaying=function(){return this._stateManager.getState().playing},e.prototype.isActuallyPlaying=function(){return this._stateManager.getState().actuallyPlaying},e.prototype.isEnded=function(){return this._stateManager.getState().ended},e.prototype.getState=function(){return this._stateManager.getState().state},e.prototype.getUrlController=function(){return null},e.prototype.getBufferController=function(){return null},e.prototype.getMemoryCacheMaxSize=function(){return null},e.prototype.getMemoryCacheUsage=function(){return null},e.prototype.getMemoryCacheController=function(){return null},e.prototype.getFatalError=function(){return this._stateManager.getState().fatalError},e.prototype.isDead=function(){return this._stateManager.getState().dead},e.prototype.getDuration=function(){var e=this._stateManager.getState(),t=e.ready,r=e.duration;return t?r:null},e.prototype.setVolume=function(e){if(e<0||e>1)throw new Error(\"Volume must be >= 0 and <= 1.\");this._setVolume(e)},e.prototype.getCurrentBufferedTimeRange=function(){var e=this.getBufferedTimeRanges();if(!e)return null;var t=this.getPosition();return u.find(e,function(e){return e.containsTime(t)})||null},e.prototype.play=function(){var e=this;this._ensureNotDead(),this._logger.debug(\"play() called.\");var t=s.buildDeferred();return this._stateManager.update(function(r){r.playing?e._logger.debug(\"Intent is already to be playing.\"):(e._logger.debug(\"Requesting play.\"),r.playing=!0,e._lastPlayError=null),r.playDeferred&&!r.playDeferred.isSettled()||(r.playDeferred=s.buildDeferred()),t.resolve(r.playDeferred.promise)}),t.promise},e.prototype.pause=function(){var e=this;this._ensureNotDead(),this._logger.debug(\"pause() called.\");var t=s.buildDeferred();return this._stateManager.update(function(r){r.playing?(e._logger.debug(\"Requesting pause.\"),r.playing=!1,e._lastPauseError=null):e._logger.debug(\"Intent is already to be paused.\"),r.pauseDeferred&&!r.pauseDeferred.isSettled()||(r.pauseDeferred=s.buildDeferred()),t.resolve(r.pauseDeferred.promise)}),t.promise},e.prototype.seek=function(e){var t=this;this._ensureNotDead(),this._logger.debug(\"seek() called.\",e);var r=s.buildDeferred();return this._stateManager.update(function(n){if(e<0)t._logger.warn(\"Rejecting seek immediately as the position was negative.\"),r.reject(new Error(\"You were attempting to seek to a negative time.\"));else if(null!==n.duration&&e>n.duration)t._logger.warn(\"Rejecting seek immediately as the duration is now known, and the requested positon was past it.\"),r.reject(new Error(\"You were attempting to seek past the end of the media.\"));else{n.stalled||!n.actuallyPlaying||n.seek&&\"IN_PROGRESS\"===n.seek.state||(t._lastPlayedPosition=t._getPositionOrPositionSeekingTo());var o=s.buildDeferred();n.seek&&\"IN_PROGRESS\"===n.seek.state&&n.seek.position===e?t._logger.debug(\"Seek already requested to the same position.\",e):(t._logger.debug(\"Requesting seek.\",e),n.seeking=!0,n.seek={state:\"IN_PROGRESS\",position:e},n.positionJumped=Object.create(null)),t._queuedSeekDeferreds.push({position:e,deferred:o}),r.resolve(o.promise)}}),r.promise},e.prototype.getSeekState=function(){return this._stateManager.getState().seek},e.prototype.kill=function(){var e=this;this._stateManager.update(function(t){t.dead||(e._logger.debug(\"kill() called.\"),t.dead=!0)})},e.prototype._update=function(e){this._stateManager.update(function(){return e&&e()})},e.prototype._ensureNotDead=function(){if(this._stateManager.getState().dead)throw new Error(\"Player is dead.\")},e.prototype._notifyStalled=function(e){this._ensureNotDead(),this._stalled!==e&&(this._logger.debug(\"notifyStalled() called.\",e),this._stalled=e,this._stateManager.update())},e.prototype._getQueuedSeekPosition=function(){var e=this.getSeekState();return e&&\"IN_PROGRESS\"===e.state?e.position:null},e.prototype._provideDuration=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(r.duration!==e){var n=t._getPositionOrPositionSeekingTo();if(e<0||r.ready&&n>e)throw t._triggerError(new h.ImplementationError(\"Attempt to update duration to an invalid value.\")),new Error(\"Duration cannot be less than the current position.\");t._logger.debug(\"provideDuration() called.\",e),r.ready?r.duration=e:t._queuedDuration=e}})},e.prototype._notifyPlaying=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new h.ImplementationError(\"Attempt to register playback as started before ready.\")),new Error(\"Player must be ready first.\");e!==r.actuallyPlaying&&(t._logger.debug(\"notifyPlaying() called.\",e),e||r.seeking||r.stalled||(t._lastPlayedPosition=t._getPositionOrPositionSeekingTo()),r.actuallyPlaying=r.playing=e,e?t._lastPlayError=null:t._lastPauseError=null)})},e.prototype._notifyPlayRejection=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new h.ImplementationError(\"Attempt to reject a play request before player ready.\")),new Error(\"Player must be ready first.\");if(r.actuallyPlaying||!r.playing)throw t._triggerError(new h.ImplementationError(\"Attempt to reject a play request when not valid.\")),new Error(\"Playing state is incorrect.\");t._logger.debug(\"notifyPlayRejection() called.\",e),r.playing=!1,t._lastPlayError=e})},e.prototype._notifyPauseRejection=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new h.ImplementationError(\"Attempt to reject pause request before player ready.\")),new Error(\"Player must be ready first.\");if(!r.actuallyPlaying||r.playing)throw t._triggerError(new h.ImplementationError(\"Attempt to reject pause request when not valid.\")),new Error(\"Playing state is incorrect.\");t._logger.debug(\"notifyPauseRejection() called.\",e),r.playing=!0,t._lastPauseError=e})},e.prototype._notifySeekRejection=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new h.ImplementationError(\"Attempt to reject seek request before player ready.\")),new Error(\"Player must be ready first.\");if(!r.seek||\"IN_PROGRESS\"!==r.seek.state)throw t._triggerError(new h.ImplementationError(\"Attempt to reject seek request when none requested.\")),new Error(\"A seek hasn't been requested.\");if(null!==r.duration&&r.position>r.duration)throw t._triggerError(new h.ImplementationError(\"Attempt to reject seek request after duration changed below current position.\")),new Error(\"Attempt to reject seek request after duration changed below current position.\");t._logger.debug(\"notifySeekRejection() called.\",e),r.seeking=!1,r.seek={state:\"ERROR\",error:e},r.positionJumped=Object.create(null)})},e.prototype._signalReady=function(){var e=this;this._ensureNotDead(),this._stateManager.update(function(t){if(t.ready)throw e._triggerError(new h.ImplementationError(\"Attempt to signal ready twice.\")),new Error(\"Ready already signalled.\");if(null===e._queuedDuration)throw e._triggerError(new h.ImplementationError(\"Attempt to signal ready when duration unknown.\")),new Error(\"Duration is still unknown.\");e._logger.debug(\"signalReady() called.\"),t.ready=!0,t.duration=e._queuedDuration,t.seek&&\"IN_PROGRESS\"===t.seek.state&&t.seek.position>t.duration&&(t.seeking=!1,t.seek={state:\"ERROR\",error:new Error(\"You were attempting to seek past the end of the media.\")})})},e.prototype._signalSeekComplete=function(){var e=this;this._ensureNotDead(),this._stateManager.update(function(t){if(!t.ready)throw e._triggerError(new h.ImplementationError(\"Attempt to signal seek as complete before player ready.\")),new Error(\"Player must be ready first.\");if(!t.seek||\"IN_PROGRESS\"!==t.seek.state)throw e._triggerError(new h.ImplementationError(\"Attempt to signal seek as complete when none requested.\")),new Error(\"There shouldn't be a seek in progress.\");var r=t.duration;if(t.seek&&\"IN_PROGRESS\"===t.seek.state&&t.seek.position>r)throw new Error(\"Seek cannot have completed given it was to a time greater than the duration.\");e._logger.debug(\"signalSeekComplete() called.\"),t.seek={state:\"COMPLETED\",position:t.seek.position},t.seeking=!1,t.position=t.seek.position})},e.prototype._triggerError=function(e){var t=this;this._stateManager.update(function(r){var n=!1;if(r.ready&&e instanceof i.NotSupportedError&&(e=new h.ImplementationError(\"Invalid NotSupportedError.\"),n=!0),e instanceof o.PlayerFatalError?(e instanceof i.NotSupportedError?t._logger.info(\"NotSupportedError occurred.\",e):t._logger.error(\"Fatal error occurred.\",e),r.fatalError?t._logger.warn(\"A fatal error already occurred.\",r.fatalError):r.fatalError=e,t._errors.push(e),r.errorOccurred=Object.create(null),r.dead=!0):(t._logger.warn(\"Non-fatal error occurred.\",e),t._errors.push(e),r.errorOccurred=Object.create(null)),n)throw new Error(\"Not supported errors are only valid before the player is ready.\")})},e.prototype._buildEventHandle=function(e){var t=this;return{subscribe:function(r){var n=function(e){return r(e,l.now())};return t._stateManager.subscribe(function(t){e(n,t)})}}},e.prototype._finalizeState=function(e){this._updateEndedInState(e);var t=this._getPositionOrPositionSeekingTo();if(e.dead)this._lastPlayError=new Error(\"Player was killed.\"),e.loading=!1,this._clearLoadingDelay(),e.stalled=!0,e.actuallyPlaying=!1,e.playing=!1,e.state=c.State.DEAD;else{var r=!e.ended&&(!e.ready||this._stalled||!(!e.seek||\"IN_PROGRESS\"!==e.seek.state));r&&!e.stalled&&!e.seeking&&e.actuallyPlaying&&(this._lastPlayedPosition=t),e.stalled=r;var n=!e.ended&&(e.playing||e.actuallyPlaying)&&(e.stalled||e.playing!==e.actuallyPlaying);n?this._loadingDelay?this._scheduleLoadingDelay():e.loading=!0:(e.loading=!1,this._clearLoadingDelay()),this._positionAfterLastUpdate!==t&&(this._positionAfterLastUpdate=t,e.playing||e.actuallyPlaying||(e.positionJumped=Object.create(null))),e.state=this._calculateState(e)}},e.prototype._updateEndedInState=function(e){e.ended=e.ready&&this._getPositionOrPositionSeekingTo()===e.duration},e.prototype._scheduleLoadingDelay=function(){var e=this;this._loadingDelayTimer||(this._loadingDelayTimer=window.setTimeout(function(){e._stateManager.update(function(e){return e.loading=!0})},this._loadingDelay))},e.prototype._clearLoadingDelay=function(){this._loadingDelayTimer&&(window.clearTimeout(this._loadingDelayTimer),this._loadingDelayTimer=null)},e.prototype._getPositionOrPositionSeekingTo=function(){this._stateManager.update();var e=this._stateManager.getState();return e.seek&&\"IN_PROGRESS\"===e.seek.state?e.seek.position:e.ready&&null!==e.duration?e.position:0},e.prototype._calculateState=function(e){var t=e.dead,r=e.loading,n=e.playing,o=e.ended;return t?c.State.DEAD:r?c.State.LOADING:n&&!o?c.State.PLAYING:c.State.PAUSED},e.prototype._registerMediaSessionActionHandlers=function(){var e=this;this._mediaSessionEnabled&&y&&(y.setActionHandler(\"play\",function(){e.isDead()||e.play()}),y.setActionHandler(\"pause\",function(){e.isDead()||e.pause()}),y.setActionHandler(\"seekbackward\",function(){e.isDead()||e.seek(Math.max(0,e.getPosition()-g))}),y.setActionHandler(\"seekforward\",function(){e.isDead()||e.seek(Math.min(e.getDuration()||0,e.getPosition()+g))}))},e.prototype._notifyMediaSessionPlaying=function(){this._mediaSessionEnabled&&y&&(y.playbackState=\"playing\")},e.prototype._notifyMediaSessionPaused=function(){this._mediaSessionEnabled&&y&&(y.playbackState=\"paused\")},e.prototype._afterUpdate=function(e,t){(t.beforeUpdate||t.update.length>0)&&(this._logger.error(\"Errors occurred during state update. Killing player.\",t),this._triggerError(new o.PlayerFatalError(\"Errors occurred during state update.\",t))),this._finalizeState(e)},e.prototype._afterDispatches=function(){var e=this,t=this._errors;this._errors=[],t.forEach(function(t){return e._onError.dispatch(t)})},e.prototype._onChange=function(e,t){var r=this,n=e.ready,o=e.dead,i=e.fatalError,a=e.playing,s=e.actuallyPlaying,u=e.ended;if(n===!0&&(this._logger.debug(\"Resolving ready deferred.\"),this._readyDeferred.resolve(void 0)),s===!0&&this._registerMediaSessionActionHandlers(),a===!0?this._notifyMediaSessionPlaying():a===!1&&this._notifyMediaSessionPaused(),t.pauseDeferred&&!t.pauseDeferred.isSettled()&&t.playing){var c=this._lastPauseError||new Error(\"Pause request aborted.\");this._logger.debug(\"Rejecting pause deferred.\",c),t.pauseDeferred.reject(c)}if(t.playDeferred&&!t.playDeferred.isSettled()&&!t.playing){var c=this._lastPlayError||new Error(\"Play request aborted.\");this._logger.debug(\"Rejecting play deferred.\",c),t.playDeferred.reject(c)}if(t.playDeferred&&!t.playDeferred.isSettled()&&t.actuallyPlaying&&(this._logger.debug(\"Resolving play deferred.\"),t.playDeferred.resolve(void 0)),!t.pauseDeferred||t.pauseDeferred.isSettled()||t.actuallyPlaying||(this._logger.debug(\"Resolving pause deferred.\"),t.pauseDeferred.resolve(void 0)),s===!0&&!t.ended||u===!1&&t.actuallyPlaying?this._timePlaybackStarted=l.now():(s===!1&&!t.ended||u===!0&&t.actuallyPlaying)&&(this._listenTimeBase+=l.now()-this._timePlaybackStarted,this._timePlaybackStarted=null),this._queuedSeekDeferreds=this._queuedSeekDeferreds.filter(function(e){var n=e.position,o=e.deferred;if(t.seek)if(\"IN_PROGRESS\"!==t.seek.state){if(!t.stalled||\"ERROR\"===t.seek.state)return\"ERROR\"!==t.seek.state?(r._logger.debug(\"Resolving seek().\"),o.resolve(void 0)):(r._logger.debug(\"Rejecting seek().\",t.seek.error),o.reject(t.seek.error)),!1}else if(\"IN_PROGRESS\"!==t.seek.state||t.seek.position!==n)return r._logger.debug(\"Rejecting seek() because another seek was requested.\",n),o.reject(new Error(\"Seek request aborted because another seek was requested to a different position.\")),!1;return!0}),o===!0){this._logger.debug(\"Calling _kill() on player.\");try{this._kill(),this._logger.info(\"Player killed.\")}catch(e){this._triggerError(new h.ImplementationError(\"Exception occurred in _kill().\",e)),this._logger.error(\"Exception when implementation was being killed.\",e)}if(!t.ready){var c=i||new Error(\"Player was killed.\");this._logger.debug(\"Rejecting whenReady.\"),this._readyDeferred.reject(c)}this._queuedSeekDeferreds.forEach(function(e){var t=e.position,n=e.deferred,o=i||new Error(\"Seek aborted as player killed.\");r._logger.debug(\"Rejecting seek().\",t),n.reject(o)}),this._stateManager.kill(),this._logger.debug(\"Player dead.\")}},e}();t.BasePlayer=v},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(9),i=r(4),a=r(0),s=r(3),u=r(1),l=r(16),c=r(5),d=function(e){function t(t){var r=e.call(this,t)||this;return r._onProvidedPlayerError=new u.EventDispatcher,r._errorHandler=null,r._changeHandler=null,r._player=null,r._instanceLock=null,r._lastPlayerPosition=0,r._volume=1,r._muted=!1,r._synced=!1,r._unsyncInProgress=!1,r._logger=s.prefixLogger(r._logger,\"ProxyPlayerBase\"),r.onProvidedPlayerError=r._onProvidedPlayerError.getHandle(),r}return n(t,e),t.prototype.getVolume=function(){return this._player&&this._synced?this._player.getVolume():this._volume},t.prototype.getMuted=function(){return this._player&&this._synced?this._player.getMuted():this._muted},t.prototype.setMuted=function(e){return this._player&&this._synced?this._player.setMuted(e):void(this._muted=e)},t.prototype.getBufferedTimeRanges=function(){return this._player&&this._synced?this._player.getBufferedTimeRanges():null},t.prototype.getCurrentBufferedTimeRange=function(){return this._player&&this._synced?this._player.getCurrentBufferedTimeRange():null},t.prototype.getMaxBufferLength=function(){return this._player&&this._synced?this._player.getMaxBufferLength():null},t.prototype._providePlayer=function(e,t){if(void 0===t&&(t={syncPosition:!0,syncVolume:!0}),this._ensureNotDead(),this._player)throw new Error(\"A player has already been provided.\");this._logger.debug(\"providePlayer() called.\"),this._instanceLock=Object.create(null),this._player=e,this._sync(t)},t.prototype._removePlayer=function(){if(this._ensureNotDead(),!this._player)throw new Error(\"There is no player to remove.\");if(this._unsyncInProgress)throw new Error(\"Player is currently unsyncing.\");this._logger.debug(\"removePlayer() called.\"),this._instanceLock=null,this._unsync(),this._player=null,this.isReady()&&!this.isDead()&&this._notifyStalled(!0)},t.prototype._setInitialDuration=function(e){var t=this;if(this._ensureNotDead(),e<0)throw new Error(\"Cannot set duration to a value < 0.\");null===this.getDuration()&&this._update(function(){t._ensureBelowPosition(e),t._provideDuration(e),t.isReady()||(t._signalReady(),t._handleSkippedSeek())})},t.prototype._triggerError=function(t){e.prototype._triggerError.call(this,t)},t.prototype._getPlayer=function(){return this.isDead()?null:this._player},t.prototype._setVolume=function(e){return this._player&&this._synced?this._player.setVolume(e):void(this._volume=e)},t.prototype._handlePlayPauseChange=function(e){var t=this._player;t&&(e?this._playAndHandleAbort(t):this._pauseAndHandleAbort(t))},t.prototype._handleSeekChange=function(e){var t=this._player;t&&this._synced&&t.seek(e)},t.prototype._getPosition=function(){if(this._player&&this._synced){if(!this._changeHandler)throw new Error(\"Handler should exist.\");if(this._changeHandler.retrieve(),this._synced)return this._player.getPosition()}return this._lastPlayerPosition},t.prototype._kill=function(){if(this._player&&!this._player.isDead()){if(!this._changeHandler)throw new Error(\"Handler should exist.\");if(this._changeHandler.retrieve(),this._synced&&(this._player.kill(),this._synced))throw new Error(\"Unsync should have happened.\")}this._player=null},t.prototype._handleSkippedSeek=function(){if(this._player&&this._synced){var e=this.getSeekState(),t=this._player.getSeekState();!e||\"IN_PROGRESS\"!==e.state||t&&\"IN_PROGRESS\"===t.state||(this._logger.debug(\"Signalling seek as complete on proxy because provided player isn't seeking.\"),this._signalSeekComplete())}},t.prototype._ensureBelowPosition=function(e){this.getPosition()>e&&(this._logger.debug(\"Capping position.\",e),this.seek(e),this.isReady()&&(this._lastPlayerPosition=e,this._signalSeekComplete()))},t.prototype._sync=function(e){var t=this,r=this._player;if(!r)throw new Error(\"Player should have become available by now.\");return this._logger.debug(\"Syncing...\",this.isPlaying(),this.isActuallyPlaying()),r.isDead()?void this._logger.debug(\"Provided player is dead.\"):(this._errorHandler=r.onError.subscribe(function(e){e instanceof a.PlayerFatalError?t._onProvidedPlayerError.dispatch(new c.ProxyProvidedPlayerFatalError(e,r)):(t._triggerError(e),t._onProvidedPlayerError.dispatch(new l.ProxyProvidedPlayerError(e,r)))}),this._changeHandler=r.onChange.subscribe(function(e){t._update(function(){if(t._logger.debug(\"Handling changes.\",e),e.dead)return t._logger.debug(\"Player has gone to DEAD state.\"),t._unsync(),void(t.isDead()||e.fatalError&&t._handleFatalError(e.fatalError,r));if(void 0!==e.duration&&(t._ensureBelowPosition(e.duration),t._provideDuration(e.duration),t.isReady()||(t._signalReady(),t._handleSkippedSeek(),t._notifyStalled(r.isStalled()))),e.seek){var n=t.getSeekState();n&&\"IN_PROGRESS\"===n.state&&(\"COMPLETED\"===e.seek.state&&n.position===e.seek.position?t._signalSeekComplete():\"COMPLETED\"===e.seek.state&&n.position!==e.seek.position?t._notifySeekRejection(new Error(\"Another seek occurred to a different position.\")):\"IN_PROGRESS\"===e.seek.state&&n.position!==e.seek.position?t.seek(e.seek.position):\"ERROR\"===e.seek.state&&t._notifySeekRejection(e.seek.error))}void 0!==e.stalled&&t._notifyStalled(e.stalled),e.playing===!1&&e.playRejection?t.isActuallyPlaying()?(t._triggerError(new i.PlayerError(\"Paused because a player was provided that refused to play.\")),t._notifyPlaying(!1)):t._notifyPlayRejection(e.playRejection):e.playing===!1&&(r.isActuallyPlaying()?t.pause():void 0===e.actuallyPlaying&&t.isReady()&&t._notifyPlaying(!1)),e.playing===!0&&e.pauseRejection?t._notifyPauseRejection(e.pauseRejection):e.playing===!0&&t.play(),void 0!==e.actuallyPlaying&&t._notifyPlaying(e.actuallyPlaying)})}),void this._update(function(){var n=t._instanceLock;try{if(t._notifyStalled(r.isStalled()),!t.isReady()&&r.isReady()){t._logger.debug(\"Provided player is already ready. Making proxy player ready.\");var o=r.getDuration();t._ensureBelowPosition(o),t._provideDuration(o),t._signalReady()}if(e.syncVolume&&(r.setVolume(t._volume),r.setMuted(t._muted),t._instanceLock!==n))return;var i=t.getSeekState();if(e.syncPosition){t._logger.debug(\"Seeking to match position.\");var s=t.getPosition();r.getPosition()!==s?r.seek(s):(t._logger.debug(\"Skipping seek because already at same position.\"),t.isReady()&&i&&\"IN_PROGRESS\"===i.state&&t._signalSeekComplete())}else if(i&&\"IN_PROGRESS\"===i.state)t._logger.debug(\"Seeking to match position because a seek has been queued.\"),r.seek(t.getPosition());else{var u=r.getSeekState();u&&\"IN_PROGRESS\"===u.state&&(t._logger.debug(\"Seeking on proxy to match seek that is in progress on provided player.\"),t.seek(u.position))}if(t._instanceLock!==n)return;if(r.isActuallyPlaying()?(t._logger.debug(\"Provided player is already playing.\"),t._notifyPlaying(!0)):r.isPlaying()?(t._logger.debug(\"Provided player is preparing to play.\"),t.play()):t.isPlaying()?(t._logger.debug(\"Calling play() on provided player to match proxy.\"),t._playAndHandleAbort(r)):t.isReady()&&t.isActuallyPlaying()&&(t._logger.debug(\"Switching to paused state, as provided player and proxy intended state is paused.\"),t._notifyPlaying(!1)),t._instanceLock!==n)return;t._synced=!0}catch(e){t._triggerError(new a.PlayerFatalError(\"Unexpected error occurred whilst syncing.\",e))}}))},t.prototype._playAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug(\"Calling play() on provided player.\"),e.play(),this._instanceLock===t&&!e.isPlaying()&&this.isPlaying()&&(this._logger.debug(\"Provided player was not playing after play() call completed.\"),this.isActuallyPlaying()?(this._triggerError(new i.PlayerError(\"Paused because a player was provided that refused to play.\")),this._notifyPlaying(!1)):this.pause())},t.prototype._pauseAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug(\"Calling pause() on provided player.\"),e.pause(),this._instanceLock===t&&e.isPlaying()&&!this.isPlaying()&&(this._logger.debug(\"Provided player was not paused after pause() call completed.\"),this.play())},t.prototype._unsync=function(){if(this._logger.debug(\"Unsyncing...\"),this._changeHandler&&(this._changeHandler.remove(),this._changeHandler=null),this._errorHandler&&(this._errorHandler.remove(),this._errorHandler=null),!this._synced)return void this._logger.debug(\"Unsynced. (Sync never completed)\");this._synced=!1,this._unsyncInProgress=!0;var e=this._player;if(e)try{this._volume=e.getVolume(),this._muted=e.getMuted(),this._lastPlayerPosition=e.getPosition()}catch(e){this._logger.error(\"Error whilst unsyncing.\",e)}this._unsyncInProgress=!1,this._logger.debug(\"Unsynced.\",this.isPlaying(),this.isActuallyPlaying())},t}(o.BasePlayer);t.ProxyPlayerBase=d},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n;!function(e){e[e.LOADING=0]=\"LOADING\",e[e.PLAYING=1]=\"PLAYING\",e[e.PAUSED=2]=\"PAUSED\",e[e.DEAD=3]=\"DEAD\"}(n=t.State||(t.State={}))},function(e,t,r){(function(t,n){/*!\n\t\t * @overview es6-promise - a tiny implementation of Promises/A+.\n\t\t * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n\t\t * @license   Licensed under MIT license\n\t\t *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n\t\t * @version   4.0.5\n\t\t */\n!function(t,r){e.exports=r()}(this,function(){\"use strict\";function e(e){return\"function\"==typeof e||\"object\"==typeof e&&null!==e}function o(e){return\"function\"==typeof e}function i(e){Q=e}function a(e){Y=e}function s(){return function(){return t.nextTick(f)}}function u(){return\"undefined\"!=typeof J?function(){J(f)}:d()}function l(){var e=0,t=new $(f),r=document.createTextNode(\"\");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<W;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}W=0}function p(){try{var e=r(38);return J=e.runOnLoop||e.runOnContext,u()}catch(e){return d()}}function h(e,t){var r=arguments,n=this,o=new this.constructor(g);void 0===o[oe]&&L(o);var i=n._state;return i?!function(){var e=r[i-1];Y(function(){return k(i,o,e,n._result)})}():A(n,o,e,t),o}function _(e){var t=this;if(e&&\"object\"==typeof e&&e.constructor===t)return e;var r=new t(g);return P(r,e),r}function g(){}function y(){return new TypeError(\"You cannot resolve a promise with itself\")}function v(){return new TypeError(\"A promises callback cannot return that same promise.\")}function m(e){try{return e.then}catch(e){return ue.error=e,ue}}function E(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function b(e,t,r){Y(function(e){var n=!1,o=E(r,t,function(r){n||(n=!0,t!==r?P(e,r):T(e,r))},function(t){n||(n=!0,x(e,t))},\"Settle: \"+(e._label||\" unknown promise\"));!n&&o&&(n=!0,x(e,o))},e)}function w(e,t){t._state===ae?T(e,t._result):t._state===se?x(e,t._result):A(t,void 0,function(t){return P(e,t)},function(t){return x(e,t)})}function S(e,t,r){t.constructor===e.constructor&&r===h&&t.constructor.resolve===_?w(e,t):r===ue?x(e,ue.error):void 0===r?T(e,t):o(r)?b(e,t,r):T(e,t)}function P(t,r){t===r?x(t,y()):e(r)?S(t,r,m(r)):T(t,r)}function R(e){e._onerror&&e._onerror(e._result),O(e)}function T(e,t){e._state===ie&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Y(O,e))}function x(e,t){e._state===ie&&(e._state=se,e._result=t,Y(R,e))}function A(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ae]=r,o[i+se]=n,0===i&&e._state&&Y(O,e)}function O(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?k(r,n,o,i):o(i);e._subscribers.length=0}}function M(){this.error=null}function D(e,t){try{return e(t)}catch(e){return le.error=e,le}}function k(e,t,r,n){var i=o(r),a=void 0,s=void 0,u=void 0,l=void 0;if(i){if(a=D(r,n),a===le?(l=!0,s=a.error,a=null):u=!0,t===a)return void x(t,v())}else a=n,u=!0;t._state!==ie||(i&&u?P(t,a):l?x(t,s):e===ae?T(t,a):e===se&&x(t,a))}function I(e,t){try{t(function(t){P(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}function C(){return ce++}function L(e){e[oe]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function j(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[oe]||L(this.promise),K(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):x(this.promise,N())}function N(){return new Error(\"Array Methods must be provided an Array\")}function U(e){return new j(this,e).promise}function F(e){var t=this;return new t(K(e)?function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(new TypeError(\"You must pass an array to race.\"))})}function B(e){var t=this,r=new t(g);return x(r,e),r}function q(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function H(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function z(e){this[oe]=C(),this._result=this._state=void 0,this._subscribers=[],g!==e&&(\"function\"!=typeof e&&q(),this instanceof z?I(this,e):H())}function G(){var e=void 0;if(\"undefined\"!=typeof n)e=n;else if(\"undefined\"!=typeof self)e=self;else try{e=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(\"[object Promise]\"===r&&!t.cast)return}e.Promise=z}var V=void 0;V=Array.isArray?Array.isArray:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};var K=V,W=0,J=void 0,Q=void 0,Y=function(e,t){re[W]=e,re[W+1]=t,W+=2,2===W&&(Q?Q(f):ne())},X=\"undefined\"!=typeof window?window:void 0,Z=X||{},$=Z.MutationObserver||Z.WebKitMutationObserver,ee=\"undefined\"==typeof self&&\"undefined\"!=typeof t&&\"[object process]\"==={}.toString.call(t),te=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?s():$?l():te?c():void 0===X?p():d();var oe=Math.random().toString(36).substring(16),ie=void 0,ae=1,se=2,ue=new M,le=new M,ce=0;return j.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===ie&&r<e;r++)this._eachEntry(t[r],r)},j.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===_){var o=m(e);if(o===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if(\"function\"!=typeof o)this._remaining--,this._result[t]=e;else if(r===z){var i=new r(g);S(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},j.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===ie&&(this._remaining--,e===se?x(n,r):this._result[t]=r),0===this._remaining&&T(n,this._result)},j.prototype._willSettleAt=function(e,t){var r=this;A(e,void 0,function(e){return r._settledAt(ae,t,e)},function(e){return r._settledAt(se,t,e)})},z.all=U,z.race=F,z.resolve=_,z.reject=B,z._setScheduler=i,z._setAsap=a,z._asap=Y,z.prototype={constructor:z,then:h,catch:function(e){return this.then(null,e)}},z.polyfill=G,z.Promise=z,z})}).call(t,r(27),r(37))},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"DEPENDENCY_ERROR\"},t}(o.PlayerFatalError);t.DependencyError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype.getCode=function(){return\"IMPLEMENTATION_ERROR\"},t}(o.PlayerFatalError);t.ImplementationError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t){return e.call(this,t||\"The player cannot play the provided descriptor.\")||this}return n(t,e),t.prototype.getCode=function(){return\"NOT_SUPPORTED_ERROR\"},t}(o.PlayerFatalError);t.NotSupportedError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(4),i=function(e){function t(t,r,n){void 0===n&&(n=\"The player that the proxy was controlling had an error.\");var o=e.call(this,n)||this;return o._providedPlayerError=t,o._providedPlayer=r,o}return n(t,e),t.prototype.getCode=function(){return\"PROXY_PLAYER_PROVIDED_PLAYER_ERROR\"},t.prototype.getProvidedPlayerError=function(){return this._providedPlayerError},t.prototype.getProvidedPlayer=function(){return this._providedPlayer},t}(o.PlayerError);t.ProxyProvidedPlayerError=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),o=r(18);t.abortedError=new Error(\"Job aborted.\");var i=function(){function e(e,t){void 0===t&&(t={}),this._job=e,this._opts=t,this._counter=0,this._jobControl=null,this._promise=null,this._jobCompleted=!1}return e.prototype.run=function(){var e=this;this._jobControl||(this._jobControl=this._job(),this._promise=this._jobControl.result,o.always(this._promise,function(){e._jobCompleted=!0,e._opts.storeResult===!1&&(e._jobCompleted=!1,e._promise=null,e._jobControl=null)}));var r=this._promise;this._counter++;var i=n.buildDeferred(),a=!1,s=!1,u=[],l=[],c=function(){s||(a=!0,e._counter--)};return o.always(r,c),r.then(function(e){s||(u.forEach(function(t){try{t(e)}catch(e){window.setTimeout(function(){throw e},0)}}),i.resolve(e))},function(e){s||(l.forEach(function(t){return t(e)}),i.reject(e))}),{whenComplete:function(){return i.promise},onCompletion:function(e){u.push(e)},onError:function(e){l.push(e)},hasCompleted:function(){return a},abort:function(r){s||a||(s=!0,0===--e._counter&&!e._jobCompleted&&e._jobControl&&e._jobControl.abort&&(e._jobControl.abort(r),e._promise=null,e._jobControl=null),l.forEach(function(e){return e(t.abortedError)}),i.reject(t.abortedError))}}},e}();t.AbortableJob=i},function(e,t,r){\"use strict\";function n(e,t){return e.then(t,t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.always=n},function(e,t,r){\"use strict\";function n(){return c}function o(){return p}function i(){var e=navigator.appVersion.match(h);if(e&&e.length>=3){var t=parseInt(e[1],10),r=parseInt(e[2],10);if(!isNaN(t)&&!isNaN(r))return{major:t,minor:r}}return null}function a(){return d}function s(){return f}function u(){var e=navigator.appVersion.match(_);if(e&&e.length>=3){var t=parseInt(e[1],10),r=parseInt(e[2],10);if(!isNaN(t)&&!isNaN(r))return{major:t,minor:r}}return null}Object.defineProperty(t,\"__esModule\",{value:!0});var l=\"undefined\"!=typeof navigator?navigator.userAgent:\"\",c=!/chrome|opera/i.test(l)&&/safari/i.test(l),d=l.indexOf(\"MSIE \")>=0||l.indexOf(\"Trident/\")>=0,f=l.indexOf(\"Edge/\")>=0,p=l.toLowerCase().indexOf(\"firefox\")>=0,h=/version\\/(\\d+)\\.(\\d+)/i,_=/Chrom(?:e|ium)\\/([0-9]+)\\.([0-9]+)\\.([0-9]+)/;t.isSafari=n,t.isFirefox=o,t.getSafariVersion=i,t.isIE=a,t.isEdge=s,t.getChromeVersion=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(6),o=function(){function e(e,t){this._inCallback=!1,this._onExit=e,this._onEnter=t||null}return e.prototype.enter=function(e){var t=this;if(this._inCallback)return e?e(this._onEnterResultRetriever):void 0;this._inCallback=!0;var r=[],o=!1;this._onEnter&&(this._onEnterResultRetriever={getResult:function(e){o?n.deferException(function(){return e(t._onEnterError,t._onEnterResult)}):r.push(e)}});try{var i=e?e(this._onEnterResultRetriever):void 0;if(this._onEnter){this._onEnterError=void 0,this._onEnterResult=void 0;try{this._onEnterResult=this._onEnter()}catch(e){this._onEnterError=e}o=!0,r.forEach(function(e){return n.deferException(function(){return e(t._onEnterError,t._onEnterResult)})})}return i}finally{this._inCallback=!1,n.deferException(function(){return t._onExit(t._onEnterError,t._onEnterResult)})}},e}();t.OnExit=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t,r,n){void 0===n&&(n={}),this._url=e,this._protocol=t,this._format=r,this._segmentFormat=n}return e.prototype.getUrl=function(){return this._url},e.prototype.getProtocol=function(){return this._protocol},e.prototype.getFormat=function(){return this._format},e.prototype.getSegmentFormat=function(){return this._segmentFormat},e}();t.Descriptor=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(13),i=r(15),a=r(28),s=r(14),u=r(5),l=r(4),c=r(0);!function(e){e.PlayerError=l.PlayerError,e.PlayerFatalError=c.PlayerFatalError,e.DependencyError=o.DependencyError,e.NotSupportedError=i.NotSupportedError,e.URLUpdateError=a.URLUpdateError,e.ImplementationError=s.ImplementationError,e.ProxyProvidedPlayerFatalError=u.ProxyProvidedPlayerFatalError}(n=t.errors||(t.errors={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(2),i=r(17),a=r(33),s=r(20),u=r(7),l=r(30),c=r(8),d=r(32),f=r(18),p=r(31),h=r(29),_=r(6),g=r(19),y=r(34);!function(e){e.OnExit=s.OnExit,e.find=u.find,e.Promise=d.Promise,e.always=f.always,e.compact=p.compact,e.deferException=_.deferException;var t;!function(e){e.buildCache=l.buildCache}(t=e.cache||(e.cache={}));var r;!function(e){e.buildDeferred=o.buildDeferred}(r=e.deferred||(e.deferred={}));var n;!function(e){e.getExtension=y.getExtension,e.buildAbsoluteUrl=y.buildAbsoluteUrl}(n=e.url||(e.url={}));var v;!function(e){e.AbortableJob=i.AbortableJob,e.abortedError=i.abortedError}(v=e.abortableJob||(e.abortableJob={}));var m;!function(e){e.noMoreAttemptsError=a.noMoreAttemptsError,e.retry=a.retry,e.buildExponentialDelayCalculator=a.buildExponentialDelayCalculator}(m=e.retry||(e.retry={}));var E;!function(e){e.isSafari=g.isSafari,e.getSafariVersion=g.getSafariVersion,e.isIE=g.isIE,e.isEdge=g.isEdge,e.isFirefox=g.isFirefox,e.getChromeVersion=g.getChromeVersion}(E=e.browser||(e.browser={}));var b;!function(e){e.combine=h.combine,e.numberToUint8Array=h.numberToUint8Array,e.createVintBuffer=h.createVintBuffer}(b=e.arrayBuffer||(e.arrayBuffer={}));var w;!function(e){e.now=c.now}(w=e.time||(e.time={}))}(n=t.helpers||(t.helpers={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),o=r(1),i=function(){function e(){this._aborted=!1,this._requestStarted=!1,this._response=null,this._responseDeferred=n.buildDeferred(),this._requestStartedDeferred=n.buildDeferred(),this._onRequestStart=new o.EventDispatcher,this.onRequestStart=this._onRequestStart.getHandle(),this.whenRequestStarted=this._requestStartedDeferred.promise}return e.prototype.getResponse=function(){return this._responseDeferred.promise},e.prototype.hasRequestStarted=function(){return this._requestStarted},e.prototype.hasCompleted=function(){return!!this._response||this._aborted},e.prototype.abort=function(){if(!this._aborted){if(this._aborted=!0,this._response)throw new Error(\"Already have a response.\");this._abort(),this._responseDeferred.reject(new Error(\"Aborted.\")),this._requestStarted||this._requestStartedDeferred.reject(new Error(\"Aborted.\"))}},e.prototype._provideResponse=function(e){if(this._aborted)throw new Error(\"Response aborted.\");if(this._response)throw new Error(\"Response already provided.\");if(e instanceof Error)this._aborted=!0,this._responseDeferred.reject(e);else{if(!this._requestStarted)throw new Error(\"Request hasn't started yet.\");this._response=e,this._responseDeferred.resolve(e)}},e.prototype._signalRequestStart=function(){if(this._aborted)throw new Error(\"Response aborted.\");if(this._requestStarted)throw new Error(\"Request already started.\");this._requestStarted=!0,this._requestStartedDeferred.resolve(void 0),this._onRequestStart.dispatch(void 0)},e}();t.LoaderRequest=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),i=r(3),a=r(10),s=r(5),u=function(e){function t(t){var r=e.call(this,t)||this;return r._onPlayerProvided=new o.EventDispatcher,r._onPlayerRemoved=new o.EventDispatcher,r._shouldPassThroughFatalErrors=!!t.shouldPassThroughFatalErrors,r.onPlayerProvided=r._onPlayerProvided.getHandle(),r.onPlayerRemoved=r._onPlayerRemoved.getHandle(),r._logger=i.prefixLogger(r._logger,\"ProxyPlayer\"),r}return n(t,e),t.prototype.providePlayer=function(e,t){void 0===t&&(t={syncPosition:!0,syncVolume:!0}),this._providePlayer(e,t),this._onPlayerProvided.dispatch(e)},t.prototype.removePlayer=function(){var e=this._getPlayer();if(!e)throw new Error(\"There is no player to remove.\");this._removePlayer(),this._onPlayerRemoved.dispatch(e)},t.prototype.setInitialDuration=function(e){this._setInitialDuration(e)},t.prototype.getPlayer=function(){return this._getPlayer()},t.prototype._handleFatalError=function(e,t){this._shouldPassThroughFatalErrors?this._triggerError(e):this._triggerError(new s.ProxyProvidedPlayerFatalError(e,t))},t}(a.ProxyPlayerBase);t.ProxyPlayer=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){if(this.start=e,this.duration=t,t<0)throw new RangeError(\"Duration must be >= 0.\");this.end=e+t}return e.normalizeRawTimeRanges=function(e){return e.slice(0).sort(function(e,t){return e.start-t.start}).reduce(function(e,t,r){var n=e.length-1;return r>0&&e[n].end>=t.start?e[n].end=t.end:e.push(t),e},[])},e.normalize=function(t){return e.normalizeRawTimeRanges(t.map(function(e){return{start:e.start,end:e.end}})).map(function(t){return new e(t.start,t.end-t.start)})},e.getCoverage=function(t){if(0===t.length)return new e(0,0);var r=1/0,n=0;return t.forEach(function(e){e.start<r&&(r=e.start),e.end>n&&(n=e.end)}),new e(r,n-r)},e.rangesContainTime=function(e,t){return t.some(function(t){return t.containsTime(e)})},e.prototype.containsTime=function(e){return this.start<=e&&this.end>e},e}();t.TimeRange=n},function(e,t){function r(){throw new Error(\"setTimeout has not been defined\")}function n(){throw new Error(\"clearTimeout has not been defined\")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){_&&p&&(_=!1,p.length?h=p.concat(h):g=-1,h.length&&s())}function s(){if(!_){var e=o(a);_=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,_=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,d,f=e.exports={};!function(){try{c=\"function\"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{d=\"function\"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var p,h=[],_=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||_||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title=\"browser\",f.browser=!0,f.env={},f.argv=[],f.version=\"\",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error(\"process.binding is not supported\")},f.cwd=function(){return\"/\"},f.chdir=function(e){throw new Error(\"process.chdir is not supported\")},f.umask=function(){return 0}},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t,r){return e.call(this,t||\"The URL update failed for some reason.\",r)||this}return n(t,e),t.prototype.getCode=function(){return\"URL_UPDATE_ERROR\"},t}(o.PlayerFatalError);t.URLUpdateError=i},function(e,t,r){\"use strict\";function n(e){var t=new Uint8Array(e.reduce(function(e,t){return e+t.byteLength},0)),r=0;return e.forEach(function(e){t.set(e,r),r+=e.byteLength}),t}function o(e,t){if(void 0===t&&(t=!1),e=Math.round(e),e<0)throw new Error(\"Negative numbers not supported.\");for(var r=Math.max(1,Math.ceil(Math.log(e+1)/Math.log(2)/8)),n=new Uint8Array(r),o=0;o<r;o++)n[t?o:r-1-o]=255&e,e>>>=8;return n}function i(e){if(e<0||e>Math.pow(2,53))throw new Error(\"Unrepresentable value: \"+e);var t;for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);for(var r=new Uint8Array(t),n=1;n<=t;n++){var o=255&e;r[t-n]=o,e-=o,e/=Math.pow(2,8)}return r[0]|=1<<8-t,r}Object.defineProperty(t,\"__esModule\",{value:!0}),t.combine=n,t.numberToUint8Array=o,t.createVintBuffer=i},function(e,t,r){\"use strict\";function n(){return i?new window.Map:new a}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(7),i=\"undefined\"!=typeof window&&\"Map\"in window;t.buildCache=n;var a=function(){function e(){this._store=[]}return e.prototype.set=function(e,t){var r=o.find(this._store,function(t){return t.key===e});r?r.val=t:this._store.push({key:e,val:t})},e.prototype.get=function(e){var t=o.find(this._store,function(t){return t.key===e});if(t)return t.val},e}()},function(e,t,r){\"use strict\";function n(e){return e.filter(function(e){return null!=e})}Object.defineProperty(t,\"__esModule\",{value:!0}),t.compact=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(12);t.Promise=n.Promise},function(e,t,r){\"use strict\";function n(e,r,n,o){void 0===n&&(n=window.setTimeout),void 0===o&&(o=window.clearTimeout);var s=new i.AbortableJob(function(){var i=a.buildDeferred(),s=0,u=null,l=null,c=function(){u=e(s).run(),u.onCompletion(function(e){if(u=null,e.success)i.resolve(e.result);else{var o=r(++s);null!==o&&o<0?i.reject(new Error(\"Delay must be null or >= 0.\")):null===o?i.reject(t.noMoreAttemptsError):l=n(function(){l=null,c()},o)}}),u.onError(function(e){u=null,i.reject(e)})};return c(),{result:i.promise,abort:function(){u&&u.abort(),l&&o(l)}}});return s.run()}function o(e){var t=void 0===e?{}:e,r=t.timeBase,n=void 0===r?500:r,o=t.threshold,i=void 0===o?3:o,a=t.delayCap,s=void 0===a?45e3:a,u=t.jitter,l=void 0===u?200:u,c=t.maxAttempts,d=void 0===c?null:c;if(n<=0)throw new Error(\"Time base must be > 0.\");if(i<=0)throw new Error(\"Threshold must be > 0.\");if(0===s)throw new Error(\"Delay cap must be null or > 0.\");if(null!==d&&d<1)throw new Error(\"Max attempts must be >= 1.\");return function(e){if(null!==d&&e>=d)return null;var t=e>0?Math.pow(2,e/i-1):0;return Math.min(t*n,s||1/0)+Math.round(Math.random()*l)}}Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(17),a=r(2);t.noMoreAttemptsError=new Error(\"No more attempts remaining.\"),t.retry=n,t.buildExponentialDelayCalculator=o},function(e,t,r){\"use strict\";function n(e){var t=a.exec(e);return t?t[1].toLowerCase():null}function o(e,t){return i.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(36),a=/^.*\\.([^\\.;\\?#]*).*$/;t.getExtension=n,t.buildAbsoluteUrl=o},function(e,t,r){\"use strict\";function n(e){var t=Object.create(null);return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(20),i=r(6),a=function(){},s=function(){function e(e,t){void 0===t&&(t={});var r=this;this._subscribers=[],this._onExit=new o.OnExit(function(){return r._after()},function(){return r._onEnter()}),this._beforeUpdateError=void 0,this._inAfterUpdate=!1,this._dead=!1,this._officiallyDead=!1,this._errors=[],this._state=n(e),this._initialState=n(e),this._beforeUpdate=t.beforeUpdate||function(){},this._afterUpdate=t.afterUpdate||a,this._afterDispatches=t.afterDispatches||a}return e.prototype.subscribe=function(e,t){var r=this;if(void 0===t&&(t=!0),this._dead){var o=!1;return{retrieve:function(){},remove:function(){return!o&&(o=!0)}}}var i={callback:e,localState:t?n(this._state):this._initialState};return this._subscribers.push(i),t||this._updateSubscriber(i),{remove:function(){var t=r._subscribers.map(function(e){return e.callback}).indexOf(e);return t>=0&&(r._subscribers.splice(t,1),!0)},retrieve:function(){r._updateSubscriber(i)}}},e.prototype.subscribeIndividual=function(e,t,r){return this.subscribe(function(r){var n=r[e];void 0!==n&&t(n)},r)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype.getIndividualHandle=function(e){var t=this;return{subscribe:function(r){return t.subscribeIndividual(e,r)}}},e.prototype.update=function(e){var t=this;this._officiallyDead||(this._inAfterUpdate?e&&e(this._state,this._beforeUpdateError):this._onExit.enter(function(r){r.getResult(function(){try{e&&e(t._state,t._beforeUpdateError)}catch(e){t._errors.push(e)}})}))},e.prototype.getState=function(){return this._state},e.prototype.kill=function(){var e=this;this._dead||(this._dead=!0,window.setTimeout(function(){e._subscribers.splice(0),e._officiallyDead=!0},0))},e.prototype.isDead=function(){return this._dead},e.prototype._onEnter=function(){this._beforeUpdateError=void 0;try{this._beforeUpdate(this._state)}catch(e){this._beforeUpdateError=e}},e.prototype._after=function(){var e=this,t=this._errors;this._errors=[],i.deferException(function(){e._inAfterUpdate=!0;try{e._afterUpdate(e._state,{beforeUpdate:e._beforeUpdateError,update:t})}catch(t){throw e._inAfterUpdate=!1,t}e._inAfterUpdate=!1,e._subscribers.slice().forEach(function(t){return e._updateSubscriber(t)}),e._afterDispatches(e._state)})},e.prototype._updateSubscriber=function(e){var t=this._calculateDiff(e.localState);Object.keys(t).length&&(e.localState=n(this._state),i.deferException(function(){return e.callback(t,e.localState)}))},e.prototype._calculateDiff=function(e){var t=this,r=Object.create(null);return Object.keys(this._state).forEach(function(n){var o=t._state[n];o!==e[n]&&(r[n]=o)}),r},e}();t.StateManager=s},function(e,t,r){!function(t){var r=/^((?:[^\\/;?#]+:)?)(\\/\\/[^\\/\\;?#]*)?(.*?)??(;.*?)?(\\?.*?)?(#.*?)?$/,n=/^([^\\/;?#]*)(.*)$/,o=/(?:\\/|^)\\.(?=\\/)/g,i=/(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/).*?(?=\\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),t=t.trim(),!t){if(!r.alwaysNormalize)return e;var o=this.parseURL(e);if(!s)throw new Error(\"Error trying to parse base URL.\");return o.path=a.normalizePath(o.path),a.buildURLFromParts(o)}var i=this.parseURL(t);if(!i)throw new Error(\"Error trying to parse relative URL.\");if(i.scheme)return r.alwaysNormalize?(i.path=a.normalizePath(i.path),a.buildURLFromParts(i)):t;var s=this.parseURL(e);if(!s)throw new Error(\"Error trying to parse base URL.\");if(!s.netLoc&&s.path&&\"/\"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path=\"/\");var l={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=s.netLoc,\"/\"!==i.path[0]))if(i.path){var c=s.path,d=c.substring(0,c.lastIndexOf(\"/\")+1)+i.path;l.path=a.normalizePath(d)}else l.path=s.path,i.params||(l.params=s.params,i.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?a.normalizePath(i.path):i.path),a.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||\"\",netLoc:t[2]||\"\",path:t[3]||\"\",params:t[4]||\"\",query:t[5]||\"\",fragment:t[6]||\"\"}:null},normalizePath:function(e){for(e=e.split(\"\").reverse().join(\"\").replace(o,\"\");e.length!==(e=e.replace(i,\"\")).length;);return e.split(\"\").reverse().join(\"\")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}(this)},function(e,t){var r;r=function(){return this}();try{r=r||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(r=window)}e.exports=r},function(e,t){},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085;var n=r(1),o=r(24),i=r(3),a=r(25);t.ProxyPlayer=a.ProxyPlayer;var s=r(10);t.ProxyPlayerBase=s.ProxyPlayerBase;var u=r(22);t.errors=u.errors;var l=r(23);t.helpers=l.helpers;var c=r(9);t.BasePlayer=c.BasePlayer;var d=r(21);t.Descriptor=d.Descriptor;var f=r(11);t.State=f.State;var p=r(26);t.TimeRange=p.TimeRange;var h;!function(e){e.EventDispatcher=n.EventDispatcher}(h=t.eventDispatcher||(t.eventDispatcher={}));var _;!function(e){e.LoaderRequest=o.LoaderRequest}(_=t.loader||(t.loader={}));var g;!function(e){e.noOpLogger=i.noOpLogger,e.consoleLogger=i.consoleLogger,e.prefixLogger=i.prefixLogger,e.cloneLogger=i.cloneLogger}(g=t.logger||(t.logger={}))}])})},function(e,t,r){!function(t,n){e.exports=n(r(2),r(4),r(7))}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=14)}([function(t,r){t.exports=e},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.MSE_ERROR\"},t}(o.errors.PlayerFatalError);t.MSEError=i},function(e,r){e.exports=t},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),i=function(e){function t(t){return e.call(this,\"An error occurred trying to append to the buffer.\",t)||this}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.APPEND_ERROR\"},t}(o.MSEError);t.AppendError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),i=function(e){function t(t){return e.call(this,\"An error occurred trying to initialize the buffer.\",t)||this}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.INITIALIZE_ERROR\"},t}(o.MSEError);t.InitializeError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){\nthis.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return e.call(this,\"A format could not be determined.\")||this}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.NO_FORMAT_DETERMINED_ERROR\"},t}(o.errors.NotSupportedError);t.NoFormatDeterminedError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return e.call(this,\"A transmuxer could not be found.\")||this}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.NO_TRANSMUXER_ERROR\"},t}(o.errors.NotSupportedError);t.NoTransmuxerError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t){var r=e.call(this,\"An error occurred when trying to retrieve a segment/key.\",t)||this;return r._internalRetrievalError=t,r}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.RETRIEVAL_ERROR.\"+this._internalRetrievalError.getCode()},t}(o.errors.PlayerError);t.RetrievalError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return e.call(this,\"The playlist type is not supported.\")||this}return n(t,e),t.prototype.getCode=function(){return\"HLS_MSE_PLAYER.UNSUPPORTED_PLAYLIST_TYPE_ERROR\"},t}(o.errors.PlayerFatalError);t.UnsupportedPlaylistTypeError=i},function(e,t){e.exports=r},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(3),i=r(4),a=r(1),s=r(5),u=r(6),l=r(7),c=r(8);!function(e){e.AppendError=o.AppendError,e.InitializeError=i.InitializeError,e.MSEError=a.MSEError,e.NoFormatDeterminedError=s.NoFormatDeterminedError,e.NoTransmuxerError=u.NoTransmuxerError,e.RetrievalError=l.RetrievalError,e.UnsupportedPlaylistTypeError=c.UnsupportedPlaylistTypeError}(n=t.errors||(t.errors={}))},function(e,t,r){\"use strict\";function n(e){return void 0!==e.mimeType}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(0),a=r(2),s=r(9),u=r(12),l=r(13),c=r(8),d=r(3),f=r(4),p=r(7),h=r(6),_=r(5),g=i.helpers.find,y=i.helpers.Promise,v=i.helpers.time.now,m=i.helpers.deferred.buildDeferred,E=i.errors.DependencyError,b=i.errors.PlayerFatalError,w=i.errors.URLUpdateError,S=i.eventDispatcher.EventDispatcher,P=i.logger.prefixLogger,R=i.helpers.abortableJob.abortedError,T=i.helpers.browser.getSafariVersion(),x=i.helpers.browser.isSafari(),A=i.helpers.browser.isFirefox(),O=i.helpers.browser.isEdge(),M=3e4,D=1e8,k=600,I=50,C=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._onPlaylistRequestQueued=new S,n._onPlaylistRequestStart=new S,n._onPlaylistRetrieved=new S,n._onPlaylistRequestFailed=new S,n._onInitDataRequestQueued=new S,n._onInitDataRequestStart=new S,n._onInitDataRetrieved=new S,n._onInitDataRequestFailed=new S,n._onKeyRequestQueued=new S,n._onKeyRequestStart=new S,n._onKeyRetrieved=new S,n._onKeyRequestFailed=new S,n._onPlaylistParseStart=new S,n._onPlaylistParseEnd=new S,n._onSegmentRequestQueued=new S,n._onSegmentRequestStart=new S,n._onSegmentRetrieved=new S,n._onSegmentRequestFailed=new S,n._onSegmentTransmuxStart=new S,n._onSegmentTransmuxEnd=new S,n._onSegmentDecryptionStart=new S,n._onSegmentDecryptionEnd=new S,n._onSegmentReady=new S,n._onSegmentAppendQueued=new S,n._onSegmentAppendEnd=new S,n._playlist=null,n._playlistSegmentRetriever=null,n._initialPlaylistRetrieveCompleted=!1,n._mse=null,n._simpleMSE=null,n._retrieveDurationDeferred=m(),n._html5PlayerReady=!1,n._startPositionOffset=0,n._transmuxerAndMSEType=null,n._lastSegmentAppended=null,n._maxBufferLength=null,n._cacheSize=null,n._onFirstSegmentRetrieved=null,n._seekAttemptTimer=null,n._seekMetadataEventHandle=null,n._playlistDuration=null,n._logger=P(n._logger,\"HLSMSEPlayer\"),n.onPlaylistRequestQueued=n._onPlaylistRequestQueued.getHandle(),n.onPlaylistRequestStart=n._onPlaylistRequestStart.getHandle(),n.onPlaylistRetrieved=n._onPlaylistRetrieved.getHandle(),n.onPlaylistRequestFailed=n._onPlaylistRequestFailed.getHandle(),n.onInitDataRequestQueued=n._onInitDataRequestQueued.getHandle(),n.onInitDataRequestStart=n._onInitDataRequestStart.getHandle(),n.onInitDataRetrieved=n._onInitDataRetrieved.getHandle(),n.onInitDataRequestFailed=n._onInitDataRequestFailed.getHandle(),n.onKeyRequestQueued=n._onKeyRequestQueued.getHandle(),n.onKeyRequestStart=n._onKeyRequestStart.getHandle(),n.onKeyRetrieved=n._onKeyRetrieved.getHandle(),n.onKeyRequestFailed=n._onKeyRequestFailed.getHandle(),n.onPlaylistParseStart=n._onPlaylistParseStart.getHandle(),n.onPlaylistParseEnd=n._onPlaylistParseEnd.getHandle(),n.onSegmentRequestQueued=n._onSegmentRequestQueued.getHandle(),n.onSegmentRequestStart=n._onSegmentRequestStart.getHandle(),n.onSegmentRetrieved=n._onSegmentRetrieved.getHandle(),n.onSegmentRequestFailed=n._onSegmentRequestFailed.getHandle(),n.onSegmentTransmuxStart=n._onSegmentTransmuxStart.getHandle(),n.onSegmentTransmuxEnd=n._onSegmentTransmuxEnd.getHandle(),n.onSegmentDecryptionStart=n._onSegmentDecryptionStart.getHandle(),n.onSegmentDecryptionEnd=n._onSegmentDecryptionEnd.getHandle(),n.onSegmentReady=n._onSegmentReady.getHandle(),n.onSegmentAppendQueued=n._onSegmentAppendQueued.getHandle(),n.onSegmentAppendEnd=n._onSegmentAppendEnd.getHandle(),n.__descriptor=t,n.__playerDependencies=r,n._url=t.getUrl(),n}return o(t,e),t.prototype.getBufferedTimeRanges=function(){var e=this._playlistSegmentRetriever;return e?i.TimeRange.normalize(e.getSegmentsWithData().map(function(e){return e.segment.getTimeRange()})):[]},t.prototype.getMaxBufferLength=function(){return this._maxBufferLength},t.prototype.getBufferController=function(){var e=this;return{setMaxBufferLength:function(t){if(t<0)throw new Error(\"Max buffer length cannot be < 0.\");e._logger.debug(\"Updating max buffer length.\",t),e._maxBufferLength=t,e._playlistSegmentRetriever?e._playlistSegmentRetriever.updateMaxBufferLength(t):e._logger.debug(\"Cannot update right now. Playlist segment retriever doesn't exist.\")}}},t.prototype.getUrlController=function(){var e=this;return{updateUrl:function(t){e._logger.debug(\"Updating URL.\",t),e._url=t;var r=e._playlist;return r?(e._playlistRetrieveJob&&(e._playlistRetrieveJob.abort(),e._playlistRetrieveJob=null,e._logger.debug(\"Aborted playlist retrieve job.\")),e._playlistSegmentRetriever&&(e._playlistSegmentRetriever.switchPlaylist(null),e._logger.debug(\"Removed current URL.\")),e._playlist=null,void e._retrievePlaylist()):void e._logger.debug(\"Cannot update right now. Playlist doesn't exist yet.\")}}},t.prototype.getMemoryCacheMaxSize=function(){return null!==this._cacheSize?this._cacheSize:D},t.prototype.getMemoryCacheUsage=function(){return this._playlistSegmentRetriever?this._playlistSegmentRetriever.getCacheUsage():0},t.prototype.getMemoryCacheController=function(){var e=this;return{setMaxCacheSize:function(t){if(t<0)throw new Error(\"Max size cannot be < 0.\");e._logger.debug(\"Updating maximum cache size.\",t),e._cacheSize=t,e._playlistSegmentRetriever&&e._playlistSegmentRetriever.updateCacheSize(t)}}},t.prototype._canPlay=function(){var t=this;return u.MSE.isSupported()?e.prototype._canPlay.call(this).then(function(e){if(e!==!0)return y.resolve(e);var r=t.__descriptor.getSegmentFormat();if(!n(r))return t._logger.debug(\"Format could not be determined.\"),y.resolve(new _.NoFormatDeterminedError);var o=t._findTransmuxer(r);if(!o)return t._logger.debug(\"No transmuxer found.\"),y.resolve(new h.NoTransmuxerError);var i=o.getOutputFormat(),a=r;return t._transmuxerAndMSEType={transmuxer:o,mseType:t._buildMimeTypeAndCodecString(i,a)},y.resolve(!0)}):(this._logger.debug(\"MSE not supported.\"),y.resolve(!1))},t.prototype._canPlayProtocol=function(e){return\"hls\"===e.name},t.prototype._canPlayType=function(e){return\"application/x-mpegURL\"===e},t.prototype._retrieveDuration=function(){return this._retrieveDurationDeferred.promise},t.prototype._signalReady=function(){this._html5PlayerReady=!0,this._initialPlaylistRetrieveCompleted&&e.prototype._signalReady.call(this)},t.prototype._initialize=function(){var t=this.__playerDependencies;if(null===this._maxBufferLength)if(void 0!==t.maxBufferLength){if(t.maxBufferLength<0)return void this._triggerError(new E(\"maxBufferLength cannot be < 0.\"));this._maxBufferLength=t.maxBufferLength}else this._maxBufferLength=M;if(this._logger.debug(\"Initialized max buffer length.\",this._maxBufferLength),null===this._cacheSize)if(void 0!==t.memoryCacheSize){if(t.memoryCacheSize<0)return void this._triggerError(new E(\"memoryCacheSize cannot be < 0.\"));this._cacheSize=t.memoryCacheSize}else this._cacheSize=D;this._logger.debug(\"Initialized cache size.\",this._cacheSize),e.prototype._initialize.call(this),this._retrievePlaylist()},t.prototype._initMediaElement=function(t,r){if(this._simpleMSE&&(this._simpleMSE.kill(),this._simpleMSE=null,this._logger.debug(\"Killed SimpleMSE.\")),this._mse&&(this._mse.kill(),this._mse=null,this._logger.debug(\"Killed MSE.\")),null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug(\"Cancelled seek attempt timer.\")),this._onFirstSegmentRetrieved=null,this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null),null===r)e.prototype._initMediaElement.call(this,t,null);else{this._initMSE();var n=this._mse.getUrl();this._logger.debug(\"Setting MSE url.\",n),e.prototype._initMediaElement.call(this,t,n)}},t.prototype._shouldBeEnded=function(){if(!x)return e.prototype._shouldBeEnded.call(this);if(e.prototype._shouldBeEnded.call(this))return!0;if(!this.getMediaElement())return!1;var t=this._duration;return this._stallDetected&&null!==t&&this._getTruePosition()>=t-k},t.prototype._getTruePosition=function(){var e=this.getMediaElement();if(!e)throw new Error(\"Media element should exist.\");return this._startPositionOffset+this._getMediaElementPosition()},t.prototype._handleSeekChange=function(t){e.prototype._handleSeekChange.call(this,t),this._playlistSegmentRetriever&&(this._logger.debug(\"Explicitly updating playlist segment retriever, as seek requested.\"),this._playlistSegmentRetriever.update(),this._findSegmentAndAppendToMSE())},t.prototype._performSeek=function(t,r){var n=this,o=this,i=o._simpleMSE,a=o._mse,s=this.getMediaElement();if(!a)throw new Error(\"MSE should exist.\");if(!s)throw new Error(\"Media element should exist.\");var u=!s.paused;null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug(\"Cancelled previous seek attempt timer.\")),this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null,this._logger.debug(\"Removed previous loaded metadata event handler.\")),i&&i.kill(),a.kill(),this._logger.debug(\"SimpleMSE and MSE destroyed.\"),this._startPositionOffset=t;var l=null;this._onFirstSegmentRetrieved=function(e){return l=e},this._logger.debug(\"Initializing MSE and SimpleMSE for new position.\"),this._initMSE();var c=this._mse.getUrl();if(this._logger.debug(\"Updated media element MSE src.\",c),e.prototype._initMediaElement.call(this,s,c),u){this._logger.debug(\"Calling play() on media element as it was playing previously.\");var d=s.play();d&&d.catch&&d.catch(function(e){\"AbortError\"!==e.name&&(n._logger.error(\"Unexpected play() error.\",e),n._triggerError(new b(\"Exception from calling play() after seek.\",e)))})}var f=function(e){(T&&T.major<11||A)&&e<I&&(n._logger.debug(\"Tweaking offset to fix glitch issue.\"),e=I);var t=function(){n._startPositionOffset=Math.max(0,n._startPositionOffset-e),n._logger.debug(\"Updated start position offset.\",n._startPositionOffset,e);var t=function(){n._seekAttemptTimer=null,n._logger.debug(\"Attempting to seek to the required offset.\",e),s.currentTime=e/1e3;var o=1e3*s.currentTime;Math.abs(o-e)<=100?(n._logger.debug(\"Seeked to the required offset.\",o),r()):(n._logger.warn(\"Seek attempt failed. Trying again shortly.\",o),n._seekAttemptTimer=window.setTimeout(t,50))};t()};n._onFirstSegmentRetrieved=null,O||s.readyState===s.HAVE_METADATA?(n._logger.debug(\"Media element has metadata. Seeking to offset.\"),t()):(n._logger.debug(\"Media element has not loaded metadata. Waiting for metadata...\"),n._seekMetadataEventHandle=n._listenToOnce(\"loadedmetadata\",function(){n._seekMetadataEventHandle=null,n._logger.debug(\"Got metadata. Seeking to offset.\"),t()},{earlyAttach:!0}))};null!==l?(this._logger.debug(\"First segment already retrieved. Preparing to seek to initial offset.\"),f(l)):(this._logger.debug(\"Waiting for first segment to be retrieved.\"),this._onFirstSegmentRetrieved=function(e){n._logger.debug(\"First segment retrieved. Preparing to seek to initial offset.\"),f(e)})},t.prototype._kill=function(){this._simpleMSE&&(this._logger.debug(\"Killing SimpleMSE.\"),this._simpleMSE.kill(),this._simpleMSE=null),this._mse&&(this._logger.debug(\"Killing MSE.\"),this._mse.kill(),this._mse=null),this._playlistRetrieveJob&&(this._logger.debug(\"Aborting playlist retrieve job.\"),this._playlistRetrieveJob.abort(),this._playlistRetrieveJob=null),this._playlistSegmentRetriever&&(this._logger.debug(\"Killing playlist segment retriever.\"),this._playlistSegmentRetriever.kill(),this._playlistSegmentRetriever=null),this._playlist=null,e.prototype._kill.call(this)},t.prototype._initMSE=function(){var e=this;if(!this._transmuxerAndMSEType)throw new Error(\"Transmuxer should have been configured.\");this._lastSegmentAppended=null;var t=!1;T&&T.major<10&&this._transmuxerAndMSEType.transmuxer===a.MP3ToMP4Transmuxer&&(t=!0);var r=new u.MSE(this._transmuxerAndMSEType.mseType,this._logger,t),n=new l.SimpleMSE(r,function(){return e.getSegmentDataToAppendNext()},function(){return e._getMediaElementPosition()},function(t){e._triggerError(new d.AppendError(t))},this._logger);n.onAppendQueued.subscribe(this._onSegmentAppendQueued.dispatch),n.onAppendEnd.subscribe(this._onSegmentAppendEnd.dispatch),this._simpleMSE=n,n.start(),this._mse=r,r.whenInitialized().catch(function(t){t!==u.killedError&&(e._logger.error(\"Error during mse initialization.\",t),e._triggerError(new f.InitializeError(t)))})},t.prototype._getMediaElementPosition=function(){var e=this.getMediaElement();if(!e)throw new Error(\"No media element.\");return 1e3*e.currentTime},t.prototype._whenPlaylistRetrieved=function(){var t=this,r=this._playlist;if(!r)throw new Error(\"Playlist should have been retrieved.\");var n=!this._initialPlaylistRetrieveCompleted;if(n)this._initialPlaylistRetrieveCompleted=!0,this._playlistDuration=r.getTotalDuration(),this._retrieveDurationDeferred.resolve(this._playlistDuration);else{var o=r.getTotalDuration();if(this._playlistDuration!==o)return this._logger.error(\"The duration from the new URL did not match the previous one.\"),void this._triggerError(new w(\"The duration from the new URL did not match the previous one.\",{oldDuration:this._playlistDuration,newDuration:o}))}if(!this._transmuxerAndMSEType)throw new Error(\"Transmuxer should have been configured.\");if(this._playlistSegmentRetriever)this._logger.debug(\"Switching playlist for playlist segment retriever.\"),this._playlistSegmentRetriever.switchPlaylist(r);else{var i=this._maxBufferLength;if(null===i)throw new Error(\"maxBufferLength should have been initiaized by now.\");this._logger.debug(\"Creating playlist segment retriever.\");var s=this._cacheSize;if(null===s)throw new Error(\"cacheSize should be set.\");var u=new a.PlaylistSegmentRetriever({playlist:r,getPosition:function(){return t.getPosition()},maxBufferLength:i,cacheSize:s,transmuxer:this._transmuxerAndMSEType.transmuxer,logger:this._logger});u.onSegmentRequestQueued.subscribe(this._onSegmentRequestQueued.dispatch),u.onSegmentRequestStart.subscribe(this._onSegmentRequestStart.dispatch),u.onSegmentRetrieved.subscribe(this._onSegmentRetrieved.dispatch),u.onSegmentRequestFailed.subscribe(this._onSegmentRequestFailed.dispatch),u.onSegmentDecryptionStart.subscribe(this._onSegmentDecryptionStart.dispatch),u.onSegmentDecryptionEnd.subscribe(this._onSegmentDecryptionEnd.dispatch),u.onSegmentTransmuxStart.subscribe(this._onSegmentTransmuxStart.dispatch),u.onSegmentTransmuxEnd.subscribe(this._onSegmentTransmuxEnd.dispatch),this._playlistSegmentRetriever=u,u.onError.subscribe(function(e){t._logger.error(\"Error from playlist segment retriever.\",e),e instanceof a.retrievalErrors.RetrievalError?t._triggerError(new p.RetrievalError(e)):t._triggerError(new b(\"Unexpected error when trying to retrieve segment.\",e))}),u.onSegmentReady.subscribe(function(e){var r=e.eventRepresentation,n=v();t._logger.debug(\"Segment ready.\",r),t._findSegmentAndAppendToMSE(),t._onSegmentReady.dispatch({segment:r},{time:n})})}this._initialPlaylistRetrieveCompleted=!0,n&&this._html5PlayerReady&&e.prototype._signalReady.call(this)},t.prototype._findSegmentAndAppendToMSE=function(){var e=this._simpleMSE;if(e&&e.waitingForSegmentData()){var t=this.getSegmentDataToAppendNext();t&&(this._logger.debug(\"Providing segment to SimpleMSE.\",t.eventRepresentation),e.provideNextSegmentData(t))}},t.prototype._retrievePlaylist=function(){var e=this;if(this._playlist)throw new Error(\"Playlist already exists.\");var t=this.__playerDependencies,r=t.playlistLoader,n=t.segmentLoader,o=t.keyLoader,i=t.isPlaylistResponseCodeAcceptable,s=t.isPlaylistResponseCodeRetryable,u=t.isSegmentResponseCodeAcceptable,l=t.isSegmentResponseCodeRetryable,d=t.isKeyResponseCodeAcceptable,f=t.isKeyResponseCodeRetryable;this._logger.debug(\"Creating playlist.\",this._url);var h=new a.Playlist({url:this._url,segmentFormat:this.__descriptor.getSegmentFormat(),playlistLoader:r,segmentLoader:n,keyLoader:o,isPlaylistResponseCodeAcceptable:i,isPlaylistResponseCodeRetryable:s,isSegmentResponseCodeAcceptable:u,isSegmentResponseCodeRetryable:l,isKeyResponseCodeAcceptable:d,isKeyResponseCodeRetryable:f,logger:this._logger});h.onPlaylistRequestQueued.subscribe(this._onPlaylistRequestQueued.dispatch),h.onPlaylistRequestStart.subscribe(this._onPlaylistRequestStart.dispatch),h.onPlaylistRetrieved.subscribe(this._onPlaylistRetrieved.dispatch),h.onPlaylistRequestFailed.subscribe(this._onPlaylistRequestFailed.dispatch),h.onInitDataRequestQueued.subscribe(this._onInitDataRequestQueued.dispatch),h.onInitDataRequestStart.subscribe(this._onInitDataRequestStart.dispatch),h.onInitDataRetrieved.subscribe(this._onInitDataRetrieved.dispatch),h.onInitDataRequestFailed.subscribe(this._onInitDataRequestFailed.dispatch),h.onKeyRequestQueued.subscribe(this._onKeyRequestQueued.dispatch),h.onKeyRequestStart.subscribe(this._onKeyRequestStart.dispatch),h.onKeyRetrieved.subscribe(this._onKeyRetrieved.dispatch),h.onKeyRequestFailed.subscribe(this._onKeyRequestFailed.dispatch),h.onPlaylistParseStart.subscribe(this._onPlaylistParseStart.dispatch),h.onPlaylistParseEnd.subscribe(this._onPlaylistParseEnd.dispatch),this._playlist=h,this._playlistRetrieveJob=this._playlist.retrieve(),this._playlistRetrieveJob.onCompletion(function(){var t=e._playlist.getType();t!==a.PlaylistType.VOD?(e._logger.error(\"Unsupported playlist type.\",t),e._triggerError(new c.UnsupportedPlaylistTypeError)):(e._logger.debug(\"Playlist retrieved.\"),e._whenPlaylistRetrieved())}),this._playlistRetrieveJob.onError(function(t){t!==R&&(e._logger.error(\"Error when retrieving playlist.\",t),t instanceof a.retrievalErrors.RetrievalError?e._triggerError(new p.RetrievalError(t)):e._triggerError(new b(\"Unexpected error when retrieving playlist.\",t)))})},t.prototype._findTransmuxer=function(e){var t=this,r=a.TransmuxerFactory.retrieveTransmuxers(e);this._logger.info(\"Finding a transmuxer...\",e);var n=g(r,function(r){return u.MSE.isSupported(t._buildMimeTypeAndCodecString(r.getOutputFormat(),e))})||null;return n?this._logger.info(\"Transmuxer found.\",n.getInputFormat(),n.getOutputFormat()):this._logger.warn(\"No transmuxer found.\"),n},t.prototype.getSegmentDataToAppendNext=function(){var e=this._lastSegmentAppended;this._logger.debug(\"Looking for segment to append next.\",!!e);var t=this._playlistSegmentRetriever;if(!t)return this._logger.debug(\"No segment retriever.\"),null;if(e){var r=t.getSegmentsWithData(),n=r[r.map(function(e){return e.segment}).indexOf(e)+1];return n?(this._logger.debug(\"Found segment.\",n.eventRepresentation),this._lastSegmentAppended=n.segment,{data:n.data,eventRepresentation:n.eventRepresentation}):(this._logger.debug(\"No segment found.\"),e.isFinalSegment()&&(this._logger.debug(\"The last segment we appended was the last one in the stream. Signalling EOS.\"),this._signalEOS()),null)}var o=this.getPosition(),n=g(t.getSegmentsWithData(),function(e){return e.segment.getTimeRange().containsTime(o)});if(!n)return this._logger.debug(\"No segment found.\",o),null;var i=o-n.segment.getTimeRange().start,a=this.getMediaElement();if(!a)throw new Error(\"Media element should exist.\");this._logger.debug(\"Found initial segment.\",n.eventRepresentation),this._lastSegmentAppended=n.segment,this._onFirstSegmentRetrieved&&this._onFirstSegmentRetrieved(i);var s=n.data,u=n.initData,l=s;return u&&(this._logger.debug(\"Prepending init data.\"),l=new Uint8Array(u.length+s.length),l.set(u,0),l.set(s,u.length)),{data:l,eventRepresentation:n.eventRepresentation}},t.prototype._signalEOS=function(){var e=this;this._logger.debug(\"Signalling EOS.\"),this._simpleMSE&&(this._simpleMSE.kill(),this._logger.debug(\"Killed SimpleMSE.\"),this._simpleMSE=null);var t=this._mse;t&&!t.eosSignalled()&&t.signalEOS().catch(function(r){t===e._mse&&(e._logger.error(\"Error occurred when signalling EOS.\",r),e._triggerError(new d.AppendError(r)))})},t}(s.HTML5Player);t.HLSMSEPlayer=C},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(9),i=n.helpers.deferred.buildDeferred,a=o.helpers.timeRanges.buildTimeRanges,s=n.helpers.Promise,u=n.logger.prefixLogger,l=n.logger.noOpLogger,c=/(MSIE )|(Trident\\/)/,d=n.helpers.browser.isSafari(),f='audio/mp4; codecs=\"mp3\"',p=\"audio/mpeg\",h='audio/webm; codecs=\"opus\"',_=n.helpers.browser.getSafariVersion(),g=n.helpers.browser.getChromeVersion();t.killedError=new Error(\"MSE killed.\");var y=function(){function e(e,t,r){var n=this.constructor;if(void 0===t&&(t=l),void 0===r&&(r=!1),this._sourceBuffer=null,this._initialized=!1,this._initializeDeferred=i(),this._whenIdleDeferred=i(),this._error=null,this._dead=!1,this._eosSignalled=!1,this._pendingActions=[],this._currentAction=null,this._logger=u(t,\"MSE\"),this._onMediaSourceInit=this._onMediaSourceInit.bind(this),this._onMediaSourceEnded=this._onMediaSourceEnded.bind(this),this._onMediaSourceError=this._onMediaSourceError.bind(this),this._onSourceBufferUpdateEnd=this._onSourceBufferUpdateEnd.bind(this),this._onSourceBufferError=this._onSourceBufferError.bind(this),!n.isSupported(e))throw this._logger.error(\"Not supported.\"),new Error(\"Not supported.\");d&&e===f&&(e=\"audio/mp4\"),this._type=e,this._useSegmentsMode=r,this._mediaSource=new MediaSource,this._mediaSource.addEventListener(\"sourceopen\",this._onMediaSourceInit,!1),this._mediaSource.addEventListener(\"error\",this._onMediaSourceError,!1),this._url=URL.createObjectURL(this._mediaSource),this._logger.debug(\"Created URL.\",this._url)}return e.isSupported=function(e){return!c.test(window.navigator.userAgent)&&\"MediaSource\"in window&&(!e||!(!d||e!==f)||!(_&&_.major<10&&e===p)&&!(g&&g.major<50&&e===h)&&MediaSource.isTypeSupported(e))},e.prototype.whenInitialized=function(){return this._initializeDeferred.promise},e.prototype.whenIdle=function(){return this._whenIdleDeferred?this._whenIdleDeferred.promise:s.resolve(void 0)},e.prototype.isIdle=function(){return this._dead||!this._whenIdleDeferred},e.prototype.hasInitialized=function(){return this._initialized},e.prototype.getError=function(){return this._error},e.prototype.getUrl=function(){return this._ensureNotDead(),this._url},e.prototype.getBuffered=function(){return this._ensureNotDead(),this._sourceBuffer?a(this._sourceBuffer.buffered):[]},e.prototype.append=function(e){this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug(\"append() called.\");var t=i();return this._pendingActions.push({type:\"append\",data:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.remove=function(e){if(0===e.duration)throw new Error(\"Remove range must have a duration > 0.\");this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug(\"remove() called.\",e);var t=i();return this._pendingActions.push({type:\"remove\",range:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.signalEOS=function(){this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug(\"signalEOS() called.\"),this._eosSignalled=!0;var e=i();return this._pendingActions.push({type:\"eos\",deferred:e}),this._performNextAction(),e.promise},e.prototype.eosSignalled=function(){return this._eosSignalled},e.prototype.kill=function(){if(!this._dead){if(this._logger.debug(\"kill() called.\"),this._dead=!0,this._sourceBuffer){this._sourceBuffer.removeEventListener(\"updateend\",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.removeEventListener(\"error\",this._onSourceBufferError,!1);try{this._mediaSource.removeSourceBuffer(this._sourceBuffer)}catch(e){this._logger.error(\"Error from removeSourceBuffer()\",e)}}this._mediaSource.removeEventListener(\"sourceopen\",this._onMediaSourceInit,!1),this._mediaSource.removeEventListener(\"sourceended\",this._onMediaSourceEnded,!1),this._mediaSource.removeEventListener(\"error\",this._onMediaSourceError,!1),URL.revokeObjectURL(this._url);var e=this._currentAction?[this._currentAction]:[];e=e.concat(this._pendingActions),e.forEach(function(e){e.deferred.reject(t.killedError)}),this._whenIdleDeferred||(this._whenIdleDeferred=i()),this._whenIdleDeferred.reject(t.killedError),this._initialized||this._initializeDeferred.reject(this._error||t.killedError),this._pendingActions.length=0,this._logger.debug(\"Killed.\")}},e.prototype._ensureInitialized=function(){if(!this._initialized)throw new Error(\"Not initialized yet.\")},e.prototype._ensureNotEOS=function(){if(this._eosSignalled)throw new Error(\"EOS signalled.\")},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error(\"MSE is dead.\")},e.prototype._onMediaSourceInit=function(){this._logger.debug(\"MSE initialized.\"),this._mediaSource.removeEventListener(\"sourceopen\",this._onMediaSourceInit,!1);try{this._logger.debug(\"Creating source buffer.\",this._type),this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.mode=this._useSegmentsMode?\"segments\":\"sequence\",this._logger.debug(\"Using append mode: \"+this._sourceBuffer.mode),this._sourceBuffer.addEventListener(\"updateend\",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.addEventListener(\"error\",this._onSourceBufferError,!1)}catch(e){this._handleError(e)}this._initializeDeferred.resolve(void 0),this._whenIdleDeferred.resolve(void 0),this._initialized=!0,this._performNextAction()},e.prototype._onMediaSourceEnded=function(){this._onSourceBufferUpdateEnd()},e.prototype._onMediaSourceError=function(e){this._handleError(e)},e.prototype._handleError=function(e){this._ensureNotDead(),this._logger.error(\"Error occurred.\",e),this._error=e||new Error(\"Unknown error.\"),this.kill()},e.prototype._onSourceBufferUpdateEnd=function(){var e=this._currentAction;return this._logger.debug(\"Update ended.\",this.getBuffered()),e?\"append\"===e.type&&0===n.TimeRange.getCoverage(this.getBuffered()).end?void this._handleError(new Error(\"Buffer end point is still 0 after an append.\")):(this._currentAction=null,e.deferred.resolve(void 0),void this._performNextAction()):void this._handleError(new Error(\"No action in progress.\"))},e.prototype._onSourceBufferError=function(e){this._handleError(e)},e.prototype._performNextAction=function(){var e=this._whenIdleDeferred;if(!this._currentAction&&this._sourceBuffer){var t=this._pendingActions.shift();if(!t)return this._logger.debug(\"No more actions.\"),void(e&&(this._whenIdleDeferred=null,e.resolve(void 0)));switch(e||(this._whenIdleDeferred=i()),this._currentAction=t,this._logger.debug(\"Performing next action...\"),t.type){case\"append\":var r=n.TimeRange.getCoverage(this.getBuffered());try{if(\"segments\"===this._sourceBuffer.mode){var o=r.end/1e3;this._logger.debug(\"Setting timestampOffset because detected safari.\",o),this._sourceBuffer.timestampOffset=o}this._logger.debug(\"Calling appendBuffer().\"),this._sourceBuffer.appendBuffer(t.data)}catch(e){this._handleError(e)}break;case\"remove\":try{var a=t.range;this._logger.debug(\"Calling remove().\",a.start,a.end),this._sourceBuffer.remove(a.start/1e3,a.end/1e3)}catch(e){this._handleError(e)}break;case\"eos\":try{this._logger.debug(\"Calling endOfStream().\"),this._sourceBuffer.removeEventListener(\"updateend\",this._onSourceBufferUpdateEnd,!1),this._mediaSource.addEventListener(\"sourceended\",this._onMediaSourceEnded,!1),this._mediaSource.endOfStream()}catch(e){this._handleError(e)}}}},e}();t.MSE=y},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=n.helpers.Promise,i=n.eventDispatcher.EventDispatcher,a=n.logger.prefixLogger,s=n.logger.noOpLogger,u=7e3,l=2e4,c=function(){function e(e,t,r,n,o){void 0===o&&(o=s);var u=this;this._onAppendQueued=new i,this._onAppendEnd=new i,this._updateTimerId=null,this._gcTimerId=null,this._waitingForData=!1,this._started=!1,this._resettingPromise=null,this._error=null,this._logger=a(o,\"SimpleMSE\"),this.onAppendQueued=this._onAppendQueued.getHandle(),this.onAppendEnd=this._onAppendEnd.getHandle(),this._mse=e,this._getNextSegmentData=t,this._getPosition=r,this._onError=n,e.whenInitialized().then(function(){!u._error&&u._started&&(u._logger.debug(\"MSE initialized. Preparing to update.\"),u._prepareUpdate())}).catch(function(e){u._error||(u._logger.error(\"Error when waiting for MSE to initialize.\",e),u._handleError(e||new Error(\"Error waiting for MSE to initialize.\")))})}return e.prototype.start=function(){if(this._checkNotErrored(),this._resettingPromise)throw new Error(\"start() is not allowed whilst a reset is in progress.\");if(this._started)throw new Error(\"Already started. reset() first.\");this._logger.debug(\"start() called.\"),this._scheduleGC(),this._started=!0,this._prepareUpdate()},e.prototype.kill=function(){this._error||(this._logger.debug(\"kill() called.\"),this._clearTimers(),this._error=new Error(\"Killed.\"),this._logger.debug(\"Killed.\"))},e.prototype.reset=function(){var e=this;if(this._checkNotErrored(),this._logger.debug(\"reset() called.\"),this._resettingPromise)return this._logger.debug(\"Reset already in progress.\"),this._resettingPromise;if(!this._started)return this._logger.debug(\"Nothing to do to, already reset.\"),o.resolve();var t=this._mse;return this._waitingForData=!1,\nthis._started=!1,this._clearTimers(),this._logger.debug(\"Waiting to clear MSE buffer...\"),this._resettingPromise=t.whenIdle().then(function(){if(e._error)throw e._error;e._logger.debug(\"Clearing MSE buffer.\");var r=t.getBuffered(),o=n.TimeRange.getCoverage(r);if(o.duration>0)return t.remove(o)}).then(function(){e._logger.debug(\"MSE buffer cleared.\"),e._resettingPromise=null}).catch(function(t){e._logger.error(\"Error resetting MSE.\",t);var r=t||new Error(\"Error resetting MSE.\");throw e._handleError(r),r})},e.prototype.waitingForSegmentData=function(){return this._checkNotErrored(),this._waitingForData},e.prototype.provideNextSegmentData=function(e){if(this._checkNotErrored(),!this._waitingForData)throw new Error(\"Not waiting for data.\");this._logger.debug(\"Segment data provided.\"),this._waitingForData=!1,this._update(e)},e.prototype._prepareUpdate=function(){if(!this._updateTimerId){var e=this._mse;if(e.hasInitialized()){var t=n.TimeRange.getCoverage(e.getBuffered());if(t.end<=this._getPosition()+u){this._logger.debug(\"Requesting next segment data.\");var r=this._getNextSegmentData();r?(this._logger.debug(\"Got segment data.\"),this._update(r)):(this._logger.debug(\"Did not get any data.\"),this._waitingForData=!0)}else this._scheduleUpdate()}}},e.prototype._gc=function(){var e=this,t=this._mse;if(!t.hasInitialized())return void this._scheduleGC();var r=n.TimeRange.getCoverage(t.getBuffered()),o=this._getPosition()-5e3;if(r.start<o){var i=new n.TimeRange(r.start,o-r.start);this._logger.debug(\"Removing media that has been played.\",i),t.remove(i).then(function(){e._logger.debug(\"Removed media that has been played.\",i),e._error||e._scheduleGC()}).catch(function(t){e._logger.error(\"Error when attempting to remove media that has been played.\",i,t),e._error||e._scheduleGC()})}else this._scheduleGC()},e.prototype._update=function(e){var t=this;this._logger.debug(\"Updating...\");var r=this._mse;this._onAppendQueued.dispatch({segment:e.eventRepresentation}),this._logger.debug(\"Appending...\"),r.append(e.data).then(function(){t._logger.debug(\"Appended.\"),t._onAppendEnd.dispatch({segment:e.eventRepresentation}),t._resettingPromise||t._error||t._prepareUpdate()}).catch(function(e){t._error||(t._logger.error(\"Error updating MSE.\",e),t._handleError(e||new Error(\"Error updating MSE.\")))})},e.prototype._scheduleUpdate=function(){var e=this;this._updateTimerId=window.setTimeout(function(){e._updateTimerId=null,e._prepareUpdate()},500)},e.prototype._scheduleGC=function(){var e=this;this._gcTimerId||(this._gcTimerId=window.setTimeout(function(){e._gcTimerId=null,e._gc()},l))},e.prototype._checkNotErrored=function(){if(this._error)throw this._error},e.prototype._clearTimers=function(){this._updateTimerId&&(this._logger.debug(\"Clearing update timer.\"),window.clearTimeout(this._updateTimerId),this._updateTimerId=null),this._gcTimerId&&(window.clearTimeout(this._gcTimerId),this._gcTimerId=null)},e.prototype._handleError=function(e){this._error||(this._error=e,this._logger.error(\"Error occurred.\",e),this._clearTimers(),this._onError(e))},e}();t.SimpleMSE=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085;var n=r(11);t.HLSMSEPlayer=n.HLSMSEPlayer;var o=r(10);t.errors=o.errors;var i=r(2);t.retrievalErrors=i.retrievalErrors}])})},function(e,t,r){!function(t,n){e.exports=n(r(2),r(5),r(6))}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=91)}([function(t,r){t.exports=e},function(e,t,r){\"use strict\";var n=r(4);e.exports=function(e){if(!n(e))throw new TypeError(\"Cannot use null or undefined\");return e}},function(e,t,r){\"use strict\";e.exports=function(e){if(\"function\"!=typeof e)throw new TypeError(e+\" is not a function\");return e}},function(e,t,r){\"use strict\";e.exports=r(72)()?Symbol:r(74)},function(e,t,r){\"use strict\";var n=r(17)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){}return e.prototype.getCode=function(){return\"GENERIC\"},e}();t.RetrievalError=n},function(e,t,r){\"use strict\";var n,o=r(10),i=r(19),a=r(58),s=r(22);n=e.exports=function(e,t){var r,n,a,u,l;return arguments.length<2||\"string\"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(r=a=!0,n=!1):(r=s.call(e,\"c\"),n=s.call(e,\"e\"),a=s.call(e,\"w\")),l={value:t,configurable:r,enumerable:n,writable:a},u?o(i(u),l):l},n.gs=function(e,t,r){var n,u,l,c;return\"string\"!=typeof e?(l=r,r=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==r?r=void 0:a(r)||(l=r,r=void 0):(l=t,t=r=void 0),null==e?(n=!0,u=!1):(n=s.call(e,\"c\"),u=s.call(e,\"e\")),c={get:t,set:r,configurable:n,enumerable:u},l?o(i(l),c):c}},function(e,t,r){\"use strict\";var n=Object.prototype.toString,o=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===o}},function(e,t,r){\"use strict\";var n=Object.prototype.toString,o=n.call(\"\");e.exports=function(e){return\"string\"==typeof e||e&&\"object\"==typeof e&&(e instanceof String||n.call(e)===o)||!1}},function(e,r){e.exports=t},function(e,t,r){\"use strict\";e.exports=r(53)()?Object.assign:r(54)},function(e,t,r){\"use strict\";e.exports=r(20)()?Object.setPrototypeOf:r(21)},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(5),i=function(e){function t(t){var r=e.call(this)||this;return r._code=t,r}return n(t,e),t.prototype.getCode=function(){return\"OGG_PARSER.\"+this._code},t}(o.RetrievalError);t.OggParserError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(5),i=function(e){function t(t){var r=e.call(this)||this;return r._statusCode=t,r}return n(t,e),t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.getCode=function(){return\"UNACCEPTABLE_RESPONSE_STATUS_CODE\"},t}(o.RetrievalError);t.UnacceptableResponseStatusCodeError=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(81),i=r(13),a=r(30),s=r(28),u=r(87),l=n.helpers.abortableJob.AbortableJob,c=n.helpers.retry,d=c.retry,f=c.buildExponentialDelayCalculator,p=n.helpers.Promise,h=n.helpers.arrayBuffer.combine,_=n.eventDispatcher.EventDispatcher,g=n.logger.prefixLogger,y=n.logger.noOpLogger,v=function(){function e(e){var t=e.url,r=e.sequenceNumber,n=e.playlist,o=e.timeRange,a=e.encryptionConfig,c=e.initData,v=e.format,m=e.loader,E=e.playlistEventRepresentation,b=e.logger,w=void 0===b?y:b,S=e.delayCalculator,P=void 0===S?f():S,R=e.isResponseCodeAcceptable,T=void 0===R?function(e){return 200===e}:R,x=e.isResponseCodeRetryable,A=void 0===x?function(e){return!(e>=400&&e<500)}:x,O=this;this._onSegmentRequestQueued=new _,this._onSegmentRequestStart=new _,this._onSegmentRetrieved=new _,this._onSegmentRequestFailed=new _,this._onSegmentDecryptionStart=new _,this._onSegmentDecryptionEnd=new _,this._logger=g(w,\"Segment\"),this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this.onSegmentDecryptionStart=this._onSegmentDecryptionStart.getHandle(),this.onSegmentDecryptionEnd=this._onSegmentDecryptionEnd.getHandle(),this._sequenceNumber=r,this._playlist=n,this._timeRange=o,this._encryptionConfig=a||null,this._initData=c||null,this._format=v,this._loader=m,this._isResponseCodeAcceptable=T,this._isResponseCodeRetryable=A,this._downloadAbortableJob=new l(function(){var e=d(function(){return new l(function(){var e=new s.Segment(E,t,r);O._onSegmentRequestQueued.dispatch({segment:e});var n=O._loader.request({url:t});n.whenRequestStarted.then(function(){return O._onSegmentRequestStart.dispatch({segment:e})}),O._logger.debug(\"Requesting segment.\",t);var o=n.getResponse().then(function(r){if(!r)return O._logger.warn(\"Segment request timed out.\",t),O._onSegmentRequestFailed.dispatch({segment:e,statusCode:null}),{success:!1};var n=r.statusCode;if(O._isResponseCodeAcceptable(n)){var o=r.data;return o?(O._logger.debug(\"Got segment response.\",t,n),O._onSegmentRetrieved.dispatch({segment:e,statusCode:n}),{success:!0,result:{data:new Uint8Array(o),eventRepresentation:e}}):(O._logger.warn(\"Segment response contained no data.\",t,n),O._onSegmentRequestFailed.dispatch({segment:e,statusCode:n}),{success:!1})}return O._isResponseCodeRetryable(n)?(O._logger.debug(\"Segment response code was not acceptable. Will retry.\",t,n),O._onSegmentRequestFailed.dispatch({segment:e,statusCode:n}),{success:!1}):(O._logger.debug(\"Segment response code was not acceptable.\",t,n),O._onSegmentRequestFailed.dispatch({segment:e,statusCode:n}),p.reject(new i.UnacceptableResponseStatusCodeError(n)))});return{result:o,abort:function(){O._logger.debug(\"Aborting segment request.\",t),n.abort(),O._onSegmentRequestFailed.dispatch({segment:e,aborted:!0})}}})},P);return{result:e.whenComplete(),abort:function(){return e.abort()}}},{storeResult:!1}),this._retrieveAbortableJob=new l(function(){var e=O._downloadAbortableJob.run(),t=null,r=null,n=e.whenComplete().then(function(e){var n=e.data,o=e.eventRepresentation;return r=O._decrypt(n,o),r.whenComplete().then(function(e){O._initData&&(O._logger.debug(\"Prepending init data.\",o),e=h([O._initData,e]));var r=u.SegmentParserFactory.retrieveSegmentParser(O._format);return O._logger.debug(\"Parsing segment data.\",o,r.getFormat()),t=r.parseSegmentData(e,O,O._playlist),t.whenComplete().then(function(e){return O._logger.debug(\"Segment data ready.\",o),{data:e,eventRepresentation:o}})})});return{result:n,abort:function(){e.abort(),r&&r.abort(),t&&t.abort()}}},{storeResult:!1})}return e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e.prototype.isFinalSegment=function(){var e=this._playlist;return e.hasEnded()&&e.getStartingSequenceNumber()+e.getSegmentCount()-1===this._sequenceNumber},e.prototype.getTimeRange=function(){return this._timeRange},e.prototype.retrieveData=function(){return this._retrieveAbortableJob.run()},e.prototype._decrypt=function(e,t){var r=this,n=new l(function(){var n=r._encryptionConfig;if(!n)return{result:p.resolve(e)};r._logger.info(\"Finding a decryptor...\");var i=o.DecryptorFactory.retrieveDecryptor(n);if(!i)return r._logger.error(\"Could not find a decryptor.\"),{result:p.reject(new a.NoDecryptorError)};r._logger.info(\"Decryptor found.\"),r._onSegmentDecryptionStart.dispatch({segment:t});var s=i.decrypt(e,n);return s.then(function(){r._logger.debug(\"Decrypted.\"),r._onSegmentDecryptionEnd.dispatch({segment:t})}),{result:s}});return n.run()},e}();t.Segment=v},function(e,t,r){\"use strict\";function n(e){var t=e.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=r(39),a=r(40),s=o.helpers.Promise,u={rate:44100,id:3},l=16,c=2,d=u.rate,f=2,p=8;t.MP3ToMP4={getInputFormat:function(){return{mimeType:\"audio/mpeg\"}},getOutputFormat:function(){return{mimeType:\"audio/mp4\",audioCodec:{id:\"mp3\"}}},transmux:function(e){return new s(function(t,r){function o(e){h||(h=!0,r(e))}function s(e){h||t(e)}var h=!1;try{var _=[],g=new i.MP3Parser,y=new a.MP4Mux({audioTrackId:0,videoTrackId:-1,tracks:[{codecId:f,channels:c,samplerate:u.rate,samplesize:l,timescale:d}]});if(y.ondata=function(e){return _.push(e)},g.onFrame=function(e){try{var t=new Uint8Array(e.length+1),r=f<<4;r|=u.id<<2,r|=(16===l?1:0)<<1,r|=2===c?1:0,t[0]=r,t.set(e,1);var n=0;y.pushPacket(p,t,n)}catch(e){o(e)}},g.push(e.data),g.close(),y.flush(),0===_.length)o(new Error(\"There was no output.\"));else{var v=_.shift();v?s({initData:v,data:n(_)}):o(new Error(\"No init data.\"))}}catch(e){o(e)}})}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=n.helpers.Promise;t.PassThrough={getInputFormat:function(){return{}},getOutputFormat:function(){return{}},transmux:function(e){return o.resolve(e)}}},function(e,t,r){\"use strict\";e.exports=function(){}},function(e,t,r){\"use strict\";var n=r(4),o={function:!0,object:!0};e.exports=function(e){return n(e)&&o[typeof e]||!1}},function(e,t,r){\"use strict\";var n=r(4),o=Array.prototype.forEach,i=Object.create,a=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return o.call(arguments,function(e){n(e)&&a(Object(e),t)}),t}},function(e,t,r){\"use strict\";var n=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return\"function\"==typeof e&&o(e(t(null),i))===i}},function(e,t,r){\"use strict\";var n,o=r(18),i=r(1),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(e,t){if(i(e),null===t||o(t))return e;throw new TypeError(\"Prototype must be null or an object\")},e.exports=function(e){var t,r;return e?(2===e.level?e.set?(r=e.set,t=function(e,t){return r.call(n(e,t),t),e}):t=function(e,t){return n(e,t).__proto__=t,e}:t=function e(t,r){var o;return n(t,r),o=a.call(e.nullPolyfill,t),o&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,o&&s(e.nullPolyfill,\"__proto__\",u),t},Object.defineProperty(t,\"level\",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\");if(n){try{e=n.set,e.call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:(t={},t.__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),r(56)},function(e,t,r){\"use strict\";e.exports=r(64)()?String.prototype.contains:r(65)},function(e,t,r){\"use strict\";var n=r(7),o=r(8),i=r(67),a=r(70),s=r(71),u=r(3).iterator;e.exports=function(e){return\"function\"==typeof s(e)[u]?e[u]():n(e)?new i(e):o(e)?new a(e):new i(e)}},function(e,t,r){\"use strict\";var n,o=r(42),i=r(10),a=r(2),s=r(1),u=r(6),l=r(41),c=r(3),d=Object.defineProperty,f=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");f(this,{__list__:u(\"w\",s(e)),__context__:u(\"w\",t),__nextIndex__:u(\"w\",0)}),t&&(a(t.on),t.on(\"_add\",this._onAdd),t.on(\"_delete\",this._onDelete),t.on(\"_clear\",this._onClear))},delete n.prototype.constructor,f(n.prototype,i({_next:u(function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift(),void 0!==e)?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off(\"_add\",this._onAdd),this.__context__.off(\"_delete\",this._onDelete),this.__context__.off(\"_clear\",this._onClear),this.__context__=null)}),toString:u(function(){return\"[object \"+(this[c.toStringTag]||\"Object\")+\"]\"})},l({_onAdd:u(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,\"__redo__\",u(\"c\",[e]));this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:u(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,r){t>e&&(this.__redo__[r]=--t)},this)))}),_onClear:u(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),d(n.prototype,c.iterator,u(function(){return this}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.InitData=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.Key=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e){this._url=e}return e.prototype.getUrl=function(){return this._url},e}();t.Playlist=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t,r){this._playlist=e,this._url=t,this._sequenceNumber=r}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e}();t.Segment=n},function(e,t,r){\"use strict\";function n(e,t){return!(e.mimeType&&t.mimeType!==e.mimeType||e.audioCodec&&(!t.audioCodec||t.audioCodec.id!==e.audioCodec.id)||e.videoCodec&&(!t.videoCodec||t.videoCodec.id!==e.videoCodec.id))}Object.defineProperty(t,\"__esModule\",{value:!0}),t.isPartialMatch=n},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(5),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"NO_DECRYPTOR\"},t}(o.RetrievalError);t.NoDecryptorError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(5),i=function(e){function t(t){var r=e.call(this)||this;return r._details=t,r}return n(t,e),t.prototype.getDetails=function(){return this._details},t.prototype.getCode=function(){return\"PLAYLIST_PARSE\"},t}(o.RetrievalError);t.PlaylistParseError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(5),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return\"UNSUPPORTED_ENCRYPTION_ERROR\"},t}(o.RetrievalError);t.UnsupportedEncryptionError=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(25),i=r(26),a=r(27),s=r(28);!function(e){e.InitData=o.InitData,e.Key=i.Key,e.Playlist=a.Playlist,e.Segment=s.Segment}(n=t.events||(t.events={}))},function(e,t,r){\"use strict\";function n(e,t,r){var n=e.getTimeRange();return r!==t&&(r>t?n.end>t&&n.start<r:n.end>t||n.start<r)}Object.defineProperty(t,\"__esModule\",{value:!0});var o,i=r(0),a=r(9),s=r(12),u=i.helpers.find,l=i.eventDispatcher.EventDispatcher,c=i.helpers.abortableJob.abortedError,d=i.helpers.abortableJob.AbortableJob,f=i.logger.prefixLogger,p=i.logger.noOpLogger;!function(e){e[e.RETRIEVING_SEGMENT=0]=\"RETRIEVING_SEGMENT\",e[e.RETRIEVED_SEGMENT=1]=\"RETRIEVED_SEGMENT\",e[e.RETRIEVING_DATA=2]=\"RETRIEVING_DATA\",e[e.COMPLETE=3]=\"COMPLETE\"}(o||(o={}));var h=function(){function e(e){this._onSegmentRequestQueued=new l,this._onSegmentRequestStart=new l,this._onSegmentRetrieved=new l,this._onSegmentRequestFailed=new l,this._onSegmentDecryptionStart=new l,this._onSegmentDecryptionEnd=new l,this._onSegmentTransmuxStart=new l,this._onSegmentTransmuxEnd=new l,this._onSegmentReady=new l,this._onError=new l,this._segments=[],this._retrievingSegment=null,this._timerId=null,this._dead=!1;var t=e.playlist,r=e.getPosition,n=e.maxBufferLength,o=e.cacheSize,i=e.transmuxer,a=e.logger,s=void 0===a?p:a;if(this._logger=f(s,\"PlaylistSegmentRetriever\"),t&&!t.hasRetrieveCompleted())throw new Error(\"Playlist retrieve has not completed.\");if(n<0)throw new Error(\"Max buffer length must be > 0.\");if(o<0)throw new Error(\"Cache size must be > 0.\");this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this.onSegmentDecryptionStart=this._onSegmentDecryptionStart.getHandle(),this.onSegmentDecryptionEnd=this._onSegmentDecryptionEnd.getHandle(),this.onSegmentTransmuxStart=this._onSegmentTransmuxStart.getHandle(),this.onSegmentTransmuxEnd=this._onSegmentTransmuxEnd.getHandle(),this.onSegmentReady=this._onSegmentReady.getHandle(),this.onError=this._onError.getHandle(),this._playlist=t,this._transmuxer=i,this._getPosition=r,this._maxBufferLength=n,this._cacheSize=o,this.update()}return e.prototype.updateMaxBufferLength=function(e){if(this._ensureNotDead(),e<0)throw new Error(\"Max buffer length must be > 0.\");this._logger.debug(\"updateMaxBufferLength() called.\",e),this._maxBufferLength=e,this.update()},e.prototype.updateCacheSize=function(e){if(this._ensureNotDead(),e<0)throw new Error(\"Cache size must be > 0.\");this._logger.debug(\"updateCacheSize() called.\",e),this._cacheSize=e,this.update()},e.prototype.getCacheSize=function(){return this._cacheSize},e.prototype.getCacheUsage=function(){return this._segments.reduce(function(e,t){return t.state===o.COMPLETE?e+t.data.byteLength+(t.initData?t.initData.byteLength:0):e},0)},e.prototype.switchPlaylist=function(e){if(this._ensureNotDead(),e&&!e.hasRetrieveCompleted())throw new Error(\"Playlist retrieve has not completed.\");this._logger.debug(\"switchPlaylist() called.\"),this._abortCurrentRetrieve(),this._playlist=e,this._segments=this._segments.filter(function(e){return e.state===o.COMPLETE}),this.update()},e.prototype.getSegmentsWithData=function(){return this._ensureNotDead(),this._segments.filter(function(e){return e.state===o.COMPLETE}).map(function(e){if(e.state!==o.COMPLETE)throw new Error(\"Unexpected error.\");var t=e.segment,r=e.initData,n=e.data,i=e.eventRepresentation;return{segment:t,initData:r,data:n,eventRepresentation:i}})},e.prototype.update=function(){var e=this;this._ensureNotDead(),this._timerId&&(this._logger.debug(\"Cancelling update timer.\"),window.clearTimeout(this._timerId),this._timerId=null);var t=this._getPosition(),r=t,n=0;this._segments.some(function(e){if(e.state!==o.COMPLETE)return!1;var i=e.segment.getTimeRange();return i.containsTime(n)&&(n=i.end),!(i.end<t)&&(i.start>r||(r=i.end,!1))});var i=t+this._maxBufferLength,a=function(){var t=e._playlist;if(t){var o=t.hasEnded()&&r===t.getTotalDuration();if(o)return r=n,t.getTotalDuration()+n<i}return r<i}();if(!a)return this._abortCurrentRetrieve(),this._garbageCollect(t),void this._scheduleNextUpdate();var s=u(this._segments,function(e){if(e.state===o.RETRIEVED_SEGMENT||e.state===o.RETRIEVING_DATA){var t=e.segment.getTimeRange();return t.containsTime(r)}return!1});s?this._retrieveSegmentData(s):this._retrieveSegment(r),this._garbageCollect(t)},e.prototype.kill=function(){this._dead||(this._logger.debug(\"kill() called.\"),this._abortCurrentRetrieve(),this._dead=!0,this._timerId&&(this._logger.debug(\"Cancelling update timer.\"),window.clearTimeout(this._timerId)),this._segments=[],this._logger.debug(\"Killed.\"))},e.prototype._retrieveSegmentData=function(e){var t=this;if(e.state!==o.RETRIEVED_SEGMENT&&e.state!==o.RETRIEVING_DATA)throw new Error(\"Segment in incorrect state for data to be retrieved.\");var r=this._retrievingSegment;if(!r||r.state!==o.RETRIEVING_DATA||e.segment!==r.segment){this._abortCurrentRetrieve();var n=new d(function(){var r=!1,n=e.segment.retrieveData();t._logger.debug(\"Retrieving segment data...\");var o=n.whenComplete().then(function(e){var n=e.data,o=e.eventRepresentation;if(r)throw c;return t._logger.debug(\"Retrieved segment data.\"),t._onSegmentTransmuxStart.dispatch({segment:o}),t._transmuxer.transmux(n).then(function(e){var n=e.data,i=e.initData;if(r)throw c;return t._onSegmentTransmuxEnd.dispatch({segment:o}),t._logger.debug(\"Transmuxed segment.\"),{data:n,initData:i,eventRepresentation:o}})});return{result:o,abort:function(){r=!0,n.abort()}}},{storeResult:!1}).run();n.onCompletion(function(r){var n=r.initData,i=r.data,a=r.eventRepresentation;t._retrievingSegment=null,t._segments.splice(t._segments.indexOf(e),1,{state:o.COMPLETE,initData:n,data:i,eventRepresentation:a,segment:e.segment}),t._logger.debug(\"Segment retrieve completed.\",a),t.update(),t._onSegmentReady.dispatch({segment:e.segment,initData:n,data:i,eventRepresentation:a})}),n.onError(function(e){e!==c&&(t._logger.error(\"Error retrieving segment data.\",e),t._scheduleNextUpdate(),e instanceof a.OggParserError&&(e=e instanceof a.ChecksumFailedError?new s.OggParserError(\"CHECKSUM_FAILED\"):e instanceof a.NoSegmentsInPageError?new s.OggParserError(\"NO_SEGMENTS_IN_PAGE\"):e instanceof a.PageFromDifferentBitstreamError?new s.OggParserError(\"PAGE_FROM_DIFFERENT_BITSTREAM\"):e instanceof a.PageSequenceNumberDidNotIncrementError?new s.OggParserError(\"SEQUENCE_NUMBER_DID_NOT_INCREMENT\"):e instanceof a.UnexpectedBOSError?new s.OggParserError(\"UNEXPECTED_BOS\"):e instanceof a.UnexpectedEOSError?new s.OggParserError(\"UNEXPECTED_EOS\"):new s.OggParserError(\"UNKNOWN\")),t._onError.dispatch(e))}),this._retrievingSegment={state:o.RETRIEVING_DATA,dataRetrieveJob:n,segment:e.segment}}},e.prototype._retrieveSegment=function(e){var t=this,r=this._retrievingSegment,n=this._playlist,i=n?n.getSegmentIndexContainingTime(e):null;if(!r||r.state!==o.RETRIEVING_SEGMENT||r.segmentIndex!==i)if(this._abortCurrentRetrieve(),n)if(null===i)this._scheduleNextUpdate();else{var a=n.getSegment(i);this._logger.debug(\"Retrieving segment.\",i),a.onCompletion(function(e){t._logger.debug(\"Retrieved segment.\",i),e.onSegmentRequestQueued.subscribe(t._onSegmentRequestQueued.dispatch),e.onSegmentRequestStart.subscribe(t._onSegmentRequestStart.dispatch),e.onSegmentRetrieved.subscribe(t._onSegmentRetrieved.dispatch),e.onSegmentRequestFailed.subscribe(t._onSegmentRequestFailed.dispatch),e.onSegmentDecryptionStart.subscribe(t._onSegmentDecryptionStart.dispatch),e.onSegmentDecryptionEnd.subscribe(t._onSegmentDecryptionEnd.dispatch),t._segments.splice(t._segments.indexOf(s),1);var r=e.getTimeRange(),n=t._segments.length;t._segments.some(function(e,t){return e.state!==o.RETRIEVING_SEGMENT&&e.segment.getTimeRange().start>r.start&&(n=t,!0)}),t._segments.splice(n,0,{state:o.RETRIEVED_SEGMENT,segment:e}),t._retrievingSegment=null,t.update()}),a.onError(function(e){e!==c&&(t._logger.error(\"Error retrieving segment.\",e),t._scheduleNextUpdate(),t._onError.dispatch(e))});var s={state:o.RETRIEVING_SEGMENT,segmentIndex:i,segmentRetrieveJob:a};this._segments.push(s),this._retrievingSegment=s}else this._logger.debug(\"Cannot retrieve segment as there is no playlist.\"),this._scheduleNextUpdate()},e.prototype._abortCurrentRetrieve=function(){var e=this._retrievingSegment;e&&(e.state===o.RETRIEVING_SEGMENT?(this._logger.debug(\"Aborting segment retrieve job.\"),e.segmentRetrieveJob.abort()):e.state===o.RETRIEVING_DATA&&(this._logger.debug(\"Aborting segment data retrieve job.\"),e.dataRetrieveJob.abort()),this._retrievingSegment=null)},e.prototype._garbageCollect=function(e){var t=this._segments,r=this._cacheSize,i=this.getCacheUsage();if(!(i<=r)){var a=this._playlist,s=a&&a.hasEnded()?a.getTotalDuration():1/0,u=e+this._maxBufferLength;u>s&&(u-=s,u>=e)||t.filter(function(t){return t.state===o.COMPLETE&&!n(t.segment,e,u)}).map(function(t){if(t.state!==o.COMPLETE)throw new Error(\"Unexpected error.\");var r=t.segment.getTimeRange(),n=r.start,i=Math.min(Math.abs(e-n),n+s-e);return{segment:t,distance:i,size:t.data.byteLength+(t.initData?t.initData.byteLength:0)}}).sort(function(e,t){return t.distance-e.distance}).some(function(e){return i<=r||(t.splice(t.indexOf(e.segment),1),i-=e.size,!1)})}},e.prototype._scheduleNextUpdate=function(){var e=this;this._timerId||(this._timerId=window.setTimeout(function(){e._timerId=null,e.update()},1e3))},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error(\"Playlist segment retriever has been killed.\")},e}();t.PlaylistSegmentRetriever=h},function(e,t,r){\"use strict\";function n(e){return 0===e.indexOf('\"')&&e.lastIndexOf('\"')===e.length-1?e.slice(1,-1):e}function o(e){0===e.indexOf(\"0x\")&&(e=e.substr(2));var t=new Uint16Array(8);if(e.length%4!==0)throw new p.PlaylistParseError(\"Failed to parse IV (length is not multiple of 4).\");for(var r=0;r<e.length;r+=4){var n=parseInt(e.substr(r,4),16);if(isNaN(n))throw new p.PlaylistParseError(\"Failed to parse hex number in IV string.\");t[r/4]=n}return new Uint8Array(t)}function i(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}function a(e){return!(e>=400&&e<500)}function s(e){var t={};k.lastIndex=0;for(var r;null!==(r=k.exec(e));){var o=r[1].trim().toLowerCase(),i=n(r[2].trim());t[o]=i}return t}Object.defineProperty(t,\"__esModule\",{value:!0});var u,l=r(0),c=r(9),d=r(14),f=r(13),p=r(31),h=r(32),_=r(27),g=r(26),y=r(25),v=r(12),m=l.helpers.abortableJob.AbortableJob,E=l.helpers.deferred.buildDeferred,b=l.helpers.cache.buildCache,w=l.helpers.retry,S=w.retry,P=w.buildExponentialDelayCalculator,R=l.helpers.Promise,T=l.helpers.find,x=l.helpers.url,A=l.eventDispatcher.EventDispatcher,O=l.logger.prefixLogger,M=l.logger.noOpLogger,D=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\\d+))|(?:#EXT-X-(TARGETDURATION): *(\\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(MAP):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\\d+(?:\\.\\d+)?)(?:,(.*))?)|(?:(?!#)()(\\S.+))|(?:#EXT-X-(BYTERANGE): *(\\d+(?:@\\d+(?:\\.\\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\\r?\\n?/g,k=/(.+?)=(.+?)(?:,|$)/g,I=/^\\d*(\\.\\d+)?$/;!function(e){e[e.NONE=0]=\"NONE\",e[e.AES_128=1]=\"AES_128\",e[e.SAMPLE_AES=2]=\"SAMPLE_AES\"}(u||(u={}));var C;!function(e){e[e.VOD=0]=\"VOD\",e[e.LIVE=1]=\"LIVE\",e[e.EVENT=2]=\"EVENT\"}(C=t.PlaylistType||(t.PlaylistType={}));var L=function(){function e(e){var t=e.url,r=e.playlistLoader,n=e.segmentLoader,o=e.keyLoader,i=void 0===o?null:o,s=e.segmentFormat,u=e.logger,l=void 0===u?M:u,c=e.delayCalculator,d=void 0===c?P():c,p=e.keyDelayCalculator,h=void 0===p?P():p,g=e.segmentDelayCalculator,y=e.isPlaylistResponseCodeAcceptable,v=void 0===y?function(e){return 200===e}:y,w=e.isPlaylistResponseCodeRetryable,T=void 0===w?a:w,x=e.isSegmentResponseCodeAcceptable,D=void 0===x?function(e){\nreturn 200===e}:x,k=e.isSegmentResponseCodeRetryable,I=void 0===k?a:k,C=e.isKeyResponseCodeAcceptable,L=void 0===C?function(e){return 200===e}:C,j=e.isKeyResponseCodeRetryable,N=void 0===j?a:j,U=this;this._keyRetrievalJobsCache=b(),this._initDataRetrievalJobsCache=b(),this._data=null,this._playlistEventRepresentation=null,this._onPlaylistRequestQueued=new A,this._onPlaylistRequestStart=new A,this._onPlaylistRetrieved=new A,this._onPlaylistRequestFailed=new A,this._onPlaylistParseStart=new A,this._onPlaylistParseEnd=new A,this._onKeyRequestQueued=new A,this._onKeyRequestStart=new A,this._onKeyRetrieved=new A,this._onKeyRequestFailed=new A,this._onInitDataRequestQueued=new A,this._onInitDataRequestStart=new A,this._onInitDataRetrieved=new A,this._onInitDataRequestFailed=new A,this._logger=O(l,\"Playlist\"),this.onPlaylistRequestQueued=this._onPlaylistRequestQueued.getHandle(),this.onPlaylistRequestStart=this._onPlaylistRequestStart.getHandle(),this.onPlaylistRetrieved=this._onPlaylistRetrieved.getHandle(),this.onPlaylistRequestFailed=this._onPlaylistRequestFailed.getHandle(),this.onPlaylistParseStart=this._onPlaylistParseStart.getHandle(),this.onPlaylistParseEnd=this._onPlaylistParseEnd.getHandle(),this.onKeyRequestQueued=this._onKeyRequestQueued.getHandle(),this.onKeyRequestStart=this._onKeyRequestStart.getHandle(),this.onKeyRetrieved=this._onKeyRetrieved.getHandle(),this.onKeyRequestFailed=this._onKeyRequestFailed.getHandle(),this.onInitDataRequestQueued=this._onInitDataRequestQueued.getHandle(),this.onInitDataRequestStart=this._onInitDataRequestStart.getHandle(),this.onInitDataRetrieved=this._onInitDataRetrieved.getHandle(),this.onInitDataRequestFailed=this._onInitDataRequestFailed.getHandle(),this._url=t,this._playlistLoader=r,this._segmentLoader=n,this._keyLoader=i,this._segmentFormat=s,this._keyDelayCalculator=h,this._isPlaylistResponseCodeAcceptable=v,this._isPlaylistResponseCodeRetryable=T,this._isSegmentResponseCodeAcceptable=D,this._isSegmentResponseCodeRetryable=I,this._isKeyOrInitDataResponseCodeAcceptable=L,this._isKeyOrInitDataResponseCodeRetryable=N,this._segmentDelayCalculator=g,this._downloadAbortableJob=new m(function(){var e=S(function(){return new m(function(){var e=new _.Playlist(t);U._onPlaylistRequestQueued.dispatch({playlist:e});var r=U._playlistLoader.request({url:t});r.whenRequestStarted.then(function(){U._onPlaylistRequestStart.dispatch({playlist:e})}),U._logger.debug(\"Requesting playlist.\",t);var n=r.getResponse().then(function(r){if(!r)return U._logger.warn(\"Playlist request timed out.\",t),U._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:null}),{success:!1};var n=r.statusCode;if(U._isPlaylistResponseCodeAcceptable(n)){var o=r.data;return o?(U._logger.debug(\"Got playlist response.\",t,n),U._onPlaylistRetrieved.dispatch({playlist:e,statusCode:n}),{success:!0,result:{playlistContent:o,eventRepresentation:e}}):(U._logger.warn(\"Playlist response contained no data.\",t,n),U._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:n}),{success:!1})}return U._isPlaylistResponseCodeRetryable(n)?(U._logger.debug(\"Playlist response code was not acceptable. Will retry.\",t,n),U._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:n}),{success:!1}):(U._logger.debug(\"Playlist response code was not acceptable.\",t,n),U._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:n}),R.reject(new f.UnacceptableResponseStatusCodeError(n)))});return{result:n,abort:function(){U._logger.debug(\"Aborting playlist request.\",t),r.abort(),U._onPlaylistRequestFailed.dispatch({playlist:e,aborted:!0})}}})},d);return{result:e.whenComplete(),abort:function(){return e.abort()}}},{storeResult:!1}),this._retrieveJob=new m(function(){var e=U._downloadAbortableJob.run(),t=E();return e.onCompletion(function(e){var r=e.playlistContent,n=e.eventRepresentation;U._onPlaylistParseStart.dispatch({playlist:n});try{U._data=U._parsePlaylist(r)}catch(e){return U._logger.error(\"Error when parsing playlist.\",e,r),void t.reject(e)}U._playlistEventRepresentation=n,U._onPlaylistParseEnd.dispatch({playlist:n}),t.resolve(void 0)}),e.onError(t.reject),{result:t.promise,abort:function(){return e.abort()}}},{storeResult:!1})}return e.prototype.retrieve=function(){return this._retrieveJob.run()},e.prototype.hasRetrieveCompleted=function(){return!!this._data},e.prototype.getStartingSequenceNumber=function(){if(!this._data)throw new Error(\"Not loaded yet.\");return this._data.mediaSequence},e.prototype.getType=function(){if(!this._data)throw new Error(\"Not loaded yet.\");return this._data.type},e.prototype.getTargetDuration=function(){if(!this._data)throw new Error(\"Not loaded yet.\");return this._data.targetDuration},e.prototype.getTotalDuration=function(){if(!this._data)throw new Error(\"Not loaded yet.\");return this._data.totalDuration},e.prototype.hasEnded=function(){if(!this._data)throw new Error(\"Not loaded yet.\");return this._data.ended},e.prototype.getSegmentCount=function(){if(!this._data)throw new Error(\"Not loaded yet.\");return this._data.segments.length},e.prototype.getSegment=function(e){return this.getSegments(e,e+1)[0]},e.prototype.getSegments=function(e,t){var r=this,n=this._data;if(!n)throw new Error(\"Not loaded yet.\");var o=n.mediaSequence;void 0===e&&(e=o);var i=n.segments.length;if(void 0===t&&(t=o+i),e<o)throw new Error(\"Start index must be >= the first segment index.\");if(t<o)throw new Error(\"End index must be >= the first segment index.\");if(t>o+i)throw new Error(\"End index cannot be > than the index of the last segment.\");if(t<e)throw new Error(\"End index must be >= start index.\");return n.segments.slice(e-o,t-o).map(function(t,n){var o=new m(function(){var o=t.encryptionData,i=e+n,a=r._playlistEventRepresentation;if(!a)throw new Error(\"Playlist event representation should exist.\");var s=r._buildEncryptionConfig(o,i),u=t.initDataUrl?r._retrieveInitData(t.initDataUrl):null,l=s.whenComplete().then(function(e){var n=function(n){return new d.Segment({url:t.url,sequenceNumber:i,playlist:r,timeRange:t.timeRange,format:r._segmentFormat,loader:r._segmentLoader,playlistEventRepresentation:a,logger:r._logger,delayCalculator:r._segmentDelayCalculator,isResponseCodeAcceptable:r._isSegmentResponseCodeAcceptable,isResponseCodeRetryable:r._isSegmentResponseCodeRetryable,encryptionConfig:e,initData:n})};return u?u.whenComplete().then(function(e){return n(e)}):n(void 0)}).catch(function(e){throw e instanceof c.OggParserError?e instanceof c.ChecksumFailedError?new v.OggParserError(\"CHECKSUM_FAILED\"):e instanceof c.NoSegmentsInPageError?new v.OggParserError(\"NO_SEGMENTS_IN_PAGE\"):e instanceof c.PageFromDifferentBitstreamError?new v.OggParserError(\"PAGE_FROM_DIFFERENT_BITSTREAM\"):e instanceof c.PageSequenceNumberDidNotIncrementError?new v.OggParserError(\"SEQUENCE_NUMBER_DID_NOT_INCREMENT\"):e instanceof c.UnexpectedBOSError?new v.OggParserError(\"UNEXPECTED_BOS\"):e instanceof c.UnexpectedEOSError?new v.OggParserError(\"UNEXPECTED_EOS\"):new v.OggParserError(\"UNKNOWN\"):e});return{result:l,abort:function(){s.abort(),u&&u.abort()}}},{storeResult:!1});return o.run()})},e.prototype.getSegmentIndexContainingTime=function(e){var t=this._data;if(!t)throw new Error(\"Not loaded yet.\");var r=T(t.segments,function(t){return t.timeRange.containsTime(e)});return r?t.mediaSequence+t.segments.indexOf(r):null},e.prototype._buildEncryptionConfig=function(e,t){var r=this,n=new m(function(){if(e.method===u.NONE)return{result:R.resolve(void 0)};if(e.method!==u.AES_128)return r._logger.error(\"Unsupported encryption method.\",e.method),{result:R.reject(new h.UnsupportedEncryptionError)};var n=r._keyLoader;if(!n)return{result:R.reject(new Error(\"Encryption method not supported as no key loader provided.\"))};var o=r._retrieveKey(e.keyUrl),a=o.whenComplete().then(function(r){return{cipher:\"AES-CBC\",key:r,iv:e.iv||i(t)}});return{result:a,abort:function(){return o.abort()}}});return n.run()},e.prototype._retrieveKey=function(e){var t=this,r=this._keyLoader;if(!r)throw new Error(\"No key loader.\");var n=this._playlistEventRepresentation;if(!n)throw new Error(\"Playlist event representation should exist.\");var o=new g.Key(n,e);return this._retrieveKeyOrInitData({url:e,loader:r,cache:this._keyRetrievalJobsCache,onRequestQueued:function(){return t._onKeyRequestQueued.dispatch({key:o})},onRequestStart:function(){return t._onKeyRequestStart.dispatch({key:o})},onRequestTimedOut:function(){t._onKeyRequestFailed.dispatch({key:o,statusCode:null})},onRequestFailed:function(e){t._onKeyRequestFailed.dispatch({key:o,statusCode:e})},onRequestAborted:function(){t._onKeyRequestFailed.dispatch({key:o,aborted:!0})},onRetrieved:function(e){t._onKeyRetrieved.dispatch({key:o,statusCode:e})},type:\"key\"})},e.prototype._retrieveInitData=function(e){var t=this,r=this._playlistEventRepresentation;if(!r)throw new Error(\"Playlist event representation should exist.\");var n=new y.InitData(r,e);return this._retrieveKeyOrInitData({url:e,loader:this._segmentLoader,cache:this._initDataRetrievalJobsCache,onRequestQueued:function(){return t._onInitDataRequestQueued.dispatch({initData:n})},onRequestStart:function(){return t._onInitDataRequestStart.dispatch({initData:n})},onRequestTimedOut:function(){t._onInitDataRequestFailed.dispatch({initData:n,statusCode:null})},onRequestFailed:function(e){t._onInitDataRequestFailed.dispatch({initData:n,statusCode:e})},onRequestAborted:function(){t._onInitDataRequestFailed.dispatch({initData:n,aborted:!0})},onRetrieved:function(e){t._onInitDataRetrieved.dispatch({initData:n,statusCode:e})},type:\"init data\"})},e.prototype._retrieveKeyOrInitData=function(e){var t=this,r=e.url,n=e.loader,o=e.cache,i=e.onRequestQueued,a=e.onRequestStart,s=e.onRequestTimedOut,u=e.onRequestFailed,l=e.onRequestAborted,c=e.onRetrieved,d=e.type,p=o.get(r);return p?this._logger.debug(d+\" retrieval already in progress.\",r):(p=new m(function(){var e=S(function(){return new m(function(){i();var e=n.request({url:r});e.whenRequestStarted.then(function(){return a()}),t._logger.debug(\"Retrieving \"+d+\".\",r);var o=e.getResponse().then(function(e){if(!e)return t._logger.warn(d+\" request timed out.\",r),s(),{success:!1};var n=e.statusCode;if(t._isKeyOrInitDataResponseCodeAcceptable(n)){var o=e.data;return o?(t._logger.debug(\"Got \"+d+\" response.\",r,n),c(n),{success:!0,result:new Uint8Array(o)}):(t._logger.warn(d+\" response contained no data.\",r,n),u(n),{success:!1})}return t._isKeyOrInitDataResponseCodeRetryable(n)?(t._logger.warn(d+\" response code was not acceptable. Will retry.\",r,n),u(n),{success:!1}):(t._logger.warn(d+\" response code was not acceptable.\",r,n),u(n),R.reject(new f.UnacceptableResponseStatusCodeError(n)))});return{result:o,abort:function(){t._logger.debug(\"Aborting \"+d+\" request.\",r),e.abort(),l()}}})},t._keyDelayCalculator);return{result:e.whenComplete(),abort:function(){return e.abort()}}},{storeResult:!1}),o.set(r,p)),p.run()},e.prototype._parsePlaylist=function(e){var t={version:null,type:C.LIVE,mediaSequence:null,targetDuration:null,totalDuration:0,ended:!1},r=[],n={method:u.NONE},i=null,a=null;D.lastIndex=0;for(var c,d=0,f=!1;null!==(c=D.exec(e));){var h=c.filter(function(e,t){return 0!==t&&void 0!==e}).map(function(e,t){return 0===t?e.toLowerCase():e}),_=h[0],g=h.slice(1);if(0===d){if(\"extm3u\"!==_)throw new p.PlaylistParseError(\"First line did not contain EXTM3U tag.\")}else{if(!f)switch(_){case\"playlist-type\":if(t.type!==C.LIVE)throw new p.PlaylistParseError(\"Already have playlist type.\");switch(g[0].toLowerCase()){case\"vod\":t.type=C.VOD;break;case\"event\":t.type=C.EVENT;break;default:throw new p.PlaylistParseError(\"Invalid playlist type.\")}break;case\"media-sequence\":if(null!==t.mediaSequence)throw new p.PlaylistParseError(\"Already have media sequence number.\");var y=parseInt(g[0],10);if(y+\"\"!==g[0])throw new p.PlaylistParseError(\"Invalid media sequence number.\");t.mediaSequence=y;break;case\"targetduration\":if(null!==t.targetDuration)throw new p.PlaylistParseError(\"Already have target duration.\");var v=parseInt(g[0],10);if(v+\"\"!==g[0]||v<0)throw new p.PlaylistParseError(\"Invalid target duration.\");t.targetDuration=1e3*v;break;case\"version\":if(null!==t.version)throw new p.PlaylistParseError(\"Already have version.\");var m=parseInt(g[0],10);if(m+\"\"!==g[0])throw new p.PlaylistParseError(\"Invalid version.\");if(m<3)throw new p.PlaylistParseError(\"HLS version must be 3 or above.\");t.version=m;break;default:f=!0}if(f)switch(_){case\"key\":var E=s(g[0]),b=\"method\"in E?E.method.toLowerCase():null,w=\"uri\"in E?x.buildAbsoluteUrl(this._url,E.uri):null,S=\"iv\"in E?o(E.iv):null;if(!b)throw new p.PlaylistParseError(\"Missing encryption method.\");if(!w&&\"none\"!==b)throw new p.PlaylistParseError(\"Missing key url.\");switch(b){case\"none\":if(null!==w)throw new p.PlaylistParseError(\"Key url not allowed.\");if(null!==S)throw new p.PlaylistParseError(\"IV not allowed.\");n={method:u.NONE};break;case\"aes-128\":if(!w)throw new p.PlaylistParseError(\"Key url required.\");n={method:u.AES_128,keyUrl:w,iv:S};break;case\"sample-aes\":if(!w)throw new p.PlaylistParseError(\"Key url required.\");n={method:u.SAMPLE_AES,keyUrl:w,iv:S};break;default:throw new p.PlaylistParseError(\"Unknown encryption method.\")}break;case\"map\":var E=s(g[0]);if(!(\"uri\"in E))throw new p.PlaylistParseError(\"URI missing from EXT-X-MAP tag.\");if(\"byterange\"in E)throw new p.PlaylistParseError(\"BYTERANGE in EXT-X-MAP tag is currently unsupported.\");i=E.uri?x.buildAbsoluteUrl(this._url,E.uri):null;break;case\"inf\":if(!g[0].match(I))throw new p.PlaylistParseError(\"Invalid segment duration.\");a=1e3*parseFloat(g[0]);break;case\"\":if(t.ended)throw new p.PlaylistParseError(\"Already received ENDLIST tag.\");if(null===a)throw new p.PlaylistParseError(\"Not received segment duration.\");var P=x.buildAbsoluteUrl(this._url,g[0]);r.push({url:P,timeRange:new l.TimeRange(t.totalDuration,a),initDataUrl:i,encryptionData:n}),t.totalDuration+=a,a=null;break;case\"endlist\":if(t.ended)throw new p.PlaylistParseError(\"Already had ENDLIST tag.\");t.ended=!0;break;default:this._logger.warn(\"Unable to parse playlist line.\",_)}}d++}var R=t.version,T=t.type,A=t.mediaSequence,O=t.targetDuration,M=t.ended,k=t.totalDuration;if(null===R)throw new p.PlaylistParseError(\"Missing version.\");if(null===O)throw new p.PlaylistParseError(\"Missing target duration.\");if(M&&T===C.LIVE)throw new p.PlaylistParseError(\"Cannot be ended if type is LIVE.\");if(!M&&T===C.VOD)throw new p.PlaylistParseError(\"Must be ended if type is VOD.\");return null===A&&(A=0),{version:R,type:T,mediaSequence:A,targetDuration:O,totalDuration:k,ended:M,segments:r}},e}();t.Playlist=L},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(30),i=r(31),a=r(12),s=r(5),u=r(13),l=r(32);!function(e){e.NoDecryptorError=o.NoDecryptorError,e.PlaylistParseError=i.PlaylistParseError,e.OggParserError=a.OggParserError,e.RetrievalError=s.RetrievalError,e.UnacceptableResponseStatusCodeError=u.UnacceptableResponseStatusCodeError,e.UnsupportedEncryptionError=l.UnsupportedEncryptionError}(n=t.retrievalErrors||(t.retrievalErrors={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(29),o=r(88);t.TransmuxerFactory={retrieveTransmuxers:function(e,t){return o.default.filter(function(r){var o=r.getInputFormat(),i=r.getOutputFormat();return(!e||n.isPartialMatch(o,e))&&(!t||n.isPartialMatch(i,t))})},retrieveTransmuxer:function(e,r){return t.TransmuxerFactory.retrieveTransmuxers(e,r)[0]||null}}},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.AESDecryptor=function(){function e(){n(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return o(e,[{key:\"uint8ArrayToUint32Array_\",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<r.length;n++)r[n]=t.getUint32(4*n);return r}},{key:\"initTable\",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix[0],n=this.subMix[1],o=this.subMix[2],i=this.subMix[3],a=this.invSubMix[0],s=this.invSubMix[1],u=this.invSubMix[2],l=this.invSubMix[3],c=new Uint32Array(256),d=0,f=0,p=0;for(p=0;p<256;p++)p<128?c[p]=p<<1:c[p]=p<<1^283;for(p=0;p<256;p++){var h=f^f<<1^f<<2^f<<3^f<<4;h=h>>>8^255&h^99,e[d]=h,t[h]=d;var _=c[d],g=c[_],y=c[g],v=257*c[h]^16843008*h;r[d]=v<<24|v>>>8,n[d]=v<<16|v>>>16,o[d]=v<<8|v>>>24,i[d]=v,v=16843009*y^65537*g^257*_^16843008*d,a[h]=v<<24|v>>>8,s[h]=v<<16|v>>>16,u[h]=v<<8|v>>>24,l[h]=v,d?(d=_^c[c[c[y^_]]],f^=c[c[f]]):d=f=1}}},{key:\"expandKey\",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var o=this.keySize=t.length;if(4!==o&&6!==o&&8!==o)throw new Error(\"Invalid aes key size=\"+o);var i=this.ksRows=4*(o+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(this.ksRows),l=this.invKeySchedule=new Uint32Array(this.ksRows),c=this.sBox,d=this.rcon,f=this.invSubMix[0],p=this.invSubMix[1],h=this.invSubMix[2],_=this.invSubMix[3],g=void 0,y=void 0;for(a=0;a<i;a++)a<o?g=u[a]=t[a]:(y=g,a%o===0?(y=y<<8|y>>>24,y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[a/o|0]<<24):o>6&&a%o===4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),u[a]=g=(u[a-o]^y)>>>0);for(s=0;s<i;s++)a=i-s,y=3&s?u[a]:u[a-4],s<4||a<=4?l[s]=y:l[s]=f[c[y>>>24]]^p[c[y>>>16&255]]^h[c[y>>>8&255]]^_[c[255&y]],l[s]=l[s]>>>0}}},{key:\"networkToHostOrderSwap\",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:\"decrypt\",value:function(e,t,r){for(var n,o,i=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,u=this.invSubMix[0],l=this.invSubMix[1],c=this.invSubMix[2],d=this.invSubMix[3],f=this.uint8ArrayToUint32Array_(r),p=f[0],h=f[1],_=f[2],g=f[3],y=new Int32Array(e),v=new Int32Array(y.length),m=void 0,E=void 0,b=void 0,w=void 0,S=void 0,P=void 0,R=void 0,T=void 0,x=void 0,A=void 0,O=void 0,M=void 0;t<y.length;){for(x=this.networkToHostOrderSwap(y[t]),A=this.networkToHostOrderSwap(y[t+1]),O=this.networkToHostOrderSwap(y[t+2]),M=this.networkToHostOrderSwap(y[t+3]),S=x^a[0],P=M^a[1],R=O^a[2],T=A^a[3],n=4,o=1;o<i;o++)m=u[S>>>24]^l[P>>16&255]^c[R>>8&255]^d[255&T]^a[n],E=u[P>>>24]^l[R>>16&255]^c[T>>8&255]^d[255&S]^a[n+1],b=u[R>>>24]^l[T>>16&255]^c[S>>8&255]^d[255&P]^a[n+2],w=u[T>>>24]^l[S>>16&255]^c[P>>8&255]^d[255&R]^a[n+3],S=m,P=E,R=b,T=w,n+=4;m=s[S>>>24]<<24^s[P>>16&255]<<16^s[R>>8&255]<<8^s[255&T]^a[n],E=s[P>>>24]<<24^s[R>>16&255]<<16^s[T>>8&255]<<8^s[255&S]^a[n+1],b=s[R>>>24]<<24^s[T>>16&255]<<16^s[S>>8&255]<<8^s[255&P]^a[n+2],w=s[T>>>24]<<24^s[S>>16&255]<<16^s[P>>8&255]<<8^s[255&R]^a[n+3],n+=3,v[t]=this.networkToHostOrderSwap(m^p),v[t+1]=this.networkToHostOrderSwap(w^h),v[t+2]=this.networkToHostOrderSwap(b^_),v[t+3]=this.networkToHostOrderSwap(E^g),p=x,h=A,_=O,g=M,t+=4}return v.buffer}},{key:\"destroy\",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}()},function(e,t,r){\"use strict\";function n(){this.buffer=null,this.bufferSize=0}t.__esModule=!0,t.MP3Parser=n;var o=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],i=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];n.prototype.push=function(e){var t;if(this.bufferSize>0){var r=e.length+this.bufferSize;if(!this.buffer||this.buffer.length<r){var n=new Uint8Array(r);this.bufferSize>0&&n.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=n}this.buffer.set(e,this.bufferSize),this.bufferSize=r,e=this.buffer,t=r}else t=e.length;for(var o,i=0;i<t&&(o=this._parse(e,i,t))>0;)i+=o;var a=t-i;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(e.subarray(i,t)):this.buffer.set(e.subarray(i,t))),this.bufferSize=a},n.prototype._parse=function(e,t,r){if(t+2>r)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>r)return-1;var n=e[t+1]>>3&3,a=e[t+1]>>1&3,s=e[t+2]>>4&15,u=e[t+2]>>2&3,l=!!(2&e[t+2]);if(1!==n&&0!==s&&15!==s&&3!==u){var c=3===n?3-a:3===a?3:4,d=1e3*o[14*c+s-1],f=3===n?0:2===n?1:2,p=i[3*f+u],h=l?1:0,_=3===a?(3===n?12:6)*d/p+h<<2:(3===n?144:72)*d/p+h|0;return t+_>r?-1:(this.onFrame&&this.onFrame(e.subarray(t,t+_)),_)}}for(var g=t+2;g<r;){if(255===e[g-1]&&224===(224&e[g]))return this.onNoise&&this.onNoise(e.subarray(t,g-1)),g-t-1;g++}return-1},n.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()}},function(e,t,r){\"use strict\";t.__esModule=!0;var n,o,i=function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){var t;!function(e){function t(e){for(var t=new Uint8Array(4*e.length),r=0,n=0,o=e.length;n<o;n++){var i=e.charCodeAt(n);if(i<=127)t[r++]=i;else{if(55296<=i&&i<=56319){var a=e.charCodeAt(n+1);56320<=a&&a<=57343&&(i=((1023&i)<<10)+(1023&a)+65536,++n)}0!==(4292870144&i)?(t[r++]=248|i>>>24&3,t[r++]=128|i>>>18&63,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i):0!==(4294901760&i)?(t[r++]=240|i>>>18&7,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i):0!==(4294965248&i)?(t[r++]=224|i>>>12&15,t[r++]=128|i>>>6&63,t[r++]=128|63&i):(t[r++]=192|i>>>6&31,t[r++]=128|63&i)}}return t.subarray(0,r)}function r(e){for(var t=0,r=\"\";t<e.length;){var n=255&e[t++];if(n<=127)r+=String.fromCharCode(n);else{var o=192,i=5;do{var a=o>>1|128;if((n&a)===o)break;o=o>>1|128,--i}while(i>=0);if(i<=0)throw new Error(\"Invalid UTF8 character\");for(var s=n&(1<<i)-1,u=5;u>=i;--u){var l=e[t++];if(128!==(192&l))throw new Error(\"Invalid UTF8 character sequence\");s=s<<6|63&l}r+=s>=65536?String.fromCharCode(s-65536>>10&1023|55296,1023&s|56320):String.fromCharCode(s)}}return r}e.utf8decode=t,e.utf8encode=r}(t=e.StringUtilities||(e.StringUtilities={}))}(o||(o={})),function(e){var t;!function(e){function t(e){for(var t=e.length>>1,r=new Uint8Array(t),n=0;n<t;n++)r[n]=parseInt(e.substr(2*n,2),16);return r}function r(e){var t,r=0,n=a.RAW,o=e[r],i=o>>4,d=o>>2&3,f=2&o?16:8,p=1&o?2:1;switch(r++,i){case c:var h=e[r++];n=h,t=1024;break;case l:var _=e[r+1]>>3&3,g=e[r+1]>>1&3;t=1===g?3===_?1152:576:3===g?384:1152}return{codecDescription:u[i],codecId:i,data:e.subarray(r),rate:s[d],size:f,channels:p,samples:t,packetType:n}}function n(e){var t=0,r=e[t]>>4,n=15&e[t];t++;var o={frameType:r,codecId:n,codecDescription:f[n]};switch(n){case h:var i=e[t++];o.packetType=i,o.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case p:o.packetType=_.NALU,o.horizontalOffset=e[t]>>4&15,o.verticalOffset=15&e[t],o.compositionTime=0,t++}return o.data=e.subarray(t),o}function o(e){var t,r,n=[],o=-1,i=-1,a=+e.asGetPublicProperty(\"duration\"),s=e.asGetPublicProperty(\"audiocodecid\");switch(s){case l:case\"mp3\":t=\"mp3\",r=l;break;case c:case\"mp4a\":t=\"mp4a\",r=c;break;default:if(!isNaN(s))throw new Error(\"Unsupported audio codec: \"+s);t=null,r=-1}var u,d,f=e.asGetPublicProperty(\"videocodecid\");switch(f){case p:case\"vp6f\":u=\"vp6f\",d=p;break;case h:case\"avc1\":u=\"avc1\",d=h;break;default:if(!isNaN(f))throw new Error(\"Unsupported video codec: \"+f);u=null,d=-1}var _=null===t?null:{codecDescription:t,codecId:r,language:\"und\",timescale:+e.asGetPublicProperty(\"audiosamplerate\")||44100,samplerate:+e.asGetPublicProperty(\"audiosamplerate\")||44100,channels:+e.asGetPublicProperty(\"audiochannels\")||2,samplesize:16},g=null===u?null:{codecDescription:u,codecId:d,language:\"und\",timescale:6e4,framerate:+e.asGetPublicProperty(\"videoframerate\")||+e.asGetPublicProperty(\"framerate\"),width:+e.asGetPublicProperty(\"width\"),height:+e.asGetPublicProperty(\"height\")},y=e.asGetPublicProperty(\"trackinfo\");if(y)for(var v=0;v<y.length;v++){var m=y[v],E=m.asGetPublicProperty(\"sampledescription\")[0];E.asGetPublicProperty(\"sampletype\")===s?(_.language=m.asGetPublicProperty(\"language\"),_.timescale=+m.asGetPublicProperty(\"timescale\")):E.asGetPublicProperty(\"sampletype\")===f&&(g.language=m.asGetPublicProperty(\"language\"),g.timescale=+m.asGetPublicProperty(\"timescale\"))}return g&&(i=n.length,n.push(g)),_&&(o=n.length,n.push(_)),{tracks:n,duration:a,audioTrackId:o,videoTrackId:i}}function i(e){var t=[];return e.audioTrackId>=0&&t.push({tracks:[e.tracks[e.audioTrackId]],duration:e.duration,audioTrackId:0,videoTrackId:-1}),e.videoTrackId>=0&&t.push({tracks:[e.tracks[e.videoTrackId]],duration:e.duration,audioTrackId:-1,videoTrackId:0}),t}var a,s=[5500,11025,22050,44100],u=[\"PCM\",\"ADPCM\",\"MP3\",\"PCM le\",\"Nellymouser16\",\"Nellymouser8\",\"Nellymouser\",\"G.711 A-law\",\"G.711 mu-law\",null,\"AAC\",\"Speex\",\"MP3 8khz\"],l=2,c=10;!function(e){e[e.HEADER=0]=\"HEADER\",e[e.RAW=1]=\"RAW\"}(a||(a={}));var d,f=[null,\"JPEG\",\"Sorenson\",\"Screen\",\"VP6\",\"VP6 alpha\",\"Screen2\",\"AVC\"],p=4,h=7;!function(e){e[e.KEY=1]=\"KEY\",e[e.INNER=2]=\"INNER\",e[e.DISPOSABLE=3]=\"DISPOSABLE\",e[e.GENERATED=4]=\"GENERATED\",e[e.INFO=5]=\"INFO\"}(d||(d={}));var _;!function(e){e[e.HEADER=0]=\"HEADER\",e[e.NALU=1]=\"NALU\",e[e.END=2]=\"END\"}(_||(_={}));var g,y=8,v=9,m=50,E=!0;!function(e){e[e.CAN_GENERATE_HEADER=0]=\"CAN_GENERATE_HEADER\",e[e.NEED_HEADER_DATA=1]=\"NEED_HEADER_DATA\",e[e.MAIN_PACKETS=2]=\"MAIN_PACKETS\"}(g||(g={}));var b=function(){function o(e){var t=this;this.oncodecinfo=function(e){},this.ondata=function(e){throw new Error(\"MP4Mux.ondata is not set\")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,r){var n={trackId:r+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return t.metadata.audioTrackId===r&&(t.audioTrackState=n),t.metadata.videoTrackId===r&&(t.videoTrackState=n),n},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return o.prototype.pushPacket=function(e,t,o){switch(this.state===g.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case y:var i=this.audioTrackState,s=r(t);if(!i||i.trackInfo.codecId!==s.codecId)throw new Error(\"Unexpected audio packet codec: \"+s.codecDescription);switch(s.codecId){default:throw new Error(\"Unsupported audio codec: \"+s.codecDescription);case l:break;case c:if(s.packetType===a.HEADER)return void i.initializationData.push(s.data)}this.cachedPackets.push({packet:s,timestamp:o,trackId:i.trackId});break;case v:var u=this.videoTrackState,d=n(t);if(!u||u.trackInfo.codecId!==d.codecId)throw new Error(\"Unexpected video packet codec: \"+d.codecDescription);switch(d.codecId){default:throw new Error(\"unsupported video codec: \"+d.codecDescription);case p:break;case h:if(d.packetType===_.HEADER)return void u.initializationData.push(d.data)}this.cachedPackets.push({packet:d,timestamp:o,trackId:u.trackId});break;default:throw new Error(\"unknown packet type: \"+e)}this.state===g.NEED_HEADER_DATA&&this._tryGenerateHeader(),this.cachedPackets.length>=m&&this.state===g.MAIN_PACKETS&&this._chunk()},o.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},o.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return e.trackInfo.codecId===c||e.trackInfo.codecId===h})?this.state=g.NEED_HEADER_DATA:this.state=g.CAN_GENERATE_HEADER},o.prototype._tryGenerateHeader=function(){var r=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case c:case h:return e.initializationData.length>0;default:return!0}});if(r){for(var n=[\"isom\"],o=1,i=1,a=[],s=0;s<this.trackStates.length;s++){var u,d=this.trackStates[s],f=d.trackInfo;switch(f.codecId){case c:var _=d.initializationData[0];u=new e.Iso.AudioSampleEntry(\"mp4a\",o,f.channels,f.samplesize,f.samplerate);var y=new Uint8Array(41+_.length);y.set(t(\"0000000003808080\"),0),y[8]=32+_.length,y.set(t(\"00020004808080\"),9),y[16]=18+_.length,y.set(t(\"40150000000000FA000000000005808080\"),17),y[34]=_.length,y.set(_,35),y.set(t(\"068080800102\"),35+_.length),u.otherBoxes=[new e.Iso.RawTag(\"esds\",y)];var v=_[0]>>3;d.mimeTypeCodec=\"mp4a.40.\"+v;break;case l:u=new e.Iso.AudioSampleEntry(\".mp3\",o,f.channels,f.samplesize,f.samplerate),d.mimeTypeCodec=\"mp3\";break;case h:var m=d.initializationData[0];u=new e.Iso.VideoSampleEntry(\"avc1\",i,f.width,f.height),u.otherBoxes=[new e.Iso.RawTag(\"avcC\",m)];var E=m[1]<<16|m[2]<<8|m[3];d.mimeTypeCodec=\"avc1.\"+(16777216|E).toString(16).substr(1),n.push(\"iso2\",\"avc1\",\"mp41\");break;case p:u=new e.Iso.VideoSampleEntry(\"VP6F\",i,f.width,f.height),u.otherBoxes=[new e.Iso.RawTag(\"glbl\",t(\"00\"))],d.mimeTypeCodec=\"avc1.42001E\";break;default:throw new Error(\"not supported track type\")}var b,w=e.Iso.TrackHeaderFlags.TRACK_ENABLED|e.Iso.TrackHeaderFlags.TRACK_IN_MOVIE;d===this.audioTrackState?b=new e.Iso.TrackBox(new e.Iso.TrackHeaderBox(w,d.trackId,-1,0,0,1,s),new e.Iso.MediaBox(new e.Iso.MediaHeaderBox(f.timescale,-1,f.language),new e.Iso.HandlerBox(\"soun\",\"SoundHandler\"),new e.Iso.MediaInformationBox(new e.Iso.SoundMediaHeaderBox,new e.Iso.DataInformationBox(new e.Iso.DataReferenceBox([new e.Iso.DataEntryUrlBox(e.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new e.Iso.SampleTableBox(new e.Iso.SampleDescriptionBox([u]),new e.Iso.RawTag(\"stts\",t(\"0000000000000000\")),new e.Iso.RawTag(\"stsc\",t(\"0000000000000000\")),new e.Iso.RawTag(\"stsz\",t(\"000000000000000000000000\")),new e.Iso.RawTag(\"stco\",t(\"0000000000000000\")))))):d===this.videoTrackState&&(b=new e.Iso.TrackBox(new e.Iso.TrackHeaderBox(w,d.trackId,-1,f.width,f.height,0,s),new e.Iso.MediaBox(new e.Iso.MediaHeaderBox(f.timescale,-1,f.language),new e.Iso.HandlerBox(\"vide\",\"VideoHandler\"),new e.Iso.MediaInformationBox(new e.Iso.VideoMediaHeaderBox,new e.Iso.DataInformationBox(new e.Iso.DataReferenceBox([new e.Iso.DataEntryUrlBox(e.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new e.Iso.SampleTableBox(new e.Iso.SampleDescriptionBox([u]),new e.Iso.RawTag(\"stts\",t(\"0000000000000000\")),new e.Iso.RawTag(\"stsc\",t(\"0000000000000000\")),new e.Iso.RawTag(\"stsz\",t(\"000000000000000000000000\")),new e.Iso.RawTag(\"stco\",t(\"0000000000000000\"))))))),a.push(b)}var S=new e.Iso.MovieExtendsBox(null,[new e.Iso.TrackExtendsBox(1,1,0,0,0),new e.Iso.TrackExtendsBox(2,1,0,0,0)],null),P=new e.Iso.BoxContainerBox(\"udat\",[new e.Iso.MetaBox(new e.Iso.RawTag(\"hdlr\",t(\"00000000000000006D6469726170706C000000000000000000\")),[new e.Iso.RawTag(\"ilst\",t(\"00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034\"))])]),R=new e.Iso.MovieHeaderBox(1e3,0,this.trackStates.length+1),T=new e.Iso.MovieBox(R,a,S,P),x=new e.Iso.FileTypeBox(\"isom\",512,n),A=x.layout(0),O=T.layout(A),M=new Uint8Array(A+O);x.write(M),T.write(M),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(M),this.filePos+=M.length,this.state=g.MAIN_PACKETS}},o.prototype._chunk=function(){var t=this.cachedPackets;if(E&&this.videoTrackState){for(var r=t.length-1,n=this.videoTrackState.trackId;r>0&&(t[r].trackId!==n||t[r].packet.frameType!==d.KEY);)r--;r>0&&(t=t.slice(0,r))}if(0!==t.length){for(var o=[],i=0,a=[],s=[],u=0;u<this.trackStates.length;u++){var f=this.trackStates[u],_=f.trackInfo,g=f.trackId,y=t.filter(function(e){return e.trackId===g});if(0!==y.length){var v,m,b,w=new e.Iso.TrackFragmentBaseMediaDecodeTimeBox(f.cachedDuration);switch(s.push(i),_.codecId){case c:case l:b=[];for(var r=0;r<y.length;r++){var S=y[r].packet,P=Math.round(S.samples*_.timescale/_.samplerate);o.push(S.data),i+=S.data.length,b.push({duration:P,size:S.data.length\n}),f.samplesProcessed+=S.samples}var R=e.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new e.Iso.TrackFragmentHeaderBox(R,g,0,0,0,0,e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var T=e.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|e.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|e.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT;m=new e.Iso.TrackRunBox(T,b,0,0),f.cachedDuration=Math.round(f.samplesProcessed*_.timescale/_.samplerate);break;case h:case p:b=[];for(var x=f.samplesProcessed,A=x*_.timescale/_.framerate,O=Math.round(A),r=0;r<y.length;r++){var M=y[r].packet;x++;var D=Math.round(x*_.timescale/_.framerate),k=D-O;O=D;var I=Math.round(x*_.timescale/_.framerate+M.compositionTime*_.timescale/1e3);o.push(M.data),i+=M.data.length;var C=M.frameType===d.KEY?e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|e.Iso.SampleFlags.SAMPLE_IS_NOT_SYNC;b.push({duration:k,size:M.data.length,flags:C,compositionTimeOffset:I-D})}var R=e.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new e.Iso.TrackFragmentHeaderBox(R,g,0,0,0,0,e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var T=e.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|e.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|e.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT|e.Iso.TrackRunFlags.SAMPLE_FLAGS_PRESENT|e.Iso.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;m=new e.Iso.TrackRunBox(T,b,0,0),f.cachedDuration=O,f.samplesProcessed=x;break;default:throw new Error(\"Un codec\")}var L=new e.Iso.TrackFragmentBox(v,w,m);a.push(L)}}this.cachedPackets.splice(0,t.length);for(var j=new e.Iso.MovieFragmentHeaderBox(++this.chunkIndex),N=new e.Iso.MovieFragmentBox(j,a),U=N.layout(0),F=new e.Iso.MediaDataBox(o),B=F.layout(U),q=U+8,u=0;u<a.length;u++)a[u].run.dataOffset=q+s[u];var H=new Uint8Array(U+B);N.write(H),F.write(H),this.ondata(H),this.filePos+=H.length}},o}();e.MP4Mux=b,e.parseFLVMetadata=o,e.splitMetadata=i}(t=e.MP4||(e.MP4={}))}(n||(n={})),function(e){var t;!function(e){var t;!function(e){function t(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Array.prototype.concat.apply(e,t)}function r(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function n(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function a(e){return(e-f)/1e3|0}function s(e){return 65536*e|0}function u(e){return 1073741824*e|0}function l(e){return 256*e|0}function c(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}var d=o.StringUtilities.utf8decode,f=-20828448e5,p=[1,0,0,0,1,0,0,0,1],h=[0,0,0],_=function(){function e(e,t){this.boxtype=e,\"uuid\"===e&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t,t},e.prototype.write=function(e){return r(e,this.offset,this.size),r(e,this.offset+4,n(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}();e.Box=_;var g=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var o=e.call(this,t)||this;return o.version=r,o.flags=n,o}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.version<<24|this.flags),n+4},t}(_);e.FullBox=g;var y=function(e){function t(t,r,n){var o=e.call(this,\"ftype\")||this;return o.majorBrand=t,o.minorVersion=r,o.compatibleBrands=n,o}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4*(2+this.compatibleBrands.length),this.size},t.prototype.write=function(t){var o=this,i=e.prototype.write.call(this,t);return r(t,this.offset+i,n(this.majorBrand)),r(t,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(e){r(t,o.offset+i,n(e)),i+=4},this),i},t}(_);e.FileTypeBox=y;var v=function(e){function t(t,r){var n=e.call(this,t)||this;return n.children=r,n}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(r+=e.layout(t+r))}),this.size=r},t.prototype.write=function(t){var r=e.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(r+=e.write(t))}),r},t}(_);e.BoxContainerBox=v;var m=function(e){function r(r,n,o,i){var a=e.call(this,\"moov\",t([r],n,[o,i]))||this;return a.header=r,a.tracks=n,a.extendsBox=o,a.userData=i,a}return i(r,e),r}(v);e.MovieBox=m;var E=function(e){function t(t,r,n,o,i,a,s,u){void 0===o&&(o=1),void 0===i&&(i=1),void 0===a&&(a=p),void 0===s&&(s=f),void 0===u&&(u=f);var l=e.call(this,\"mvhd\",0,0)||this;return l.timescale=t,l.duration=r,l.nextTrackId=n,l.rate=o,l.volume=i,l.matrix=a,l.creationTime=s,l.modificationTime=u,l}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4+2+2+8+36+24+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,a(this.creationTime)),r(t,this.offset+n+4,a(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),n+=16,r(t,this.offset+n,s(this.rate)),r(t,this.offset+n+4,l(this.volume)<<16),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,s(this.matrix[0])),r(t,this.offset+n+4,s(this.matrix[1])),r(t,this.offset+n+8,s(this.matrix[2])),r(t,this.offset+n+12,s(this.matrix[3])),r(t,this.offset+n+16,s(this.matrix[4])),r(t,this.offset+n+20,s(this.matrix[5])),r(t,this.offset+n+24,u(this.matrix[6])),r(t,this.offset+n+28,u(this.matrix[7])),r(t,this.offset+n+32,u(this.matrix[8])),n+=36,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),r(t,this.offset+n+20,0),n+=24,r(t,this.offset+n,this.nextTrackId),n+=4},t}(g);e.MovieHeaderBox=E;var b;!function(e){e[e.TRACK_ENABLED=1]=\"TRACK_ENABLED\",e[e.TRACK_IN_MOVIE=2]=\"TRACK_IN_MOVIE\",e[e.TRACK_IN_PREVIEW=4]=\"TRACK_IN_PREVIEW\"}(b=e.TrackHeaderFlags||(e.TrackHeaderFlags={}));var w=function(e){function t(t,r,n,o,i,a,s,u,l,c,d){void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=p),void 0===c&&(c=f),void 0===d&&(d=f);var h=e.call(this,\"tkhd\",0,t)||this;return h.trackId=r,h.duration=n,h.width=o,h.height=i,h.volume=a,h.alternateGroup=s,h.layer=u,h.matrix=l,h.creationTime=c,h.modificationTime=d,h}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20+8+6+2+36+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,a(this.creationTime)),r(t,this.offset+n+4,a(this.modificationTime)),r(t,this.offset+n+8,this.trackId),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.duration),n+=20,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.layer<<16|this.alternateGroup),r(t,this.offset+n+12,l(this.volume)<<16),n+=16,r(t,this.offset+n,s(this.matrix[0])),r(t,this.offset+n+4,s(this.matrix[1])),r(t,this.offset+n+8,s(this.matrix[2])),r(t,this.offset+n+12,s(this.matrix[3])),r(t,this.offset+n+16,s(this.matrix[4])),r(t,this.offset+n+20,s(this.matrix[5])),r(t,this.offset+n+24,u(this.matrix[6])),r(t,this.offset+n+28,u(this.matrix[7])),r(t,this.offset+n+32,u(this.matrix[8])),n+=36,r(t,this.offset+n,s(this.width)),r(t,this.offset+n+4,s(this.height)),n+=8},t}(g);e.TrackHeaderBox=w;var S=function(e){function t(t,r,n,o,i){void 0===n&&(n=\"unk\"),void 0===o&&(o=f),void 0===i&&(i=f);var a=e.call(this,\"mdhd\",0,0)||this;return a.timescale=t,a.duration=r,a.language=n,a.creationTime=o,a.modificationTime=i,a}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,a(this.creationTime)),r(t,this.offset+n+4,a(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),r(t,this.offset+n+16,c(this.language)<<16),n+20},t}(g);e.MediaHeaderBox=S;var P=function(e){function t(t,r){var n=e.call(this,\"hdlr\",0,0)||this;return n.handlerType=t,n.name=r,n._encodedName=d(n.name),n}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8+12+(this._encodedName.length+1),this.size},t.prototype.write=function(t){var o=e.prototype.write.call(this,t);return r(t,this.offset+o,0),r(t,this.offset+o+4,n(this.handlerType)),r(t,this.offset+o+8,0),r(t,this.offset+o+12,0),r(t,this.offset+o+16,0),o+=20,t.set(this._encodedName,this.offset+o),t[this.offset+o+this._encodedName.length]=0,o+=this._encodedName.length+1},t}(g);e.HandlerBox=P;var R=function(e){function t(t){void 0===t&&(t=0);var r=e.call(this,\"smhd\",0,0)||this;return r.balance=t,r}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,l(this.balance)<<16),n+4},t}(g);e.SoundMediaHeaderBox=R;var T=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=h);var n=e.call(this,\"vmhd\",0,0)||this;return n.graphicsMode=t,n.opColor=r,n}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(t,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},t}(g);e.VideoMediaHeaderBox=T,e.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var x=function(t){function r(r,n){void 0===n&&(n=null);var o=t.call(this,\"url \",0,r)||this;return o.location=n,r&e.SELF_CONTAINED_DATA_REFERENCE_FLAG||(o._encodedLocation=d(n)),o}return i(r,t),r.prototype.layout=function(e){var r=t.prototype.layout.call(this,e);return this._encodedLocation&&(r+=this._encodedLocation.length+1),this.size=r},r.prototype.write=function(e){var r=t.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+r),e[this.offset+r+this._encodedLocation.length]=0,r+=this._encodedLocation.length),r},r}(g);e.DataEntryUrlBox=x;var A=function(e){function t(t){var r=e.call(this,\"dref\",0,0)||this;return r.entries=t,r}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){r+=e.layout(t+r)}),this.size=r},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),this.entries.forEach(function(e){n+=e.write(t)}),n},t}(g);e.DataReferenceBox=A;var O=function(e){function t(t){var r=e.call(this,\"dinf\",[t])||this;return r.dataReference=t,r}return i(t,e),t}(v);e.DataInformationBox=O;var M=function(e){function t(t){var r=e.call(this,\"stsd\",0,0)||this;return r.entries=t,r}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t);return r+=4,this.entries.forEach(function(e){r+=e.layout(t+r)}),this.size=r},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(e){n+=e.write(t)}),n},t}(g);e.SampleDescriptionBox=M;var D=function(e){function t(t,r,n,o,i){var a=e.call(this,\"stbl\",[t,r,n,o,i])||this;return a.sampleDescriptions=t,a.timeToSample=r,a.sampleToChunk=n,a.sampleSizes=o,a.chunkOffset=i,a}return i(t,e),t}(v);e.SampleTableBox=D;var k=function(e){function t(t,r,n){var o=e.call(this,\"minf\",[t,r,n])||this;return o.header=t,o.info=r,o.sampleTable=n,o}return i(t,e),t}(v);e.MediaInformationBox=k;var I=function(e){function t(t,r,n){var o=e.call(this,\"mdia\",[t,r,n])||this;return o.header=t,o.handler=r,o.info=n,o}return i(t,e),t}(v);e.MediaBox=I;var C=function(e){function t(t,r){var n=e.call(this,\"trak\",[t,r])||this;return n.header=t,n.media=r,n}return i(t,e),t}(v);e.TrackBox=C;var L=function(e){function t(t,r,n,o,i){var a=e.call(this,\"trex\",0,0)||this;return a.trackId=t,a.defaultSampleDescriptionIndex=r,a.defaultSampleDuration=n,a.defaultSampleSize=o,a.defaultSampleFlags=i,a}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.trackId),r(t,this.offset+n+4,this.defaultSampleDescriptionIndex),r(t,this.offset+n+8,this.defaultSampleDuration),r(t,this.offset+n+12,this.defaultSampleSize),r(t,this.offset+n+16,this.defaultSampleFlags),n+20},t}(g);e.TrackExtendsBox=L;var j=function(e){function r(r,n,o){var i=e.call(this,\"mvex\",t([r],n,[o]))||this;return i.header=r,i.tracDefaults=n,i.levels=o,i}return i(r,e),r}(v);e.MovieExtendsBox=j;var N=function(e){function t(t,r){var n=e.call(this,\"meta\",0,0)||this;return n.handler=t,n.otherBoxes=r,n}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t);return r+=this.handler.layout(t+r),this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},t.prototype.write=function(t){var r=e.prototype.write.call(this,t);return r+=this.handler.write(t),this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},t}(g);e.MetaBox=N;var U=function(e){function t(t){var r=e.call(this,\"mfhd\",0,0)||this;return r.sequenceNumber=t,r}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.sequenceNumber),n+4},t}(g);e.MovieFragmentHeaderBox=U;var F;!function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]=\"BASE_DATA_OFFSET_PRESENT\",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]=\"SAMPLE_DESCRIPTION_INDEX_PRESENT\",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]=\"DEFAULT_SAMPLE_DURATION_PRESENT\",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]=\"DEFAULT_SAMPLE_SIZE_PRESENT\",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]=\"DEFAULT_SAMPLE_FLAGS_PRESENT\"}(F=e.TrackFragmentFlags||(e.TrackFragmentFlags={}));var B=function(e){function t(t,r,n,o,i,a,s){var u=e.call(this,\"tfhd\",0,t)||this;return u.trackId=r,u.baseDataOffset=n,u.sampleDescriptionIndex=o,u.defaultSampleDuration=i,u.defaultSampleSize=a,u.defaultSampleFlags=s,u}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t)+4,n=this.flags;return n&F.BASE_DATA_OFFSET_PRESENT&&(r+=8),n&F.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r+=4),n&F.DEFAULT_SAMPLE_DURATION_PRESENT&&(r+=4),n&F.DEFAULT_SAMPLE_SIZE_PRESENT&&(r+=4),n&F.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r+=4),this.size=r},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),o=this.flags;return r(t,this.offset+n,this.trackId),n+=4,o&F.BASE_DATA_OFFSET_PRESENT&&(r(t,this.offset+n,0),r(t,this.offset+n+4,this.baseDataOffset),n+=8),o&F.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(t,this.offset+n,this.sampleDescriptionIndex),n+=4),o&F.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,this.defaultSampleDuration),n+=4),o&F.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,this.defaultSampleSize),n+=4),o&F.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.defaultSampleFlags),n+=4),n},t}(g);e.TrackFragmentHeaderBox=B;var q=function(e){function t(t){var r=e.call(this,\"tfdt\",0,0)||this;return r.baseMediaDecodeTime=t,r}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.baseMediaDecodeTime),n+4},t}(g);e.TrackFragmentBaseMediaDecodeTimeBox=q;var H=function(e){function t(t,r,n){var o=e.call(this,\"traf\",[t,r,n])||this;return o.header=t,o.decodeTime=r,o.run=n,o}return i(t,e),t}(v);e.TrackFragmentBox=H;var z;!function(e){e[e.IS_LEADING_MASK=201326592]=\"IS_LEADING_MASK\",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]=\"SAMPLE_DEPENDS_ON_MASK\",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]=\"SAMPLE_DEPENDS_ON_OTHER\",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]=\"SAMPLE_DEPENDS_ON_NO_OTHERS\",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]=\"SAMPLE_IS_DEPENDED_ON_MASK\",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]=\"SAMPLE_HAS_REDUNDANCY_MASK\",e[e.SAMPLE_PADDING_VALUE_MASK=917504]=\"SAMPLE_PADDING_VALUE_MASK\",e[e.SAMPLE_IS_NOT_SYNC=65536]=\"SAMPLE_IS_NOT_SYNC\",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]=\"SAMPLE_DEGRADATION_PRIORITY_MASK\"}(z=e.SampleFlags||(e.SampleFlags={}));var G;!function(e){e[e.DATA_OFFSET_PRESENT=1]=\"DATA_OFFSET_PRESENT\",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]=\"FIRST_SAMPLE_FLAGS_PRESENT\",e[e.SAMPLE_DURATION_PRESENT=256]=\"SAMPLE_DURATION_PRESENT\",e[e.SAMPLE_SIZE_PRESENT=512]=\"SAMPLE_SIZE_PRESENT\",e[e.SAMPLE_FLAGS_PRESENT=1024]=\"SAMPLE_FLAGS_PRESENT\",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]=\"SAMPLE_COMPOSITION_TIME_OFFSET\"}(G=e.TrackRunFlags||(e.TrackRunFlags={}));var V=function(e){function t(t,r,n,o){var i=e.call(this,\"trun\",1,t)||this;return i.samples=r,i.dataOffset=n,i.firstSampleFlags=o,i}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t)+4,n=this.samples.length,o=this.flags;return o&G.DATA_OFFSET_PRESENT&&(r+=4),o&G.FIRST_SAMPLE_FLAGS_PRESENT&&(r+=4),o&G.SAMPLE_DURATION_PRESENT&&(r+=4*n),o&G.SAMPLE_SIZE_PRESENT&&(r+=4*n),o&G.SAMPLE_FLAGS_PRESENT&&(r+=4*n),o&G.SAMPLE_COMPOSITION_TIME_OFFSET&&(r+=4*n),this.size=r},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),o=this.samples.length,i=this.flags;r(t,this.offset+n,o),n+=4,i&G.DATA_OFFSET_PRESENT&&(r(t,this.offset+n,this.dataOffset),n+=4),i&G.FIRST_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.firstSampleFlags),n+=4);for(var a=0;a<o;a++){var s=this.samples[a];i&G.SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,s.duration),n+=4),i&G.SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,s.size),n+=4),i&G.SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,s.flags),n+=4),i&G.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(t,this.offset+n,s.compositionTimeOffset),n+=4)}return n},t}(g);e.TrackRunBox=V;var K=function(e){function r(r,n){var o=e.call(this,\"moof\",t([r],n))||this;return o.header=r,o.trafs=n,o}return i(r,e),r}(v);e.MovieFragmentBox=K;var W=function(e){function t(t){var r=e.call(this,\"mdat\")||this;return r.chunks=t,r}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t);return this.chunks.forEach(function(e){r+=e.length}),this.size=r},t.prototype.write=function(t){var r=this,n=e.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,r.offset+n),n+=e.length},this),n},t}(_);e.MediaDataBox=W;var J=function(e){function t(t,r){var n=e.call(this,t)||this;return n.dataReferenceIndex=r,n}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,this.dataReferenceIndex),n+8},t}(_);e.SampleEntry=J;var Q=function(e){function t(t,r,n,o,i,a){void 0===n&&(n=2),void 0===o&&(o=16),void 0===i&&(i=44100),void 0===a&&(a=null);var s=e.call(this,t,r)||this;return s.channelCount=n,s.sampleSize=o,s.sampleRate=i,s.otherBoxes=a,s}return i(t,e),t.prototype.layout=function(t){var r=e.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(J);e.AudioSampleEntry=Q,e.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var Y=function(t){function n(r,n,o,i,a,s,u,l,c,d){void 0===a&&(a=\"\"),void 0===s&&(s=72),void 0===u&&(u=72),void 0===l&&(l=1),void 0===c&&(c=e.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===d&&(d=null);var f=t.call(this,r,n)||this;if(f.width=o,f.height=i,f.compressorName=a,f.horizResolution=s,f.vertResolution=u,f.frameCount=l,f.depth=c,f.otherBoxes=d,a.length>31)throw new Error(\"invalid compressor name\");return f}return i(n,t),n.prototype.layout=function(e){var r=t.prototype.layout.call(this,e)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(t){r+=t.layout(e+r)}),this.size=r},n.prototype.write=function(e){var n=t.prototype.write.call(this,e);r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,this.width<<16|this.height),r(e,this.offset+n+4,s(this.horizResolution)),r(e,this.offset+n+8,s(this.vertResolution)),n+=12,r(e,this.offset+n,0),r(e,this.offset+n+4,this.frameCount<<16),n+=6,e[this.offset+n]=this.compressorName.length;for(var o=0;o<31;o++)e[this.offset+n+o+1]=o<this.compressorName.length?127&this.compressorName.charCodeAt(o):0;return n+=32,r(e,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},n}(J);e.VideoSampleEntry=Y;var X=function(e){function t(t,r){var n=e.call(this,t)||this;return n.data=r,n}return i(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+this.data.length,this.size},t.prototype.write=function(t){var r=e.prototype.write.call(this,t);return t.set(this.data,this.offset+r),r+this.data.length},t}(_);e.RawTag=X}(t=e.Iso||(e.Iso={}))}(t=e.MP4||(e.MP4={}))}(n||(n={})),t.MP4Mux=n.MP4.MP4Mux},function(e,t,r){\"use strict\";var n,o=r(55),i=r(19),a=r(2),s=r(62),u=r(2),l=r(1),c=Function.prototype.bind,d=Object.defineProperty,f=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=l(t)&&u(t.value);return n=o(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&f.call(this,e)?i:(t.value=c.call(i,r.resolveContext?r.resolveContext(this):this),d(this,e,t),this[e])},n},e.exports=function(e){var t=i(arguments[1]);return null!=t.resolveContext&&a(t.resolveContext),s(e,function(e,r){return n(r,e,t)})}},function(e,t,r){\"use strict\";var n=r(1);e.exports=function(){return n(this).length=0,this}},function(e,t,r){\"use strict\";e.exports=r(44)()?Array.from:r(45)},function(e,t,r){\"use strict\";e.exports=function(){var e,t,r=Array.from;return\"function\"==typeof r&&(e=[\"raz\",\"dwa\"],t=r(e),Boolean(t&&t!==e&&\"dwa\"===t[1]))}},function(e,t,r){\"use strict\";var n=r(3).iterator,o=r(7),i=r(46),a=r(51),s=r(2),u=r(1),l=r(4),c=r(8),d=Array.isArray,f=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;e.exports=function(e){var t,r,_,g,y,v,m,E,b,w,S=arguments[1],P=arguments[2];if(e=Object(u(e)),l(S)&&s(S),this&&this!==Array&&i(this))t=this;else{if(!S){if(o(e))return y=e.length,1!==y?Array.apply(null,e):(g=new Array(1),g[0]=e[0],g);if(d(e)){for(g=new Array(y=e.length),r=0;r<y;++r)g[r]=e[r];return g}}g=[]}if(!d(e))if(void 0!==(b=e[n])){for(m=s(b).call(e),t&&(g=new t),E=m.next(),r=0;!E.done;)w=S?f.call(S,P,E.value,r):E.value,t?(p.value=w,h(g,r,p)):g[r]=w,E=m.next(),++r;y=r}else if(c(e)){for(y=e.length,t&&(g=new t),r=0,_=0;r<y;++r)w=e[r],r+1<y&&(v=w.charCodeAt(0),v>=55296&&v<=56319&&(w+=e[++r])),w=S?f.call(S,P,w,_):w,t?(p.value=w,h(g,_,p)):g[_]=w,++_;y=_}if(void 0===y)for(y=a(e.length),t&&(g=new t(y)),r=0;r<y;++r)w=S?f.call(S,P,e[r],r):e[r],t?(p.value=w,h(g,r,p)):g[r]=w;return t&&(p.value=null,g.length=y),g}},function(e,t,r){\"use strict\";var n=Object.prototype.toString,o=n.call(r(17));e.exports=function(e){return\"function\"==typeof e&&n.call(e)===o}},function(e,t,r){\"use strict\";e.exports=r(48)()?Math.sign:r(49)},function(e,t,r){\"use strict\";e.exports=function(){var e=Math.sign;return\"function\"==typeof e&&1===e(10)&&e(-20)===-1}},function(e,t,r){\"use strict\";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,r){\"use strict\";var n=r(47),o=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?n(e)*i(o(e)):e)}},function(e,t,r){\"use strict\";var n=r(50),o=Math.max;e.exports=function(e){return o(0,n(e))}},function(e,t,r){\"use strict\";var n=r(2),o=r(1),i=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,l){var c,d=arguments[2],f=arguments[3];return r=Object(o(r)),n(l),c=s(r),f&&c.sort(\"function\"==typeof f?i.call(f,r):void 0),\"function\"!=typeof e&&(e=c[e]),a.call(e,c,function(e,n){return u.call(r,e)?a.call(l,d,r[e],e,r,n):t})}}},function(e,t,r){\"use strict\";e.exports=function(){var e,t=Object.assign;return\"function\"==typeof t&&(e={foo:\"raz\"},t(e,{bar:\"dwa\"},{trzy:\"trzy\"}),e.foo+e.bar+e.trzy===\"razdwatrzy\")}},function(e,t,r){\"use strict\";var n=r(59),o=r(1),i=Math.max;e.exports=function(e,t){var r,a,s,u=i(arguments.length,2);for(e=Object(o(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},a=1;a<u;++a)t=arguments[a],n(t).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){\"use strict\";var n=r(43),o=r(10),i=r(1);e.exports=function(e){var t=Object(i(e)),r=arguments[1],a=Object(arguments[2]);if(t!==e&&!r)return t;var s={};return r?n(r,function(t){(a.ensure||t in e)&&(s[t]=e[t])}):o(s,e),s}},function(e,t,r){\"use strict\";var n,o=Object.create;r(20)()||(n=r(21)),e.exports=function(){var e,t,r;return n?1!==n.level?o:(e={},t={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return\"__proto__\"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=r)}),Object.defineProperties(e,t),Object.defineProperty(n,\"nullPolyfill\",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,r){return o(null===t?e:t,r)}):o}()},function(e,t,r){\"use strict\";e.exports=r(52)(\"forEach\")},function(e,t,r){\"use strict\";e.exports=function(e){return\"function\"==typeof e}},function(e,t,r){\"use strict\";e.exports=r(60)()?Object.keys:r(61)},function(e,t,r){\"use strict\";e.exports=function(){try{return Object.keys(\"primitive\"),!0}catch(e){return!1}}},function(e,t,r){\"use strict\";var n=r(4),o=Object.keys;e.exports=function(e){return o(n(e)?Object(e):e)}},function(e,t,r){\"use strict\";var n=r(2),o=r(57),i=Function.prototype.call;e.exports=function(e,t){var r={},a=arguments[2];return n(t),o(e,function(e,n,o,s){r[n]=i.call(t,a,e,n,o,s)}),r}},function(e,t,r){\"use strict\";var n=r(18);e.exports=function(e){if(!n(e))throw new TypeError(e+\" is not an Object\");return e}},function(e,t,r){\"use strict\";var n=\"razdwatrzy\";e.exports=function(){return\"function\"==typeof n.contains&&n.contains(\"dwa\")===!0&&n.contains(\"foo\")===!1}},function(e,t,r){\"use strict\";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){\"use strict\";var n=Object.create(null),o=Math.random;e.exports=function(){var e;do e=o().toString(36).slice(2);while(n[e]);return e}},function(e,t,r){\"use strict\";var n,o=r(11),i=r(22),a=r(6),s=r(3),u=r(24),l=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");u.call(this,e),t=t?i.call(t,\"key+value\")?\"key+value\":i.call(t,\"key\")?\"key\":\"value\":\"value\",l(this,\"__kind__\",a(\"\",t))},o&&o(n,u),delete n.prototype.constructor,n.prototype=Object.create(u.prototype,{_resolve:a(function(e){return\"value\"===this.__kind__?this.__list__[e]:\"key+value\"===this.__kind__?[e,this.__list__[e]]:e})}),l(n.prototype,s.toStringTag,a(\"c\",\"Array Iterator\"))},function(e,t,r){\"use strict\";var n=r(7),o=r(2),i=r(8),a=r(23),s=Array.isArray,u=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var r,c,d,f,p,h,_,g,y=arguments[2];if(s(e)||n(e)?r=\"array\":i(e)?r=\"string\":e=a(e),o(t),d=function(){f=!0},\"array\"===r)return void l.call(e,function(e){return u.call(t,y,e,d),f});if(\"string\"!==r)for(c=e.next();!c.done;){if(u.call(t,y,c.value,d),f)return;c=e.next()}else for(h=e.length,p=0;p<h&&(_=e[p],p+1<h&&(g=_.charCodeAt(0),g>=55296&&g<=56319&&(_+=e[++p])),u.call(t,y,_,d),!f);++p);}},function(e,t,r){\"use strict\";var n=r(7),o=r(4),i=r(8),a=r(3).iterator,s=Array.isArray;e.exports=function(e){return!(!o(e)||!s(e)&&!i(e)&&!n(e)&&\"function\"!=typeof e[a])}},function(e,t,r){\"use strict\";var n,o=r(11),i=r(6),a=r(3),s=r(24),u=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");e=String(e),s.call(this,e),u(this,\"__length__\",i(\"\",e.length))},o&&o(n,s),delete n.prototype.constructor,n.prototype=Object.create(s.prototype,{_next:i(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:i(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0),t>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),u(n.prototype,a.toStringTag,i(\"c\",\"String Iterator\"))},function(e,t,r){\"use strict\";var n=r(69);e.exports=function(e){if(!n(e))throw new TypeError(e+\" is not iterable\");return e}},function(e,t,r){\"use strict\";var n={object:!0,symbol:!0};e.exports=function(){var e;if(\"function\"!=typeof Symbol)return!1;e=Symbol(\"test symbol\");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}},function(e,t,r){\"use strict\";e.exports=function(e){return!!e&&(\"symbol\"==typeof e||!!e.constructor&&\"Symbol\"===e.constructor.name&&\"Symbol\"===e[e.constructor.toStringTag])}},function(e,t,r){\"use strict\";var n,o,i,a,s=r(6),u=r(75),l=Object.create,c=Object.defineProperties,d=Object.defineProperty,f=Object.prototype,p=l(null);if(\"function\"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var r,n,o=0;e[t+(o||\"\")];)++o;return t+=o||\"\",e[t]=!0,r=\"@@\"+t,d(f,r,s.gs(null,function(e){n||(n=!0,d(this,r,s(e)),n=!1)})),r}}();i=function(e){if(this instanceof i)throw new TypeError(\"Symbol is not a constructor\");return o(e)},e.exports=o=function e(t){var r;if(this instanceof e)throw new TypeError(\"Symbol is not a constructor\");return a?n(t):(r=l(i.prototype),t=void 0===t?\"\":String(t),c(r,{__description__:s(\"\",t),__name__:s(\"\",h(t))}))},c(o,{for:s(function(e){return p[e]?p[e]:p[e]=o(String(e))}),keyFor:s(function(e){var t;u(e);for(t in p)if(p[t]===e)return t}),hasInstance:s(\"\",n&&n.hasInstance||o(\"hasInstance\")),isConcatSpreadable:s(\"\",n&&n.isConcatSpreadable||o(\"isConcatSpreadable\")),iterator:s(\"\",n&&n.iterator||o(\"iterator\")),match:s(\"\",n&&n.match||o(\"match\")),replace:s(\"\",n&&n.replace||o(\"replace\")),search:s(\"\",n&&n.search||o(\"search\")),species:s(\"\",n&&n.species||o(\"species\")),split:s(\"\",n&&n.split||o(\"split\")),toPrimitive:s(\"\",n&&n.toPrimitive||o(\"toPrimitive\")),toStringTag:s(\"\",n&&n.toStringTag||o(\"toStringTag\")),unscopables:s(\"\",n&&n.unscopables||o(\"unscopables\"))}),c(i.prototype,{constructor:s(o),toString:s(\"\",function(){return this.__name__})}),c(o.prototype,{toString:s(function(){return\"Symbol (\"+u(this).__description__+\")\"}),valueOf:s(function(){return u(this)})}),d(o.prototype,o.toPrimitive,s(\"\",function(){var e=u(this);return\"symbol\"==typeof e?e:e.toString()})),d(o.prototype,o.toStringTag,s(\"c\",\"Symbol\")),d(i.prototype,o.toStringTag,s(\"c\",o.prototype[o.toStringTag])),d(i.prototype,o.toPrimitive,s(\"c\",o.prototype[o.toPrimitive]))},function(e,t,r){\"use strict\";var n=r(73);e.exports=function(e){if(!n(e))throw new TypeError(e+\" is not a symbol\");return e}},function(e,t,r){\"use strict\";e.exports=r(77)()?WeakMap:r(79)},function(e,t,r){\"use strict\";e.exports=function(){var e,t;if(\"function\"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},\"one\"],[{},\"two\"],[{},\"three\"]])}catch(e){return!1}return\"[object WeakMap]\"===String(e)&&\"function\"==typeof e.set&&e.set({},1)===e&&\"function\"==typeof e.delete&&\"function\"==typeof e.has&&\"one\"===e.get(t)}},function(e,t,r){\"use strict\";e.exports=function(){return\"function\"==typeof WeakMap&&\"[object WeakMap]\"===Object.prototype.toString.call(new WeakMap)}()},function(e,t,r){\"use strict\";var n,o=r(11),i=r(63),a=r(1),s=r(66),u=r(6),l=r(23),c=r(68),d=r(3).toStringTag,f=r(78),p=Array.isArray,h=Object.defineProperty,_=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=n=function(){var e,t=arguments[0];if(!(this instanceof n))throw new TypeError(\"Constructor requires 'new'\");return e=f&&o&&WeakMap!==n?o(new WeakMap,g(this)):this,null!=t&&(p(t)||(t=l(t))),h(e,\"__weakMapData__\",u(\"c\",\"$weakMap$\"+s())),t?(c(t,function(t){a(t),e.set(t[0],t[1])}),e):e;\n},f&&(o&&o(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:u(n)})),Object.defineProperties(n.prototype,{delete:u(function(e){return!!_.call(i(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:u(function(e){if(_.call(i(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:u(function(e){return _.call(i(e),this.__weakMapData__)}),set:u(function(e,t){return h(i(e),this.__weakMapData__,u(\"c\",t)),this}),toString:u(function(){return\"[object WeakMap]\"})}),h(n.prototype,d,u(\"c\",\"WeakMap\"))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(83),o=r(82),i=[n.WebCrypto,o.JSCrypto];t.default=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(80),i=n.helpers.find;t.DecryptorFactory={retrieveDecryptor:function(e){return i(o.default,function(t){return t.canDecrypt(e)})||null}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(38),i=n.helpers.Promise,a=null;t.JSCrypto={canDecrypt:function(e){return\"AES-CBC\"===e.cipher},decrypt:function(e,t){return a||(a=new o.AESDecryptor),a.expandKey(t.key.buffer),i.resolve(new Uint8Array(a.decrypt(e.buffer,0,t.iv.buffer)))}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=n.helpers.Promise,i=window.crypto&&window.crypto.subtle;t.WebCrypto={canDecrypt:function(e){return!!i&&window.isSecureContext&&\"AES-CBC\"===e.cipher},decrypt:function(e,t){return new o(function(r,n){function o(e){return i.importKey(\"raw\",e,{name:\"AES-CBC\"},!1,[\"decrypt\"])}o(t.key).then(function(r){return i.decrypt({name:\"AES-CBC\",iv:t.iv},r,e)}).then(function(e){return r(new Uint8Array(e))}).catch(n)})}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(86),o=r(85),i=[n.OggOpusSegmentParser,o.DefaultSegmentParser];t.default=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=n.helpers.abortableJob.AbortableJob,i=n.helpers.Promise;t.DefaultSegmentParser={getFormat:function(){return{}},parseSegmentData:function(e){var t=new o(function(){return{result:i.resolve({data:e})}});return t.run()}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(9),i=r(76),a=n.helpers.abortableJob.AbortableJob,s=n.helpers.Promise,u=n.helpers.arrayBuffer.combine,l=new i;t.OggOpusSegmentParser={getFormat:function(){return{mimeType:\"audio/ogg\",audioCodec:{id:\"opus\"}}},parseSegmentData:function(e,t,r){var n=new a(function(){var n=o.retrievePages(e);if(n.length){var i=o.retrievePackets([n[0]])[0];if(i&&i.first){var a=1;n.slice(1).some(function(e,t){var r=!!(1&e.header.type[0]);return t>0&&!r||(a=t+2,!1)});var c=u(n.slice(0,a).map(function(e){return e.entirePage}));return l.set(r,c),{result:s.resolve({data:u(n.slice(a).map(function(e){return e.entirePage})),initData:c})}}}if(t.getSequenceNumber()<=r.getStartingSequenceNumber())return{result:s.reject(new Error(\"Could not find init data.\"))};if(l.has(r))return{result:s.resolve({initData:l.get(r),data:e})};var d=r.getSegment(r.getStartingSequenceNumber()),f=null,p=d.whenComplete().then(function(t){return f=t.retrieveData(),f.whenComplete().then(function(t){var r=t.data;return{initData:r.initData,data:e}})});return{result:p,abort:function(){d.abort(),f&&f.abort()}}});return n.run()}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(29),i=r(84),a=n.helpers.find;t.SegmentParserFactory={retrieveSegmentParser:function(e){var t=a(i.default,function(t){return o.isPartialMatch(t.getFormat(),e)});if(!t)throw new Error(\"No segment parser found.\");return t}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(16),o=r(15),i=r(89),a=[n.PassThrough,o.MP3ToMP4,i.OggOpusToWebm];t.default=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(9),i=r(90),a=n.helpers.Promise,s=n.helpers.arrayBuffer.combine;t.OggOpusToWebm={getInputFormat:function(){return{mimeType:\"audio/ogg\",audioCodec:{id:\"opus\"}}},getOutputFormat:function(){return{mimeType:\"audio/webm\",audioCodec:{id:\"opus\"}}},transmux:function(e){try{var t=e.initData?s([e.initData,e.data]):e.data,r=o.retrievePackets(o.retrievePages(t)),n=i.buildWebm(r);return a.resolve({data:n.data,initData:n.initData})}catch(e){return a.reject(e)}}}},function(e,t){e.exports=r},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085;var n=r(34);t.PlaylistSegmentRetriever=n.PlaylistSegmentRetriever;var o=r(35);t.Playlist=o.Playlist,t.PlaylistType=o.PlaylistType;var i=r(14);t.Segment=i.Segment;var a=r(37);t.TransmuxerFactory=a.TransmuxerFactory;var s=r(15);t.MP3ToMP4Transmuxer=s.MP3ToMP4;var u=r(16);t.PassThroughTransmuxer=u.PassThrough;var l=r(36);t.retrievalErrors=l.retrievalErrors;var c=r(33);t.events=c.events}])})},function(e,t,r){!function(t,n){e.exports=n(r(2))}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e){this._msg=e}return e.prototype.getMsg=function(){return this._msg},e}();t.OggParserError=n},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.OggParserError);t.ChecksumFailedError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.OggParserError);t.NoSegmentsInPageError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.OggParserError);t.PageFromDifferentBitstreamError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.OggParserError);t.PageSequenceNumberDidNotIncrementError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.OggParserError);t.UnexpectedBOSError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.OggParserError);t.UnexpectedEOSError=i},function(e,t,r){\"use strict\";function n(e,t,r){return void 0===r&&(r=1),e.slice(t,t+r)}function o(e,t){return void 0===t&&(t=!0),new DataView(e).getUint32(0,t)}function i(e){for(var t=e.buffer,r=[],n=e.byteOffset-1;;){var o=n+1,i=new Uint8Array(t,o).findIndex(function(e,t,r){return r[t]===y[0]&&r[t+1]===y[1]&&r[t+2]===y[2]&&r[t+3]===y[3]});if(i===-1)break;i+=o,n=i;var s=new DataView(t,i);r.push(a(s))}return r}function a(e){var t=new Uint8Array(e.buffer,e.byteOffset),r=n(t,26),i=n(t,27,r[0]),a={version:n(t,4),type:n(t,5),granulePosition:n(t,6,8),bitstreamSerialNumber:n(t,14,4),pageSequenceNumber:n(t,18,4),checksum:n(t,22,4),pageSegments:r,segmentTable:i},s=[],u=27+r[0];if(i.forEach(function(e){s.push(n(t,u,e)),u+=e}),!s.length)throw new _.NoSegmentsInPageError(\"No segments.\");var d=l.calculateCRC([y,a.version,a.type,a.granulePosition,a.bitstreamSerialNumber,a.pageSequenceNumber,v,r,i].concat(s)),f=o(a.checksum.buffer);if(d!==f)throw new c.ChecksumFailedError(\"Checksum failed.\");return{header:a,segments:s,entirePage:n(t,0,u)}}function s(e){if(!e.length)return[];var t=o(e[0].header.bitstreamSerialNumber.buffer),r=-1,n=null,i=[];return e.forEach(function(a,s){if(o(a.header.bitstreamSerialNumber.buffer)!==t)throw new d.PageFromDifferentBitstreamError(\"Got a page from a different bitstream.\");var u=o(a.header.pageSequenceNumber.buffer);if(u<=r)throw new f.PageSequenceNumberDidNotIncrementError(\"Page sequence number was not greater than the previous one.\");var l=u!==r+1;r=u;var c=a.header.type[0],_=!!(1&c),y=!!(2&c);if(y&&s>0)throw new p.UnexpectedBOSError(\"Got BOS on a page which is not the first.\");var v=!!(4&c);if(v&&s!==e.length-1)throw new h.UnexpectedEOSError(\"Got EOS on a page which is not the last.\");var m=0;l&&(n=null);var E=a.segments.length;a.segments.forEach(function(e,t){if(n?n.data=g([n.data,e]):_&&0===t||(n={granulePosition:null,pageSequenceNumber:r,packetOffset:m,discontinuity:l&&0===m,first:y&&0===m,last:!1,data:e},m++),n&&e.byteLength<255){var s=t===E-1;s&&(n.granulePosition=o(a.header.granulePosition.buffer)),n.last=v&&s,i.push(n),n=null}})}),i}Object.defineProperty(t,\"__esModule\",{value:!0});var u=r(9),l=r(8),c=r(1),d=r(3),f=r(4),p=r(5),h=r(6),_=r(2),g=u.helpers.arrayBuffer.combine,y=new Uint8Array([79,103,103,83]),v=new Uint8Array([0,0,0,0]);t.retrievePages=i,t.parsePage=a,t.retrievePackets=s},function(e,t,r){\"use strict\";function n(e){var t=0;return e.forEach(function(e){for(var r=0;r<e.length;r++)t=t<<8^o[t>>24&255^e[r]]}),t>>>0}Object.defineProperty(t,\"__esModule\",{value:!0});var o=new Uint32Array([0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]);t.calculateCRC=n},function(t,r){t.exports=e},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085,n(r(7));var o=r(0);t.OggParserError=o.OggParserError;var i=r(1);t.ChecksumFailedError=i.ChecksumFailedError;var a=r(2);t.NoSegmentsInPageError=a.NoSegmentsInPageError;var s=r(3);t.PageFromDifferentBitstreamError=s.PageFromDifferentBitstreamError;var u=r(4);t.PageSequenceNumberDidNotIncrementError=u.PageSequenceNumberDidNotIncrementError;var l=r(5);t.UnexpectedBOSError=l.UnexpectedBOSError;var c=r(6);t.UnexpectedEOSError=c.UnexpectedEOSError}])})},function(e,t,r){!function(t,n){e.exports=n(r(2))}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}([function(t,r){t.exports=e},function(e,t,r){\"use strict\";function n(e){var t=3&e[0];return 0===t?1:3!==t?2:63&e[1]}function o(e){var t=e[0]>>>3&31;if(t>=f.length)throw new Error(\"Invalid configuration.\");return f[t]}function i(e){if(!e.first)throw new Error(\"OpusHead is always in the first packet.\");var t=e.data,r=new DataView(t.buffer),n=r.getUint8(9),o=r.getUint8(17),i=void 0,a=void 0,s=void 0;if(o>0){i=r.getUint8(18),a=r.getUint8(19),s=[];for(var u=0;u<n;u++)s.push(r.getUint8(20+u))}return{version:r.getUint8(8),channelCount:n,preSkip:r.getUint16(10,!0),inputSampleRate:r.getUint32(12,!0),outputGain:r.getUint16(16),channelMapFamily:o,streamCount:i,twoChannelStreamCount:a,channelMappingTable:s}}function a(e){var t=e[0];if(!t||!t.first)throw new Error(\"Missing start of stream.\");var r=e.slice(2),a=i(t),s=0,l=0,f=r.map(function(e,t){if(e.discontinuity&&t>0)throw new Error(\"Discontinuities after first audio packet not supported.\");var r=new Uint8Array(4);r[0]=129,new DataView(r.buffer).setInt16(1,l),r[3]=128;var i=n(e.data);return s+=i,l+=i*o(e.data),u.encodeElement(u.IDS.SimpleBlock,c([r,e.data]))}),p=c([u.encodeElement(u.IDS.EBML,function(){return c([u.encodeElement(u.IDS.EBMLVersion,d(1)),u.encodeElement(u.IDS.EBMLReadVersion,d(1)),u.encodeElement(u.IDS.EBMLMaxIDLength,d(4)),u.encodeElement(u.IDS.EBMLMaxSizeLength,d(8)),u.encodeElement(u.IDS.DocType,new Uint8Array([119,101,98,109])),u.encodeElement(u.IDS.DocTypeVersion,d(1)),u.encodeElement(u.IDS.DocTypeReadVersion,d(2))])}()),u.encodeElement(u.IDS.Segment,function(){return u.encodeElement(u.IDS.Info,function(){return u.encodeElement(u.IDS.Duration,function(){var e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,l),e}())}())}()),u.encodeElement(u.IDS.Tracks,function(){return u.encodeElement(u.IDS.TrackEntry,function(){return c([u.encodeElement(u.IDS.TrackNumber,d(1)),u.encodeElement(u.IDS.TrackUID,d(1)),u.encodeElement(u.IDS.FlagLacing,d(0)),u.encodeElement(u.IDS.CodecID,new Uint8Array([65,95,79,80,85,83])),u.encodeElement(u.IDS.CodecDelay,d(a.preSkip/48e3*1e9)),u.encodeElement(u.IDS.SeekPreRoll,new Uint8Array([4,196,180,0])),u.encodeElement(u.IDS.TrackType,d(2)),u.encodeElement(u.IDS.Audio,function(){return c([u.encodeElement(u.IDS.Channels,d(a.channelCount)),u.encodeElement(u.IDS.SamplingFrequency,new Uint8Array([64,231,112,0,0,0,0,0]))])}()),u.encodeElement(u.IDS.CodecPrivate,t.data)])}())}())]),h=u.encodeElement(u.IDS.Cluster,function(){var e=[u.encodeElement(u.IDS.Timecode,d(0))];return e.push.apply(e,f),c(e)}());return{initData:p,data:h}}Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(0),u=r(2),l=s.helpers.arrayBuffer,c=l.combine,d=l.numberToUint8Array,f=[10,20,40,60,10,20,40,60,10,20,40,60,10,20,10,20,2.5,5,10,20,2.5,5,10,20,2.5,5,10,20,2.5,5,10,20];t.buildWebm=a},function(e,t,r){\"use strict\";function n(e,t){var r=s(e),n=u(t.byteLength);return a([r,n,t])}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=o.helpers.arrayBuffer,a=i.combine,s=i.numberToUint8Array,u=i.createVintBuffer;t.IDS={EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,EBMLMaxIDLength:17138,EBMLMaxSizeLength:17139,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029,Segment:408125543,Info:357149030,Duration:17545,Tracks:374648427,TrackEntry:174,TrackNumber:215,TrackUID:29637,FlagLacing:156,CodecID:134,CodecDelay:22186,SeekPreRoll:22203,TrackType:131,Audio:225,Channels:159,SamplingFrequency:181,CodecPrivate:25506,Cluster:524531317,Timecode:231,SimpleBlock:163},t.encodeElement=n},function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085,n(r(1))}])})},function(e,t,r){!function(t,n){e.exports=n(r(2))}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=8)}([function(t,r){t.exports=e},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return e.call(this,\"An unrecoverable error occurred whilst decoding.\")||this}return n(t,e),t.prototype.getCode=function(){return\"HTML5_PLAYER.DECODE_ERROR\"},t}(o.errors.PlayerFatalError);t.DecodeError=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return e.call(this,\"An unrecoverable network error occurred.\")||this}return n(t,e),t.prototype.getCode=function(){return\"HTML5_PLAYER.NETWORK_ERROR\"},t}(o.errors.PlayerFatalError);t.NetworkError=i},function(e,t,r){\"use strict\";function n(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push({end:1e3*e.end(n),start:1e3*e.start(n)});return o.TimeRange.normalizeRawTimeRanges(t).map(function(e){return new o.TimeRange(e.start,e.end-e.start)})}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0);t.buildTimeRanges=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(1),i=r(2);!function(e){e.DecodeError=o.DecodeError,e.NetworkError=i.NetworkError}(n=t.errors||(t.errors={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(3);!function(e){var t;!function(e){e.buildTimeRanges=o.buildTimeRanges}(t=e.timeRanges||(e.timeRanges={}))}(n=t.helpers||(t.helpers={}))},function(e,t,r){\"use strict\";function n(e){e.load()}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(0),a=r(1),s=r(2),u=r(3),l=r(7),c=i.helpers.deferred.buildDeferred,d=i.helpers.url.getExtension,f=i.helpers.Promise,p=i.helpers.compact,h=i.logger.prefixLogger,_=i.errors.NotSupportedError,g=i.errors.PlayerFatalError,y=new Error(\"Media element was revoked.\"),v=10,m=200,E=function(e){function t(t,r){var n=e.call(this,r)||this;n._duration=null,n._stallDetected=!1,n._initialized=!1,n._deferredProvideMediaElementCallback=null,n._playInProgress={inProgress:!1},n._lastStallCheckPos=null,n._stallCheckTimerId=null,n._endedOverride=!1,n._volume=1,n._muted=!1,n._pauseEventTimer=null,n._positionWhenMediaElementRevoked=0,n._playingWhenMediaElementRevoked=!1,n._provideMediaElementDeferred=null,n._mediaElementAndState=null,n._listeners=[],n._currentSeekCallback=null,n._playDetectionPosition=0,n._playDetectionTimer=null,n._playDetectionTimerNumAttempts=0,n._logger=h(n._logger,\"HTML5Player\"),n._descriptor=t,n._playerDependencies=r,n._mimeType=t.getFormat().mimeType||n._buildMimeTypeAndCodecString(t.getFormat(),n._inferFormat(t.getUrl()));var o=void 0!==r.mediaElement?r.mediaElement:n._createDefaultMediaElement();return o&&n.provideMediaElement(o).catch(function(e){return e===y?void n._logger.debug(\"Initial provideMediaElement() call was aborted.\"):void n._triggerError(new l.InitializeError(e))}),n._logger.info(\"Checking if the player can play the provided descriptor.\"),n._canPlayTimer=window.setTimeout(function(){n._canPlay().then(function(e){if(!n.isDead())return e instanceof i.errors.NotSupportedError?(n._logger.info(\"Player not supported.\",e),void n._triggerError(e)):e?(n._logger.info(\"Player supported.\"),void n._initialize()):(n._logger.info(\"Player not supported.\"),void n._triggerError(new _))}).catch(function(e){n._logger.error(\"Unexpected error during can play check.\",e),n._triggerError(new g(\"An unexpected error occured during initialization.\",e))})},0),n}return o(t,e),t.prototype.getMediaElement=function(){return this._mediaElementAndState&&this._mediaElementAndState.element},t.prototype.provideMediaElement=function(e){var t=this;if(this._ensureNotDead(),this._mediaElementAndState)throw new Error(\"Already have a media element.\");this._logger.debug(\"provideMediaElement() called.\",e),this._initMediaElementLocal(e,null);var r=this._provideMediaElementDeferred=c(),n=this._mediaElementAndState={element:e,state:\"INITIALIZING\"},o=function(){t._logger.debug(\"Initializing media element.\"),t._initMediaElement(e,t._descriptor.getUrl()),t._attachListeners();var o=t._listenToOnce(\"error\",function(){t._provideMediaElementDeferred=null;var n=e.error.code+\" = \"+(e.error.message||\"[unknown]\");t._logger.error(\"Error whilst initializing media element.\",n),t.revokeMediaElement(),r.reject(new Error(\"Error when initializing media element. Error: \"+n))},{earlyAttach:!0});t._listenToOnce(\"loadeddata\",function(){t._logger.debug(\"Got loadeddata event from media element.\"),i()},{earlyAttach:!0});var i=function(){t._logger.debug(\"Putting media element in the state that is expected...\"),a()},a=function(){null===t._getQueuedSeekPosition()&&t._positionWhenMediaElementRevoked>0?(t._logger.debug(\"Seeking to expected position...\"),t._performSeek(t._positionWhenMediaElementRevoked,function(e){return void 0!==e?(t._provideMediaElementDeferred=null,t._logger.error(\"An error occurred when trying to seek to the expected position.\"),t.revokeMediaElement(),void r.reject(new Error(\"An error occurred when trying to restore the position.\"))):(t._logger.debug(\"Seeked to expected position.\"),void s())})):s()},s=function(){t.isPlaying()===t.isActuallyPlaying()&&t._playingWhenMediaElementRevoked?(t._logger.debug(\"Calling play to match previous state...\"),t._play().catch(function(){t._provideMediaElementDeferred=null,t._logger.error(\"An error occurred when trying to play.\"),n===t._mediaElementAndState&&t.revokeMediaElement(),r.reject(new Error(\"Browser refused play() request on media element.\"))}),t._listenToOnce(\"play\",function(){t._logger.debug(\"Play succeeded.\"),u()},{earlyAttach:!0})):u()},u=function(){return t._mediaElementAndState!==n?void t._triggerError(new g(\"Media element switched unexpectedly.\")):(t._provideMediaElementDeferred=null,o.remove(),r.resolve(void 0),t._mediaElementAndState.state=\"STABLE\",t._logger.debug(\"Finished putting element in expected state.\"),void(null!==t._duration&&t._update(function(){t.isReady()||t._signalReady(),t._handleDefferredPauseAndSeek()})))}};return this._initialized?o():this._deferredProvideMediaElementCallback=o,this._provideMediaElementDeferred.promise},t.prototype.revokeMediaElement=function(){if(!this._mediaElementAndState)throw new Error(\"There is no media element to revoke.\");this._deferredProvideMediaElementCallback=null,this._provideMediaElementDeferred&&(this._provideMediaElementDeferred.reject(y),this._provideMediaElementDeferred=null),this._logger.debug(\"revokeMediaElement() called.\"),this._detachListeners();var e=this._mediaElementAndState.element;this.isDead()||(this._positionWhenMediaElementRevoked=this.getPosition(),this._playingWhenMediaElementRevoked=this.isPlaying()),this._mediaElementAndState=null,this._initMediaElement(e,null),this.isDead()||this._handleStalled()},t.prototype.getVolume=function(){return this._volume},t.prototype.getMuted=function(){return this._muted},t.prototype.setMuted=function(e){this._muted=e,this._mediaElementAndState&&(this._mediaElementAndState.element.muted=e)},t.prototype.getBufferedTimeRanges=function(){return this._mediaElementAndState&&\"USABLE\"===this._mediaElementAndState.state?u.buildTimeRanges(this._mediaElementAndState.element.buffered):[]},t.prototype.getMaxBufferLength=function(){return null},t.prototype._setVolume=function(e){this._volume=e,this._mediaElementAndState&&(this._mediaElementAndState.element.volume=e)},t.prototype._inferFormat=function(e){var t=d(e);switch(t){case\"mp3\":return{mimeType:\"audio/mpeg\"};case\"opus\":return{mimeType:\"audio/ogg\",audioCodec:{id:\"opus\"}};case\"mp4\":return{mimeType:\"video/mp4\"};case\"m3u8\":return{mimeType:\"application/x-mpegURL\"};default:return{}}},t.prototype._buildMimeTypeAndCodecString=function(e,t){void 0===t&&(t={});var r=e.mimeType||t.mimeType,n=e.audioCodec||t.audioCodec,o=e.videoCodec||t.videoCodec,i=p([n,o]),a=i.length>0?'; codecs=\"'+i.map(function(e){return e.id}).join(\",\")+'\"':\"\";return r+a},t.prototype._getResolvedMimeType=function(){return this._mimeType},t.prototype._canPlay=function(){return this._mimeType&&this._canPlayProtocol(this._descriptor.getProtocol())&&this._canPlayType(this._mimeType)?f.resolve(!0):f.resolve(!1)},t.prototype._canPlayProtocol=function(e){return[\"http\",\"hls\"].indexOf(e.name)>=0},t.prototype._canPlayType=function(e){try{var t=document.createElement(\"audio\");return!!t.canPlayType(e)}catch(e){return!1}},t.prototype._initialize=function(){var e=this;this._initialized=!0,this._listenTo(\"error\",function(){if(\"INITIALIZING\"===e._mediaElementAndState.state)return void e._logger.debug(\"An error occurred, but the media element is initializing, so ignoring...\");var t=e._mediaElementAndState.element.error;switch(t.code){case 2:e._triggerError(new s.NetworkError);break;case 3:e._triggerError(new a.DecodeError);break;default:e._triggerError(new i.errors.PlayerFatalError(\"An unexpected error occurred.\",t))}},{earlyAttach:!0}),this._listenTo(\"play\",function(){e._logger.debug(\"Media element play event.\"),e.isPlaying()||!e._mediaElementAndState||e._mediaElementAndState.element.paused||(e._logger.debug(\"Calling play() because something external called play() on media element.\"),e.play())}),this._listenTo(\"playing\",function(){e._logger.debug(\"Media element playing event.\"),e._mediaElementAndState&&!e._mediaElementAndState.element.paused?e._handlePlayingEvent():e._logger.debug(\"Ignoring playing event because media element is reporting it is paused.\")}),this._listenTo(\"timeupdate\",function(){return e._determineIfPlaying()}),this._listenTo(\"pause\",function(){e._logger.debug(\"Media element pause event.\"),e._mediaElementAndState&&e._mediaElementAndState.element.paused?e._handlePauseEvent():e._logger.debug(\"Ignoring pause event because media element is reporting it is not paused.\")}),this._listenTo(\"ended\",function(){e._logger.debug(\"Media element ended event.\"),e._mediaElementAndState&&!e._mediaElementAndState.element.ended?e._handleEndedEvent():e._logger.debug(\"Ignoring ended event because media element is reporting it is not ended.\")}),this._listenTo(\"stalled\",function(){e._logger.debug(\"Media element stalled event.\"),e._checkIfStalled()}),this._stallCheckTimerId=window.setInterval(function(){return e._checkIfStalled()},400),this._retrieveDuration().then(function(t){e._logger.debug(\"Duration retrieved.\",t),e._duration=t,e._update(function(){e._provideDuration(t),e._mediaElementAndState&&\"STABLE\"===e._mediaElementAndState.state&&(e._signalReady(),e._handleDefferredPauseAndSeek())})}).catch(function(t){e._triggerError(new i.errors.PlayerFatalError(\"An unexpected error occurred when attempting to retrieve the duration.\",t))}),this._deferredProvideMediaElementCallback&&this._deferredProvideMediaElementCallback()},t.prototype._createDefaultMediaElement=function(){return document.createElement(this._playerDependencies.mediaElementType||\"audio\")},t.prototype._handlePauseEvent=function(){var e=this;if(!this._mediaElementAndState)throw new Error(\"Media element should exist.\");var t=this._mediaElementAndState.element;this._pauseEventTimer||(this._pauseEventTimer=window.setTimeout(function(){e._pauseEventTimer=null,t.paused&&e.isActuallyPlaying()&&e._update(function(){e.isEnded()||(e._notifyNotStalled(),e._notifyPlaying(!1))})},0))},t.prototype._handlePlayingEvent=function(){var e=this,t=this._duration;\nif(null===t)throw new Error(\"Expecting duration to exist.\");var r=this._getTruePosition();return r>=t?void this._logger.warn(\"Got a media element playing event and the positon was >= the duration.\",r,t):this.isEnded()||this._shouldBeEnded()?void this._logger.warn(\"Got a media element playing event when the player is/should be ended.\"):void this._update(function(){e._notifyNotStalled(),e._determineIfPlaying(),e.isActuallyPlaying()||(e._playDetectionTimerNumAttempts=0,e._playDetectionTimer||(e._playDetectionTimer=window.setInterval(function(){return e._determineIfPlaying()},v)))})},t.prototype._handleEndedEvent=function(){return null!==this._getQueuedSeekPosition()?void this._logger.warn(\"Got a media element ended event but ignoring because a seek is in progress.\"):void this._update()},t.prototype._shouldBeEnded=function(){return this._endedOverride||this._mediaElementReportingEnded()},t.prototype._mediaElementReportingEnded=function(){return!!(this._mediaElementAndState&&this._mediaElementAndState.element.ended&&this._mediaElementAndState.element.paused)},t.prototype._retrieveDuration=function(){var e=this;return new f(function(t){e._listenToOnce(\"loadedmetadata\",function(){var r=e._mediaElementAndState;r&&t(1e3*r.element.duration)},{reattach:!0,earlyAttach:!0})})},t.prototype._handlePlayPauseChange=function(e){var t=this;if(this.isEnded())!e&&this._mediaElementAndState&&\"USABLE\"===this._mediaElementAndState.state&&this._mediaElementAndState.element.pause(),this._notifyPlaying(e);else if(this._mediaElementAndState&&\"USABLE\"===this._mediaElementAndState.state){var r=this._mediaElementAndState.element,n=this._playInProgress.inProgress||!r.paused;if(n!==e)if(e){this._playDetectionPosition=this._getTruePosition();var o={inProgress:!0};this._playInProgress=o,this._play().then(function(){return o.inProgress=!1}).catch(function(e){return t._playInProgress!==o?void t._logger.debug(\"Ignoring play error because paused since.\",e):(o.inProgress=!1,void t._notifyPlayRejection(e))})}else this._playInProgress={inProgress:!1},r.pause(),this._notifyPlaying(!1);else this._playInProgress.inProgress||this._notifyPlaying(e)}},t.prototype._handleSeekChange=function(e){var t=this,r=this._mediaElementAndState;if(r&&\"USABLE\"===r.state){var n=this._mediaElementReportingEnded();this._endedOverride=!1,this._performSeek(e,function(r){return void 0!==r?void t._triggerError(new i.errors.PlayerFatalError(\"An error occurred when trying to seek.\",r)):(e===t._duration&&(t._endedOverride=!0),void t._signalSeekComplete())}),n&&this._handlePlayPauseChange(this.isPlaying())}},t.prototype._performSeek=function(e,t){var r=this,n=this._mediaElementAndState;if(!n)throw new Error(\"Media element does not exist.\");var o=this._currentSeekCallback;if(o&&(this._currentSeekCallback=null,o.listenerHandle.remove()),n.element.currentTime===e/1e3)return void t();n.element.currentTime=e/1e3;var i=this._listenToOnce(\"seeked\",function(){r._currentSeekCallback=null,t()},{earlyAttach:!0});this._currentSeekCallback={listenerHandle:i,callback:t}},t.prototype._getPosition=function(){var e=null!==this._duration?this._duration:1/0;if(!this._mediaElementAndState||\"USABLE\"!==this._mediaElementAndState.state)return this._positionWhenMediaElementRevoked;this._determineIfPlaying();var t=Math.min(this._getTruePosition(),e);return this._shouldBeEnded()?e:t},t.prototype._getTruePosition=function(){if(!this._mediaElementAndState||\"USABLE\"!==this._mediaElementAndState.state)throw new Error(\"Media element does not exist or is in invalid state.\");var e=this._mediaElementAndState.element;return 1e3*e.currentTime},t.prototype._kill=function(){window.clearTimeout(this._canPlayTimer),this._playDetectionTimer&&window.clearInterval(this._playDetectionTimer),this._mediaElementAndState&&this.revokeMediaElement(),this._stallCheckTimerId&&window.clearInterval(this._stallCheckTimerId),this._listeners=[]},t.prototype._listenToOnce=function(e,t,r){void 0===r&&(r={});var n=r.reattach,o=r.earlyAttach;void 0===n&&(n=!1),void 0===o&&(o=!1);var i=function(e){a.remove(),t(e)},a=this._listenTo(e,i,{reattach:n,earlyAttach:o});return a},t.prototype._listenTo=function(e,t,r){var n=this;void 0===r&&(r={});var o=r.reattach,i=r.earlyAttach;void 0===o&&(o=!0),void 0===i&&(i=!1);var a=function(e){s.attached?t(e):n._logger.warn(\"Got media element event after handler was removed. Ignoring.\",e)},s={attached:!1,handler:a,eventType:e,once:!1,reattach:o,earlyAttach:i};if(this._listeners.push(s),!this._mediaElementAndState||\"USABLE\"!==this._mediaElementAndState.state&&!i)return{remove:function(){var e=n._listeners.indexOf(s);e>=0&&n._listeners.splice(e,1)}};var u=this._mediaElementAndState.element;return u.addEventListener(e,a,!1),s.attached=!0,{remove:function(){var t=n._listeners.indexOf(s);t>=0&&(n._listeners.splice(t,1),s.attached=!1,u.removeEventListener(e,a,!1))}}},t.prototype._notifyNotStalled=function(){this._stallDetected=!1,this._lastStallCheckPos=null,this._handleStalled()},t.prototype._initMediaElement=function(e,t){this._initMediaElementLocal(e,t)},t.prototype._determineIfPlaying=function(){var e=this;this._playDetectionTimer&&(!this.isPlaying()||++this._playDetectionTimerNumAttempts>=m)&&(window.clearInterval(this._playDetectionTimer),this._playDetectionTimer=null),this._update(function(){e._mediaElementAndState&&\"USABLE\"===e._mediaElementAndState.state&&(e.isDead()||!e.isReady()||!e.isPlaying()||e.isActuallyPlaying()||e._mediaElementAndState.element.paused||e._getTruePosition()===e._playDetectionPosition||(e._logger.debug(\"Detected that playback has started.\"),e._playDetectionTimer&&(window.clearInterval(e._playDetectionTimer),e._playDetectionTimer=null),e._notifyPlaying(!0)))})},t.prototype._initMediaElementLocal=function(e,t){e.setAttribute(\"msAudioCategory\",\"BackgroundCapableMedia\"),e.mozAudioChannelType=\"content\",e.removeAttribute(\"src\"),n(e),t?(this._logger.debug(\"Setting media element src.\",t),e.src=t):this._pauseEventTimer&&(this._logger.debug(\"Clearing pause event timer.\"),window.clearTimeout(this._pauseEventTimer),this._pauseEventTimer=null),e.volume=this._volume,e.muted=this._muted,e.playbackRate=1,e.setAttribute(\"preload\",\"metadata\"),e.pause(),e.load()},t.prototype._checkIfStalled=function(){if(this._mediaElementAndState&&\"USABLE\"===this._mediaElementAndState.state){var e=this._mediaElementAndState.element;if(!e.paused&&this.isActuallyPlaying()){var t=e.currentTime;this._stallDetected=e.readyState<=2||this._lastStallCheckPos===t,this._lastStallCheckPos=t,this._handleStalled()}}},t.prototype._handleStalled=function(){this._shouldBeEnded()&&null===this._getQueuedSeekPosition()?this.isEnded()||(this._logger.debug(\"Updating because stalled near end.\"),this._update()):this._notifyStalled(this._stallDetected||!this._mediaElementAndState||\"USABLE\"!==this._mediaElementAndState.state)},t.prototype._play=function(){var e=this;if(!this._mediaElementAndState)throw new Error(\"Media element doesn't exist.\");if(this._mediaElementReportingEnded())return this._logger.debug(\"Not calling play() because we are at the end. It will be called after a seek.\"),f.resolve();var t=this._mediaElementAndState.element.play();return new f(function(r,n){t?t.then(function(){r()}).catch(function(t){\"AbortError\"===t.name?(e._logger.debug(\"Media element play() promise rejected with AbortError.\"),r()):n(t)}):r()})},t.prototype._handleDefferredPauseAndSeek=function(){var e=this;if(!this._mediaElementAndState||\"STABLE\"!==this._mediaElementAndState.state)throw new Error(\"Media element must be in the STABLE state.\");this._logger.debug(\"Handling deferred pause and seek...\"),this._mediaElementAndState.state=\"USABLE\",this._attachListeners(),this._update(function(){e._handleStalled();var t=e._getQueuedSeekPosition();null!==t&&e._handleSeekChange(t),e.isPlaying()!==e.isActuallyPlaying()&&e._handlePlayPauseChange(e.isPlaying())})},t.prototype._detachListeners=function(){if(!this._mediaElementAndState)throw new Error(\"Media element doesn't exist.\");var e=this._mediaElementAndState.element;this._listeners.forEach(function(t){t.attached&&(t.attached=!1,e.removeEventListener(t.eventType,t.handler,!1))}),this._listeners=this._listeners.filter(function(e){return e.reattach})},t.prototype._attachListeners=function(){if(!this._mediaElementAndState)throw new Error(\"Media element doesn't exist.\");this._logger.debug(\"Attaching listeners...\");var e=this._mediaElementAndState,t=e.element,r=e.state;this._listeners.forEach(function(e){e.attached||!e.reattach||\"USABLE\"!==r&&!e.earlyAttach||(t.addEventListener(e.eventType,e.handler,!1),e.attached=!0)}),this._logger.debug(\"Attached listeners.\")},t}(i.BasePlayer);t.HTML5Player=E},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(t){return e.call(this,\"An error occurred when initializing the media element.\",t)||this}return n(t,e),t.prototype.getCode=function(){return\"HTML5_PLAYER.INITIALIZE_ERROR\"},t}(o.errors.PlayerFatalError);t.InitializeError=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085;var n=r(6);t.HTML5Player=n.HTML5Player;var o=r(4);t.errors=o.errors;var i=r(5);t.helpers=i.helpers}])})},function(e,t,r){!function(t,n){e.exports=n(r(2))}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=6)}([function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(5),i=function(e){function t(t,r,n){void 0===r&&(r={}),void 0===n&&(n=2e4);var o=e.call(this)||this;if(n<0)throw new Error(\"Invaid timeout.\");return o._timeoutTimer=window.setTimeout(function(){return o._onManualTimeout()},n),o._xhr=new XMLHttpRequest,o._xhr.addEventListener(\"load\",function(){return o._onLoad()}),o._xhr.addEventListener(\"abort\",function(){return o._onAbort()}),o._xhr.addEventListener(\"error\",function(){return o._onError()}),o._xhr.addEventListener(\"timeout\",function(){return o._onTimeout()}),o._xhr.addEventListener(\"loadend\",function(){return o._onLoadEnd()}),o._xhr.open(\"GET\",t,!0),o._xhr.timeout=n,o._xhr.responseType=o._getResponseType(),Object.keys(r).forEach(function(e){return o._xhr.setRequestHeader(e,r[e])}),o._signalRequestStart(),o._xhr.send(),o}return n(t,e),t.prototype._abort=function(){this._xhr.abort()},t.prototype._onAbort=function(){this.hasCompleted()||this._provideResponse(new Error(\"Request was aborted.\"))},t.prototype._onManualTimeout=function(){this.hasCompleted()||(this._provideResponse(null),this._xhr.abort())},t.prototype._onTimeout=function(){this.hasCompleted()||this._provideResponse(null)},t.prototype._onLoad=function(){if(!this.hasCompleted()){var e=this._xhr;this._provideResponse({statusCode:e.status,data:this._xhr.response,headers:this._parseHeaders(e.getAllResponseHeaders()||\"\")})}},t.prototype._onError=function(){this.hasCompleted()||(0===this._xhr.status?this._provideResponse({statusCode:0,data:null,headers:{}}):this._provideResponse(new Error(\"An error occurred.\")))},t.prototype._onLoadEnd=function(){window.clearTimeout(this._timeoutTimer),this.hasCompleted()||this._provideResponse(new Error(\"Unexpected error occurred.\"))},t.prototype._parseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split(\"\\r\\n\"),n=0,o=r.length;n<o;n++){var i=r[n],a=i.indexOf(\": \");if(a>0){var s=i.substring(0,a).trim(),u=i.substring(a+2);t[s]=u}}return t},t}(o.loader.LoaderRequest);t.LoaderRequest=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3);t.arrayBufferLoader={request:function(e){var t=e.url,r=e.headers,o=e.timeout;return new n.ArrayBufferLoaderRequest(t,r,o)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(4);t.stringLoader={request:function(e){var t=e.url,r=e.headers,o=e.timeout;return new n.StringLoaderRequest(t,r,o)}}},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResponseType=function(){return\"arraybuffer\"},t}(o.LoaderRequest);t.ArrayBufferLoaderRequest=i},function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResponseType=function(){return\"text\"},t}(o.LoaderRequest);t.StringLoaderRequest=i},function(t,r){t.exports=e},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"13.0.0\",t.buildNumber=1085;var n=r(2);t.stringLoader=n.stringLoader;var o=r(1);t.arrayBufferLoader=o.arrayBufferLoader}])})},function(e,t,r){!function(t,n){e.exports=n(r(2),r(1))}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=4)}([function(e,t,r){\"use strict\";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),i=r(3),a=r(1),s=o.helpers.abortableJob.AbortableJob,u=o.helpers.find,l=o.helpers.time,c=300,d=new a.Limiter(c,3e5),f=5e3,p=[i.renditions.encryptedHlsOpus,i.renditions.hlsOpus,i.renditions.encryptedHlsMp3,i.renditions.hlsMp3,i.renditions.httpMp3],h=function(e){function t(t){var r=t.loader,n=t.clientId,o=t.trackId,i=t.secretToken,a=void 0===i?null:i,s=t.requestAuthorization,u=void 0===s?null:s,l=t.excludedRenditions,c=void 0===l?[]:l,d=t.maxBitrate,f=void 0===d?1/0:d,p=t.endpointBaseUrl,h=void 0===p?\"https://api.soundcloud.com/\":p,_=t.encryptedStreamsEnabled,g=void 0!==_&&_,y=e.call(this)||this;if(y._getUrlsJob=null,y._clearResponseTimer=null,!r)throw new Error(\"loader required.\");if(\"string\"!=typeof n)throw new Error(\"clientId invalid.\");if(\"number\"!=typeof o)throw new Error(\"trackId invalid.\");if(null!==a&&\"string\"!=typeof a)throw new Error(\"secretToken invalid.\");if(null!==u&&\"string\"!=typeof u)throw new Error(\"requestAuthorizaton invalid.\");if(\"number\"!=typeof f||f<=0)throw new Error(\"maxBitrate must be > 0.\");if(\"string\"!=typeof h)throw new Error(\"endpointBaseUrl must be > 0.\");if(\"boolean\"!=typeof g)throw new Error(\"encryptedStreamsEnabled invalid.\");return y._loader=r,y._clientId=n,y._requestAuthorization=u,y._trackId=o,y._secretToken=a,y._endpointBaseUrl=h,y._encryptedStreamsEnabled=g,y._excludedRenditions=c,y._excludedRenditionsOnLastURLRequest=c.slice(),y._maxBitrate=f,y}return n(t,e),t.prototype.getTrackId=function(){return this._trackId},t.prototype.excludeRendition=function(e){this._excludedRenditions.indexOf(e)<0&&this._excludedRenditions.push(e)},t.prototype.updateRequestAuthorization=function(e){if(null!==e&&\"string\"!=typeof e)throw new Error(\"requestAuthorizaton invalid.\");this._requestAuthorization=e},t.prototype.clearCache=function(){this._clearResponseTimer&&(window.clearTimeout(this._clearResponseTimer),this._clearResponseTimer=null),this._getUrlsJob=null},t.prototype.getMaxBitrate=function(){return this._maxBitrate},t.prototype.setMaxBitrate=function(e){if(\"number\"!=typeof e||e<=0)throw new Error(\"maxBitrate must be > 0.\");this._maxBitrate=e},t.prototype.getUrl=function(){var e=this,t=this._maxBitrate,r=this._excludedRenditions,n=new s(function(){e._excludedRenditionsOnLastURLRequest.length===e._excludedRenditions.length?e.clearCache():e._excludedRenditionsOnLastURLRequest=e._excludedRenditions.slice();var n=e._getUrls(),o=n.whenComplete().then(function(e){var n=e.urls,o=e.timeRetrieved,i=null;return p.filter(function(e){return r.indexOf(e)<0}).some(function(e){var r=n.filter(function(t){return t.rendition===e}).map(function(e){return{url:e.url,bitrate:e.bitrate}}),a=u(r.sort(function(e,t){return t.bitrate-e.bitrate}),function(e){return e.bitrate<=t});return!!a&&(i={url:a.url,rendition:e,bitrate:a.bitrate,timeRetrieved:o},!0)}),i});return{result:o,abort:function(){return n.abort()}}});return n.run()},t.prototype._getUrls=function(){var e=this;return this._getUrlsJob||(this._getUrlsJob=new s(function(){var t=o.helpers.deferred.buildDeferred(),r=null,n=d.execute(function(){var n=e._requestAuthorization?{Authorization:e._requestAuthorization}:{},o=e._endpointBaseUrl+\"i1/tracks/\"+encodeURI(e._trackId+\"\")+\"/streams?client_id=\"+encodeURIComponent(e._clientId);e._encryptedStreamsEnabled&&(o+=\"&with_encrypted_streams=true\"),e._secretToken&&(o+=\"&secret_token=\"+encodeURIComponent(e._secretToken)),r=e._loader.request({url:o,headers:n});var a=r.getResponse().then(function(e){if(!e)throw new i.RequestError(null);if(200!==e.statusCode)throw new i.RequestError(e.statusCode);if(!e.data)throw new Error(\"Response contained no data.\");var t=l.now(),r=JSON.parse(e.data),n=[];return Object.keys(r).map(function(e){var t=e.split(\"_\"),o=t[0],i=t[1],a=t[2],s=parseInt(a,10);if(o&&i&&!isNaN(s)){var l=u(p,function(e){return e.scProtocol===o&&e.scFormat===i});l&&n.push({rendition:l,bitrate:s,url:r[e]})}}),{urls:n,timeRetrieved:t}});a.then(t.resolve,t.reject)});return{result:t.promise,abort:function(){n.abort(),r&&r.abort()}}}),this._clearResponseTimer=window.setTimeout(function(){e._clearResponseTimer=null,e._getUrlsJob=null},f)),this._getUrlsJob.run()},t}(i.BaseStreamUrlRetriever);t.StreamUrlRetriever=h},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){if(void 0===t&&(t=6e4),this._limit=e,this._period=t,this._jobs=[],this._jobsRunInPeriod=0,e<=0)throw new Error(\"limit must be > 0.\");if(t<=0)throw new Error(\"period must be > 0.\")}return e.prototype.execute=function(e){var t=this,r={job:e};return this._jobs.push(r),this._executeNextJob(),{abort:function(){var e=t._jobs.indexOf(r);e>=0&&t._jobs.splice(e,1)}}},e.prototype._executeNextJob=function(){var e=this;if(this._jobsRunInPeriod<this._limit){var t=this._jobs.shift();t&&(this._jobsRunInPeriod++,window.setTimeout(function(){e._jobsRunInPeriod--,e._executeNextJob()},this._period),t.job())}},e}();t.Limiter=n},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"12.0.0\",t.buildNumber=404;var n=r(0);t.StreamUrlRetriever=n.StreamUrlRetriever}])})}])},function(e,t,r){var n;(function(e,o,i,a){/*!\n\t * @overview es6-promise - a tiny implementation of Promises/A+.\n\t * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n\t * @license   Licensed under MIT license\n\t *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n\t * @version   2.3.0\n\t */\n(function(){\"use strict\";function s(e){return\"function\"==typeof e||\"object\"==typeof e&&null!==e}function u(e){return\"function\"==typeof e}function l(e){return\"object\"==typeof e&&null!==e}function c(e){J=e}function d(e){Z=e}function f(){var t=e.nextTick,r=e.versions.node.match(/^(?:(\\d+)\\.)?(?:(\\d+)\\.)?(\\*|\\d+)$/);return Array.isArray(r)&&\"0\"===r[1]&&\"10\"===r[2]&&(t=o),function(){t(y)}}function p(){return function(){W(y)}}function h(){var e=0,t=new te(y),r=document.createTextNode(\"\");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function _(){var e=new MessageChannel;return e.port1.onmessage=y,function(){e.port2.postMessage(0)}}function g(){return function(){setTimeout(y,1)}}function y(){for(var e=0;e<X;e+=2){var t=oe[e],r=oe[e+1];t(r),oe[e]=void 0,oe[e+1]=void 0}X=0}function v(){try{var e=r(29);return W=e.runOnLoop||e.runOnContext,p()}catch(e){return g()}}function m(){}function E(){return new TypeError(\"You cannot resolve a promise with itself\")}function b(){return new TypeError(\"A promises callback cannot return that same promise.\")}function w(e){try{return e.then}catch(e){return ue.error=e,ue}}function S(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function P(e,t,r){Z(function(e){var n=!1,o=S(r,t,function(r){n||(n=!0,t!==r?x(e,r):O(e,r))},function(t){n||(n=!0,M(e,t))},\"Settle: \"+(e._label||\" unknown promise\"));!n&&o&&(n=!0,M(e,o))},e)}function R(e,t){t._state===ae?O(e,t._result):t._state===se?M(e,t._result):D(t,void 0,function(t){x(e,t)},function(t){M(e,t)})}function T(e,t){if(t.constructor===e.constructor)R(e,t);else{var r=w(t);r===ue?M(e,ue.error):void 0===r?O(e,t):u(r)?P(e,t,r):O(e,t)}}function x(e,t){e===t?M(e,E()):s(t)?T(e,t):O(e,t)}function A(e){e._onerror&&e._onerror(e._result),k(e)}function O(e,t){e._state===ie&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Z(k,e))}function M(e,t){e._state===ie&&(e._state=se,e._result=t,Z(A,e))}function D(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ae]=r,o[i+se]=n,0===i&&e._state&&Z(k,e)}function k(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,o,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?L(r,n,o,i):o(i);e._subscribers.length=0}}function I(){this.error=null}function C(e,t){try{return e(t)}catch(e){return le.error=e,le}}function L(e,t,r,n){var o,i,a,s,l=u(r);if(l){if(o=C(r,n),o===le?(s=!0,i=o.error,o=null):a=!0,t===o)return void M(t,b())}else o=n,a=!0;t._state!==ie||(l&&a?x(t,o):s?M(t,i):e===ae?O(t,o):e===se&&M(t,o))}function j(e,t){try{t(function(t){x(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}function N(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(m),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?O(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&O(r.promise,r._result))):M(r.promise,r._validationError())}function U(e){return new ce(this,e).promise}function F(e){function t(e){x(o,e)}function r(e){M(o,e)}var n=this,o=new n(m);if(!Y(e))return M(o,new TypeError(\"You must pass an array to race.\")),o;for(var i=e.length,a=0;o._state===ie&&a<i;a++)D(n.resolve(e[a]),void 0,t,r);return o}function B(e){var t=this;if(e&&\"object\"==typeof e&&e.constructor===t)return e;var r=new t(m);return x(r,e),r}function q(e){var t=this,r=new t(m);return M(r,e),r}function H(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function z(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function G(e){this._id=_e++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==e&&(u(e)||H(),this instanceof G||z(),j(this,e))}function V(){var e;if(\"undefined\"!=typeof i)e=i;else if(\"undefined\"!=typeof self)e=self;else try{e=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var t=e.Promise;t&&\"[object Promise]\"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=ge)}var K;K=Array.isArray?Array.isArray:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};var W,J,Q,Y=K,X=0,Z=({}.toString,function(e,t){oe[X]=e,oe[X+1]=t,X+=2,2===X&&(J?J(y):Q())}),$=\"undefined\"!=typeof window?window:void 0,ee=$||{},te=ee.MutationObserver||ee.WebKitMutationObserver,re=\"undefined\"!=typeof e&&\"[object process]\"==={}.toString.call(e),ne=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,oe=new Array(1e3);Q=re?f():te?h():ne?_():void 0===$?v():g();var ie=void 0,ae=1,se=2,ue=new I,le=new I;N.prototype._validateInput=function(e){return Y(e)},N.prototype._validationError=function(){return new Error(\"Array Methods must be provided an Array\")},N.prototype._init=function(){this._result=new Array(this.length)};var ce=N;N.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,o=0;r._state===ie&&o<t;o++)e._eachEntry(n[o],o)},N.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;l(e)?e.constructor===n&&e._state!==ie?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},N.prototype._settledAt=function(e,t,r){var n=this,o=n.promise;o._state===ie&&(n._remaining--,e===se?M(o,r):n._result[t]=r),0===n._remaining&&O(o,n._result)},N.prototype._willSettleAt=function(e,t){var r=this;D(e,void 0,function(e){r._settledAt(ae,t,e)},function(e){r._settledAt(se,t,e)})};var de=U,fe=F,pe=B,he=q,_e=0,ge=G;G.all=de,G.race=fe,G.resolve=pe,G.reject=he,G._setScheduler=c,G._setAsap=d,G._asap=Z,G.prototype={constructor:G,then:function(e,t){var r=this,n=r._state;if(n===ae&&!e||n===se&&!t)return this;var o=new this.constructor(m),i=r._result;if(n){var a=arguments[n-1];Z(function(){L(n,o,a,i)})}else D(r,o,e,t);return o},catch:function(e){return this.then(null,e)}};var ye=V,ve={Promise:ge,polyfill:ye};r(23).amd?(n=function(){return ve}.call(t,r,t,a),!(void 0!==n&&(a.exports=n))):\"undefined\"!=typeof a&&a.exports?a.exports=ve:\"undefined\"!=typeof this&&(this.ES6Promise=ve),ye()}).call(this)}).call(t,r(6),r(25).setImmediate,function(){return this}(),r(24)(e))},function(e,t){\"use strict\";var r={oauth_token:void 0,baseURL:\"https://api.soundcloud.com\",connectURL:\"//connect.soundcloud.com\",client_id:void 0,redirect_uri:void 0};e.exports={get:function(e){return r[e]},set:function(e,t){t&&(r[e]=t)}}},function(e,t,r){(function(t){\"use strict\";var n=r(3),o=r(20),i=r(2).Promise,a=function(e,r,n,o){var a=void 0,s=new i(function(i){var s=t.FormData&&n instanceof FormData;a=new XMLHttpRequest,a.upload&&a.upload.addEventListener(\"progress\",o),a.open(e,r,!0),s||a.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),a.onreadystatechange=function(){4===a.readyState&&i({responseText:a.responseText,request:a})},a.send(n)});return s.request=a,s},s=function(e){var t=e.responseText,r=e.request,n=void 0,o=void 0;try{o=JSON.parse(t)}catch(e){}return o?o.errors&&(n={message:\"\"},o.errors[0]&&o.errors[0].error_message&&(n={message:o.errors[0].error_message})):n=r?{message:\"HTTP Error: \"+r.status}:{message:\"Unknown error\"},n&&(n.status=r.status),{json:o,error:n}},u=function e(t,r,n,o){var i=a(t,r,n,o),u=i.then(function(t){var r=t.responseText,n=t.request,o=s({responseText:r,request:n});if(o.json&&\"302 - Found\"===o.json.status)return e(\"GET\",o.json.location,null);if(200!==n.status&&o.error)throw o.error;return o.json});return u.request=i.request,u},l=function(e,t,r){Object.keys(t).forEach(function(n){r?e.append(n,t[n]):e[n]=t[n]})};e.exports={request:function(e,r){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],s=n.get(\"oauth_token\"),c=n.get(\"client_id\"),d={},f=t.FormData&&i instanceof FormData,p=void 0,h=void 0;return d.format=\"json\",s?d.oauth_token=s:d.client_id=c,l(i,d,f),\"GET\"!==e&&(p=f?i:o.encode(i),i={oauth_token:s}),r=\"/\"!==r[0]?\"/\"+r:r,h=\"\"+n.get(\"baseURL\")+r+\"?\"+o.encode(i),u(e,h,p,a)},oEmbed:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.element;delete t.element,t.url=e;var n=\"https://soundcloud.com/oembed.json?\"+o.encode(t);return u(\"GET\",n,null).then(function(e){return r&&e.html&&(r.innerHTML=e.html),e})},upload:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.asset_data||e.file,r=n.get(\"oauth_token\")&&e.title&&t;if(!r)return new i(function(e,t){t({status:0,error_message:\"oauth_token needs to be present and title and asset_data / file passed as parameters\"})});var o=Object.keys(e),a=new FormData;return o.forEach(function(t){var r=e[t];\"file\"===t&&(t=\"asset_data\",r=e.file),a.append(\"track[\"+t+\"]\",r)}),this.request(\"POST\",\"/tracks\",a,e.progress)},resolve:function(e){return this.request(\"GET\",\"/resolve\",{url:e,_status_code_map:{302:200}})}}}).call(t,function(){return this}())},function(e,t){\"use strict\";var r={};e.exports={get:function(e){return r[e]},set:function(e,t){r[e]=t}}},function(e,t){function r(){throw new Error(\"setTimeout has not been defined\")}function n(){throw new Error(\"clearTimeout has not been defined\")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){_&&p&&(_=!1,p.length?h=p.concat(h):g=-1,h.length&&s())}function s(){if(!_){var e=o(a);_=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,_=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,d,f=e.exports={};!function(){try{c=\"function\"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{d=\"function\"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var p,h=[],_=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||_||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title=\"browser\",f.browser=!0,f.env={},f.argv=[],f.version=\"\",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error(\"process.binding is not supported\")},f.cwd=function(){return\"/\"},f.chdir=function(e){throw new Error(\"process.chdir is not supported\")},f.umask=function(){return 0}},function(e,t,r){\"use strict\";var n=r(22);t.extract=function(e){return e.split(\"?\")[1]||\"\"},t.parse=function(e){return\"string\"!=typeof e?{}:(e=e.trim().replace(/^(\\?|#|&)/,\"\"),e?e.split(\"&\").reduce(function(e,t){var r=t.replace(/\\+/g,\" \").split(\"=\"),n=r.shift(),o=r.length>0?r.join(\"=\"):void 0;return n=decodeURIComponent(n),o=void 0===o?null:decodeURIComponent(o),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o,e},{}):{})},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var r=e[t];return Array.isArray(r)?r.sort().map(function(e){return n(t)+\"=\"+n(e)}).join(\"&\"):n(t)+\"=\"+n(r)}).filter(function(e){return e.length>0}).join(\"&\"):\"\"}},function(e,t,r){\"use strict\";var n=r(7),o=r(5);e.exports={notifyDialog:function(e){var t=n.parse(e.search),r=n.parse(e.hash),i={oauth_token:t.access_token||r.access_token,dialog_id:t.state||r.state,error:t.error||r.error,error_description:t.error_description||r.error_description},a=o.get(i.dialog_id);a&&a.handleConnectResponse(i)}}},function(e,t,r){\"use strict\";var n=r(3),o=r(11),i=r(2).Promise,a=function(e){return n.set(\"oauth_token\",e.oauth_token),e};e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=n.get(\"oauth_token\");if(t)return new i(function(e){e({oauth_token:t})});var r={client_id:e.client_id||n.get(\"client_id\"),redirect_uri:e.redirect_uri||n.get(\"redirect_uri\"),response_type:\"code_and_token\",scope:e.scope||\"non-expiring\",display:\"popup\"};if(!r.client_id||!r.redirect_uri)throw new Error(\"Options client_id and redirect_uri must be passed\");var s=new o(r);return s.open().then(a)}},function(e,t,r){\"use strict\";var n=r(2).Promise;e.exports=function(){var e={};return e.promise=new n(function(t,r){e.resolve=t,e.reject=r}),e}},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(10),a=r(5),s=r(12),u=r(7),l=\"SoundCloud_Dialog\",c=function(){return[l,Math.ceil(1e6*Math.random()).toString(16)].join(\"_\")},d=function(e){return\"https://soundcloud.com/connect?\"+u.stringify(e)},f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.id=c(),this.options=t,this.options.state=this.id,this.width=420,this.height=670,this.deferred=i()}return o(e,[{key:\"open\",value:function(){var e=d(this.options);return this.popup=s.open(e,this.width,this.height),a.set(this.id,this),this.deferred.promise}},{key:\"handleConnectResponse\",value:function(e){var t=e.error;t?this.deferred.reject(e):this.deferred.resolve(e),this.popup.close()}}]),e}();e.exports=f},function(e,t){\"use strict\";e.exports={open:function(e,t,r){var n={},o=void 0;return n.location=1,n.width=t,n.height=r,n.left=window.screenX+(window.outerWidth-t)/2,n.top=window.screenY+(window.outerHeight-r)/2,n.toolbar=\"no\",n.scrollbars=\"yes\",o=Object.keys(n).map(function(e){return e+\"=\"+n[e]}).join(\", \"),window.open(e,n.name,o)}}},function(e,t,r){\"use strict\";var n=r(19),o=r(1).MaestroCore,i=o.errors.PlayerFatalError,a=o.State,s=r(1).SCAudio.errors,u=s.GeoBlockedError,l=s.NoStreamsError,c=s.TimedOutError,d=s.NotSupportedError,f=1e3/60;e.exports=function(e){function t(){switch(e.getState()){case a.PLAYING:return\"playing\";case a.PAUSED:return e.isEnded()?\"ended\":\"paused\";case a.DEAD:return e.getFatalError()?\"error\":\"dead\";case a.LOADING:default:return\"loading\"}}function r(){function t(){window.clearTimeout(r),e.isPlaying()&&!e.isEnded()&&(r=window.setTimeout(t,f));var o=e.getPosition();o!==n&&(n=o,s.trigger(\"time\",o))}var r=0,n=null;e.onChange.subscribe(function(e){var n=e.playing,o=e.seeking,i=e.dead;i?window.clearTimeout(r):void 0===n&&void 0===o||t()})}var o=!1;e.onStateChange.subscribe(function(){return s.trigger(\"state-change\",t())}),e.onPlay.subscribe(function(){s.trigger(o?\"play-resume\":\"play-start\"),o=!0}),e.onPlayIntent.subscribe(function(){return s.trigger(\"play\")}),e.onPlayRejection.subscribe(function(e){return s.trigger(\"play-rejection\",e)}),e.onPauseIntent.subscribe(function(){return s.trigger(\"pause\")}),e.onSeek.subscribe(function(){return s.trigger(\"seeked\")}),e.onSeekRejection.subscribe(function(e){return s.trigger(\"seek-rejection\",e)}),e.onLoadStart.subscribe(function(){return s.trigger(\"buffering_start\")}),e.onLoadEnd.subscribe(function(){return s.trigger(\"buffering_end\")}),e.onEnded.subscribe(function(){return s.trigger(\"finish\")}),e.onError.subscribe(function(e){e instanceof u?s.trigger(\"geo_blocked\"):e instanceof l?s.trigger(\"no_streams\"):e instanceof c?s.trigger(\"no_connection\"):e instanceof d?s.trigger(\"no_protocol\"):e instanceof i&&s.trigger(\"audio_error\")});var s={play:e.play.bind(e),pause:e.pause.bind(e),seek:e.seek.bind(e),getVolume:e.getVolume.bind(e),setVolume:e.setVolume.bind(e),currentTime:e.getPosition.bind(e),getDuration:e.getDuration.bind(e),isBuffering:e.isLoading.bind(e),isPlaying:e.isPlaying.bind(e),isActuallyPlaying:e.isActuallyPlaying.bind(e),isEnded:e.isEnded.bind(e),isDead:e.isDead.bind(e),kill:e.kill.bind(e),hasErrored:function(){return!!e.getFatalError()},getState:t};return n.mixin(s),r(),s}},function(e,t){(function(t){\"use strict\";var r=t.AudioContext||t.webkitAudioContext,n=null;e.exports=function(){return n?n:n=new r}}).call(t,function(){return this}())},function(e,t){(function(t){\"use strict\";var r=t.navigator.getUserMedia||t.navigator.webkitGetUserMedia||t.navigator.mozGetUserMedia;e.exports=function(e,n,o){r.call(t.navigator,e,n,o)}}).call(t,function(){return this}())},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(14),a=r(15),s=r(2).Promise,u=r(28),l=function(){var e=this,t=this.context;return new s(function(r,n){e.source?e.source instanceof AudioNode?r(e.source):n(new Error(\"source needs to be an instance of AudioNode\")):a({audio:!0},function(n){e.stream=n,e.source=t.createMediaStreamSource(n),r(e.source)}.bind(e),n)})},c=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.context=t.context||i(),this._recorder=null,this.source=t.source,this.stream=null}return o(e,[{key:\"start\",value:function(){var e=this;return l.call(this).then(function(t){return e._recorder=new u(t),e._recorder.record(),t})}},{key:\"stop\",value:function(){if(this._recorder&&this._recorder.stop(),this.stream)if(this.stream.stop)this.stream.stop();else if(this.stream.getTracks){var e=this.stream.getTracks()[0];e&&e.stop()}}},{key:\"getBuffer\",value:function(){var e=this;return new s(function(t,r){e._recorder?e._recorder.getBuffer(function(r){var n=e.context.sampleRate,o=e.context.createBuffer(2,r[0].length,n);o.getChannelData(0).set(r[0]),o.getChannelData(1).set(r[1]),t(o)}.bind(e)):r(new Error(\"Nothing has been recorded yet.\"))})}},{key:\"getWAV\",value:function(){var e=this;return new s(function(t,r){e._recorder?e._recorder.exportWAV(function(e){t(e)}):r(new Error(\"Nothing has been recorded yet.\"))})}},{key:\"play\",value:function(){var e=this;return this.getBuffer().then(function(t){var r=e.context.createBufferSource();return r.buffer=t,r.connect(e.context.destination),r.start(0),r})}},{key:\"saveAs\",value:function(e){return this.getWAV().then(function(t){u.forceDownload(t,e)})}},{key:\"delete\",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),e}();e.exports=c},function(e,t,r){\"use strict\";var n=r(4),o=r(3),i=r(13),a=r(1).SCAudio,s=r(1).SCAudioPublicApiStreamURLRetriever.StreamUrlRetriever,u=r(1).MaestroHTML5Player.HTML5Player,l=r(1).MaestroHLSMSEPlayer.HLSMSEPlayer,c=r(1).MaestroLoaders.stringLoader,d=3e3;e.exports=function(e,t){var r=t?{secret_token:t}:{};return n.request(\"GET\",e,r).then(function(e){function r(){var r=n+\"/tracks/\"+encodeURIComponent(e.id)+\"/plays?client_id=\"+encodeURIComponent(f);t&&(r+=\"&secret_token=\"+encodeURIComponent(t));var o=new XMLHttpRequest;o.open(\"POST\",r,!0),o.send()}var n=o.get(\"baseURL\"),f=o.get(\"client_id\"),p=o.get(\"oauth_token\"),h=!1,_=new s({clientId:f,secretToken:t,trackId:e.id,requestAuthorization:p?\"OAuth \"+p:null,loader:c}),g=a.buildPlayer({playerClasses:[u,l],streamUrlRetriever:_,fadeOutDuration:\"SNIP\"===e.policy?d:0});return g.onPlay.subscribe(function(){h||(h=!0,r())}),g.onEnded.subscribe(function(){g.pause()}),g.onPlayIntent.subscribe(function(){g.isEnded()&&g.seek(0)}),i(g)})},e.exports.activateAudioElement=function(){a.activateAudioElement()}},function(e,t,r){!function(){function r(){return{keys:Object.keys||function(e){if(\"object\"!=typeof e&&\"function\"!=typeof e||null===e)throw new TypeError(\"keys() called on a non-object\");var t,r=[];for(t in e)e.hasOwnProperty(t)&&(r[r.length]=t);return r},uniqueId:function(e){var t=++s+\"\";return e?e+t:t},has:function(e,t){return i.call(e,t)},each:function(e,t,r){if(null!=e)if(o&&e.forEach===o)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var a in e)this.has(e,a)&&t.call(r,e[a],a,e)},once:function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}}}}var n,o=Array.prototype.forEach,i=Object.prototype.hasOwnProperty,a=Array.prototype.slice,s=0,u=r();n={on:function(e,t,r){if(!c(this,\"on\",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:r,ctx:r||this}),this},once:function(e,t,r){if(!c(this,\"once\",e,[t,r])||!t)return this;var n=this,o=u.once(function(){n.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,r)},off:function(e,t,r){var n,o,i,a,s,l,d,f;if(!this._events||!c(this,\"off\",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;for(a=e?[e]:u.keys(this._events),s=0,l=a.length;s<l;s++)if(e=a[s],i=this._events[e]){if(this._events[e]=n=[],t||r)for(d=0,f=i.length;d<f;d++)o=i[d],(t&&t!==o.callback&&t!==o.callback._callback||r&&r!==o.context)&&n.push(o);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,\"trigger\",e,t))return this;var r=this._events[e],n=this._events.all;return r&&d(r,t),n&&d(n,arguments),this},stopListening:function(e,t,r){var n=this._listeners;if(!n)return this;var o=!t&&!r;\"object\"==typeof t&&(r=this),e&&((n={})[e._listenerId]=e);for(var i in n)n[i].off(t,r,this),o&&delete this._listeners[i];return this}};var l=/\\s+/,c=function(e,t,r,n){if(!r)return!0;if(\"object\"==typeof r){for(var o in r)e[t].apply(e,[o,r[o]].concat(n));return!1}if(l.test(r)){for(var i=r.split(l),a=0,s=i.length;a<s;a++)e[t].apply(e,[i[a]].concat(n));return!1}return!0},d=function(e,t){var r,n=-1,o=e.length,i=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++n<o;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<o;)(r=e[n]).callback.call(r.ctx,i);return;case 2:for(;++n<o;)(r=e[n]).callback.call(r.ctx,i,a);return;case 3:for(;++n<o;)(r=e[n]).callback.call(r.ctx,i,a,s);return;default:for(;++n<o;)(r=e[n]).callback.apply(r.ctx,t)}},f={listenTo:\"on\",listenToOnce:\"once\"};u.each(f,function(e,t){n[t]=function(t,r,n){var o=this._listeners||(this._listeners={}),i=t._listenerId||(t._listenerId=u.uniqueId(\"l\"));return o[i]=t,\"object\"==typeof r&&(n=this),t[e](r,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(e){var t=[\"on\",\"once\",\"off\",\"trigger\",\"stopListening\",\"listenTo\",\"listenToOnce\",\"bind\",\"unbind\"];return u.each(t,function(t){e[t]=this[t]},this),e},\"undefined\"!=typeof e&&e.exports&&(t=e.exports=n),t.BackboneEvents=n}(this)},function(e,t,r){e.exports=r(18)},function(e,t){e.exports={encode:function(e,t){function r(e){return e.filter(function(e){return\"string\"==typeof e&&e.length}).join(\"&\")}function n(e){var t=Object.keys(e);return d?t.sort():t}function o(e,t){var o=\":name[:prop]\";return r(n(t).map(function(r){return a(o.replace(/:name/,e).replace(/:prop/,r),t[r])}))}function i(e,t){var n=\":name[]\";return r(t.map(function(t){return a(n.replace(/:name/,e),t)}))}function a(e,t){var r=/%20/g,n=encodeURIComponent,a=typeof t,s=null;return Array.isArray(t)?s=i(e,t):\"string\"===a?s=n(e)+\"=\"+u(t):\"number\"===a?s=n(e)+\"=\"+n(t).replace(r,\"+\"):\"boolean\"===a?s=n(e)+\"=\"+t:\"object\"===a&&(null!==t?s=o(e,t):c||(s=n(e)+\"=null\")),s}function s(e){return\"%\"+(\"0\"+e.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}function u(e){return e.replace(/[^ !'()~\\*]*/g,encodeURIComponent).replace(/ /g,\"+\").replace(/[!'()~\\*]/g,s)}var l=\"object\"==typeof t?t:{},c=l.ignorenull||!1,d=l.sorted||!1;return r(n(e).map(function(t){return a(t,e[t])}))}}},function(e,t,r){(function(e,t){!function(e,r){\"use strict\";function n(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return _[h]=n,p(h),h++}function o(e){delete _[e]}function i(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function a(e){if(g)setTimeout(a,0,e);else{var t=_[e];if(t){g=!0;try{i(t)}finally{o(e),g=!1}}}}function s(){p=function(e){t.nextTick(function(){a(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=r,t}}function l(){var t=\"setImmediate$\"+Math.random()+\"$\",r=function(r){r.source===e&&\"string\"==typeof r.data&&0===r.data.indexOf(t)&&a(+r.data.slice(t.length))};e.addEventListener?e.addEventListener(\"message\",r,!1):e.attachEvent(\"onmessage\",r),p=function(r){e.postMessage(t+r,\"*\")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},p=function(t){e.port2.postMessage(t)}}function d(){var e=y.documentElement;p=function(t){var r=y.createElement(\"script\");r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}function f(){p=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var p,h=1,_={},g=!1,y=e.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(e);v=v&&v.setTimeout?v:e,\"[object process]\"==={}.toString.call(e.process)?s():u()?l():e.MessageChannel?c():y&&\"onreadystatechange\"in y.createElement(\"script\")?d():f(),v.setImmediate=n,v.clearImmediate=o}}(\"undefined\"==typeof self?\"undefined\"==typeof e?this:e:self)}).call(t,function(){return this}(),r(6))},function(e,t){\"use strict\";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return\"%\"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t){e.exports=function(){throw new Error(\"define cannot be used indirect\")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new n(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(21),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new o,n.append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker(\"data:application/javascript,\"+encodeURIComponent(e))}}catch(e){return new Worker(t)}}},function(e,t,r){e.exports=function(){return r(26)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p=\"\",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;n<v;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;e<v;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;n<v;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;t<v;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;a<e;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,a<0?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,\"RIFF\"),e.setUint32(4,36+2*t.length,!0),u(e,8,\"WAVE\"),u(e,12,\"fmt \"),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,\"data\"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case\"init\":n(t.data.config);break;case\"record\":e(t.data.buffer);break;case\"exportWAV\":r(t.data.type);break;case\"getBuffer\":a();break;case\"clear\":o()}}}).call(n,function(){return this}())}]);\\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',r.p+\"9f9aac32c9a7432b5555.worker.js\")}},function(e,t,r){var n=r(27),o=function(e,t){var r=t||{},o=r.bufferLen||4096,i=r.numChannels||2;this.context=e.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,o,i,i);var a=new n;a.postMessage({command:\"init\",config:{sampleRate:this.context.sampleRate,numChannels:i}});var s,u=!1;this.node.onaudioprocess=function(e){if(u){for(var t=[],r=0;r<i;r++)t.push(e.inputBuffer.getChannelData(r));a.postMessage({command:\"record\",buffer:t})}},this.configure=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},this.record=function(){u=!0},this.stop=function(){u=!1},this.clear=function(){a.postMessage({command:\"clear\"})},this.getBuffer=function(e){s=e||r.callback,a.postMessage({command:\"getBuffer\"})},this.exportWAV=function(e,t){if(s=e||r.callback,t=t||r.type||\"audio/wav\",!s)throw new Error(\"Callback not set\");a.postMessage({command:\"exportWAV\",type:t})},a.onmessage=function(e){var t=e.data;s(t)},e.connect(this.node),this.node.connect(this.context.destination)};o.forceDownload=function(e,t){var r=(window.URL||window.webkitURL).createObjectURL(e),n=window.document.createElement(\"a\");n.href=r,n.download=t||\"output.wav\";var o=document.createEvent(\"Event\");o.initEvent(\"click\",!0,!0),n.dispatchEvent(o)},e.exports=o},function(e,t){}])});\n//# sourceMappingURL=sdk.js.map\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../timers-browserify/main.js */ \"./node_modules/timers-browserify/main.js\").setImmediate, __webpack_require__(/*! ./../timers-browserify/main.js */ \"./node_modules/timers-browserify/main.js\").clearImmediate))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc291bmRjbG91ZC9zZGsuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc291bmRjbG91ZC9zZGsuanM/ZDk5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24oZSx0KXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz10KCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHQpO2Vsc2V7dmFyIHI9dCgpO2Zvcih2YXIgbiBpbiByKShcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzOmUpW25dPXJbbl19fSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2V4cG9ydHM6e30saWQ6bixsb2FkZWQ6ITF9O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubG9hZGVkPSEwLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4gdC5tPWUsdC5jPXIsdC5wPVwiXCIsdCgwKX0oW2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig0KSxvPXIoOCksaT1yKDMpLGE9cig5KSxzPXIoMikuUHJvbWlzZSx1PXIoMTYpLGw9cigxNyk7ZS5leHBvcnRzPXQuU0M9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdO2kuc2V0KFwib2F1dGhfdG9rZW5cIixlLm9hdXRoX3Rva2VuKSxpLnNldChcImNsaWVudF9pZFwiLGUuY2xpZW50X2lkKSxpLnNldChcInJlZGlyZWN0X3VyaVwiLGUucmVkaXJlY3RfdXJpKSxpLnNldChcImJhc2VVUkxcIixlLmJhc2VVUkwpLGkuc2V0KFwiY29ubmVjdFVSTFwiLGUuY29ubmVjdFVSTCl9LGdldDpmdW5jdGlvbihlLHQpe3JldHVybiBuLnJlcXVlc3QoXCJHRVRcIixlLHQpfSxwb3N0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4ucmVxdWVzdChcIlBPU1RcIixlLHQpfSxwdXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5yZXF1ZXN0KFwiUFVUXCIsZSx0KX0sZGVsZXRlOmZ1bmN0aW9uKGUpe3JldHVybiBuLnJlcXVlc3QoXCJERUxFVEVcIixlKX0sdXBsb2FkOmZ1bmN0aW9uKGUpe3JldHVybiBuLnVwbG9hZChlKX0sY29ubmVjdDpmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0saXNDb25uZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09aS5nZXQoXCJvYXV0aF90b2tlblwiKX0sb0VtYmVkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4ub0VtYmVkKGUsdCl9LHJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIG4ucmVzb2x2ZShlKX0sUmVjb3JkZXI6dSxQcm9taXNlOnMsc3RyZWFtOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGwoZSx0KX0sY29ubmVjdENhbGxiYWNrOmZ1bmN0aW9uKCl7by5ub3RpZnlEaWFsb2codGhpcy5sb2NhdGlvbil9fX0pLmNhbGwodCxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChuKXtpZihyW25dKXJldHVybiByW25dLmV4cG9ydHM7dmFyIG89cltuXT17ZXhwb3J0czp7fSxpZDpuLGxvYWRlZDohMX07cmV0dXJuIGVbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsdCksby5sb2FkZWQ9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiB0Lm09ZSx0LmM9cix0LnA9XCJcIix0KDApfShbZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17U0NBdWRpbzpyKDEpLFNDQXVkaW9QdWJsaWNBcGlTdHJlYW1VUkxSZXRyaWV2ZXI6cig5KSxNYWVzdHJvQ29yZTpyKDIpLE1hZXN0cm9Mb2FkZXJzOnIoOCksTWFlc3Ryb0hUTUw1UGxheWVyOnIoNyksTWFlc3Ryb0hMU01TRVBsYXllcjpyKDMpfX0sZnVuY3Rpb24oZSx0LHIpeyFmdW5jdGlvbih0LG4pe2UuZXhwb3J0cz1uKHIoMiksZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHIoIWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCJAc2MvbWFlc3Ryby1jaHJvbWVjYXN0LXBsYXllclwiJyk7dGhyb3cgZS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGV9KCkpfWNhdGNoKGUpe319KCksZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHIoIWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCJAc2MvbWFlc3Ryby1mbGlwcGVyLXBsYXllclwiJyk7dGhyb3cgZS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGV9KCkpfWNhdGNoKGUpe319KCksZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHIoMyl9Y2F0Y2goZSl7fX0oKSxmdW5jdGlvbigpe3RyeXtyZXR1cm4gcig3KX1jYXRjaChlKXt9fSgpLHIoOCkpfSh0aGlzLGZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChuKXtpZihyW25dKXJldHVybiByW25dLmV4cG9ydHM7dmFyIG89cltuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsdCksby5sPSEwLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4gdC5tPWUsdC5jPXIsdC5pPWZ1bmN0aW9uKGUpe3JldHVybiBlfSx0LmQ9ZnVuY3Rpb24oZSxyLG4pe3QubyhlLHIpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6bn0pfSx0Lm49ZnVuY3Rpb24oZSl7dmFyIHI9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHQuZChyLFwiYVwiLHIpLHJ9LHQubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sdC5wPVwiXCIsdCh0LnM9OTUpfShbZnVuY3Rpb24odCxyKXt0LmV4cG9ydHM9ZX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlIG51bGwgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cig2NCkoKT9TeW1ib2w6cig2Nil9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDE3KSgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZSE9PW4mJm51bGwhPT1lfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG89cig5KSxpPXIoMTkpLGE9cig1MCkscz1yKDIyKTtuPWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLG4sYSx1LGw7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mnx8XCJzdHJpbmdcIiE9dHlwZW9mIGU/KHU9dCx0PWUsZT1udWxsKTp1PWFyZ3VtZW50c1syXSxudWxsPT1lPyhyPWE9ITAsbj0hMSk6KHI9cy5jYWxsKGUsXCJjXCIpLG49cy5jYWxsKGUsXCJlXCIpLGE9cy5jYWxsKGUsXCJ3XCIpKSxsPXt2YWx1ZTp0LGNvbmZpZ3VyYWJsZTpyLGVudW1lcmFibGU6bix3cml0YWJsZTphfSx1P28oaSh1KSxsKTpsfSxuLmdzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbix1LGwsYztyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZT8obD1yLHI9dCx0PWUsZT1udWxsKTpsPWFyZ3VtZW50c1szXSxudWxsPT10P3Q9dm9pZCAwOmEodCk/bnVsbD09cj9yPXZvaWQgMDphKHIpfHwobD1yLHI9dm9pZCAwKToobD10LHQ9cj12b2lkIDApLG51bGw9PWU/KG49ITAsdT0hMSk6KG49cy5jYWxsKGUsXCJjXCIpLHU9cy5jYWxsKGUsXCJlXCIpKSxjPXtnZXQ6dCxzZXQ6cixjb25maWd1cmFibGU6bixlbnVtZXJhYmxlOnV9LGw/byhpKGwpLGMpOmN9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2b2lkIDA9PT1yJiYocj1cIkFQSSBlcnJvci5cIik7dmFyIG49ZS5jYWxsKHRoaXMscil8fHRoaXM7cmV0dXJuIG4uc3RhdHVzQ29kZT10LG59cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJTQ0FVRElPLkFQSV9FUlJPUi5cIisodGhpcy5zdGF0dXNDb2RlfHxcIlRJTUVPVVRcIil9LHQucHJvdG90eXBlLmdldFN0YXR1c0NvZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXNDb2RlfSx0fShvLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKTt0LkFwaUVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG89bi5jYWxsKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSk9PT1vfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbz1uLmNhbGwoXCJcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfHxlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmKGUgaW5zdGFuY2VvZiBTdHJpbmd8fG4uY2FsbChlKT09PW8pfHwhMX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cig0NSkoKT9PYmplY3QuYXNzaWduOnIoNDYpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXIoMjApKCk/T2JqZWN0LnNldFByb3RvdHlwZU9mOnIoMjEpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGUuY2FsbCh0aGlzLHR8fFwiVGhlcmUgd2FzIG5vIGZvcm1hdCBhdmFpbGFibGUgdGhhdCBhIHBsYXllciB3YXMgYWJsZSB0byBwbGF5LlwiKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlNDQVVESU8uTk9UX1NVUFBPUlRFRF9FUlJPUlwifSx0fShvLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKTt0Lk5vdFN1cHBvcnRlZEVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBuZXcgaSh7c3RhcnRQb3M6MCxlbmRQb3M6ZSxzdGFydExldmVsOjAsZW5kTGV2ZWw6MSxmcm9tRW5kOiExfSl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gbmV3IGkoe3N0YXJ0UG9zOmUsZW5kUG9zOjAsc3RhcnRMZXZlbDoxLGVuZExldmVsOjAsZnJvbUVuZDohMH0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuYnVpbGRGYWRlSW49bix0LmJ1aWxkRmFkZU91dD1vO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1lLnN0YXJ0UG9zLHI9ZS5lbmRQb3Msbj1lLnN0YXJ0TGV2ZWwsbz1lLmVuZExldmVsLGk9ZS5mcm9tRW5kLGE9dm9pZCAwIT09aSYmaTtpZih0PDApdGhyb3cgbmV3IEVycm9yKFwic3RhcnRQb3MgaW52YWxpZC5cIik7aWYocjwwfHwhYSYmcjx0fHxhJiZ0PHIpdGhyb3cgbmV3IEVycm9yKFwiZW5kUG9zIGludmFsaWQuXCIpO2lmKG48MHx8bj4xKXRocm93IG5ldyBFcnJvcihcInN0YXJ0TGV2ZWwgaW52YWxpZC5cIik7aWYobzwwfHxvPjEpdGhyb3cgbmV3IEVycm9yKFwiZW5kTGV2ZWwgaW52YWxpZC5cIik7dGhpcy5fc3RhcnRQb3M9dCx0aGlzLl9lbmRQb3M9cix0aGlzLl9zdGFydExldmVsPW4sdGhpcy5fZW5kTGV2ZWw9byx0aGlzLl9mcm9tRW5kPWF9cmV0dXJuIGUucHJvdG90eXBlLmNhbGN1bGF0ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2Zyb21FbmQ/dC01MDAtdGhpcy5fc3RhcnRQb3M6dGhpcy5fc3RhcnRQb3Msbj10aGlzLl9mcm9tRW5kP3QtNTAwLXRoaXMuX2VuZFBvczp0aGlzLl9lbmRQb3M7aWYoZTxyKXJldHVybntsZXZlbDp0aGlzLl9zdGFydExldmVsLG5leHRDYWxjdWxhdGVQb3NpdGlvbjpyLWV9O2lmKGU8PW4pe3ZhciBvPShlLXIpLyhuLXIpLGk9TWF0aC5jb3MobypNYXRoLlBJKS8tMisuNSxhPXRoaXMuX3N0YXJ0TGV2ZWwrKHRoaXMuX2VuZExldmVsLXRoaXMuX3N0YXJ0TGV2ZWwpKmk7cmV0dXJue2xldmVsOmEsbmV4dENhbGN1bGF0ZVBvc2l0aW9uOmV9fXJldHVybntsZXZlbDp0aGlzLl9lbmRMZXZlbCxuZXh0Q2FsY3VsYXRlUG9zaXRpb246MS8wfX0sZX0oKTt0LkZhZGU9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTt0LkJhc2VTdHJlYW1VcmxSZXRyaWV2ZXI9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0LHIpe3JldHVybiBNYXRoLm1pbih0LE1hdGgubWF4KGUscikpfXZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPXIoMCksYT1yKDEyKSxzPWkuZXZlbnREaXNwYXRjaGVyLkV2ZW50RGlzcGF0Y2hlcix1PWkuaGVscGVycy5Qcm9taXNlLGw9aS5oZWxwZXJzLmRlZmVycmVkLmJ1aWxkRGVmZXJyZWQsYz0xMDAsZD01ZTMsZj0xNTAwLHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBuPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiBuLl9vblByZWxvYWRpbmdFbmFibGVkPW5ldyBzLG4uX29uUHJlbG9hZGluZ0Rpc2FibGVkPW5ldyBzLG4uX29uQ29ubmVjdGlvblJlcXVpcmVkPW5ldyBzLG4uX29uQ29ubmVjdGlvblJlY292ZXJlZD1uZXcgcyxuLl92b2x1bWVBdXRvbWF0b3JzPVtdLG4uX3ZvbHVtZVNjYWxlPTEsbi5fdXNlclZvbHVtZT0xLG4uX3ZvbHVtZUF1dG9tYXRpb25TdXBwb3J0ZWQ9ITEsbi5fdGltZXI9bnVsbCxuLl9wYXVzZUZhZGVUaW1lcj1udWxsLG4uX3BhdXNlRmFkZURlZmVycmVkPW51bGwsbi5fcGF1c2VGYWRlPW51bGwsbi5fY29ubmVjdGlvblJlcXVpcmVkPSExLG4uX2Nvbm5lY3Rpb25Mb3NzVGltZXI9bnVsbCxuLm9uUHJlbG9hZGluZ0VuYWJsZWQ9bi5fb25QcmVsb2FkaW5nRW5hYmxlZC5nZXRIYW5kbGUoKSxuLm9uUHJlbG9hZGluZ0Rpc2FibGVkPW4uX29uUHJlbG9hZGluZ0Rpc2FibGVkLmdldEhhbmRsZSgpLG4ub25Db25uZWN0aW9uUmVxdWlyZWQ9bi5fb25Db25uZWN0aW9uUmVxdWlyZWQuZ2V0SGFuZGxlKCksbi5vbkNvbm5lY3Rpb25SZWNvdmVyZWQ9bi5fb25Db25uZWN0aW9uUmVjb3ZlcmVkLmdldEhhbmRsZSgpLG4uX3JlbG9hZFN0cmVhbVVybHM9cixuLl9wYXVzZWRNYXhCdWZmZXJMZW5ndGg9dC5wYXVzZWRNYXhCdWZmZXJMZW5ndGgsbi5fcGxheWluZ01heEJ1ZmZlckxlbmd0aD10LnBsYXlpbmdNYXhCdWZmZXJMZW5ndGgsbi5fcHJlbG9hZGluZ0VuYWJsZWQ9dC5wcmVsb2FkaW5nRW5hYmxlZCxuLm9uUGxheWVyUHJvdmlkZWQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7cmV0dXJuIG4uX3VwZGF0ZU1heEJ1ZmZlckxlbmd0aCgpfSksbi5vbkNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7bi5pc0RlYWQoKXx8KChlLnBsYXlpbmc9PT0hMXx8ZS5wb3NpdGlvbkp1bXBlZHx8ZS5zdGFsbGVkfHxlLmVuZGVkKSYmbi5fY29tcGxldGVQYXVzZUZhZGUoKSxuLl9wYXVzZUZhZGUmJihlLmFjdHVhbGx5UGxheWluZz09PSExfHxlLmVuZGVkKSYmKG4ucmVtb3ZlVm9sdW1lQXV0b21hdG9yKG4uX3BhdXNlRmFkZSksbi5fcGF1c2VGYWRlPW51bGwpLChlLnBvc2l0aW9uSnVtcGVkfHx2b2lkIDAhPT1lLmFjdHVhbGx5UGxheWluZ3x8dm9pZCAwIT09ZS5zdGFsbGVkKSYmbi5fdXBkYXRlVm9sdW1lKCksdm9pZCAwIT09ZS5wbGF5aW5nJiZuLl91cGRhdGVNYXhCdWZmZXJMZW5ndGgoKSx2b2lkIDAhPT1lLmxvYWRpbmcmJm4uX2NhbGN1bGF0ZUlmQ29ubmVjdGlvblJlcXVpcmVkKCkpfSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIixmdW5jdGlvbigpe3JldHVybiBuLl9jYWxjdWxhdGVJZkNvbm5lY3Rpb25SZXF1aXJlZCgpfSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsZnVuY3Rpb24oKXtyZXR1cm4gbi5fY2FsY3VsYXRlSWZDb25uZWN0aW9uUmVxdWlyZWQoKX0pLG4uX2NhbGN1bGF0ZUlmQ29ubmVjdGlvblJlcXVpcmVkKCksbn1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLnJlbG9hZD1mdW5jdGlvbigpe3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9yZWxvYWRTdHJlYW1VcmxzKCl9LHQucHJvdG90eXBlLmVuYWJsZVByZWxvYWRpbmc9ZnVuY3Rpb24oKXt0aGlzLmlzRGVhZCgpfHx0aGlzLl9wcmVsb2FkaW5nRW5hYmxlZHx8KHRoaXMuX3ByZWxvYWRpbmdFbmFibGVkPSEwLHRoaXMuX3VwZGF0ZU1heEJ1ZmZlckxlbmd0aCgpLHRoaXMuX29uUHJlbG9hZGluZ0VuYWJsZWQuZGlzcGF0Y2godm9pZCAwKSl9LHQucHJvdG90eXBlLmRpc2FibGVQcmVsb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy5pc0RlYWQoKXx8dGhpcy5fcHJlbG9hZGluZ0VuYWJsZWQmJih0aGlzLl9wcmVsb2FkaW5nRW5hYmxlZD0hMSx0aGlzLl91cGRhdGVNYXhCdWZmZXJMZW5ndGgoKSx0aGlzLl9vblByZWxvYWRpbmdEaXNhYmxlZC5kaXNwYXRjaCh2b2lkIDApKX0sdC5wcm90b3R5cGUuaXNQcmVsb2FkaW5nRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcmVsb2FkaW5nRW5hYmxlZH0sdC5wcm90b3R5cGUucGF1c2VBZnRlckZhZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fcGF1c2VGYWRlRGVmZXJyZWQpcmV0dXJuIHRoaXMuX3BhdXNlRmFkZURlZmVycmVkLnByb21pc2U7aWYoIXRoaXMuaXNQbGF5aW5nKCl8fCF0aGlzLmlzQWN0dWFsbHlQbGF5aW5nKCkpcmV0dXJuIHUucmVzb2x2ZSh0aGlzLnBhdXNlKCkpO3ZhciByPWwoKTt0aGlzLl9wYXVzZUZhZGVEZWZlcnJlZD1yO3ZhciBuPXRoaXMuZ2V0UG9zaXRpb24oKTtpZih0aGlzLl9wYXVzZUZhZGUpdGhyb3cgbmV3IEVycm9yKFwiRmFkZSBzaG91bGQgbm90IGFscmVhZHkgYmUgYXNzaWduZWQuXCIpO3JldHVybiB0aGlzLl9wYXVzZUZhZGU9bmV3IGEuRmFkZSh7c3RhcnRQb3M6bixlbmRQb3M6bitlLHN0YXJ0TGV2ZWw6MSxlbmRMZXZlbDowfSksdGhpcy5hZGRWb2x1bWVBdXRvbWF0b3IodGhpcy5fcGF1c2VGYWRlKSx0aGlzLl9wYXVzZUZhZGVUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QuX3BhdXNlRmFkZURlZmVycmVkPW51bGwsci5yZXNvbHZlKHQucGF1c2UoKSl9LGUrNTApLHIucHJvbWlzZX0sdC5wcm90b3R5cGUuaXNDb25uZWN0aW9uUmVxdWlyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29ubmVjdGlvblJlcXVpcmVkfSx0LnByb3RvdHlwZS5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lQXV0b21hdGlvblN1cHBvcnRlZD90aGlzLl91c2VyVm9sdW1lOmUucHJvdG90eXBlLmdldFZvbHVtZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5hZGRWb2x1bWVBdXRvbWF0b3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdm9sdW1lQXV0b21hdG9ycy5pbmRleE9mKGUpO3Q8MCYmKHRoaXMuX3ZvbHVtZUF1dG9tYXRvcnMucHVzaChlKSx0aGlzLl91cGRhdGVWb2x1bWUoKSl9LHQucHJvdG90eXBlLnJlbW92ZVZvbHVtZUF1dG9tYXRvcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl92b2x1bWVBdXRvbWF0b3JzLmluZGV4T2YoZSk7dD49MCYmKHRoaXMuX3ZvbHVtZUF1dG9tYXRvcnMuc3BsaWNlKHQsMSksdGhpcy5fdXBkYXRlVm9sdW1lKCkpfSx0LnByb3RvdHlwZS5fdHJpZ2dlckVycm9yPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLl90cmlnZ2VyRXJyb3IuY2FsbCh0aGlzLHQpfSx0LnByb3RvdHlwZS5wcm92aWRlUGxheWVyPWZ1bmN0aW9uKHQscixuKXt2b2lkIDA9PT1uJiYobj0hMCksdGhpcy5fdm9sdW1lQXV0b21hdGlvblN1cHBvcnRlZD1uLGUucHJvdG90eXBlLnByb3ZpZGVQbGF5ZXIuY2FsbCh0aGlzLHQscil9LHQucHJvdG90eXBlLl9zZXRWb2x1bWU9ZnVuY3Rpb24oZSl7dGhpcy5fdXNlclZvbHVtZT1lLHRoaXMuX2NhbGN1bGF0ZUFuZFNldFZvbHVtZSgpfSx0LnByb3RvdHlwZS5fa2lsbD1mdW5jdGlvbigpe3RoaXMuX3RpbWVyJiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKSxudWxsIT09dGhpcy5fY29ubmVjdGlvbkxvc3NUaW1lciYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9jb25uZWN0aW9uTG9zc1RpbWVyKSx0aGlzLl9hYm9ydFBhdXNlRmFkZSgpLGUucHJvdG90eXBlLl9raWxsLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl9jYWxjdWxhdGVJZkNvbm5lY3Rpb25SZXF1aXJlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmlzTG9hZGluZygpJiZcIm5hdmlnYXRvclwiaW4gd2luZG93JiYhd2luZG93Lm5hdmlnYXRvci5vbkxpbmU7dD9udWxsPT09dGhpcy5fY29ubmVjdGlvbkxvc3NUaW1lciYmKHRoaXMuX2Nvbm5lY3Rpb25Mb3NzVGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9jb25uZWN0aW9uTG9zc1RpbWVyPW51bGwsZS5fY29ubmVjdGlvblJlcXVpcmVkPSEwLGUuX29uQ29ubmVjdGlvblJlcXVpcmVkLmRpc3BhdGNoKHZvaWQgMCl9LGYpKTp0aGlzLl9jb25uZWN0aW9uUmVxdWlyZWQ/KHRoaXMuX2Nvbm5lY3Rpb25SZXF1aXJlZD0hMSx0aGlzLl9vbkNvbm5lY3Rpb25SZWNvdmVyZWQuZGlzcGF0Y2godm9pZCAwKSk6bnVsbCE9PXRoaXMuX2Nvbm5lY3Rpb25Mb3NzVGltZXImJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2Nvbm5lY3Rpb25Mb3NzVGltZXIpLHRoaXMuX2Nvbm5lY3Rpb25Mb3NzVGltZXI9bnVsbCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZVBhdXNlRmFkZT1mdW5jdGlvbigpe2lmKHRoaXMuX3BhdXNlRmFkZURlZmVycmVkKXt0aGlzLl9wYXVzZUZhZGVUaW1lciYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9wYXVzZUZhZGVUaW1lcik7dmFyIGU9dGhpcy5fcGF1c2VGYWRlRGVmZXJyZWQ7dGhpcy5fcGF1c2VGYWRlRGVmZXJyZWQ9bnVsbCxlLnJlc29sdmUodGhpcy5wYXVzZSgpKX19LHQucHJvdG90eXBlLl9hYm9ydFBhdXNlRmFkZT1mdW5jdGlvbigpe3RoaXMuX3BhdXNlRmFkZVRpbWVyJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9wYXVzZUZhZGVUaW1lciksdGhpcy5fcGF1c2VGYWRlVGltZXI9bnVsbCksdGhpcy5fcGF1c2VGYWRlRGVmZXJyZWQmJih0aGlzLl9wYXVzZUZhZGVEZWZlcnJlZC5yZWplY3QobmV3IEVycm9yKFwiUGxheWVyIHdhcyBraWxsZWQuXCIpKSx0aGlzLl9wYXVzZUZhZGVEZWZlcnJlZD1udWxsKX0sdC5wcm90b3R5cGUuX3VwZGF0ZVZvbHVtZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5fdm9sdW1lQXV0b21hdGlvblN1cHBvcnRlZCl7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX3RpbWVyJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lciksdGhpcy5fdGltZXI9bnVsbCk7dmFyIHQ9dGhpcy5nZXREdXJhdGlvbigpO2lmKG51bGwhPT10KXt2YXIgcj10aGlzLl92b2x1bWVBdXRvbWF0b3JzLG89dGhpcy5nZXRQb3NpdGlvbigpLGk9MS8wLGE9MTtyLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9ZS5jYWxjdWxhdGUobyx0KSxzPXIubmV4dENhbGN1bGF0ZVBvc2l0aW9uLHU9ci5sZXZlbDthKj1uKDAsMSx1KSxzPGkmJihpPXMpfSksdGhpcy5fdm9sdW1lU2NhbGUhPT1hJiYodGhpcy5fdm9sdW1lU2NhbGU9YSx0aGlzLl9jYWxjdWxhdGVBbmRTZXRWb2x1bWUoKSksaTwxLzAmJnRoaXMuaXNBY3R1YWxseVBsYXlpbmcoKSYmIXRoaXMuaXNTdGFsbGVkKCkmJih0aGlzLl90aW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuX3RpbWVyPW51bGwsZS5fdXBkYXRlVm9sdW1lKCl9LG4oYyxkLGktdGhpcy5nZXRQb3NpdGlvbigpKSkpfX19LHQucHJvdG90eXBlLl9jYWxjdWxhdGVBbmRTZXRWb2x1bWU9ZnVuY3Rpb24oKXt0aGlzLl92b2x1bWVBdXRvbWF0aW9uU3VwcG9ydGVkP2UucHJvdG90eXBlLl9zZXRWb2x1bWUuY2FsbCh0aGlzLHRoaXMuX3VzZXJWb2x1bWUqdGhpcy5fdm9sdW1lU2NhbGUpOmUucHJvdG90eXBlLl9zZXRWb2x1bWUuY2FsbCh0aGlzLHRoaXMuX3VzZXJWb2x1bWUpfSx0LnByb3RvdHlwZS5fdXBkYXRlTWF4QnVmZmVyTGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRQbGF5ZXIoKSx0PWUmJmUuZ2V0QnVmZmVyQ29udHJvbGxlcigpO3QmJih0aGlzLmlzUGxheWluZygpP3Quc2V0TWF4QnVmZmVyTGVuZ3RoKHRoaXMuX3BsYXlpbmdNYXhCdWZmZXJMZW5ndGgpOnQuc2V0TWF4QnVmZmVyTGVuZ3RoKHRoaXMuX3ByZWxvYWRpbmdFbmFibGVkP3RoaXMuX3BhdXNlZE1heEJ1ZmZlckxlbmd0aDowKSl9LHR9KGkuUHJveHlQbGF5ZXIpO3QuUGxheWVyPXB9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDg4KTt0LnJlbmRpdGlvbnM9bi5yZW5kaXRpb25zfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuc3RhdHVzQ29kZT1lfXJldHVybiBlLnByb3RvdHlwZS5nZXRTdGF0dXNDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzQ29kZX0sZX0oKTt0LlJlcXVlc3RFcnJvcj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNCksbz17ZnVuY3Rpb246ITAsb2JqZWN0OiEwfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSkmJm9bdHlwZW9mIGVdfHwhMX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDQpLG89QXJyYXkucHJvdG90eXBlLmZvckVhY2gsaT1PYmplY3QuY3JlYXRlLGE9ZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3IociBpbiBlKXRbcl09ZVtyXX07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PWkobnVsbCk7cmV0dXJuIG8uY2FsbChhcmd1bWVudHMsZnVuY3Rpb24oZSl7bihlKSYmYShPYmplY3QoZSksdCl9KSx0fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPU9iamVjdC5jcmVhdGUsbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsaT17fTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2YsdD1hcmd1bWVudHNbMF18fG47cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmbyhlKHQobnVsbCksaSkpPT09aX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbixvPXIoMTgpLGk9cigxKSxhPU9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZixzPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSx1PXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9O249ZnVuY3Rpb24oZSx0KXtpZihpKGUpLG51bGw9PT10fHxvKHQpKXJldHVybiBlO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJQcm90b3R5cGUgbXVzdCBiZSBudWxsIG9yIGFuIG9iamVjdFwiKX0sZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHI7cmV0dXJuIGU/KDI9PT1lLmxldmVsP2Uuc2V0PyhyPWUuc2V0LHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5jYWxsKG4oZSx0KSx0KSxlfSk6dD1mdW5jdGlvbihlLHQpe3JldHVybiBuKGUsdCkuX19wcm90b19fPXQsZX06dD1mdW5jdGlvbiBlKHQscil7dmFyIG87cmV0dXJuIG4odCxyKSxvPWEuY2FsbChlLm51bGxQb2x5ZmlsbCx0KSxvJiZkZWxldGUgZS5udWxsUG9seWZpbGwuX19wcm90b19fLG51bGw9PT1yJiYocj1lLm51bGxQb2x5ZmlsbCksdC5fX3Byb3RvX189cixvJiZzKGUubnVsbFBvbHlmaWxsLFwiX19wcm90b19fXCIsdSksdH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJsZXZlbFwiLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMSx2YWx1ZTplLmxldmVsfSkpOm51bGx9KGZ1bmN0aW9uKCl7dmFyIGUsdD1PYmplY3QuY3JlYXRlKG51bGwpLHI9e30sbj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIik7aWYobil7dHJ5e2U9bi5zZXQsZS5jYWxsKHQscil9Y2F0Y2goZSl7fWlmKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KT09PXIpcmV0dXJue3NldDplLGxldmVsOjJ9fXJldHVybiB0Ll9fcHJvdG9fXz1yLE9iamVjdC5nZXRQcm90b3R5cGVPZih0KT09PXI/e2xldmVsOjJ9Oih0PXt9LHQuX19wcm90b19fPXIsT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpPT09ciYme2xldmVsOjF9KX0oKSkscig0OCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cig1NikoKT9TdHJpbmcucHJvdG90eXBlLmNvbnRhaW5zOnIoNTcpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig3KSxvPXIoOCksaT1yKDU5KSxhPXIoNjIpLHM9cig2MyksdT1yKDMpLml0ZXJhdG9yO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBzKGUpW3VdP2VbdV0oKTpuKGUpP25ldyBpKGUpOm8oZSk/bmV3IGEoZSk6bmV3IGkoZSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbz1yKDM0KSxpPXIoOSksYT1yKDIpLHM9cigxKSx1PXIoNSksbD1yKDMzKSxjPXIoMyksZD1PYmplY3QuZGVmaW5lUHJvcGVydHksZj1PYmplY3QuZGVmaW5lUHJvcGVydGllcztlLmV4cG9ydHM9bj1mdW5jdGlvbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDb25zdHJ1Y3RvciByZXF1aXJlcyAnbmV3J1wiKTtmKHRoaXMse19fbGlzdF9fOnUoXCJ3XCIscyhlKSksX19jb250ZXh0X186dShcIndcIix0KSxfX25leHRJbmRleF9fOnUoXCJ3XCIsMCl9KSx0JiYoYSh0Lm9uKSx0Lm9uKFwiX2FkZFwiLHRoaXMuX29uQWRkKSx0Lm9uKFwiX2RlbGV0ZVwiLHRoaXMuX29uRGVsZXRlKSx0Lm9uKFwiX2NsZWFyXCIsdGhpcy5fb25DbGVhcikpfSxkZWxldGUgbi5wcm90b3R5cGUuY29uc3RydWN0b3IsZihuLnByb3RvdHlwZSxpKHtfbmV4dDp1KGZ1bmN0aW9uKCl7dmFyIGU7aWYodGhpcy5fX2xpc3RfXylyZXR1cm4gdGhpcy5fX3JlZG9fXyYmKGU9dGhpcy5fX3JlZG9fXy5zaGlmdCgpLHZvaWQgMCE9PWUpP2U6dGhpcy5fX25leHRJbmRleF9fPHRoaXMuX19saXN0X18ubGVuZ3RoP3RoaXMuX19uZXh0SW5kZXhfXysrOnZvaWQgdGhpcy5fdW5CaW5kKCl9KSxuZXh0OnUoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3JlYXRlUmVzdWx0KHRoaXMuX25leHQoKSl9KSxfY3JlYXRlUmVzdWx0OnUoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/e2RvbmU6ITAsdmFsdWU6dm9pZCAwfTp7ZG9uZTohMSx2YWx1ZTp0aGlzLl9yZXNvbHZlKGUpfX0pLF9yZXNvbHZlOnUoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX19saXN0X19bZV19KSxfdW5CaW5kOnUoZnVuY3Rpb24oKXt0aGlzLl9fbGlzdF9fPW51bGwsZGVsZXRlIHRoaXMuX19yZWRvX18sdGhpcy5fX2NvbnRleHRfXyYmKHRoaXMuX19jb250ZXh0X18ub2ZmKFwiX2FkZFwiLHRoaXMuX29uQWRkKSx0aGlzLl9fY29udGV4dF9fLm9mZihcIl9kZWxldGVcIix0aGlzLl9vbkRlbGV0ZSksdGhpcy5fX2NvbnRleHRfXy5vZmYoXCJfY2xlYXJcIix0aGlzLl9vbkNsZWFyKSx0aGlzLl9fY29udGV4dF9fPW51bGwpfSksdG9TdHJpbmc6dShmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBcIisodGhpc1tjLnRvU3RyaW5nVGFnXXx8XCJPYmplY3RcIikrXCJdXCJ9KX0sbCh7X29uQWRkOnUoZnVuY3Rpb24oZSl7aWYoIShlPj10aGlzLl9fbmV4dEluZGV4X18pKXtpZigrK3RoaXMuX19uZXh0SW5kZXhfXywhdGhpcy5fX3JlZG9fXylyZXR1cm4gdm9pZCBkKHRoaXMsXCJfX3JlZG9fX1wiLHUoXCJjXCIsW2VdKSk7dGhpcy5fX3JlZG9fXy5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dD49ZSYmKHRoaXMuX19yZWRvX19bcl09Kyt0KX0sdGhpcyksdGhpcy5fX3JlZG9fXy5wdXNoKGUpfX0pLF9vbkRlbGV0ZTp1KGZ1bmN0aW9uKGUpe3ZhciB0O2U+PXRoaXMuX19uZXh0SW5kZXhfX3x8KC0tdGhpcy5fX25leHRJbmRleF9fLHRoaXMuX19yZWRvX18mJih0PXRoaXMuX19yZWRvX18uaW5kZXhPZihlKSx0IT09LTEmJnRoaXMuX19yZWRvX18uc3BsaWNlKHQsMSksdGhpcy5fX3JlZG9fXy5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dD5lJiYodGhpcy5fX3JlZG9fX1tyXT0tLXQpfSx0aGlzKSkpfSksX29uQ2xlYXI6dShmdW5jdGlvbigpe3RoaXMuX19yZWRvX18mJm8uY2FsbCh0aGlzLl9fcmVkb19fKSx0aGlzLl9fbmV4dEluZGV4X189MH0pfSkpKSxkKG4ucHJvdG90eXBlLGMuaXRlcmF0b3IsdShmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5tYXRjaChzKVswXX1mdW5jdGlvbiBvKGUsdCl7aWYodCBpbnN0YW5jZW9mIGUuZXJyb3JzLlJldHJpZXZhbEVycm9yKXt2YXIgcj10LmdldENhdXNlKCk7aWYociBpbnN0YW5jZW9mIGUucmV0cmlldmFsRXJyb3JzLlVuYWNjZXB0YWJsZVJlc3BvbnNlU3RhdHVzQ29kZUVycm9yKXJldHVybiA0MDM9PT1yLmdldFN0YXR1c0NvZGUoKX1yZXR1cm4hMX1mdW5jdGlvbiBpKGUsdCxyLGkscyx1LGwsYyxkKXtkPWEubG9nZ2VyLnByZWZpeExvZ2dlcihkLFwiSExTTVNFUGxheWVyIENvbnRyb2xsZXJcIik7dmFyIGY9bnVsbCxwPW4oYyk7ci5vbkNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kZWFkO3QmJmYmJihkLmRlYnVnKFwiQWJvcnRpbmcgVVJMIHJldHJpZXZlIGJlY2F1c2UgcGxheWVyIHdhcyBraWxsZWQuXCIpLGYuYWJvcnQoKSl9KSxyLm9uRXJyb3Iuc3Vic2NyaWJlKGZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGEuZXJyb3JzLk5vdFN1cHBvcnRlZEVycm9yKSl7aWYoaSl7aWYodCBpbnN0YW5jZW9mIGEuZXJyb3JzLlVSTFVwZGF0ZUVycm9yKXJldHVybiBkLmVycm9yKFwiVVJMIHJlZnJlc2ggZmFpbGVkIGZvciBzb21lIHJlYXNvbi5cIix0KSx2b2lkIHMoe3JldHJ5UGxheWVyOiEwfSk7aWYobyhlLHQpKXJldHVybiBmP3ZvaWQgZC5kZWJ1ZyhcIkdvdCBhIDQwMyBzdGF0dXMgY29kZSwgYnV0IFVSTCByZWZyZXNoIGFscmVhZHkgaW4gcHJvZ3Jlc3MuXCIpOihkLmluZm8oXCJHb3QgYSA0MDMgc3RhdHVzIGNvZGUuIFBlZm9ybWluZyBhIFVSTCByZWZyZXNoLi4uXCIpLGY9bC5nZXRVcmwoKSx2b2lkIGYud2hlbkNvbXBsZXRlKCkudGhlbihmdW5jdGlvbihlKXtpZihlKXt2YXIgdD1lLnVybCxvPWUucmVuZGl0aW9uO24odCkhPT1wfHxKU09OLnN0cmluZ2lmeSh1KSE9PUpTT04uc3RyaW5naWZ5KG8pPyhkLndhcm4oXCJHb3QgYSBuZXcgVVJMIGJ1dCB0aGUgcmVuZGl0aW9uIGRpZCBub3QgbWF0Y2ggdGhlIG9yaWdpbmFsLlwiKSxzKHtyZXRyeVBsYXllcjohMX0pKTooZj1udWxsLGQuaW5mbyhcIkdvdCBhIG5ldyBVUkwuIFVwZGF0aW5nLi4uXCIpLHIuZ2V0VXJsQ29udHJvbGxlcigpLnVwZGF0ZVVybCh0KSl9ZWxzZSBkLndhcm4oXCJDb3VsZCBub3QgZ2V0IGEgbmV3IFVSTC5cIikscyh7cmV0cnlQbGF5ZXI6ITF9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2QuZXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yIHdoZW4gdHJ5aW5nIHRvIHJldHJpZXZlIGEgbmV3IFVSTC5cIixlKSxzKHtyZXRyeVBsYXllcjohMX0pfSkpfWQuZXJyb3IoXCJVbmV4cGVjdGVkIHBsYXllciBlcnJvci5cIix0KSxzKHtyZXRyeVBsYXllcjohMX0pfX0pLHQucHJvdmlkZVBsYXllcihyKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1yKDApLHM9L15bXlxcPyNdKi87dC5pc0Vycm9yV2hpY2hTaG91bGRUcmlnZ2VyVVJMUmVmcmVzaD1vLHQudGFrZUNvbnRyb2xITFNNU0VQbGF5ZXI9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoNiksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlNDQVVESU8uR0VPQkxPQ0tFRF9FUlJPUlwifSx0fShvLkFwaUVycm9yKTt0Lkdlb0Jsb2NrZWRFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigxMSksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuY2FsbCh0aGlzLFwiVGhlcmUgd2VyZSBubyBzdHJlYW0gVVJMcy5cIil8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJTQ0FVRElPLk5PX1NUUkVBTVNcIn0sdH0oby5Ob3RTdXBwb3J0ZWRFcnJvcik7dC5Ob1N0cmVhbXNFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig2KSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gZS5jYWxsKHRoaXMsbnVsbCxcIlJlcXVlc3QgdGltZWQgb3V0IHRvbyBtYW55IHRpbWVzLlwiKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlNDQVVESU8uVElNRURfT1VUX0VSUk9SXCJ9LHR9KG8uQXBpRXJyb3IpO3QuVGltZWRPdXRFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig2KSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiU0NBVURJTy5VTkFWQUlMQUJMRV9FUlJPUlwifSx0fShvLkFwaUVycm9yKTt0LlVuYXZhaWxhYmxlRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuLG89cig2KSxpPXIoMjYpLGE9cigxMSkscz1yKDI4KSx1PXIoMjkpLGw9cigyNyk7IWZ1bmN0aW9uKGUpe2UuQXBpRXJyb3I9by5BcGlFcnJvcixlLkdlb0Jsb2NrZWRFcnJvcj1pLkdlb0Jsb2NrZWRFcnJvcixlLk5vdFN1cHBvcnRlZEVycm9yPWEuTm90U3VwcG9ydGVkRXJyb3IsZS5UaW1lZE91dEVycm9yPXMuVGltZWRPdXRFcnJvcixlLlVuYXZhaWxhYmxlRXJyb3I9dS5VbmF2YWlsYWJsZUVycm9yLGUuTm9TdHJlYW1zRXJyb3I9bC5Ob1N0cmVhbXNFcnJvcn0obj10LmVycm9yc3x8KHQuZXJyb3JzPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuIHJlP3JlOihyZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIiksbyhyZSkscmUpfWZ1bmN0aW9uIG8oZSl7ZS5sb2FkKCl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT09PVl8fGU9PT1YfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1YfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1ZfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1afWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT0kfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5zcGxpdChcIi8vXCIsMik7cmV0dXJuIDE9PT10Lmxlbmd0aD90WzBdLnNwbGl0KFwiL1wiLDEpWzBdOnRbMV0/dFsxXS5zcGxpdChcIi9cIiwxKVswXTpcIlwifWZ1bmN0aW9uIGQoZSl7dmFyIHQ9ZWUuZXhlYyhlKTtyZXR1cm4gdCYmdFswXXx8XCJcIn1mdW5jdGlvbiBmKCl7Zm9yKHZhciBlPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIix0PVwiXCIscj0wO3I8MjA7cisrKXQrPWUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSplLmxlbmd0aCkpO3JldHVybiB0fWZ1bmN0aW9uIHAoZSl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwibGV2ZWwgbXVzdCBiZSBhIG51bWJlci5cIik7aWYoZTwwfHxlPjEpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2b2x1bWUgbGV2ZWwuXCIpO3NlPWUsYWUuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5zZXRWb2x1bWUoZSl9KX1mdW5jdGlvbiBoKCl7cmV0dXJuIHNlfWZ1bmN0aW9uIF8oZSl7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIm11dGVFbmFibGVkIG11c3QgYmUgYSBib29sZWFuLlwiKTt1ZT1lLGFlLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuc2V0TXV0ZWQoZSl9KX1mdW5jdGlvbiBnKCl7cmV0dXJuIHVlfWZ1bmN0aW9uIHkoKXtuKCl9ZnVuY3Rpb24gdihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGplP2coamUpOm51bGx9ZnVuY3Rpb24gcigpe2lmKEJlJiZ3aW5kb3cuY2xlYXJUaW1lb3V0KEJlKSxEZS5kZWJ1ZyhcIlBlcmZvcm1pbmcgcmV0cmlldmUuXCIpLFVlKXRocm93IG5ldyBFcnJvcihcIlBsYXllciBqb2IgYWxyZWFkeSBydW5uaW5nLiBPbmx5IG9uZSBpbnN0YW5jZSBvZiB0aGUgam9iIGlzIGFsbG93ZWQgYXQgb25jZS5cIik7aWYoSWUuaXNEZWFkKCkpdGhyb3cgbmV3IEVycm9yKFwiUHJveHkgaXMgZGVhZC5cIik7dmFyIGU9bmV3IEIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7ZnVuY3Rpb24gdChlKXtpZihlIT09bS5oZWxwZXJzLmFib3J0YWJsZUpvYi5hYm9ydGVkRXJyb3IpaWYoZSBpbnN0YW5jZW9mIFQuUmVxdWVzdEVycm9yKXt2YXIgdD1lLmdldFN0YXR1c0NvZGUoKTtzd2l0Y2godCl7Y2FzZSA0MDE6SWUuX3RyaWdnZXJFcnJvcihuZXcgeC5HZW9CbG9ja2VkRXJyb3IodCxcIkdlb2Jsb2NrZWQgKGxvZ2dlZCBvdXQpLlwiKSk7YnJlYWs7Y2FzZSA0MDM6SWUuX3RyaWdnZXJFcnJvcihuZXcgeC5HZW9CbG9ja2VkRXJyb3IodCxcIkdlb2Jsb2NrZWQgKGxvZ2dlZCBpbikuXCIpKTticmVhaztjYXNlIDQwNDpJZS5fdHJpZ2dlckVycm9yKG5ldyBPLlVuYXZhaWxhYmxlRXJyb3IodCxcIlRyYWNrIHVuYXZhaWxhYmxlLlwiKSk7YnJlYWs7Y2FzZSBudWxsOnRocm93IG5ldyBFcnJvcihcIlN0YXR1cyBjb2RlIHNob3VsZCBub3QgYmUgbnVsbC5cIik7ZGVmYXVsdDpJZS5fdHJpZ2dlckVycm9yKG5ldyBBLkFwaUVycm9yKHQpKX19ZWxzZSBlPT09bS5oZWxwZXJzLnJldHJ5Lm5vTW9yZUF0dGVtcHRzRXJyb3I/SWUuX3RyaWdnZXJFcnJvcihuZXcgRC5UaW1lZE91dEVycm9yKTooRGUuZXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yLlwiLGUpLEllLl90cmlnZ2VyRXJyb3IobmV3IG0uZXJyb3JzLlBsYXllckZhdGFsRXJyb3IoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLlwiLGUpKSl9YT1vKCksYS5vbkNvbXBsZXRpb24oZnVuY3Rpb24ocil7aWYocil0cnl7TmU9cixMZXx8KExlPXAoKSk7dmFyIG89TGVbMF07bz9uKCk6KERlLmRlYnVnKFwiRXhjbHVkaW5nIHJlbmRpdGlvbi5cIixyLnJlbmRpdGlvbiksdi5leGNsdWRlUmVuZGl0aW9uKHIucmVuZGl0aW9uKSxMZT1udWxsLGUoKSl9Y2F0Y2goZSl7dChlKX1lbHNlIE5lPyhEZS5lcnJvcihcIlRoZXJlIHdlcmUgbm8gc3RyZWFtIGZvcm1hdHMgdGhhdCB3ZXJlIHN1cHBvcnRlZC5cIiksSWUuX3RyaWdnZXJFcnJvcihuZXcgTS5Ob3RTdXBwb3J0ZWRFcnJvcikpOihEZS5lcnJvcihcIlRoZXJlIHdlcmUgbm8gc3RyZWFtcyBhdmFpbGFibGUuXCIpLEllLl90cmlnZ2VyRXJyb3IobmV3IEcuTm9TdHJlYW1zRXJyb3IpKX0pLGEub25FcnJvcih0KX1mdW5jdGlvbiBuKCl7ZnVuY3Rpb24gZShlKXtpZighdSYmIWkmJih1PSEwLERlLmRlYnVnKFwiUGxheWVyIHJlbGVhc2luZyBjb250cm9sLlwiLGUpLHQuYWJvcnQoZSksIUllLmlzRGVhZCgpKSlpZihlJiZlLnJldHJ5UGxheWVyKXt2YXIgbj1xZS5nZXREZWxheSgpO24+MD8oRGUuZGVidWcoXCJXYWl0aW5nIFwiK24rXCIgbXMuXCIpLEJlPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHIoKX0sbikpOnIoKX1lbHNlIHIoKX12YXIgbj1MZSYmTGVbMF07aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiTm8gcGxheWVyIHRvIGJ1aWxkLlwiKTtpZighTmUpdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVuZGl0aW9uLlwiKTt2YXIgbz1OZS51cmwsYT1OZS5yZW5kaXRpb24scz1uZXcgbS5EZXNjcmlwdG9yKG8sYS5tYWVzdHJvUHJvdG9jb2wsYS5tYWVzdHJvRm9ybWF0LGEubWFlc3Ryb1NlZ21lbnRGb3JtYXQpLHU9ITE7RGUuZGVidWcoXCJCdWlsZGluZyBwbGF5ZXIuLi5cIik7dmFyIGw9dm9pZCAwLGM9dm9pZCAwO3RyeXtjPW4ocyxOZSxlKX1jYXRjaChlKXtsPWV9dm9pZCAwPT09Yz8oRGUuZXJyb3IoXCJFeGNlcHRpb24gb2NjdXJyZWQgd2hpbHN0IGJ1aWxkaW5nIHBsYXllci5cIixsKSxlKCkpOm51bGw9PT1jPyhEZS5kZWJ1ZyhcIlBsYXllciBub3Qgc3VwcG9ydGVkIGZvciBjdXJyZW50IGRlc2NyaXB0b3IuXCIpLGUoKSk6KENlLnNldChjLE5lKSxqZT1jLERlLmRlYnVnKFwiQnVpbHQgcGxheWVyLlwiKSxqZS5pc0RlYWQoKT8oRGUuZGVidWcoXCJQbGF5ZXIgZGllZCBkdXJpbmcgY29uc3RydWN0aW9uLlwiKSxlKCkpOihsZS5hZGRQbGF5ZXIoamUpLGplLm9uQ2hhbmdlLnN1YnNjcmliZShmdW5jdGlvbih0KXt2YXIgcj10LmRlYWQ7ciYmKERlLmRlYnVnKFwiUGxheWVyIGRpZWQuXCIpLGUoKSl9KSkpfXZhciBpPSExLGE9bnVsbDtyZXR1cm4gZSgpLHtyZXN1bHQ6bS5oZWxwZXJzLmRlZmVycmVkLmJ1aWxkRGVmZXJyZWQoKS5wcm9taXNlLGFib3J0OmZ1bmN0aW9uKGUpe2k9ITAsRGUuaW5mbyhcIlBsYXllciBqb2IgYWJvcnRlZC5cIixlKSxVZT1udWxsLGEmJmEuYWJvcnQoKSxMZSYmKGUmJmUucmV0cnlQbGF5ZXI/RGUuZGVidWcoXCJQbGF5ZXIgbWlnaHQgYmUgdXNlZCBhZ2FpbiBmb3IgY3VycmVudCByZW5kaXRpb24uXCIpOihEZS5kZWJ1ZyhcIlBsYXllciB3aWxsIG5vdCBiZSB1c2VkIGFnYWluIGZvciBjdXJyZW50IHJlbmRpdGlvbi5cIiksTGUuc2hpZnQoKSksSWUuZ2V0UGxheWVyKCkmJkllLnJlbW92ZVBsYXllcigpLGplJiYoamUua2lsbCgpLGplPW51bGwpLE5lPW51bGwpfX19KSx0PWUucnVuKCk7cmV0dXJuIFVlPXR9ZnVuY3Rpb24gbygpe3JldHVybiBIKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBCKGZ1bmN0aW9uKCl7dmFyIGU9di5nZXRVcmwoKTtEZS5kZWJ1ZyhcIlJldHJpZXZpbmcgYSBVUkwuLi5cIik7dmFyIHQ9ZS53aGVuQ29tcGxldGUoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlP0RlLmRlYnVnKFwiUmV0cmlldmVkIFVSTC5cIix7cmVuZGl0aW9uOmUucmVuZGl0aW9uLGJpdHJhdGU6ZS5iaXRyYXRlfSk6RGUuZGVidWcoXCJObyBVUkwgcHJvdmlkZWQuXCIpLGUmJnRlLmluZGV4T2YoZS5yZW5kaXRpb24pPDA/KERlLndhcm4oXCJVbmtub3duIHJlbmRpdGlvbi4gU2tpcHBpbmcuLi5cIixlLnJlbmRpdGlvbikse3N1Y2Nlc3M6ITF9KTp7cmVzdWx0OmUsc3VjY2VzczohMH19KS5jYXRjaChmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgVC5SZXF1ZXN0RXJyb3Ipe3ZhciB0PWUuZ2V0U3RhdHVzQ29kZSgpO2lmKG51bGw9PT10fHwwPT09dClyZXR1cm4gbnVsbD09PXQ/RGUud2FybihcIlRpbWVkIG91dCB3aGVuIHJldHJpZXZpbmcgVVJMLiBXaWxsIHJldHJ5LlwiKTpEZS53YXJuKFwiTmV0d29yayBlcnJvciB3aGVuIHJldHJpZXZpbmcgVVJMLiBXaWxsIHJldHJ5LlwiKSx7c3VjY2VzczohMX19dGhyb3cgZSE9PW0uaGVscGVycy5hYm9ydGFibGVKb2IuYWJvcnRlZEVycm9yJiZEZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgVVJMLlwiLGUpLGV9KTtyZXR1cm57cmVzdWx0OnQsYWJvcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5hYm9ydCgpfX19KX0sUGUpfWZ1bmN0aW9uIHAoKXt2YXIgZT1bXTtyZXR1cm4gJCYmeS5pbmRleE9mKCQpPj0wJiYoRGUuZGVidWcoXCJDaHJvbWVjYXN0UGxheWVyIGZvdW5kLlwiLFEudmVyc2lvbikseGU/ZS5wdXNoKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyAkKGUse25hbWU6QWUsY2FzdENvbnRleHQ6eGUsbG9nZ2VyOnllfSk7cmV0dXJuIEllLnByb3ZpZGVQbGF5ZXIodCx7c3luY1Bvc2l0aW9uOiExLHN5bmNWb2x1bWU6ITF9LCExKSx0fSk6RGUud2FybihcIkNvdWxkIG5vdCBjb25zdHJ1Y3QgY2hyb21lY2FzdCBwbGF5ZXIgYmVjYXVzZSBjb250ZXh0IG5vdCBwcm92aWRlZC5cIikpLFomJnkuaW5kZXhPZihaKT49MCYmKERlLmRlYnVnKFwiRmxpcHBlclBsYXllciBmb3VuZC5cIixKLnZlcnNpb24pLGUucHVzaChmdW5jdGlvbihlKXt2YXIgdD1uZXcgWihlLHtuYW1lOkFlLGxvZ2dlcjp5ZX0pO3JldHVybiBDLnRha2VDb250cm9sRmxpcHBlclBsYXllcihJZSx0LERlLEZlfHx2b2lkIDApLHR9KSksWCYmeS5pbmRleE9mKFgpPj0wJiYoRGUuZGVidWcoXCJITFNNU0VQbGF5ZXIgZm91bmQuXCIsVy52ZXJzaW9uKSxlLnB1c2goZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW5ldyBYKGUse25hbWU6QWUscGxheWxpc3RMb2FkZXI6RS5zdHJpbmdMb2FkZXIsc2VnbWVudExvYWRlcjpFLmFycmF5QnVmZmVyTG9hZGVyLGtleUxvYWRlcjpFLmFycmF5QnVmZmVyTG9hZGVyLGxvZ2dlcjp5ZX0pO3JldHVybiBfKG4sZnVuY3Rpb24oKXtyZXR1cm4gcigpfSksSS50YWtlQ29udHJvbEhMU01TRVBsYXllcihXLEllLG4sVGUscix0LnJlbmRpdGlvbix2LHQudXJsLERlKSxufSkpLFkmJnkuaW5kZXhPZihZKT49MCYmKERlLmRlYnVnKFwiSFRNTDVQbGF5ZXIgZm91bmQuXCIsSy52ZXJzaW9uKSxlLnB1c2goZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQudGltZVJldHJpZXZlZDtpZihUZSYmKFwiaGxzXCI9PT1lLmdldFByb3RvY29sKCkubmFtZXx8dm9pZCAwPT09bikpcmV0dXJuIG51bGw7dmFyIG87aWYoVGUpe2lmKHZvaWQgMD09PW4pdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0aW5nIHRpbWVVcmxSZXRyaWV2ZWQgdG8gYmUgc2V0LlwiKTtvPXt1cmxFeHBpcmVzOiEwLHRpbWVVcmxSZXRyaWV2ZWQ6bn19ZWxzZSBvPXt1cmxFeHBpcmVzOiExfTt2YXIgaT1uZXcgWShlLHtuYW1lOkFlLGxvZ2dlcjp5ZX0pO3JldHVybiBfKGksZnVuY3Rpb24oKXtyZXR1cm4gcigpfSksay50YWtlQ29udHJvbEhUTUw1UGxheWVyKEssSWUsaSxvLHIsRGUpLGl9KSksZX1mdW5jdGlvbiBoKCl7VWU/KERlLmRlYnVnKFwiUmVsb2FkaW5nIHN0cmVhbSBVUkxzLi4uXCIpLERlLmRlYnVnKFwiQWJvcnRpbmcgcGxheWVyIGpvYiB0aGF0IGlzIGluIHByb2dyZXNzLlwiKSxVZS5hYm9ydCgpLExlPW51bGwscigpKTpEZS5kZWJ1ZyhcIlJlbG9hZCByZXF1ZXN0ZWQsIGJ1dCBub3QgcmVsb2FkaW5nIGFzIHRoZXJlIGlzIG5vdGhpbmcgdG8gcmVsb2FkLlwiKX1mdW5jdGlvbiBfKGUsdCl7ZnVuY3Rpb24gcigpe3ZhciB0PWUuZ2V0TWVkaWFFbGVtZW50KCk7dCYmdCE9PXJlJiYoRGUuZGVidWcoXCJSZXZva2luZyBhdWRpbyBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQgaW50ZXJuYWxseSBiZWNhdXNlIHBsYXllciBpcyByZWFkeSBub3cuXCIpLGUucmV2b2tlTWVkaWFFbGVtZW50KCkpfWZ1bmN0aW9uIG8oKXt2YXIgcj1lLmdldE1lZGlhRWxlbWVudCgpO2lmKHImJnIhPT1yZSYmKERlLmRlYnVnKFwiUmV2b2tpbmcgYXVkaW8gZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkIGludGVybmFsbHksIGV2ZW4gdGhvdWdoIHBsYXllciBpcyBub3QgcmVhZHkuXCIpLGUucmV2b2tlTWVkaWFFbGVtZW50KCkpLCFlLmdldE1lZGlhRWxlbWVudCgpKXtuZSYmIW5lLmlzRGVhZCgpJiYoRGUuaW5mbyhcIlJldm9raW5nIGF1ZGlvIGVsZW1lbnQgZnJvbSBhIHBsYXllci5cIiksbmUuaXNQbGF5aW5nKCkmJkRlLndhcm4oXCJUaGUgYXVkaW8gZWxlbWVudCBpcyBiZWluZyByZXZva2VkIGZyb20gYSBwbGF5ZXIgd2hpY2ggaXMgcGxheWluZy4gT25seSBvbmUgcGxheWVyIHNob3VsZCBiZSBwbGF5aW5nIGF0IG9uY2UuXCIpLG5lLnJldm9rZU1lZGlhRWxlbWVudCgpKSxuZT1lLERlLmluZm8oXCJQcm92aWRpbmcgYXVkaW8gZWxlbWVudCB0byBhIGRpZmZlcmVudCBwbGF5ZXIuXCIpO3ZhciBvPW9lPXt9O2UucHJvdmlkZU1lZGlhRWxlbWVudChuKCkpLmNhdGNoKGZ1bmN0aW9uKHIpe2UuaXNEZWFkKCl8fG9lIT09b3x8KERlLmVycm9yKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCB3aGVuIHRyeWluZyB0byBwcm92aWRlIHRoZSBhdWRpbyBlbGVtZW50IHRvIGEgcGxheWVyLlwiLHIpLHQoKSl9KX19ZS5pc1JlYWR5KCk/cigpOmUub25SZWFkeS5zdWJzY3JpYmUociksSWUub25QbGF5SW50ZW50LnN1YnNjcmliZShmdW5jdGlvbigpe2UuaXNEZWFkKCl8fG8oKX0pLEllLmlzUGxheWluZygpJiYoZS5pc0RlYWQoKXx8bygpKX1mdW5jdGlvbiBnKGUpe3ZhciB0PUNlLmdldChlKTtpZighdClyZXR1cm4gbnVsbDt2YXIgcj1zKGUpP1wiTWFlc3Ryb0hUTUw1XCI6YShlKT9cIk1hZXN0cm9ITFNNU0VcIjp1KGUpP1wiTWFlc3Ryb0ZsaXBwZXJcIjpsKGUpP1wiTWFlc3Ryb0Nocm9tZWNhc3RcIjpudWxsO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gcGxheWVyLlwiKTtyZXR1cm57bmFtZTpyLGJpdHJhdGU6dC5iaXRyYXRlLHByb3RvY29sOnQucmVuZGl0aW9uLnNjUHJvdG9jb2wsaG9zdDpjKHQudXJsKSx1cmw6ZCh0LnVybCksZm9ybWF0OnQucmVuZGl0aW9uLnNjRm9ybWF0fX12YXIgeT1lLnBsYXllckNsYXNzZXMsdj1lLnN0cmVhbVVybFJldHJpZXZlcixMPWUuZHVyYXRpb24sRj12b2lkIDA9PT1MP251bGw6TCxxPWUucHJlbG9hZGluZ0VuYWJsZWQsZWU9dm9pZCAwIT09cSYmcSxjZT1lLnBhdXNlZE1heEJ1ZmZlckxlbmd0aCxkZT12b2lkIDA9PT1jZT8yZTM6Y2UsZmU9ZS5wbGF5aW5nTWF4QnVmZmVyTGVuZ3RoLHBlPXZvaWQgMD09PWZlPzllNDpmZSxoZT1lLmZhZGVPdXREdXJhdGlvbixfZT12b2lkIDA9PT1oZT8wOmhlLGdlPWUubG9nZ2VyLHllPXZvaWQgMD09PWdlP20ubG9nZ2VyLm5vT3BMb2dnZXI6Z2UsdmU9ZS5hdWRpb1BlcmZvcm1hbmNlUmVwb3J0ZXIsbWU9ZS5hdWRpb1JlcG9ydGVyLEVlPWUuYXVkaW9DaGVja3BvaW50SW50ZXJ2YWwsYmU9dm9pZCAwPT09RWU/M2U0OkVlLHdlPWUuZXJyb3JSZXBvcnRlcixTZT1lLnVybFByb3ZpZGVyUmV0cnlEZWxheUNhbGN1bGF0b3IsUGU9dm9pZCAwPT09U2U/eigpOlNlLFJlPWUuc3RyZWFtVXJsc0V4cGlyZSxUZT12b2lkIDA9PT1SZXx8UmUseGU9ZS5jaHJvbWVjYXN0Q29udGV4dDtpZighKHYgaW5zdGFuY2VvZiBiLkJhc2VTdHJlYW1VcmxSZXRyaWV2ZXIpKXRocm93IG5ldyBFcnJvcihcIlN0cmVhbVVybFJldHJpZXZlciBpbnZhbGlkLlwiKTtpZihudWxsIT09RiYmKFwibnVtYmVyXCIhPXR5cGVvZiBGfHxGPDApKXRocm93IG5ldyBFcnJvcihcImR1cmF0aW9uIGludmFsaWQuXCIpO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgZWUpdGhyb3cgbmV3IEVycm9yKFwicHJlbG9hZGluZ0VuYWJsZWQgaW52YWxpZC5cIik7aWYobnVsbCE9PWRlJiYoXCJudW1iZXJcIiE9dHlwZW9mIGRlfHxkZTwwKSl0aHJvdyBuZXcgRXJyb3IoXCJwYXVzZWRNYXhCdWZmZXJMZW5ndGggaW52YWxpZC5cIik7aWYobnVsbCE9PXBlJiYoXCJudW1iZXJcIiE9dHlwZW9mIHBlfHxwZTwwKSl0aHJvdyBuZXcgRXJyb3IoXCJwbGF5aW5nTWF4QnVmZmVyTGVuZ3RoIGludmFsaWQuXCIpO2lmKG51bGwhPT1fZSYmKFwibnVtYmVyXCIhPXR5cGVvZiBfZXx8X2U8MCkpdGhyb3cgbmV3IEVycm9yKFwiZmFkZU91dER1cmF0aW9uIGludmFsaWQuXCIpO2lmKG51bGwhPT15ZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgeWUmJlwib2JqZWN0XCIhPXR5cGVvZiB5ZSl0aHJvdyBuZXcgRXJyb3IoXCJsb2dnZXIgaW52YWxpZC5cIik7aWYodm9pZCAwIT09bWUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIG1lKXRocm93IG5ldyBFcnJvcihcImF1ZGlvUmVwb3J0ZXIgaW52YWxpZC5cIik7aWYobnVsbCE9PWJlJiYoXCJudW1iZXJcIiE9dHlwZW9mIGJlfHxiZTwwKSl0aHJvdyBuZXcgRXJyb3IoXCJhdWRpb0NoZWNrcG9pbnRJbnRlcnZhbCBpbnZhbGlkLlwiKTtpZih2b2lkIDAhPT12ZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdmUpdGhyb3cgbmV3IEVycm9yKFwiYXVkaW9QZXJmb3JtYW5jZVJlcG9ydGVyIGludmFsaWQuXCIpO2lmKHZvaWQgMCE9PXdlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB3ZSl0aHJvdyBuZXcgRXJyb3IoXCJlcnJvclJlcG9ydGVyIGludmFsaWQuXCIpO2lmKHZvaWQgMCE9PVBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBQZSl0aHJvdyBuZXcgRXJyb3IoXCJyZXRyeURlbGF5Q2FsY3VsYXRvciBpbnZhbGlkLlwiKTt2YXIgQWU9XCJTQ0F1ZGlvLVwiKyArK2llLE9lPXYuZ2V0VHJhY2tJZCgpO251bGwhPT1PZSYmKEFlKz1cIi1cIitPZSk7dmFyIE1lPW5ldyBOLkxvZ0NvbGxlY3Rvcjt5ZT1tLmxvZ2dlci5jbG9uZUxvZ2dlcihNZSx5ZSk7dmFyIERlPW0ubG9nZ2VyLnByZWZpeExvZ2dlcih5ZSxBZSksa2U9ZigpO0RlLmluZm8oXCJCdWlsZGluZyBwbGF5ZXIuLi5cIix7dWE6bmF2aWdhdG9yLnVzZXJBZ2VudCxsb2dJZDprZX0pO3ZhciBJZT1uZXcgUi5QbGF5ZXIoe25hbWU6QWUrXCItUHJveHlcIixsb2dnZXI6eWUsbWVkaWFTZXNzaW9uRW5hYmxlZDohMCxwYXVzZWRNYXhCdWZmZXJMZW5ndGg6ZGUscGxheWluZ01heEJ1ZmZlckxlbmd0aDpwZSxwcmVsb2FkaW5nRW5hYmxlZDplZX0saCk7YWUucHVzaChJZSksSWUuc2V0Vm9sdW1lKHNlKSxJZS5zZXRNdXRlZCh1ZSksX2U+MCYmSWUuYWRkVm9sdW1lQXV0b21hdG9yKHcuYnVpbGRGYWRlT3V0KF9lKSk7dmFyIENlPW5ldyBWLlNDV2Vha01hcCxMZT1udWxsLGplPW51bGwsTmU9bnVsbCxVZT1udWxsLEZlPW51bGwsQmU9bnVsbCxxZT1uZXcgai5EZWNheWluZ0V4cG9uZW50aWFsRGVsYXlDYWxjdWxhdG9yO2lmKHZlJiYoRmU9bmV3IFMuQXVkaW9QZXJmb3JtYW5jZUV2ZW50R2VuZXJhdG9yKEllLHZlLERlLHQpKSxtZSYmbmV3IFUuQXVkaW9FdmVudEdlbmVyYXRvcihJZSxtZSxiZSxEZSx0KSx3ZSYmbmV3IFAuRXJyb3JFdmVudEdlbmVyYXRvcihJZSxNZSxrZSxPZSx3ZSxEZSxnLFd8fG51bGwsVGUpLEllLm9uQ2hhbmdlLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lLmRlYWQscj1lLnBsYXlpbmc7aWYodClEZS5pbmZvKFwiUGxheWVyIGtpbGxlZC5cIiksYWUuc3BsaWNlKGFlLmluZGV4T2YoSWUpLDEpLFVlJiZVZS5hYm9ydCgpLEJlJiZ3aW5kb3cuY2xlYXJUaW1lb3V0KEJlKTtlbHNlIGlmKHI9PT0hMCl7dmFyIG89eS5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfSk7byYmbigpfX0pLG51bGwhPT1GJiYoRGUuZGVidWcoXCJTZXR0aW5nIGluaXRpYWwgZHVyYXRpb24uXCIsRiksSWUuc2V0SW5pdGlhbER1cmF0aW9uKEYpKSxlZSlEZS5kZWJ1ZyhcIlByZWxvYWRpbmcgaXMgZW5hYmxlZCwgc28gcGVyZm9ybWluZyByZXRyaWV2ZSBpbW1lZGlhdGVseS5cIikscigpO2Vsc2V7RGUuZGVidWcoXCJQcmVsb2FkaW5nIGlzIGRpc2FibGVkLCBzbyBkZWZlcnJpbmcgcmV0cmlldmUgdW50aWwgZWl0aGVyIGEgcGxheSBpbnRlbnQgb3IgcHJlbG9hZGluZyBpcyBlbmFibGVkLlwiKTt2YXIgSGU9ZnVuY3Rpb24oKXt6ZS5yZW1vdmUoKSxHZS5yZW1vdmUoKSxEZS5kZWJ1ZyhcIlByZWxvYWRpbmcgbm93IGVuYWJsZWQgb3IgcmVjZWl2ZWQgYSBwbGF5IHJlcXVlc3QuIFBlZm9ybWluZyByZXRyaWV2ZS5cIikscigpfSx6ZT1JZS5vblByZWxvYWRpbmdFbmFibGVkLnN1YnNjcmliZShIZSksR2U9SWUub25QbGF5SW50ZW50LnN1YnNjcmliZShIZSl9cmV0dXJuIEllfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBtPXIoMCksRT1yKDk0KSxiPXIoMTMpLHc9cigxMiksUz1yKDczKSxQPXIoNzgpLFI9cigxNCksVD1yKDE2KSx4PXIoMjYpLEE9cig2KSxPPXIoMjkpLE09cigxMSksRD1yKDI4KSxrPXIoNzYpLEk9cigyNSksQz1yKDc1KSxMPXIoMTUpLGo9cig3NyksTj1yKDgwKSxVPXIoNzIpLEY9cig3NCksQj1tLmhlbHBlcnMuYWJvcnRhYmxlSm9iLkFib3J0YWJsZUpvYixxPW0uaGVscGVycy5yZXRyeSxIPXEucmV0cnksej1xLmJ1aWxkRXhwb25lbnRpYWxEZWxheUNhbGN1bGF0b3IsRz1yKDI3KSxWPXIoNzkpLEs9dm9pZCAwO1xudHJ5e0s9cig5Myl9Y2F0Y2goZSl7fXZhciBXPXZvaWQgMDt0cnl7Vz1yKDkyKX1jYXRjaChlKXt9dmFyIEo9dm9pZCAwO3RyeXtKPXIoOTEpfWNhdGNoKGUpe312YXIgUT12b2lkIDA7dHJ5e1E9cig5MCl9Y2F0Y2goZSl7fXZhciBZPUs/Sy5IVE1MNVBsYXllcjpudWxsLFg9Vz9XLkhMU01TRVBsYXllcjpudWxsLFo9Sj9KLkZsaXBwZXJQbGF5ZXI6bnVsbCwkPVE/US5DaHJvbWVjYXN0UGxheWVyOm51bGwsZWU9L15bXj8jXSovLHRlPU9iamVjdC5rZXlzKEwucmVuZGl0aW9ucykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBMLnJlbmRpdGlvbnNbZV19KSxyZT1udWxsLG5lPW51bGwsb2U9e30saWU9LTEsYWU9W10sc2U9MSx1ZT0hMSxsZT1uZXcgRi5DYWNoZU1hbmFnZXIoMTVlNyxtLmxvZ2dlci5ub09wTG9nZ2VyKTt0LnNldEdsb2JhbFZvbHVtZT1wLHQuZ2V0R2xvYmFsVm9sdW1lPWgsdC5zZXRHbG9iYWxNdXRlZD1fLHQuZ2V0R2xvYmFsTXV0ZWQ9Zyx0LmFjdGl2YXRlQXVkaW9FbGVtZW50PXksdC5idWlsZFBsYXllcj12fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG4sbz1yKDEyKTshZnVuY3Rpb24oZSl7ZS5GYWRlPW8uRmFkZSxlLmJ1aWxkRmFkZUluPW8uYnVpbGRGYWRlSW4sZS5idWlsZEZhZGVPdXQ9by5idWlsZEZhZGVPdXR9KG49dC52b2x1bWVBdXRvbWF0aW9ufHwodC52b2x1bWVBdXRvbWF0aW9uPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbixvPXIoNDcpLGk9cigxOSksYT1yKDIpLHM9cig1NCksdT1yKDIpLGw9cigxKSxjPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLGQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LGY9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtuPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpPWwodCkmJnUodC52YWx1ZSk7cmV0dXJuIG49byh0KSxkZWxldGUgbi53cml0YWJsZSxkZWxldGUgbi52YWx1ZSxuLmdldD1mdW5jdGlvbigpe3JldHVybiFyLm92ZXJ3cml0ZURlZmluaXRpb24mJmYuY2FsbCh0aGlzLGUpP2k6KHQudmFsdWU9Yy5jYWxsKGksci5yZXNvbHZlQ29udGV4dD9yLnJlc29sdmVDb250ZXh0KHRoaXMpOnRoaXMpLGQodGhpcyxlLHQpLHRoaXNbZV0pfSxufSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9aShhcmd1bWVudHNbMV0pO3JldHVybiBudWxsIT10LnJlc29sdmVDb250ZXh0JiZhKHQucmVzb2x2ZUNvbnRleHQpLHMoZSxmdW5jdGlvbihlLHIpe3JldHVybiBuKHIsZSx0KX0pfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMSk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcykubGVuZ3RoPTAsdGhpc319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cigzNikoKT9BcnJheS5mcm9tOnIoMzcpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyPUFycmF5LmZyb207cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgciYmKGU9W1wicmF6XCIsXCJkd2FcIl0sdD1yKGUpLEJvb2xlYW4odCYmdCE9PWUmJlwiZHdhXCI9PT10WzFdKSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigzKS5pdGVyYXRvcixvPXIoNyksaT1yKDM4KSxhPXIoNDMpLHM9cigyKSx1PXIoMSksbD1yKDQpLGM9cig4KSxkPUFycmF5LmlzQXJyYXksZj1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxwPXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSxoPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixfLGcseSx2LG0sRSxiLHcsUz1hcmd1bWVudHNbMV0sUD1hcmd1bWVudHNbMl07aWYoZT1PYmplY3QodShlKSksbChTKSYmcyhTKSx0aGlzJiZ0aGlzIT09QXJyYXkmJmkodGhpcykpdD10aGlzO2Vsc2V7aWYoIVMpe2lmKG8oZSkpcmV0dXJuIHk9ZS5sZW5ndGgsMSE9PXk/QXJyYXkuYXBwbHkobnVsbCxlKTooZz1uZXcgQXJyYXkoMSksZ1swXT1lWzBdLGcpO2lmKGQoZSkpe2ZvcihnPW5ldyBBcnJheSh5PWUubGVuZ3RoKSxyPTA7cjx5OysrcilnW3JdPWVbcl07cmV0dXJuIGd9fWc9W119aWYoIWQoZSkpaWYodm9pZCAwIT09KGI9ZVtuXSkpe2ZvcihtPXMoYikuY2FsbChlKSx0JiYoZz1uZXcgdCksRT1tLm5leHQoKSxyPTA7IUUuZG9uZTspdz1TP2YuY2FsbChTLFAsRS52YWx1ZSxyKTpFLnZhbHVlLHQ/KHAudmFsdWU9dyxoKGcscixwKSk6Z1tyXT13LEU9bS5uZXh0KCksKytyO3k9cn1lbHNlIGlmKGMoZSkpe2Zvcih5PWUubGVuZ3RoLHQmJihnPW5ldyB0KSxyPTAsXz0wO3I8eTsrK3Ipdz1lW3JdLHIrMTx5JiYodj13LmNoYXJDb2RlQXQoMCksdj49NTUyOTYmJnY8PTU2MzE5JiYodys9ZVsrK3JdKSksdz1TP2YuY2FsbChTLFAsdyxfKTp3LHQ/KHAudmFsdWU9dyxoKGcsXyxwKSk6Z1tfXT13LCsrXzt5PV99aWYodm9pZCAwPT09eSlmb3IoeT1hKGUubGVuZ3RoKSx0JiYoZz1uZXcgdCh5KSkscj0wO3I8eTsrK3Ipdz1TP2YuY2FsbChTLFAsZVtyXSxyKTplW3JdLHQ/KHAudmFsdWU9dyxoKGcscixwKSk6Z1tyXT13O3JldHVybiB0JiYocC52YWx1ZT1udWxsLGcubGVuZ3RoPXkpLGd9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxvPW4uY2FsbChyKDE3KSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJm4uY2FsbChlKT09PW99fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXIoNDApKCk/TWF0aC5zaWduOnIoNDEpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5zaWduO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJjE9PT1lKDEwKSYmZSgtMjApPT09LTF9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPU51bWJlcihlKSxpc05hTihlKXx8MD09PWU/ZTplPjA/MTotMX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDM5KSxvPU1hdGguYWJzLGk9TWF0aC5mbG9vcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGUpPzA6KGU9TnVtYmVyKGUpLDAhPT1lJiZpc0Zpbml0ZShlKT9uKGUpKmkobyhlKSk6ZSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig0Miksbz1NYXRoLm1heDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG8oMCxuKGUpKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDIpLG89cigxKSxpPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLGE9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwscz1PYmplY3Qua2V5cyx1PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsbCl7dmFyIGMsZD1hcmd1bWVudHNbMl0sZj1hcmd1bWVudHNbM107cmV0dXJuIHI9T2JqZWN0KG8ocikpLG4obCksYz1zKHIpLGYmJmMuc29ydChcImZ1bmN0aW9uXCI9PXR5cGVvZiBmP2kuY2FsbChmLHIpOnZvaWQgMCksXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmKGU9Y1tlXSksYS5jYWxsKGUsYyxmdW5jdGlvbihlLG4pe3JldHVybiB1LmNhbGwocixlKT9hLmNhbGwobCxkLHJbZV0sZSxyLG4pOnR9KX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdD1PYmplY3QuYXNzaWduO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJihlPXtmb286XCJyYXpcIn0sdChlLHtiYXI6XCJkd2FcIn0se3Ryenk6XCJ0cnp5XCJ9KSxlLmZvbytlLmJhcitlLnRyenk9PT1cInJhemR3YXRyenlcIil9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig1MSksbz1yKDEpLGk9TWF0aC5tYXg7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsYSxzLHU9aShhcmd1bWVudHMubGVuZ3RoLDIpO2ZvcihlPU9iamVjdChvKGUpKSxzPWZ1bmN0aW9uKG4pe3RyeXtlW25dPXRbbl19Y2F0Y2goZSl7cnx8KHI9ZSl9fSxhPTE7YTx1OysrYSl0PWFyZ3VtZW50c1thXSxuKHQpLmZvckVhY2gocyk7aWYodm9pZCAwIT09cil0aHJvdyByO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMzUpLG89cig5KSxpPXIoMSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdChpKGUpKSxyPWFyZ3VtZW50c1sxXSxhPU9iamVjdChhcmd1bWVudHNbMl0pO2lmKHQhPT1lJiYhcilyZXR1cm4gdDt2YXIgcz17fTtyZXR1cm4gcj9uKHIsZnVuY3Rpb24odCl7KGEuZW5zdXJlfHx0IGluIGUpJiYoc1t0XT1lW3RdKX0pOm8ocyxlKSxzfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG89T2JqZWN0LmNyZWF0ZTtyKDIwKSgpfHwobj1yKDIxKSksZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO3JldHVybiBuPzEhPT1uLmxldmVsP286KGU9e30sdD17fSxyPXtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9LE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5wcm90b3R5cGUpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuXCJfX3Byb3RvX19cIj09PWU/dm9pZCh0W2VdPXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KTp2b2lkKHRbZV09cil9KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwibnVsbFBvbHlmaWxsXCIse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiExLHZhbHVlOmV9KSxmdW5jdGlvbih0LHIpe3JldHVybiBvKG51bGw9PT10P2U6dCxyKX0pOm99KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cig0NCkoXCJmb3JFYWNoXCIpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXIoNTIpKCk/T2JqZWN0LmtleXM6cig1Myl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIE9iamVjdC5rZXlzKFwicHJpbWl0aXZlXCIpLCEwfWNhdGNoKGUpe3JldHVybiExfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDQpLG89T2JqZWN0LmtleXM7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSk/T2JqZWN0KGUpOmUpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMiksbz1yKDQ5KSxpPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPXt9LGE9YXJndW1lbnRzWzJdO3JldHVybiBuKHQpLG8oZSxmdW5jdGlvbihlLG4sbyxzKXtyW25dPWkuY2FsbCh0LGEsZSxuLG8scyl9KSxyfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKGUrXCIgaXMgbm90IGFuIE9iamVjdFwiKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1cInJhemR3YXRyenlcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmNvbnRhaW5zJiZuLmNvbnRhaW5zKFwiZHdhXCIpPT09ITAmJm4uY29udGFpbnMoXCJmb29cIik9PT0hMX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1TdHJpbmcucHJvdG90eXBlLmluZGV4T2Y7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwodGhpcyxlLGFyZ3VtZW50c1sxXSk+LTF9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxvPU1hdGgucmFuZG9tO2UuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlO2RvIGU9bygpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTt3aGlsZShuW2VdKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbixvPXIoMTApLGk9cigyMiksYT1yKDUpLHM9cigzKSx1PXIoMjQpLGw9T2JqZWN0LmRlZmluZVByb3BlcnR5O249ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO3UuY2FsbCh0aGlzLGUpLHQ9dD9pLmNhbGwodCxcImtleSt2YWx1ZVwiKT9cImtleSt2YWx1ZVwiOmkuY2FsbCh0LFwia2V5XCIpP1wia2V5XCI6XCJ2YWx1ZVwiOlwidmFsdWVcIixsKHRoaXMsXCJfX2tpbmRfX1wiLGEoXCJcIix0KSl9LG8mJm8obix1KSxkZWxldGUgbi5wcm90b3R5cGUuY29uc3RydWN0b3Isbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSx7X3Jlc29sdmU6YShmdW5jdGlvbihlKXtyZXR1cm5cInZhbHVlXCI9PT10aGlzLl9fa2luZF9fP3RoaXMuX19saXN0X19bZV06XCJrZXkrdmFsdWVcIj09PXRoaXMuX19raW5kX18/W2UsdGhpcy5fX2xpc3RfX1tlXV06ZX0pfSksbChuLnByb3RvdHlwZSxzLnRvU3RyaW5nVGFnLGEoXCJjXCIsXCJBcnJheSBJdGVyYXRvclwiKSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDcpLG89cigyKSxpPXIoOCksYT1yKDIzKSxzPUFycmF5LmlzQXJyYXksdT1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxsPUFycmF5LnByb3RvdHlwZS5zb21lO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGMsZCxmLHAsaCxfLGcseT1hcmd1bWVudHNbMl07aWYocyhlKXx8bihlKT9yPVwiYXJyYXlcIjppKGUpP3I9XCJzdHJpbmdcIjplPWEoZSksbyh0KSxkPWZ1bmN0aW9uKCl7Zj0hMH0sXCJhcnJheVwiPT09cilyZXR1cm4gdm9pZCBsLmNhbGwoZSxmdW5jdGlvbihlKXtyZXR1cm4gdS5jYWxsKHQseSxlLGQpLGZ9KTtpZihcInN0cmluZ1wiIT09cilmb3IoYz1lLm5leHQoKTshYy5kb25lOyl7aWYodS5jYWxsKHQseSxjLnZhbHVlLGQpLGYpcmV0dXJuO2M9ZS5uZXh0KCl9ZWxzZSBmb3IoaD1lLmxlbmd0aCxwPTA7cDxoJiYoXz1lW3BdLHArMTxoJiYoZz1fLmNoYXJDb2RlQXQoMCksZz49NTUyOTYmJmc8PTU2MzE5JiYoXys9ZVsrK3BdKSksdS5jYWxsKHQseSxfLGQpLCFmKTsrK3ApO319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDcpLG89cig0KSxpPXIoOCksYT1yKDMpLml0ZXJhdG9yLHM9QXJyYXkuaXNBcnJheTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuISghbyhlKXx8IXMoZSkmJiFpKGUpJiYhbihlKSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZVthXSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbz1yKDEwKSxpPXIoNSksYT1yKDMpLHM9cigyNCksdT1PYmplY3QuZGVmaW5lUHJvcGVydHk7bj1lLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO2U9U3RyaW5nKGUpLHMuY2FsbCh0aGlzLGUpLHUodGhpcyxcIl9fbGVuZ3RoX19cIixpKFwiXCIsZS5sZW5ndGgpKX0sbyYmbyhuLHMpLGRlbGV0ZSBuLnByb3RvdHlwZS5jb25zdHJ1Y3RvcixuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlLHtfbmV4dDppKGZ1bmN0aW9uKCl7aWYodGhpcy5fX2xpc3RfXylyZXR1cm4gdGhpcy5fX25leHRJbmRleF9fPHRoaXMuX19sZW5ndGhfXz90aGlzLl9fbmV4dEluZGV4X18rKzp2b2lkIHRoaXMuX3VuQmluZCgpfSksX3Jlc29sdmU6aShmdW5jdGlvbihlKXt2YXIgdCxyPXRoaXMuX19saXN0X19bZV07cmV0dXJuIHRoaXMuX19uZXh0SW5kZXhfXz09PXRoaXMuX19sZW5ndGhfXz9yOih0PXIuY2hhckNvZGVBdCgwKSx0Pj01NTI5NiYmdDw9NTYzMTk/cit0aGlzLl9fbGlzdF9fW3RoaXMuX19uZXh0SW5kZXhfXysrXTpyKX0pfSksdShuLnByb3RvdHlwZSxhLnRvU3RyaW5nVGFnLGkoXCJjXCIsXCJTdHJpbmcgSXRlcmF0b3JcIikpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig2MSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoZStcIiBpcyBub3QgaXRlcmFibGVcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49e29iamVjdDohMCxzeW1ib2w6ITB9O2UuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFN5bWJvbClyZXR1cm4hMTtlPVN5bWJvbChcInRlc3Qgc3ltYm9sXCIpO3RyeXtTdHJpbmcoZSl9Y2F0Y2goZSl7cmV0dXJuITF9cmV0dXJuISFuW3R5cGVvZiBTeW1ib2wuaXRlcmF0b3JdJiYhIW5bdHlwZW9mIFN5bWJvbC50b1ByaW1pdGl2ZV0mJiEhblt0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnXX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoXCJzeW1ib2xcIj09dHlwZW9mIGV8fCEhZS5jb25zdHJ1Y3RvciYmXCJTeW1ib2xcIj09PWUuY29uc3RydWN0b3IubmFtZSYmXCJTeW1ib2xcIj09PWVbZS5jb25zdHJ1Y3Rvci50b1N0cmluZ1RhZ10pfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG8saSxhLHM9cig1KSx1PXIoNjcpLGw9T2JqZWN0LmNyZWF0ZSxjPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLGQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LGY9T2JqZWN0LnByb3RvdHlwZSxwPWwobnVsbCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sKXtuPVN5bWJvbDt0cnl7U3RyaW5nKG4oKSksYT0hMH1jYXRjaChlKXt9fXZhciBoPWZ1bmN0aW9uKCl7dmFyIGU9bChudWxsKTtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLG4sbz0wO2VbdCsob3x8XCJcIildOykrK287cmV0dXJuIHQrPW98fFwiXCIsZVt0XT0hMCxyPVwiQEBcIit0LGQoZixyLHMuZ3MobnVsbCxmdW5jdGlvbihlKXtufHwobj0hMCxkKHRoaXMscixzKGUpKSxuPSExKX0pKSxyfX0oKTtpPWZ1bmN0aW9uKGUpe2lmKHRoaXMgaW5zdGFuY2VvZiBpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3JcIik7cmV0dXJuIG8oZSl9LGUuZXhwb3J0cz1vPWZ1bmN0aW9uIGUodCl7dmFyIHI7aWYodGhpcyBpbnN0YW5jZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvclwiKTtyZXR1cm4gYT9uKHQpOihyPWwoaS5wcm90b3R5cGUpLHQ9dm9pZCAwPT09dD9cIlwiOlN0cmluZyh0KSxjKHIse19fZGVzY3JpcHRpb25fXzpzKFwiXCIsdCksX19uYW1lX186cyhcIlwiLGgodCkpfSkpfSxjKG8se2ZvcjpzKGZ1bmN0aW9uKGUpe3JldHVybiBwW2VdP3BbZV06cFtlXT1vKFN0cmluZyhlKSl9KSxrZXlGb3I6cyhmdW5jdGlvbihlKXt2YXIgdDt1KGUpO2Zvcih0IGluIHApaWYocFt0XT09PWUpcmV0dXJuIHR9KSxoYXNJbnN0YW5jZTpzKFwiXCIsbiYmbi5oYXNJbnN0YW5jZXx8byhcImhhc0luc3RhbmNlXCIpKSxpc0NvbmNhdFNwcmVhZGFibGU6cyhcIlwiLG4mJm4uaXNDb25jYXRTcHJlYWRhYmxlfHxvKFwiaXNDb25jYXRTcHJlYWRhYmxlXCIpKSxpdGVyYXRvcjpzKFwiXCIsbiYmbi5pdGVyYXRvcnx8byhcIml0ZXJhdG9yXCIpKSxtYXRjaDpzKFwiXCIsbiYmbi5tYXRjaHx8byhcIm1hdGNoXCIpKSxyZXBsYWNlOnMoXCJcIixuJiZuLnJlcGxhY2V8fG8oXCJyZXBsYWNlXCIpKSxzZWFyY2g6cyhcIlwiLG4mJm4uc2VhcmNofHxvKFwic2VhcmNoXCIpKSxzcGVjaWVzOnMoXCJcIixuJiZuLnNwZWNpZXN8fG8oXCJzcGVjaWVzXCIpKSxzcGxpdDpzKFwiXCIsbiYmbi5zcGxpdHx8byhcInNwbGl0XCIpKSx0b1ByaW1pdGl2ZTpzKFwiXCIsbiYmbi50b1ByaW1pdGl2ZXx8byhcInRvUHJpbWl0aXZlXCIpKSx0b1N0cmluZ1RhZzpzKFwiXCIsbiYmbi50b1N0cmluZ1RhZ3x8byhcInRvU3RyaW5nVGFnXCIpKSx1bnNjb3BhYmxlczpzKFwiXCIsbiYmbi51bnNjb3BhYmxlc3x8byhcInVuc2NvcGFibGVzXCIpKX0pLGMoaS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnMobyksdG9TdHJpbmc6cyhcIlwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19uYW1lX199KX0pLGMoby5wcm90b3R5cGUse3RvU3RyaW5nOnMoZnVuY3Rpb24oKXtyZXR1cm5cIlN5bWJvbCAoXCIrdSh0aGlzKS5fX2Rlc2NyaXB0aW9uX18rXCIpXCJ9KSx2YWx1ZU9mOnMoZnVuY3Rpb24oKXtyZXR1cm4gdSh0aGlzKX0pfSksZChvLnByb3RvdHlwZSxvLnRvUHJpbWl0aXZlLHMoXCJcIixmdW5jdGlvbigpe3ZhciBlPXUodGhpcyk7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGU/ZTplLnRvU3RyaW5nKCl9KSksZChvLnByb3RvdHlwZSxvLnRvU3RyaW5nVGFnLHMoXCJjXCIsXCJTeW1ib2xcIikpLGQoaS5wcm90b3R5cGUsby50b1N0cmluZ1RhZyxzKFwiY1wiLG8ucHJvdG90eXBlW28udG9TdHJpbmdUYWddKSksZChpLnByb3RvdHlwZSxvLnRvUHJpbWl0aXZlLHMoXCJjXCIsby5wcm90b3R5cGVbby50b1ByaW1pdGl2ZV0pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNjUpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKGUrXCIgaXMgbm90IGEgc3ltYm9sXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1yKDY5KSgpP1dlYWtNYXA6cig3MSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuITE7dHJ5e2U9bmV3IFdlYWtNYXAoW1t0PXt9LFwib25lXCJdLFt7fSxcInR3b1wiXSxbe30sXCJ0aHJlZVwiXV0pfWNhdGNoKGUpe3JldHVybiExfXJldHVyblwiW29iamVjdCBXZWFrTWFwXVwiPT09U3RyaW5nKGUpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnNldCYmZS5zZXQoe30sMSk9PT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmRlbGV0ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5oYXMmJlwib25lXCI9PT1lLmdldCh0KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBXZWFrTWFwJiZcIltvYmplY3QgV2Vha01hcF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXcgV2Vha01hcCl9KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbixvPXIoMTApLGk9cig1NSksYT1yKDEpLHM9cig1OCksdT1yKDUpLGw9cigyMyksYz1yKDYwKSxkPXIoMykudG9TdHJpbmdUYWcsZj1yKDcwKSxwPUFycmF5LmlzQXJyYXksaD1PYmplY3QuZGVmaW5lUHJvcGVydHksXz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGc9T2JqZWN0LmdldFByb3RvdHlwZU9mO2UuZXhwb3J0cz1uPWZ1bmN0aW9uKCl7dmFyIGUsdD1hcmd1bWVudHNbMF07aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO3JldHVybiBlPWYmJm8mJldlYWtNYXAhPT1uP28obmV3IFdlYWtNYXAsZyh0aGlzKSk6dGhpcyxudWxsIT10JiYocCh0KXx8KHQ9bCh0KSkpLGgoZSxcIl9fd2Vha01hcERhdGFfX1wiLHUoXCJjXCIsXCIkd2Vha01hcCRcIitzKCkpKSx0PyhjKHQsZnVuY3Rpb24odCl7YSh0KSxlLnNldCh0WzBdLHRbMV0pfSksZSk6ZX0sZiYmKG8mJm8obixXZWFrTWFwKSxuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFdlYWtNYXAucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp1KG4pfSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG4ucHJvdG90eXBlLHtkZWxldGU6dShmdW5jdGlvbihlKXtyZXR1cm4hIV8uY2FsbChpKGUpLHRoaXMuX193ZWFrTWFwRGF0YV9fKSYmKGRlbGV0ZSBlW3RoaXMuX193ZWFrTWFwRGF0YV9fXSwhMCl9KSxnZXQ6dShmdW5jdGlvbihlKXtpZihfLmNhbGwoaShlKSx0aGlzLl9fd2Vha01hcERhdGFfXykpcmV0dXJuIGVbdGhpcy5fX3dlYWtNYXBEYXRhX19dfSksaGFzOnUoZnVuY3Rpb24oZSl7cmV0dXJuIF8uY2FsbChpKGUpLHRoaXMuX193ZWFrTWFwRGF0YV9fKX0pLHNldDp1KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGgoaShlKSx0aGlzLl9fd2Vha01hcERhdGFfXyx1KFwiY1wiLHQpKSx0aGlzfSksdG9TdHJpbmc6dShmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBXZWFrTWFwXVwifSl9KSxoKG4ucHJvdG90eXBlLGQsdShcImNcIixcIldlYWtNYXBcIikpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigwKSxvPTFlMyxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLGEpe3RoaXMuX2NoZWNrcG9pbnRUaW1lcj1udWxsLHRoaXMuX2xvZ2dlcj1uLmxvZ2dlci5wcmVmaXhMb2dnZXIoaSxcIkF1ZGlvRXZlbnRHZW5lcmF0b3JcIiksdGhpcy5fcGxheWVyPWUsdGhpcy5fZXZlbnRSZXBvcnRlcj10LHRoaXMuX2NoZWNrcG9pbnRJbnRlcnZhbD1udWxsIT09cj9NYXRoLm1heChvLHIpOm51bGwsdGhpcy5fZ2V0UGxheWVyRGV0YWlscz1hLHRoaXMuX3N0YXJ0UmVwb3J0aW5nKCl9cmV0dXJuIGUucHJvdG90eXBlLl9zdGFydFJlcG9ydGluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9wbGF5ZXI7dC5vbkNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24ocil7dmFyIG49ci5hY3R1YWxseVBsYXlpbmcsbz1yLmVuZGVkO249PT0hMCYmIXQuaXNFbmRlZCgpfHxvPT09ITEmJnQuaXNBY3R1YWxseVBsYXlpbmcoKT8obnVsbD09PWUuX2NoZWNrcG9pbnRJbnRlcnZhbHx8ZS5fY2hlY2twb2ludFRpbWVyfHwoZS5fY2hlY2twb2ludFRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UuX3JlcG9ydEV2ZW50KFwiY2hlY2twb2ludFwiKX0sZS5fY2hlY2twb2ludEludGVydmFsKSksZS5fcmVwb3J0RXZlbnQoXCJwbGF5XCIpKToobj09PSExJiYhdC5pc0VuZGVkKCl8fG89PT0hMCYmdC5pc0FjdHVhbGx5UGxheWluZygpKSYmKGUuX2NoZWNrcG9pbnRUaW1lciYmKHdpbmRvdy5jbGVhckludGVydmFsKGUuX2NoZWNrcG9pbnRUaW1lciksZS5fY2hlY2twb2ludFRpbWVyPW51bGwpLGUuX3JlcG9ydEV2ZW50KFwicGF1c2VcIikpfSl9LGUucHJvdG90eXBlLl9yZXBvcnRFdmVudD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRQbGF5ZXJEZXRhaWxzKCk7aWYoIXQpcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLndhcm4oXCJDYW5ub3QgcmVwb3J0IGV2ZW50IGJlY2F1c2UgdGhlcmUgaXMgbm8gcGxheWVyLlwiLGUpO3ZhciByPXRoaXMuX3BsYXllci5nZXREdXJhdGlvbigpO2lmKG51bGw9PT1yKXRocm93IG5ldyBFcnJvcihcIkR1cmF0aW9uIHNob3VsZCBleGlzdCBub3cuXCIpO3ZhciBuPXt0eXBlOmUscG9zaXRpb246dGhpcy5fcGxheWVyLmdldFBvc2l0aW9uKCksZHVyYXRpb246cixwbGF5ZXJUeXBlOnQubmFtZX07dGhpcy5fbG9nZ2VyLmRlYnVnKFwiR2VuZXJhdGVkIGF1ZGlvIGV2ZW50LlwiLG4pLHRoaXMuX2V2ZW50UmVwb3J0ZXIobil9LGV9KCk7dC5BdWRpb0V2ZW50R2VuZXJhdG9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89cig4OSksaT0zZTQsYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbyl7dGhpcy5fbG9nZ2VyPW4ubG9nZ2VyLnByZWZpeExvZ2dlcihyLFwiQXVkaW9QZXJmb3JtYW5jZUV2ZW50R2VuZXJhdG9yXCIpLHRoaXMuX3BsYXllcj1lLHRoaXMuX2V2ZW50UmVwb3J0ZXI9dCx0aGlzLl9nZXRQbGF5ZXJEZXRhaWxzPW8sdGhpcy5fbWVhc3VyZUdlbmVyYWxFdmVudHMoKX1yZXR1cm4gZS5wcm90b3R5cGUucmVwb3J0TWFudWFsRXZlbnQ9ZnVuY3Rpb24oZSl7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiUmVwb3J0aW5nIG1hbnVhbCBhdWRpbyBwZXJmb3JtYW5jZSBldmVudC5cIixlKSx0aGlzLl9ldmVudFJlcG9ydGVyKGUpfSxlLnByb3RvdHlwZS5fbWVhc3VyZUdlbmVyYWxFdmVudHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fcGxheWVyLHI9bnVsbCxuPW51bGwsYT1udWxsLHM9bnVsbCx1PSEwO3Qub25DaGFuZ2Uuc3Vic2NyaWJlKGZ1bmN0aW9uKGwpe3ZhciBjPWwucGxheWluZyxkPWwuYWN0dWFsbHlQbGF5aW5nLGY9bC5zZWVraW5nLHA9bC5zdGFsbGVkLGg9bC5lbmRlZDtpZih0LmlzRGVhZCgpKXJldHVybiB2b2lkKHMmJndpbmRvdy5jbGVhclRpbWVvdXQocykpO2M9PT0hMCYmKHJ8fChyPW5ldyBvLlRpbWVyLHIuc3RhcnQoKSxzPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fcmVwb3J0RXZlbnQoXCJsb25nSW5pdGlhbEJ1ZmZlcmluZ1wiLDApfSxpKSwwPT09dC5nZXRQb3NpdGlvbigpJiYodT0hMSkpKSxjPT09ITEmJihzJiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHMpLHImJiFyLmlzQ29tcGxldGUoKSYmKHI9bnVsbCkpLGQ9PT0hMCYmciYmIXIuaXNDb21wbGV0ZSgpJiYoci5zdG9wKCkscyYmd2luZG93LmNsZWFyVGltZW91dChzKSxlLl9yZXBvcnRFdmVudChcInBsYXlcIixyLmdldFRpbWUoKSkpLGY9PT0hMCYmdC5pc1JlYWR5KCkmJihuPW5ldyBvLlRpbWVyLG4uc3RhcnQoKSksZj09PSExJiZuJiYobi5zdG9wKCksZS5fcmVwb3J0RXZlbnQoXCJzZWVrXCIsbi5nZXRUaW1lKCkpKSxwPT09ITAmJnQuaXNQbGF5aW5nKCkmJnImJnIuaXNDb21wbGV0ZSgpJiYoYT1uZXcgby5UaW1lcixhLnN0YXJ0KCksZS5fcmVwb3J0RXZlbnQoXCJyZWJ1ZmZlcmluZ1N0YXJ0XCIsMCkpLHA9PT0hMSYmYSYmKGEuc3RvcCgpLGUuX3JlcG9ydEV2ZW50KFwicmVidWZmZXJpbmdFbmRcIixhLmdldFRpbWUoKSksYT1udWxsKSxoIT09ITB8fHV8fChlLl9yZXBvcnRFdmVudChcInVuaW50ZXJydXB0ZWRQbGF5XCIsMCksdT0hMCk7dmFyIF89dC5nZXRTZWVrU3RhdGUoKSxnPV8mJlwiSU5fUFJPR1JFU1NcIj09PV8uc3RhdGU7IWcmJnA9PT0hMCYmdC5pc0FjdHVhbGx5UGxheWluZygpJiYodT0hMCl9KX0sZS5wcm90b3R5cGUuX3JlcG9ydEV2ZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZ2V0UGxheWVyRGV0YWlscygpO2lmKCFyKXJldHVybiB2b2lkIHRoaXMuX2xvZ2dlci53YXJuKFwiQ2Fubm90IHJlcG9ydCBldmVudCBiZWNhdXNlIHRoZXJlIGlzIG5vIHBsYXllci5cIixlLHQpO3ZhciBuPXt0eXBlOmUsbGF0ZW5jeTp0LHByb3RvY29sOnIucHJvdG9jb2wscGxheWVyVHlwZTpyLm5hbWUsaG9zdDpyLmhvc3QsYml0cmF0ZTpyLmJpdHJhdGUsZm9ybWF0OnIuZm9ybWF0fHx2b2lkIDB9O3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkdlbmVyYXRlZCBhdWRpbyBwZXJmb3JtYW5jZSBldmVudC5cIixuKSx0aGlzLl9ldmVudFJlcG9ydGVyKG4pfSxlfSgpO3QuQXVkaW9QZXJmb3JtYW5jZUV2ZW50R2VuZXJhdG9yPWF9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUsdCl7dmFyIHI9ZS5nZXRNZW1vcnlDYWNoZUNvbnRyb2xsZXIoKTtyJiZyLnNldE1heENhY2hlU2l6ZSh0KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9MmU0LGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fbWF4Q2FjaGVTaXplPWUsdGhpcy5fcGxheWVycz1bXSx0aGlzLl91cGRhdGVUaW1lcj1udWxsLHRoaXMuX2xvZ2dlcj1vLmxvZ2dlci5wcmVmaXhMb2dnZXIodCxcIkNhY2hlTWFuYWdlclwiKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJJbml0aWFsaXplZCB3aXRoIGNhY2hlIHNpemUgXCIrZStcIiBieXRlcy5cIil9cmV0dXJuIGUucHJvdG90eXBlLmFkZFBsYXllcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIkFkZGluZyBwbGF5ZXIgdG8gY2FjaGUgbWFuYWdlci5cIiksZS5pc0RlYWQoKSlyZXR1cm4gdm9pZCB0aGlzLl9sb2dnZXIuZGVidWcoXCJQbGF5ZXIgd2FzIGRlYWQuXCIpO3ZhciByPXRoaXMuX3BsYXllcnM7ZS5vbkNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24obil7dmFyIG89bi5wbGF5aW5nLGk9bi5kZWFkO2k9PT0hMD8odC5fbG9nZ2VyLmRlYnVnKFwiUmVtb3ZpbmcgcGxheWVyIHRoYXQgYmVjYW1lIGRlYWQuXCIpLHIuc3BsaWNlKHIuaW5kZXhPZihlKSwxKSx0Ll91cGRhdGUoKSk6bz09PSEwPyh0Ll9sb2dnZXIuZGVidWcoXCJVcGRhdGluZyBiZWNhdXNlIHBsYXllciBzdGFydGVkIHBsYXlpbmcuXCIpLHIuc3BsaWNlKHIuaW5kZXhPZihlKSwxKSxyLnVuc2hpZnQoZSksdC5fdXBkYXRlKCkpOm89PT0hMSYmKHQuX2xvZ2dlci5kZWJ1ZyhcIlVwZGF0aW5nIGJlY2F1c2UgcGxheWVyIGJlY2FtZSBwYXVzZWQuXCIpLHQuX3VwZGF0ZSgpKX0pLGUuaXNQbGF5aW5nKCk/ci51bnNoaWZ0KGUpOnIucHVzaChlKSx0aGlzLl91cGRhdGUoKX0sZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5fdXBkYXRlVGltZXImJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3VwZGF0ZVRpbWVyKSx0aGlzLl91cGRhdGVUaW1lcj1udWxsKSwwPT09dGhpcy5fcGxheWVycy5sZW5ndGgpcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLmRlYnVnKFwiVGhlcmUgYXJlIG5vIGxvbmdlciBhbnkgcGxheWVycyB0byBtYW5hZ2UuXCIpO3ZhciB0PXRoaXMuX3BsYXllcnMucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuaXNQbGF5aW5nKCk/ZS5wbGF5aW5nUGxheWVycy5wdXNoKHQpOmUucGF1c2VkUGxheWVycy5wdXNoKHQpLGV9LHtwbGF5aW5nUGxheWVyczpbXSxwYXVzZWRQbGF5ZXJzOltdfSkscj10LnBsYXlpbmdQbGF5ZXJzLG89dC5wYXVzZWRQbGF5ZXJzLGE9ci5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSsodC5nZXRNZW1vcnlDYWNoZVVzYWdlKCl8fDApfSwwKSxzPW8ucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrKHQuZ2V0TWVtb3J5Q2FjaGVVc2FnZSgpfHwwKX0sMCk7aWYoYT50aGlzLl9tYXhDYWNoZVNpemUpe3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkFsbCBwbGF5aW5nIHBsYXllcnMgYXJlIHVzaW5nIG1vcmUgdGhhbiB0aGUgbWF4IGNhY2hlIHNpemUuIENsZWFuaW5nLi4uXCIsYSx0aGlzLl9tYXhDYWNoZVNpemUpO3ZhciB1PXRoaXMuX21heENhY2hlU2l6ZS9yLmxlbmd0aDtyLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx1KX0pLG8uZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlLDApfSl9ZWxzZSB0aGlzLl9sb2dnZXIuZGVidWcoXCJSZWNhbGN1bGF0aW5nIGNhY2hlIHNpemVzLi4uXCIsYStzLHRoaXMuX21heENhY2hlU2l6ZSksci5jb25jYXQobykucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIG4ocixNYXRoLm1heCgwLGUuX21heENhY2hlU2l6ZS10KSksdCsoci5nZXRNZW1vcnlDYWNoZVVzYWdlKCl8fDApfSwwKTt0aGlzLl91cGRhdGVUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLl91cGRhdGUoKX0saSl9LGV9KCk7dC5DYWNoZU1hbmFnZXI9YX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0LHIsbil7cj1vLmxvZ2dlci5wcmVmaXhMb2dnZXIocixcIkZsaXBwZXJQbGF5ZXIgQ29udHJvbGxlclwiKSxuJiZ0Lm9uQXVkaW9QZXJmb3JtYW5jZUV2ZW50LnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lLnByb3RvY29sLG89ZS50eXBlLGk9ZS5sYXRlbmN5LGE9ZS5wbGF5ZXJfdHlwZSxzPWUuaG9zdCx1PWUuYml0cmF0ZSxsPWUuZm9ybWF0LGM9XCJGbGlwcGVyXCI7aWYoYSE9PWMpcmV0dXJuIHZvaWQgci53YXJuKFwiSWdub3JpbmcgYXVkaW8gcGVyZm9ybWFuY2UgZXZlbnQgZnJvbSBmbGlwcGVyIGJlY2F1c2UgdGhlIHBsYXllcl90eXBlIHdhcyBpbmNvcnJlY3QuXCIsYSk7dmFyIGQ9e3Byb3RvY29sOnQsdHlwZTpvLGxhdGVuY3k6aSxwbGF5ZXJUeXBlOmMsaG9zdDpzLGJpdHJhdGU6dSxmb3JtYXQ6bH07bi5yZXBvcnRNYW51YWxFdmVudChkKX0pLGUucHJvdmlkZVBsYXllcih0KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApO3QudGFrZUNvbnRyb2xGbGlwcGVyUGxheWVyPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUsdCxyLG4sYSxzKXtmdW5jdGlvbiB1KCl7dmFyIGU9ci5nZXREdXJhdGlvbigpLHQ9bCgpO2lmKG51bGwhPT1lJiZudWxsIT09dCl7dmFyIG49ZS1yLmdldFBvc2l0aW9uKCk7aSgpK24+dCYmKHMuaW5mbyhcIlJlbGVhc2luZyBjb250cm9sIGJlY2F1c2Ugc3RyZWFtIFVSTCB3b3VsZCBleHBpcmUgYmVmb3JlIHJlYWNoaW5nIGVuZC5cIiksYSh7cmV0cnlQbGF5ZXI6ITB9KSl9fWZ1bmN0aW9uIGwoKXtpZighbi51cmxFeHBpcmVzKXJldHVybiBudWxsO3ZhciBlPXIuZ2V0RHVyYXRpb24oKTtyZXR1cm4gbnVsbD09PWU/bnVsbDpuLnRpbWVVcmxSZXRyaWV2ZWQrZSsxMDVlM31mdW5jdGlvbiBjKCl7dmFyIGU9bCgpO3JldHVybiBudWxsIT09ZSYmZTw9aSgpfXM9by5sb2dnZXIucHJlZml4TG9nZ2VyKHMsXCJIVE1MNVBsYXllciBDb250cm9sbGVyXCIpLHIub25FcnJvci5zdWJzY3JpYmUoZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIG8uZXJyb3JzLk5vdFN1cHBvcnRlZEVycm9yfHwodCBpbnN0YW5jZW9mIGUuZXJyb3JzLk5ldHdvcmtFcnJvciYmYygpPyhzLmluZm8oXCJSZWxlYXNpbmcgY29udHJvbCBhcyBhIG5ldHdvcmsgZXJyb3Igb2NjdXJyZWQsIGFuZCB0aGUgVVJMIGhhcyBleHBpcmVkLlwiKSxhKHtyZXRyeVBsYXllcjohMH0pKToocy5lcnJvcihcIlVuZXhwZWN0ZWQgcGxheWVyIGVycm9yLlwiLHQpLGEoe3JldHJ5UGxheWVyOiExfSkpKX0pLG4udXJsRXhwaXJlcyYmKHIub25QbGF5SW50ZW50LnN1YnNjcmliZShmdW5jdGlvbigpe3JldHVybiB1KCl9KSxyLm9uU2Vla0ludGVudC5zdWJzY3JpYmUoZnVuY3Rpb24oKXtyZXR1cm4gdSgpfSkpLHQucHJvdmlkZVBsYXllcihyKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9by5oZWxwZXJzLnRpbWUubm93O3QudGFrZUNvbnRyb2xIVE1MNVBsYXllcj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fZGVsYXlGYWN0b3I9MCx0aGlzLl9sYXN0UmVxdWVzdFRpbWU9MH1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0RGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT1EYXRlLm5vdygpLXRoaXMuX2xhc3RSZXF1ZXN0VGltZTtyZXR1cm4gdGhpcy5fbGFzdFJlcXVlc3RUaW1lPURhdGUubm93KCksdGhpcy5fZGVsYXlGYWN0b3I9TWF0aC5tYXgoMCx0aGlzLl9kZWxheUZhY3Rvci1lLzE1ZTMpLHRoaXMuX2RlbGF5RmFjdG9yKz0xLE1hdGgucG93KDIsdGhpcy5fZGVsYXlGYWN0b3IpfSxlfSgpO3QuRGVjYXlpbmdFeHBvbmVudGlhbERlbGF5Q2FsY3VsYXRvcj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigwKSxvPXIoMjUpLGk9MWUzLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG8saSxhLHMsdSxsKXt0aGlzLl9sb2dnZXI9bi5sb2dnZXIucHJlZml4TG9nZ2VyKGEsXCJFcnJvckdlbmVyYXRvclwiKSx0aGlzLl9wbGF5ZXI9ZSx0aGlzLl9sb2dDb2xsZWN0b3I9dCx0aGlzLl9sb2dJZD1yLHRoaXMuX3RyYWNrSWQ9byx0aGlzLl9ldmVudFJlcG9ydGVyPWksdGhpcy5fZ2V0UGxheWVyRGV0YWlscz1zLHRoaXMuX01hZXN0cm9ITFNNU0VQbGF5ZXI9dSx0aGlzLl9zdHJlYW1VcmxzRXhwaXJlPWwsdGhpcy5fbGlzdGVuRm9yRXJyb3JzKCl9cmV0dXJuIGUucHJvdG90eXBlLl9saXN0ZW5Gb3JFcnJvcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3BsYXllci5vbkVycm9yLnN1YnNjcmliZShmdW5jdGlvbih0KXt0IGluc3RhbmNlb2Ygbi5lcnJvcnMuUGxheWVyRmF0YWxFcnJvciYmZS5fcmVwb3J0RXZlbnQodC5nZXRDb2RlKCksbnVsbCl9KTt2YXIgdD10aGlzLl9wbGF5ZXIuZ2V0RHVyYXRpb24oKTt0aGlzLl9wbGF5ZXIub25EdXJhdGlvbkNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24ocil7bnVsbCE9PXQmJk1hdGguYWJzKHItdCk+aSYmKGUuX2xvZ2dlci53YXJuKFwiRHVyYXRpb24gY2hhbmdlZCBtb3JlIHRoYW4gXCIraStcIm1zLlwiLHQsciksZS5fcmVwb3J0RXZlbnQoXCJEVVJBVElPTl9NSVNNQVRDSFwiLGUuX3BsYXllcikpLHQ9cn0pLHRoaXMuX3BsYXllci5vblBsYXllclByb3ZpZGVkLnN1YnNjcmliZShmdW5jdGlvbih0KXt0Lm9uRXJyb3Iuc3Vic2NyaWJlKGZ1bmN0aW9uKHIpe2lmKCEoZS5fc3RyZWFtVXJsc0V4cGlyZSYmZS5fTWFlc3Ryb0hMU01TRVBsYXllciYmby5pc0Vycm9yV2hpY2hTaG91bGRUcmlnZ2VyVVJMUmVmcmVzaChlLl9NYWVzdHJvSExTTVNFUGxheWVyLHIpKSl7dmFyIGk9ci5nZXRDb2RlKCk7ciBpbnN0YW5jZW9mIG4uZXJyb3JzLk5vdFN1cHBvcnRlZEVycm9yfHxlLl9yZXBvcnRFdmVudChpLHQpfX0pfSl9LGUucHJvdG90eXBlLl9yZXBvcnRFdmVudD1mdW5jdGlvbihlLHQpe3ZhciByPXQ/dGhpcy5fZ2V0UGxheWVyRGV0YWlscyh0KXx8dm9pZCAwOnZvaWQgMCxuPXtlcnJvckNvZGU6ZSxsb2c6dGhpcy5fbG9nQ29sbGVjdG9yLmdldExvZygpLGxvZ0lkOnRoaXMuX2xvZ0lkLHRyYWNrSWQ6dGhpcy5fdHJhY2tJZCxwcm90b2NvbDpyJiZyLnByb3RvY29sLHBsYXllclR5cGU6cj9yLm5hbWU6XCJNYWVzdHJvVW5rbm93blwiLGhvc3Q6ciYmci5ob3N0LGJpdHJhdGU6ciYmci5iaXRyYXRlLGZvcm1hdDpyJiYoci5mb3JtYXR8fHZvaWQgMCksdXJsOnImJnIudXJsfTt0aGlzLl9sb2dnZXIuZGVidWcoXCJHZW5lcmF0ZWQgYXVkaW8gZXJyb3IgZXZlbnQuXCIsbiksdGhpcy5fZXZlbnRSZXBvcnRlcihuKX0sZX0oKTt0LkVycm9yRXZlbnRHZW5lcmF0b3I9YX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjgpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fbWFwPW5ldyBufXJldHVybiBlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcC5nZXQoZSl9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3RoaXMuX21hcC5zZXQoZSx0KX0sZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXAuaGFzKGUpfSxlLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcC5kZWxldGUoZSl9LGV9KCk7dC5TQ1dlYWtNYXA9b30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9Y2F0Y2goZSl7cmV0dXJuXCI8dW5hdmFpbGFibGU+XCJ9fSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZvaWQgMD09PWUmJihlPTIwMCksdGhpcy5fYnVmZmVyU2l6ZT1lLHRoaXMuX2xvZz1bXX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0TG9nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ30sZS5wcm90b3R5cGUuZGVidWc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5fcHVzaCh7bGV2ZWw6XCJkZWJ1Z1wiLG1zZzplLGRhdGE6bih0KSx0aW1lOkRhdGUubm93KCl9KX0sZS5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLl9wdXNoKHtsZXZlbDpcImluZm9cIixtc2c6ZSxkYXRhOm4odCksdGltZTpEYXRlLm5vdygpfSl9LGUucHJvdG90eXBlLndhcm49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5fcHVzaCh7bGV2ZWw6XCJ3YXJuXCIsbXNnOmUsZGF0YTpuKHQpLHRpbWU6RGF0ZS5ub3coKX0pfSxlLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLl9wdXNoKHtsZXZlbDpcImVycm9yXCIsbXNnOmUsZGF0YTpuKHQpLHRpbWU6RGF0ZS5ub3coKX0pfSxlLnByb3RvdHlwZS5fcHVzaD1mdW5jdGlvbihlKXt0aGlzLl9sb2cucHVzaChlKT50aGlzLl9idWZmZXJTaXplJiZ0aGlzLl9sb2cuc2hpZnQoKX0sZX0oKTt0LkxvZ0NvbGxlY3Rvcj1vfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5hcGlNb2JpbGU9e3NjUHJvdG9jb2w6XCJzYy5hcGktbW9iaWxlXCIsbWFlc3Ryb1Byb3RvY29sOntuYW1lOlwic2MuYXBpLW1vYmlsZVwifSxtYWVzdHJvRm9ybWF0Ont9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZW5jcnlwdGVkSGxzTXAzPXtzY1Byb3RvY29sOlwiZW5jcnlwdGVkLWhsc1wiLHNjRm9ybWF0OlwibXAzXCIsbWFlc3Ryb1Byb3RvY29sOntuYW1lOlwiaGxzXCJ9LG1hZXN0cm9Gb3JtYXQ6e21pbWVUeXBlOlwiYXBwbGljYXRpb24veC1tcGVnVVJMXCJ9LG1hZXN0cm9TZWdtZW50Rm9ybWF0OnttaW1lVHlwZTpcImF1ZGlvL21wZWdcIn19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5lbmNyeXB0ZWRIbHNPcHVzPXtzY1Byb3RvY29sOlwiZW5jcnlwdGVkLWhsc1wiLHNjRm9ybWF0Olwib3B1c1wiLG1hZXN0cm9Qcm90b2NvbDp7bmFtZTpcImhsc1wifSxtYWVzdHJvRm9ybWF0OnttaW1lVHlwZTpcImFwcGxpY2F0aW9uL3gtbXBlZ1VSTFwifSxtYWVzdHJvU2VnbWVudEZvcm1hdDp7bWltZVR5cGU6XCJhdWRpby9vZ2dcIixhdWRpb0NvZGVjOntpZDpcIm9wdXNcIn19fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaGxzTXAzPXtzY1Byb3RvY29sOlwiaGxzXCIsc2NGb3JtYXQ6XCJtcDNcIixtYWVzdHJvUHJvdG9jb2w6e25hbWU6XCJobHNcIn0sbWFlc3Ryb0Zvcm1hdDp7bWltZVR5cGU6XCJhcHBsaWNhdGlvbi94LW1wZWdVUkxcIn0sbWFlc3Ryb1NlZ21lbnRGb3JtYXQ6e21pbWVUeXBlOlwiYXVkaW8vbXBlZ1wifX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lmhsc09wdXM9e3NjUHJvdG9jb2w6XCJobHNcIixzY0Zvcm1hdDpcIm9wdXNcIixtYWVzdHJvUHJvdG9jb2w6e25hbWU6XCJobHNcIn0sbWFlc3Ryb0Zvcm1hdDp7bWltZVR5cGU6XCJhcHBsaWNhdGlvbi94LW1wZWdVUkxcIn0sbWFlc3Ryb1NlZ21lbnRGb3JtYXQ6e21pbWVUeXBlOlwiYXVkaW8vb2dnXCIsYXVkaW9Db2RlYzp7aWQ6XCJvcHVzXCJ9fX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lmh0dHBNcDM9e3NjUHJvdG9jb2w6XCJodHRwXCIsc2NGb3JtYXQ6XCJtcDNcIixtYWVzdHJvUHJvdG9jb2w6e25hbWU6XCJodHRwXCJ9LG1hZXN0cm9Gb3JtYXQ6e21pbWVUeXBlOlwiYXVkaW8vbXBlZ1wifX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lm1hZXN0cm9DaHJvbWVjYXN0PXtzY1Byb3RvY29sOlwibWFlc3Ryby5jaHJvbWVjYXN0XCIsbWFlc3Ryb1Byb3RvY29sOntuYW1lOlwibWFlc3Ryby5jaHJvbWVjYXN0XCJ9LG1hZXN0cm9Gb3JtYXQ6e319fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig4Niksbz1yKDg0KSxpPXIoODIpLGE9cig4MSkscz1yKDg3KSx1PXIoODUpLGw9cig4Myk7dC5yZW5kaXRpb25zPXtodHRwTXAzOm4uaHR0cE1wMyxobHNNcDM6by5obHNNcDMsZW5jcnlwdGVkSGxzTXAzOmkuZW5jcnlwdGVkSGxzTXAzLGhsc09wdXM6dS5obHNPcHVzLGVuY3J5cHRlZEhsc09wdXM6bC5lbmNyeXB0ZWRIbHNPcHVzLGFwaU1vYmlsZTphLmFwaU1vYmlsZSxtYWVzdHJvQ2hyb21lY2FzdDpzLm1hZXN0cm9DaHJvbWVjYXN0fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMCksbz1uLmhlbHBlcnMudGltZS5ub3csaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9zdGFydD1udWxsLHRoaXMuX2VuZD1udWxsfXJldHVybiBlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe2lmKHRoaXMuaXNDb21wbGV0ZSgpKXRocm93IG5ldyBFcnJvcihcIlRpbWVyIGNvbXBsZXRlZC5cIik7dGhpcy5fc3RhcnQ9bygpfSxlLnByb3RvdHlwZS5pc0NvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLl9lbmR9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5fc3RhcnQpdGhyb3cgbmV3IEVycm9yKFwiTm90IHN0YXJ0ZWQuXCIpO3RoaXMuX2VuZD1vKCl9LGUucHJvdG90eXBlLmdldFRpbWU9ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5fZW5kKXRocm93IG5ldyBFcnJvcihcIk5vdCBjb21wbGV0ZWQuXCIpO3JldHVybiB0aGlzLl9lbmQtdGhpcy5fc3RhcnR9LGV9KCk7dC5UaW1lcj1pfSxmdW5jdGlvbihlLHIpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0KXt2YXIgbj1uZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIG1vZHVsZSBcIkBzYy9tYWVzdHJvLWNocm9tZWNhc3QtcGxheWVyXCInKTt0aHJvdyBuLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsbn1lLmV4cG9ydHM9dH0sZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2Ygcil7dmFyIG49bmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCJAc2MvbWFlc3Ryby1mbGlwcGVyLXBsYXllclwiJyk7dGhyb3cgbi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLG59ZS5leHBvcnRzPXJ9LGZ1bmN0aW9uKGUsdCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIG4pe3ZhciByPW5ldyBFcnJvcignQ2Fubm90IGZpbmQgbW9kdWxlIFwiQHNjL21hZXN0cm8taGxzLW1zZS1wbGF5ZXJcIicpO3Rocm93IHIuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixyfWUuZXhwb3J0cz1ufSxmdW5jdGlvbihlLHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBvKXt2YXIgcj1uZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIG1vZHVsZSBcIkBzYy9tYWVzdHJvLWh0bWw1LXBsYXllclwiJyk7dGhyb3cgci5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLHJ9ZS5leHBvcnRzPW99LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe2Zvcih2YXIgciBpbiBlKXQuaGFzT3duUHJvcGVydHkocil8fCh0W3JdPWVbcl0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj1cIjEyLjAuMFwiLHQuYnVpbGROdW1iZXI9NDA0O3ZhciBvPXIoMzIpO3Qudm9sdW1lQXV0b21hdGlvbj1vLnZvbHVtZUF1dG9tYXRpb247dmFyIGk9cigxMyk7dC5CYXNlU3RyZWFtVXJsUmV0cmlldmVyPWkuQmFzZVN0cmVhbVVybFJldHJpZXZlcjt2YXIgYT1yKDE2KTt0LlJlcXVlc3RFcnJvcj1hLlJlcXVlc3RFcnJvcjt2YXIgcz1yKDE0KTt0LlBsYXllcj1zLlBsYXllcjt2YXIgdT1yKDE1KTt0LnJlbmRpdGlvbnM9dS5yZW5kaXRpb25zLG4ocigzMCkpLG4ocigzMSkpfV0pfSl9LGZ1bmN0aW9uKGUsdCxyKXshZnVuY3Rpb24odCxyKXtlLmV4cG9ydHM9cigpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIHQubT1lLHQuYz1yLHQuaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sdC5kPWZ1bmN0aW9uKGUscixuKXt0Lm8oZSxyKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sdC5uPWZ1bmN0aW9uKGUpe3ZhciByPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQocixcImFcIixyKSxyfSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD1cIlwiLHQodC5zPTM5KX0oW2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDQpLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJQTEFZRVJfRkFUQUxfRVJST1JcIn0sdH0oby5QbGF5ZXJFcnJvcik7dC5QbGF5ZXJGYXRhbEVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fbGlzdGVuZXJzPVtdLHRoaXMuZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpfXJldHVybiBlLnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXtmbjplLHBheWxvYWRzOltdfTtyZXR1cm4gdGhpcy5fbGlzdGVuZXJzLnB1c2gocikse3JlbW92ZTpmdW5jdGlvbigpe3ZhciBlPXQuX2xpc3RlbmVycy5pbmRleE9mKHIpO3JldHVybiBlPj0wJiYodC5fbGlzdGVuZXJzLnNwbGljZShlLDEpLCEwKX0scmV0cmlldmU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fZGlzcGF0Y2hMaXN0ZW5lclBheWxvYWRzKHIpfX19LGUucHJvdG90eXBlLmRpc3BhdGNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxvPVwibnVtYmVyXCI9PXR5cGVvZiB0P3t0aW1lOnR9OnR8fHt9LGk9dm9pZCAwIT09by50aW1lP28udGltZTpuLm5vdygpLGE9dGhpcy5fbGlzdGVuZXJzO2EuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXlsb2Fkcy5wdXNoKHt0aW1lOmkscGF5bG9hZDplfSl9KTt2YXIgcz0hMTtkbyBzPSFhLnNvbWUoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mbixuPWUucGF5bG9hZHMsbz1uLnNoaWZ0KCk7cmV0dXJuISFvJiYoci5fY2FsbEhhbmRsZXIodCxvKSwhMCl9KTt3aGlsZSghcyl9LGUucHJvdG90eXBlLmdldEhhbmRsZT1mdW5jdGlvbigpe3JldHVybntzdWJzY3JpYmU6dGhpcy5zdWJzY3JpYmUuYmluZCh0aGlzKX19LGUucHJvdG90eXBlLl9kaXNwYXRjaExpc3RlbmVyUGF5bG9hZHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZm4scj1lLnBheWxvYWRzOzspe3ZhciBuPXIuc2hpZnQoKTtpZighbilicmVhazt0aGlzLl9jYWxsSGFuZGxlcih0LG4pfX0sZS5wcm90b3R5cGUuX2NhbGxIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dHJ5e2UodC5wYXlsb2FkLHQudGltZSl9Y2F0Y2goZSl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSwwKX19LGV9KCk7dC5FdmVudERpc3BhdGNoZXI9b30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oKXt2YXIgZSx0LHI9ITEsbj1uZXcgby5Qcm9taXNlKGZ1bmN0aW9uKHIsbil7ZT1yLHQ9bn0pO3JldHVybntwcm9taXNlOm4scmVzb2x2ZTpmdW5jdGlvbih0KXtyfHwocj0hMCxlKHQpKX0scmVqZWN0OmZ1bmN0aW9uKGUpe3J8fChyPSEwLHQoZSkpfSxpc1NldHRsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gcn19fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMTIpO3QuYnVpbGREZWZlcnJlZD1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlLHQpe3JldHVybntkZWJ1ZzpmdW5jdGlvbihyKXtmb3IodmFyIG49W10sbz0xO288YXJndW1lbnRzLmxlbmd0aDtvKyspbltvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gZS5kZWJ1Zy5hcHBseShlLFtcIltcIit0K1wiXSBcIityXS5jb25jYXQobikpfSxlcnJvcjpmdW5jdGlvbihyKXtmb3IodmFyIG49W10sbz0xO288YXJndW1lbnRzLmxlbmd0aDtvKyspbltvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gZS5lcnJvci5hcHBseShlLFtcIltcIit0K1wiXSBcIityXS5jb25jYXQobikpfSxpbmZvOmZ1bmN0aW9uKHIpe2Zvcih2YXIgbj1bXSxvPTE7bzxhcmd1bWVudHMubGVuZ3RoO28rKyluW28tMV09YXJndW1lbnRzW29dO3JldHVybiBlLmluZm8uYXBwbHkoZSxbXCJbXCIrdCtcIl0gXCIrcl0uY29uY2F0KG4pKX0sd2FybjpmdW5jdGlvbihyKXtmb3IodmFyIG49W10sbz0xO288YXJndW1lbnRzLmxlbmd0aDtvKyspbltvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gZS53YXJuLmFwcGx5KGUsW1wiW1wiK3QrXCJdIFwiK3JdLmNvbmNhdChuKSl9fX1mdW5jdGlvbiBvKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdF09YXJndW1lbnRzW3RdO3JldHVybntkZWJ1ZzpmdW5jdGlvbih0KXtmb3IodmFyIHI9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspcltuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlYnVnLmFwcGx5KGUsW3RdLmNvbmNhdChyKSl9KX0sZXJyb3I6ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXJbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5lcnJvci5hcHBseShlLFt0XS5jb25jYXQocikpfSl9LGluZm86ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXJbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbmZvLmFwcGx5KGUsW3RdLmNvbmNhdChyKSl9KX0sd2FybjpmdW5jdGlvbih0KXtmb3IodmFyIHI9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspcltuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLndhcm4uYXBwbHkoZSxbdF0uY29uY2F0KHIpKX0pfX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9cigxOSksYT1pLmlzSUUoKTt0Lm5vT3BMb2dnZXI9e2RlYnVnOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdfSxlcnJvcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXX0saW5mbzpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXX0sd2FybjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXX19LHQuY29uc29sZUxvZ2dlcj17ZGVidWc6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07YT9jb25zb2xlLmxvZyhlLHQpOihuPWNvbnNvbGUuZGVidWd8fGNvbnNvbGUubG9nKS5jYWxsLmFwcGx5KG4sW2NvbnNvbGUsZV0uY29uY2F0KHQpKTt2YXIgbn0sZXJyb3I6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07YT9jb25zb2xlLmxvZyhlLHQpOihuPWNvbnNvbGUuZXJyb3J8fGNvbnNvbGUubG9nKS5jYWxsLmFwcGx5KG4sW2NvbnNvbGUsZV0uY29uY2F0KHQpKTt2YXIgbn0saW5mbzpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTthP2NvbnNvbGUubG9nKGUsdCk6KG49Y29uc29sZS5pbmZvfHxjb25zb2xlLmxvZykuY2FsbC5hcHBseShuLFtjb25zb2xlLGVdLmNvbmNhdCh0KSk7dmFyIG59LHdhcm46ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07YT9jb25zb2xlLmxvZyhlLHQpOihuPWNvbnNvbGUud2Fybnx8Y29uc29sZS5sb2cpLmNhbGwuYXBwbHkobixbY29uc29sZSxlXS5jb25jYXQodCkpO3ZhciBufX0sdC5wcmVmaXhMb2dnZXI9bix0LmNsb25lTG9nZ2VyPW99LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9tc2c9ZSx0aGlzLl9jYXVzZT10fXJldHVybiBlLnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJQTEFZRVJfRVJST1JcIn0sZS5wcm90b3R5cGUuZ2V0TXNnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21zZ30sZS5wcm90b3R5cGUuZ2V0Q2F1c2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2F1c2V9LGV9KCk7dC5QbGF5ZXJFcnJvcj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigxNiksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJUaGUgcGxheWVyIHRoYXQgdGhlIHByb3h5IHdhcyBjb250cm9sbGluZyBoYWQgYSBmYXRhbCBlcnJvci5cIiksZS5jYWxsKHRoaXMsdCxyLG4pfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiUFJPWFlfUExBWUVSX1BST1ZJREVEX1BMQVlFUl9GQVRBTF9FUlJPUlwifSx0fShvLlByb3h5UHJvdmlkZWRQbGF5ZXJFcnJvcik7dC5Qcm94eVByb3ZpZGVkUGxheWVyRmF0YWxFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXt0cnl7ZSgpfWNhdGNoKGUpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0sMCl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHtcbnZhbHVlOiEwfSksdC5kZWZlckV4Y2VwdGlvbj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlLHQpe3ZhciByPXZvaWQgMDtyZXR1cm4gZS5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiEhdChlKSYmKHI9ZSwhMCl9KSxyfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZmluZD1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3JldHVyblwicGVyZm9ybWFuY2VcImluIHdpbmRvdyYmd2luZG93LnBlcmZvcm1hbmNlLm5vdz93aW5kb3cucGVyZm9ybWFuY2Uubm93KCk6RGF0ZS5ub3coKS1vfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPURhdGUubm93KCk7dC5ub3c9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oKXtyZXR1cm57YWN0dWFsbHlQbGF5aW5nOiExLGVuZGVkOiExLGxvYWRpbmc6ITEscGxheWluZzohMSxwbGF5RGVmZXJyZWQ6bnVsbCxwYXVzZURlZmVycmVkOm51bGwscmVhZHk6ITEsc2Vla2luZzohMSxzZWVrOm51bGwscG9zaXRpb25KdW1wZWQ6bnVsbCxzdGFsbGVkOiEwLGR1cmF0aW9uOm51bGwsZGVhZDohMSxzdGF0ZTpjLlN0YXRlLlBBVVNFRCxmYXRhbEVycm9yOm51bGwsZXJyb3JPY2N1cnJlZDpudWxsLHBvc2l0aW9uOjB9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1yKDE1KSxhPXIoMSkscz1yKDIpLHU9cig3KSxsPXIoOCksYz1yKDExKSxkPXIoMyksZj1yKDM1KSxwPXIoMTMpLGg9cigxNCksXz1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZcIm1lZGlhU2Vzc2lvblwiaW4gbmF2aWdhdG9yLGc9NWUzLHk9Xz9uYXZpZ2F0b3IubWVkaWFTZXNzaW9uOm51bGwsdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9dGhpczt0aGlzLl9zdGF0ZU1hbmFnZXI9bmV3IGYuU3RhdGVNYW5hZ2VyKG4oKSx7YWZ0ZXJVcGRhdGU6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5fYWZ0ZXJVcGRhdGUoZSxyKX0sYWZ0ZXJEaXNwYXRjaGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHQuX2FmdGVyRGlzcGF0Y2hlcygpfSxiZWZvcmVVcGRhdGU6ZnVuY3Rpb24oZSl7aWYoIWUuZGVhZCl7dmFyIHI9dC5fZ2V0UG9zaXRpb24oKSxuPWUuZHVyYXRpb247aWYocjwwKXRocm93IHQuX2xvZ2dlci5lcnJvcihcIlBsYXllciBwcm92aWRlZCBpbnZhbGlkIHBvc2l0aW9uLlwiLHIsbiksdC5fdHJpZ2dlckVycm9yKG5ldyBoLkltcGxlbWVudGF0aW9uRXJyb3IoXCJQbGF5ZXIgcHJvdmlkZWQgYSBwb3NpdGlvbiB0aGF0IHdhcyBpbnZhbGlkLlwiKSksbmV3IEVycm9yKFwiUGxheWVyIHByb3ZpZGVkIGludmFsaWQgcG9zaXRpb24uXCIpO2lmKG51bGwhPT1uJiZyPm4pdGhyb3cgdC5fbG9nZ2VyLmVycm9yKFwiUGxheWVyIHByb3ZpZGVkIGludmFsaWQgcG9zaXRpb24uXCIscixuKSx0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIlBsYXllciBwcm92aWRlZCBhIHBvc2l0aW9uIHRoYXQgd2FzIGludmFsaWQuXCIpKSxuZXcgRXJyb3IoXCJQbGF5ZXIgcHJvdmlkZWQgaW52YWxpZCBwb3NpdGlvbi5cIik7ZS5wb3NpdGlvbj1yLHQuX3VwZGF0ZUVuZGVkSW5TdGF0ZShlKX19fSksdGhpcy5fb25FcnJvcj1uZXcgYS5FdmVudERpc3BhdGNoZXIsdGhpcy5fZXJyb3JzPVtdLHRoaXMuX2xvYWRpbmdEZWxheVRpbWVyPW51bGwsdGhpcy5fc3RhbGxlZD0hMSx0aGlzLl9xdWV1ZWREdXJhdGlvbj1udWxsLHRoaXMuX3JlYWR5RGVmZXJyZWQ9cy5idWlsZERlZmVycmVkKCksdGhpcy5fcXVldWVkU2Vla0RlZmVycmVkcz1bXSx0aGlzLl9sYXN0UGxheUVycm9yPW51bGwsdGhpcy5fbGFzdFBhdXNlRXJyb3I9bnVsbCx0aGlzLl9sYXN0UGxheWVkUG9zaXRpb249bnVsbCx0aGlzLl9saXN0ZW5UaW1lQmFzZT0wLHRoaXMuX3RpbWVQbGF5YmFja1N0YXJ0ZWQ9bnVsbCx0aGlzLl9wb3NpdGlvbkFmdGVyTGFzdFVwZGF0ZT0wO3ZhciByPWUubmFtZTtyZXR1cm4gdGhpcy5fbG9nZ2VyPWQucHJlZml4TG9nZ2VyKGUubG9nZ2VyLFwiQmFzZVBsYXllclwiKyhyP1wiLVwiK3I6XCJcIikpLHRoaXMuX21lZGlhU2Vzc2lvbkVuYWJsZWQ9ISFlLm1lZGlhU2Vzc2lvbkVuYWJsZWQsZS5sb2FkaW5nRGVsYXkmJmUubG9hZGluZ0RlbGF5PDA/dm9pZCB0aGlzLl90cmlnZ2VyRXJyb3IobmV3IHAuRGVwZW5kZW5jeUVycm9yKFwibG9hZGluZ0RlbGF5IG11c3QgYmUgPj0gMC5cIikpOih0aGlzLl9sb2FkaW5nRGVsYXk9dm9pZCAwIT09ZS5sb2FkaW5nRGVsYXk/ZS5sb2FkaW5nRGVsYXk6NDAwLHRoaXMub25FcnJvcj10aGlzLl9vbkVycm9yLmdldEhhbmRsZSgpLHRoaXMud2hlblJlYWR5PXRoaXMuX3JlYWR5RGVmZXJyZWQucHJvbWlzZSx0aGlzLl9zdGF0ZU1hbmFnZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuX29uQ2hhbmdlKGUscil9KSx0aGlzLl9zdGF0ZU1hbmFnZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGUscil7dmFyIG49ZS5wbGF5aW5nLG89ZS5hY3R1YWxseVBsYXlpbmcsaT1yLmRlYWQ7aWYoIWkmJnZvaWQgMCE9PW4mJm8hPT1uKXRyeXt0Ll9oYW5kbGVQbGF5UGF1c2VDaGFuZ2Uobil9Y2F0Y2goZSl7dC5fdHJpZ2dlckVycm9yKG5ldyBoLkltcGxlbWVudGF0aW9uRXJyb3IoXCJFeGNlcHRpb24gb2NjdXJyZWQgd2hpbHN0IGhhbmRsaW5nIHBsYXkvcGF1c2UgY2hhbmdlLlwiLGUpKX19KSx0aGlzLl9zdGF0ZU1hbmFnZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGUscil7dmFyIG49ZS5zZWVrLG89ci5kZWFkO2lmKCFvJiZuJiZcIklOX1BST0dSRVNTXCI9PT1uLnN0YXRlKXRyeXt0Ll9oYW5kbGVTZWVrQ2hhbmdlKG4ucG9zaXRpb24pfWNhdGNoKGUpe3QuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiRXhjZXB0aW9uIG9jY3VycmVkIHdoaWxzdCBoYW5kbGluZyBzZWVrIGNoYW5nZS5cIixlKSl9fSksdGhpcy5fcmVnaXN0ZXJNZWRpYVNlc3Npb25BY3Rpb25IYW5kbGVycygpLHRoaXMuX25vdGlmeU1lZGlhU2Vzc2lvblBhdXNlZCgpLHRoaXMub25DaGFuZ2U9dGhpcy5fYnVpbGRFdmVudEhhbmRsZShmdW5jdGlvbihlLHIpe3ZhciBuPXIucmVhZHk7aWYodm9pZCAwIT09biYmbiE9PSEwKXRocm93IG5ldyBFcnJvcihcIlJlYWR5IHN0YXRlIGlzIGludmFsaWQuXCIpO3ZhciBvPXIuZHVyYXRpb247aWYodm9pZCAwIT09byYmbnVsbD09PW8pdGhyb3cgbmV3IEVycm9yKFwiRHVyYXRpb24gc3RhdGUgaXMgaW52YWxpZC5cIik7dmFyIGk9ci5kZWFkO2lmKHZvaWQgMCE9PWkmJmkhPT0hMCl0aHJvdyBuZXcgRXJyb3IoXCJEZWFkIHN0YXRlIGlzIGludmFsaWQuXCIpO3ZhciBhPXtyZWFkeTpuLGVuZGVkOnIuZW5kZWQsZHVyYXRpb246byxwbGF5aW5nOnIucGxheWluZyxhY3R1YWxseVBsYXlpbmc6ci5hY3R1YWxseVBsYXlpbmcsc3RhbGxlZDpyLnN0YWxsZWQsbG9hZGluZzpyLmxvYWRpbmcscGxheVJlamVjdGlvbjpyLnBsYXlpbmc9PT0hMT90Ll9sYXN0UGxheUVycm9yfHx2b2lkIDA6dm9pZCAwLHBhdXNlUmVqZWN0aW9uOnIucGxheWluZz09PSEwP3QuX2xhc3RQYXVzZUVycm9yfHx2b2lkIDA6dm9pZCAwLHNlZWtpbmc6ci5zZWVraW5nLHNlZWs6ci5zZWVrfHx2b2lkIDAscG9zaXRpb25KdW1wZWQ6dm9pZCAwIT09ci5wb3NpdGlvbkp1bXBlZHx8dm9pZCAwLHN0YXRlOnIuc3RhdGUsZmF0YWxFcnJvcjpyLmZhdGFsRXJyb3J8fHZvaWQgMCxkZWFkOml9O09iamVjdC5rZXlzKGEpLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWFbZV19KSYmZShhKX0pLHRoaXMub25EdXJhdGlvbkNoYW5nZT10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5kdXJhdGlvbjt2b2lkIDAhPT1yJiZudWxsIT09ciYmZShyKX0pLHRoaXMub25SZWFkeT10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5yZWFkeTtyPT09ITAmJmUodm9pZCAwKX0pLHRoaXMub25TdGF0ZUNoYW5nZT10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5zdGF0ZTt2b2lkIDAhPT1yJiZlKHIpfSksdGhpcy5vblBsYXk9dGhpcy5fYnVpbGRFdmVudEhhbmRsZShmdW5jdGlvbihlLHQpe3ZhciByPXQuYWN0dWFsbHlQbGF5aW5nO3I9PT0hMCYmZSh2b2lkIDApfSksdGhpcy5vblBsYXlJbnRlbnQ9dGhpcy5fYnVpbGRFdmVudEhhbmRsZShmdW5jdGlvbihlLHQpe3ZhciByPXQucGxheWluZztyPT09ITAmJmUodm9pZCAwKX0pLHRoaXMub25QbGF5UmVqZWN0aW9uPXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSxyKXt2YXIgbj1yLnBsYXlpbmc7bj09PSExJiZ0Ll9sYXN0UGxheUVycm9yJiZlKHQuX2xhc3RQbGF5RXJyb3IpfSksdGhpcy5vblBhdXNlPXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSx0KXt2YXIgcj10LmFjdHVhbGx5UGxheWluZztyPT09ITEmJmUodm9pZCAwKX0pLHRoaXMub25QYXVzZUludGVudD10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5wbGF5aW5nO3I9PT0hMSYmZSh2b2lkIDApfSksdGhpcy5vblBhdXNlUmVqZWN0aW9uPXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSxyKXt2YXIgbj1yLnBsYXlpbmc7bj09PSEwJiZ0Ll9sYXN0UGF1c2VFcnJvciYmZSh0Ll9sYXN0UGF1c2VFcnJvcil9KSx0aGlzLm9uU2Vlaz10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5zZWVrO3ImJlwiQ09NUExFVEVEXCI9PT1yLnN0YXRlJiZlKHZvaWQgMCl9KSx0aGlzLm9uU2Vla0ludGVudD10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5zZWVraW5nO3I9PT0hMCYmZSh2b2lkIDApfSksdGhpcy5vblNlZWtSZWplY3Rpb249dGhpcy5fYnVpbGRFdmVudEhhbmRsZShmdW5jdGlvbihlLHQpe3ZhciByPXQuc2VlaztyJiZcIkVSUk9SXCI9PT1yLnN0YXRlJiZlKHIuZXJyb3IpfSksdGhpcy5vblBvc2l0aW9uSnVtcGVkPXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSx0KXt2YXIgcj10LnBvc2l0aW9uSnVtcGVkO3ZvaWQgMCE9PXImJmUodm9pZCAwKX0pLHRoaXMub25FbmRlZD10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5lbmRlZDtyPT09ITAmJmUodm9pZCAwKX0pLHRoaXMub25MZWZ0RW5kZWQ9dGhpcy5fYnVpbGRFdmVudEhhbmRsZShmdW5jdGlvbihlLHQpe3ZhciByPXQuZW5kZWQ7cj09PSExJiZlKHZvaWQgMCl9KSx0aGlzLm9uU3RhbGxTdGFydD10aGlzLl9idWlsZEV2ZW50SGFuZGxlKGZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5zdGFsbGVkO3I9PT0hMCYmZSh2b2lkIDApfSksdGhpcy5vblN0YWxsRW5kPXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSx0KXt2YXIgcj10LnN0YWxsZWQ7cj09PSExJiZlKHZvaWQgMCl9KSx0aGlzLm9uTG9hZFN0YXJ0PXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSx0KXt2YXIgcj10LmxvYWRpbmc7cj09PSEwJiZlKHZvaWQgMCl9KSx2b2lkKHRoaXMub25Mb2FkRW5kPXRoaXMuX2J1aWxkRXZlbnRIYW5kbGUoZnVuY3Rpb24oZSx0KXt2YXIgcj10LmxvYWRpbmc7cj09PSExJiZlKHZvaWQgMCl9KSkpfXJldHVybiBlLnByb3RvdHlwZS5pc1JlYWR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLnJlYWR5fSxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQb3NpdGlvbk9yUG9zaXRpb25TZWVraW5nVG8oKX0sZS5wcm90b3R5cGUuZ2V0TGFzdFBsYXllZFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCksdD1lLmFjdHVhbGx5UGxheWluZyxyPWUuc3RhbGxlZDtyZXR1cm4gdCYmIXI/dGhpcy5nZXRQb3NpdGlvbigpOnRoaXMuX2xhc3RQbGF5ZWRQb3NpdGlvbn0sZS5wcm90b3R5cGUuZ2V0TGlzdGVuVGltZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLHQ9ZS5hY3R1YWxseVBsYXlpbmcscj1lLmVuZGVkLG49dGhpcy5fbGlzdGVuVGltZUJhc2U7cmV0dXJuIHQmJiFyJiYobis9bC5ub3coKS10aGlzLl90aW1lUGxheWJhY2tTdGFydGVkKSxufSxlLnByb3RvdHlwZS5pc1N0YWxsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkuc3RhbGxlZH0sZS5wcm90b3R5cGUuaXNMb2FkaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLmxvYWRpbmd9LGUucHJvdG90eXBlLmlzUGxheWluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5wbGF5aW5nfSxlLnByb3RvdHlwZS5pc0FjdHVhbGx5UGxheWluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5hY3R1YWxseVBsYXlpbmd9LGUucHJvdG90eXBlLmlzRW5kZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkuZW5kZWR9LGUucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLnN0YXRlfSxlLnByb3RvdHlwZS5nZXRVcmxDb250cm9sbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmdldEJ1ZmZlckNvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZ2V0TWVtb3J5Q2FjaGVNYXhTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmdldE1lbW9yeUNhY2hlVXNhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZ2V0TWVtb3J5Q2FjaGVDb250cm9sbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmdldEZhdGFsRXJyb3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkuZmF0YWxFcnJvcn0sZS5wcm90b3R5cGUuaXNEZWFkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLmRlYWR9LGUucHJvdG90eXBlLmdldER1cmF0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCksdD1lLnJlYWR5LHI9ZS5kdXJhdGlvbjtyZXR1cm4gdD9yOm51bGx9LGUucHJvdG90eXBlLnNldFZvbHVtZT1mdW5jdGlvbihlKXtpZihlPDB8fGU+MSl0aHJvdyBuZXcgRXJyb3IoXCJWb2x1bWUgbXVzdCBiZSA+PSAwIGFuZCA8PSAxLlwiKTt0aGlzLl9zZXRWb2x1bWUoZSl9LGUucHJvdG90eXBlLmdldEN1cnJlbnRCdWZmZXJlZFRpbWVSYW5nZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0QnVmZmVyZWRUaW1lUmFuZ2VzKCk7aWYoIWUpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5nZXRQb3NpdGlvbigpO3JldHVybiB1LmZpbmQoZSxmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250YWluc1RpbWUodCl9KXx8bnVsbH0sZS5wcm90b3R5cGUucGxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX2xvZ2dlci5kZWJ1ZyhcInBsYXkoKSBjYWxsZWQuXCIpO3ZhciB0PXMuYnVpbGREZWZlcnJlZCgpO3JldHVybiB0aGlzLl9zdGF0ZU1hbmFnZXIudXBkYXRlKGZ1bmN0aW9uKHIpe3IucGxheWluZz9lLl9sb2dnZXIuZGVidWcoXCJJbnRlbnQgaXMgYWxyZWFkeSB0byBiZSBwbGF5aW5nLlwiKTooZS5fbG9nZ2VyLmRlYnVnKFwiUmVxdWVzdGluZyBwbGF5LlwiKSxyLnBsYXlpbmc9ITAsZS5fbGFzdFBsYXlFcnJvcj1udWxsKSxyLnBsYXlEZWZlcnJlZCYmIXIucGxheURlZmVycmVkLmlzU2V0dGxlZCgpfHwoci5wbGF5RGVmZXJyZWQ9cy5idWlsZERlZmVycmVkKCkpLHQucmVzb2x2ZShyLnBsYXlEZWZlcnJlZC5wcm9taXNlKX0pLHQucHJvbWlzZX0sZS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJwYXVzZSgpIGNhbGxlZC5cIik7dmFyIHQ9cy5idWlsZERlZmVycmVkKCk7cmV0dXJuIHRoaXMuX3N0YXRlTWFuYWdlci51cGRhdGUoZnVuY3Rpb24ocil7ci5wbGF5aW5nPyhlLl9sb2dnZXIuZGVidWcoXCJSZXF1ZXN0aW5nIHBhdXNlLlwiKSxyLnBsYXlpbmc9ITEsZS5fbGFzdFBhdXNlRXJyb3I9bnVsbCk6ZS5fbG9nZ2VyLmRlYnVnKFwiSW50ZW50IGlzIGFscmVhZHkgdG8gYmUgcGF1c2VkLlwiKSxyLnBhdXNlRGVmZXJyZWQmJiFyLnBhdXNlRGVmZXJyZWQuaXNTZXR0bGVkKCl8fChyLnBhdXNlRGVmZXJyZWQ9cy5idWlsZERlZmVycmVkKCkpLHQucmVzb2x2ZShyLnBhdXNlRGVmZXJyZWQucHJvbWlzZSl9KSx0LnByb21pc2V9LGUucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fbG9nZ2VyLmRlYnVnKFwic2VlaygpIGNhbGxlZC5cIixlKTt2YXIgcj1zLmJ1aWxkRGVmZXJyZWQoKTtyZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbihuKXtpZihlPDApdC5fbG9nZ2VyLndhcm4oXCJSZWplY3Rpbmcgc2VlayBpbW1lZGlhdGVseSBhcyB0aGUgcG9zaXRpb24gd2FzIG5lZ2F0aXZlLlwiKSxyLnJlamVjdChuZXcgRXJyb3IoXCJZb3Ugd2VyZSBhdHRlbXB0aW5nIHRvIHNlZWsgdG8gYSBuZWdhdGl2ZSB0aW1lLlwiKSk7ZWxzZSBpZihudWxsIT09bi5kdXJhdGlvbiYmZT5uLmR1cmF0aW9uKXQuX2xvZ2dlci53YXJuKFwiUmVqZWN0aW5nIHNlZWsgaW1tZWRpYXRlbHkgYXMgdGhlIGR1cmF0aW9uIGlzIG5vdyBrbm93biwgYW5kIHRoZSByZXF1ZXN0ZWQgcG9zaXRvbiB3YXMgcGFzdCBpdC5cIiksci5yZWplY3QobmV3IEVycm9yKFwiWW91IHdlcmUgYXR0ZW1wdGluZyB0byBzZWVrIHBhc3QgdGhlIGVuZCBvZiB0aGUgbWVkaWEuXCIpKTtlbHNle24uc3RhbGxlZHx8IW4uYWN0dWFsbHlQbGF5aW5nfHxuLnNlZWsmJlwiSU5fUFJPR1JFU1NcIj09PW4uc2Vlay5zdGF0ZXx8KHQuX2xhc3RQbGF5ZWRQb3NpdGlvbj10Ll9nZXRQb3NpdGlvbk9yUG9zaXRpb25TZWVraW5nVG8oKSk7dmFyIG89cy5idWlsZERlZmVycmVkKCk7bi5zZWVrJiZcIklOX1BST0dSRVNTXCI9PT1uLnNlZWsuc3RhdGUmJm4uc2Vlay5wb3NpdGlvbj09PWU/dC5fbG9nZ2VyLmRlYnVnKFwiU2VlayBhbHJlYWR5IHJlcXVlc3RlZCB0byB0aGUgc2FtZSBwb3NpdGlvbi5cIixlKToodC5fbG9nZ2VyLmRlYnVnKFwiUmVxdWVzdGluZyBzZWVrLlwiLGUpLG4uc2Vla2luZz0hMCxuLnNlZWs9e3N0YXRlOlwiSU5fUFJPR1JFU1NcIixwb3NpdGlvbjplfSxuLnBvc2l0aW9uSnVtcGVkPU9iamVjdC5jcmVhdGUobnVsbCkpLHQuX3F1ZXVlZFNlZWtEZWZlcnJlZHMucHVzaCh7cG9zaXRpb246ZSxkZWZlcnJlZDpvfSksci5yZXNvbHZlKG8ucHJvbWlzZSl9fSksci5wcm9taXNlfSxlLnByb3RvdHlwZS5nZXRTZWVrU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkuc2Vla30sZS5wcm90b3R5cGUua2lsbD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbih0KXt0LmRlYWR8fChlLl9sb2dnZXIuZGVidWcoXCJraWxsKCkgY2FsbGVkLlwiKSx0LmRlYWQ9ITApfSl9LGUucHJvdG90eXBlLl91cGRhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbigpe3JldHVybiBlJiZlKCl9KX0sZS5wcm90b3R5cGUuX2Vuc3VyZU5vdERlYWQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5kZWFkKXRocm93IG5ldyBFcnJvcihcIlBsYXllciBpcyBkZWFkLlwiKX0sZS5wcm90b3R5cGUuX25vdGlmeVN0YWxsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX3N0YWxsZWQhPT1lJiYodGhpcy5fbG9nZ2VyLmRlYnVnKFwibm90aWZ5U3RhbGxlZCgpIGNhbGxlZC5cIixlKSx0aGlzLl9zdGFsbGVkPWUsdGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZSgpKX0sZS5wcm90b3R5cGUuX2dldFF1ZXVlZFNlZWtQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0U2Vla1N0YXRlKCk7cmV0dXJuIGUmJlwiSU5fUFJPR1JFU1NcIj09PWUuc3RhdGU/ZS5wb3NpdGlvbjpudWxsfSxlLnByb3RvdHlwZS5fcHJvdmlkZUR1cmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX3N0YXRlTWFuYWdlci51cGRhdGUoZnVuY3Rpb24ocil7aWYoci5kdXJhdGlvbiE9PWUpe3ZhciBuPXQuX2dldFBvc2l0aW9uT3JQb3NpdGlvblNlZWtpbmdUbygpO2lmKGU8MHx8ci5yZWFkeSYmbj5lKXRocm93IHQuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiQXR0ZW1wdCB0byB1cGRhdGUgZHVyYXRpb24gdG8gYW4gaW52YWxpZCB2YWx1ZS5cIikpLG5ldyBFcnJvcihcIkR1cmF0aW9uIGNhbm5vdCBiZSBsZXNzIHRoYW4gdGhlIGN1cnJlbnQgcG9zaXRpb24uXCIpO3QuX2xvZ2dlci5kZWJ1ZyhcInByb3ZpZGVEdXJhdGlvbigpIGNhbGxlZC5cIixlKSxyLnJlYWR5P3IuZHVyYXRpb249ZTp0Ll9xdWV1ZWREdXJhdGlvbj1lfX0pfSxlLnByb3RvdHlwZS5fbm90aWZ5UGxheWluZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9zdGF0ZU1hbmFnZXIudXBkYXRlKGZ1bmN0aW9uKHIpe2lmKCFyLnJlYWR5KXRocm93IHQuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiQXR0ZW1wdCB0byByZWdpc3RlciBwbGF5YmFjayBhcyBzdGFydGVkIGJlZm9yZSByZWFkeS5cIikpLG5ldyBFcnJvcihcIlBsYXllciBtdXN0IGJlIHJlYWR5IGZpcnN0LlwiKTtlIT09ci5hY3R1YWxseVBsYXlpbmcmJih0Ll9sb2dnZXIuZGVidWcoXCJub3RpZnlQbGF5aW5nKCkgY2FsbGVkLlwiLGUpLGV8fHIuc2Vla2luZ3x8ci5zdGFsbGVkfHwodC5fbGFzdFBsYXllZFBvc2l0aW9uPXQuX2dldFBvc2l0aW9uT3JQb3NpdGlvblNlZWtpbmdUbygpKSxyLmFjdHVhbGx5UGxheWluZz1yLnBsYXlpbmc9ZSxlP3QuX2xhc3RQbGF5RXJyb3I9bnVsbDp0Ll9sYXN0UGF1c2VFcnJvcj1udWxsKX0pfSxlLnByb3RvdHlwZS5fbm90aWZ5UGxheVJlamVjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9zdGF0ZU1hbmFnZXIudXBkYXRlKGZ1bmN0aW9uKHIpe2lmKCFyLnJlYWR5KXRocm93IHQuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiQXR0ZW1wdCB0byByZWplY3QgYSBwbGF5IHJlcXVlc3QgYmVmb3JlIHBsYXllciByZWFkeS5cIikpLG5ldyBFcnJvcihcIlBsYXllciBtdXN0IGJlIHJlYWR5IGZpcnN0LlwiKTtpZihyLmFjdHVhbGx5UGxheWluZ3x8IXIucGxheWluZyl0aHJvdyB0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkF0dGVtcHQgdG8gcmVqZWN0IGEgcGxheSByZXF1ZXN0IHdoZW4gbm90IHZhbGlkLlwiKSksbmV3IEVycm9yKFwiUGxheWluZyBzdGF0ZSBpcyBpbmNvcnJlY3QuXCIpO3QuX2xvZ2dlci5kZWJ1ZyhcIm5vdGlmeVBsYXlSZWplY3Rpb24oKSBjYWxsZWQuXCIsZSksci5wbGF5aW5nPSExLHQuX2xhc3RQbGF5RXJyb3I9ZX0pfSxlLnByb3RvdHlwZS5fbm90aWZ5UGF1c2VSZWplY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbihyKXtpZighci5yZWFkeSl0aHJvdyB0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkF0dGVtcHQgdG8gcmVqZWN0IHBhdXNlIHJlcXVlc3QgYmVmb3JlIHBsYXllciByZWFkeS5cIikpLG5ldyBFcnJvcihcIlBsYXllciBtdXN0IGJlIHJlYWR5IGZpcnN0LlwiKTtpZighci5hY3R1YWxseVBsYXlpbmd8fHIucGxheWluZyl0aHJvdyB0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkF0dGVtcHQgdG8gcmVqZWN0IHBhdXNlIHJlcXVlc3Qgd2hlbiBub3QgdmFsaWQuXCIpKSxuZXcgRXJyb3IoXCJQbGF5aW5nIHN0YXRlIGlzIGluY29ycmVjdC5cIik7dC5fbG9nZ2VyLmRlYnVnKFwibm90aWZ5UGF1c2VSZWplY3Rpb24oKSBjYWxsZWQuXCIsZSksci5wbGF5aW5nPSEwLHQuX2xhc3RQYXVzZUVycm9yPWV9KX0sZS5wcm90b3R5cGUuX25vdGlmeVNlZWtSZWplY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbihyKXtpZighci5yZWFkeSl0aHJvdyB0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkF0dGVtcHQgdG8gcmVqZWN0IHNlZWsgcmVxdWVzdCBiZWZvcmUgcGxheWVyIHJlYWR5LlwiKSksbmV3IEVycm9yKFwiUGxheWVyIG11c3QgYmUgcmVhZHkgZmlyc3QuXCIpO2lmKCFyLnNlZWt8fFwiSU5fUFJPR1JFU1NcIiE9PXIuc2Vlay5zdGF0ZSl0aHJvdyB0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkF0dGVtcHQgdG8gcmVqZWN0IHNlZWsgcmVxdWVzdCB3aGVuIG5vbmUgcmVxdWVzdGVkLlwiKSksbmV3IEVycm9yKFwiQSBzZWVrIGhhc24ndCBiZWVuIHJlcXVlc3RlZC5cIik7aWYobnVsbCE9PXIuZHVyYXRpb24mJnIucG9zaXRpb24+ci5kdXJhdGlvbil0aHJvdyB0Ll90cmlnZ2VyRXJyb3IobmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkF0dGVtcHQgdG8gcmVqZWN0IHNlZWsgcmVxdWVzdCBhZnRlciBkdXJhdGlvbiBjaGFuZ2VkIGJlbG93IGN1cnJlbnQgcG9zaXRpb24uXCIpKSxuZXcgRXJyb3IoXCJBdHRlbXB0IHRvIHJlamVjdCBzZWVrIHJlcXVlc3QgYWZ0ZXIgZHVyYXRpb24gY2hhbmdlZCBiZWxvdyBjdXJyZW50IHBvc2l0aW9uLlwiKTt0Ll9sb2dnZXIuZGVidWcoXCJub3RpZnlTZWVrUmVqZWN0aW9uKCkgY2FsbGVkLlwiLGUpLHIuc2Vla2luZz0hMSxyLnNlZWs9e3N0YXRlOlwiRVJST1JcIixlcnJvcjplfSxyLnBvc2l0aW9uSnVtcGVkPU9iamVjdC5jcmVhdGUobnVsbCl9KX0sZS5wcm90b3R5cGUuX3NpZ25hbFJlYWR5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbih0KXtpZih0LnJlYWR5KXRocm93IGUuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiQXR0ZW1wdCB0byBzaWduYWwgcmVhZHkgdHdpY2UuXCIpKSxuZXcgRXJyb3IoXCJSZWFkeSBhbHJlYWR5IHNpZ25hbGxlZC5cIik7aWYobnVsbD09PWUuX3F1ZXVlZER1cmF0aW9uKXRocm93IGUuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiQXR0ZW1wdCB0byBzaWduYWwgcmVhZHkgd2hlbiBkdXJhdGlvbiB1bmtub3duLlwiKSksbmV3IEVycm9yKFwiRHVyYXRpb24gaXMgc3RpbGwgdW5rbm93bi5cIik7ZS5fbG9nZ2VyLmRlYnVnKFwic2lnbmFsUmVhZHkoKSBjYWxsZWQuXCIpLHQucmVhZHk9ITAsdC5kdXJhdGlvbj1lLl9xdWV1ZWREdXJhdGlvbix0LnNlZWsmJlwiSU5fUFJPR1JFU1NcIj09PXQuc2Vlay5zdGF0ZSYmdC5zZWVrLnBvc2l0aW9uPnQuZHVyYXRpb24mJih0LnNlZWtpbmc9ITEsdC5zZWVrPXtzdGF0ZTpcIkVSUk9SXCIsZXJyb3I6bmV3IEVycm9yKFwiWW91IHdlcmUgYXR0ZW1wdGluZyB0byBzZWVrIHBhc3QgdGhlIGVuZCBvZiB0aGUgbWVkaWEuXCIpfSl9KX0sZS5wcm90b3R5cGUuX3NpZ25hbFNlZWtDb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX3N0YXRlTWFuYWdlci51cGRhdGUoZnVuY3Rpb24odCl7aWYoIXQucmVhZHkpdGhyb3cgZS5fdHJpZ2dlckVycm9yKG5ldyBoLkltcGxlbWVudGF0aW9uRXJyb3IoXCJBdHRlbXB0IHRvIHNpZ25hbCBzZWVrIGFzIGNvbXBsZXRlIGJlZm9yZSBwbGF5ZXIgcmVhZHkuXCIpKSxuZXcgRXJyb3IoXCJQbGF5ZXIgbXVzdCBiZSByZWFkeSBmaXJzdC5cIik7aWYoIXQuc2Vla3x8XCJJTl9QUk9HUkVTU1wiIT09dC5zZWVrLnN0YXRlKXRocm93IGUuX3RyaWdnZXJFcnJvcihuZXcgaC5JbXBsZW1lbnRhdGlvbkVycm9yKFwiQXR0ZW1wdCB0byBzaWduYWwgc2VlayBhcyBjb21wbGV0ZSB3aGVuIG5vbmUgcmVxdWVzdGVkLlwiKSksbmV3IEVycm9yKFwiVGhlcmUgc2hvdWxkbid0IGJlIGEgc2VlayBpbiBwcm9ncmVzcy5cIik7dmFyIHI9dC5kdXJhdGlvbjtpZih0LnNlZWsmJlwiSU5fUFJPR1JFU1NcIj09PXQuc2Vlay5zdGF0ZSYmdC5zZWVrLnBvc2l0aW9uPnIpdGhyb3cgbmV3IEVycm9yKFwiU2VlayBjYW5ub3QgaGF2ZSBjb21wbGV0ZWQgZ2l2ZW4gaXQgd2FzIHRvIGEgdGltZSBncmVhdGVyIHRoYW4gdGhlIGR1cmF0aW9uLlwiKTtlLl9sb2dnZXIuZGVidWcoXCJzaWduYWxTZWVrQ29tcGxldGUoKSBjYWxsZWQuXCIpLHQuc2Vlaz17c3RhdGU6XCJDT01QTEVURURcIixwb3NpdGlvbjp0LnNlZWsucG9zaXRpb259LHQuc2Vla2luZz0hMSx0LnBvc2l0aW9uPXQuc2Vlay5wb3NpdGlvbn0pfSxlLnByb3RvdHlwZS5fdHJpZ2dlckVycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fc3RhdGVNYW5hZ2VyLnVwZGF0ZShmdW5jdGlvbihyKXt2YXIgbj0hMTtpZihyLnJlYWR5JiZlIGluc3RhbmNlb2YgaS5Ob3RTdXBwb3J0ZWRFcnJvciYmKGU9bmV3IGguSW1wbGVtZW50YXRpb25FcnJvcihcIkludmFsaWQgTm90U3VwcG9ydGVkRXJyb3IuXCIpLG49ITApLGUgaW5zdGFuY2VvZiBvLlBsYXllckZhdGFsRXJyb3I/KGUgaW5zdGFuY2VvZiBpLk5vdFN1cHBvcnRlZEVycm9yP3QuX2xvZ2dlci5pbmZvKFwiTm90U3VwcG9ydGVkRXJyb3Igb2NjdXJyZWQuXCIsZSk6dC5fbG9nZ2VyLmVycm9yKFwiRmF0YWwgZXJyb3Igb2NjdXJyZWQuXCIsZSksci5mYXRhbEVycm9yP3QuX2xvZ2dlci53YXJuKFwiQSBmYXRhbCBlcnJvciBhbHJlYWR5IG9jY3VycmVkLlwiLHIuZmF0YWxFcnJvcik6ci5mYXRhbEVycm9yPWUsdC5fZXJyb3JzLnB1c2goZSksci5lcnJvck9jY3VycmVkPU9iamVjdC5jcmVhdGUobnVsbCksci5kZWFkPSEwKToodC5fbG9nZ2VyLndhcm4oXCJOb24tZmF0YWwgZXJyb3Igb2NjdXJyZWQuXCIsZSksdC5fZXJyb3JzLnB1c2goZSksci5lcnJvck9jY3VycmVkPU9iamVjdC5jcmVhdGUobnVsbCkpLG4pdGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZCBlcnJvcnMgYXJlIG9ubHkgdmFsaWQgYmVmb3JlIHRoZSBwbGF5ZXIgaXMgcmVhZHkuXCIpfSl9LGUucHJvdG90eXBlLl9idWlsZEV2ZW50SGFuZGxlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJue3N1YnNjcmliZTpmdW5jdGlvbihyKXt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm4gcihlLGwubm93KCkpfTtyZXR1cm4gdC5fc3RhdGVNYW5hZ2VyLnN1YnNjcmliZShmdW5jdGlvbih0KXtlKG4sdCl9KX19fSxlLnByb3RvdHlwZS5fZmluYWxpemVTdGF0ZT1mdW5jdGlvbihlKXt0aGlzLl91cGRhdGVFbmRlZEluU3RhdGUoZSk7dmFyIHQ9dGhpcy5fZ2V0UG9zaXRpb25PclBvc2l0aW9uU2Vla2luZ1RvKCk7aWYoZS5kZWFkKXRoaXMuX2xhc3RQbGF5RXJyb3I9bmV3IEVycm9yKFwiUGxheWVyIHdhcyBraWxsZWQuXCIpLGUubG9hZGluZz0hMSx0aGlzLl9jbGVhckxvYWRpbmdEZWxheSgpLGUuc3RhbGxlZD0hMCxlLmFjdHVhbGx5UGxheWluZz0hMSxlLnBsYXlpbmc9ITEsZS5zdGF0ZT1jLlN0YXRlLkRFQUQ7ZWxzZXt2YXIgcj0hZS5lbmRlZCYmKCFlLnJlYWR5fHx0aGlzLl9zdGFsbGVkfHwhKCFlLnNlZWt8fFwiSU5fUFJPR1JFU1NcIiE9PWUuc2Vlay5zdGF0ZSkpO3ImJiFlLnN0YWxsZWQmJiFlLnNlZWtpbmcmJmUuYWN0dWFsbHlQbGF5aW5nJiYodGhpcy5fbGFzdFBsYXllZFBvc2l0aW9uPXQpLGUuc3RhbGxlZD1yO3ZhciBuPSFlLmVuZGVkJiYoZS5wbGF5aW5nfHxlLmFjdHVhbGx5UGxheWluZykmJihlLnN0YWxsZWR8fGUucGxheWluZyE9PWUuYWN0dWFsbHlQbGF5aW5nKTtuP3RoaXMuX2xvYWRpbmdEZWxheT90aGlzLl9zY2hlZHVsZUxvYWRpbmdEZWxheSgpOmUubG9hZGluZz0hMDooZS5sb2FkaW5nPSExLHRoaXMuX2NsZWFyTG9hZGluZ0RlbGF5KCkpLHRoaXMuX3Bvc2l0aW9uQWZ0ZXJMYXN0VXBkYXRlIT09dCYmKHRoaXMuX3Bvc2l0aW9uQWZ0ZXJMYXN0VXBkYXRlPXQsZS5wbGF5aW5nfHxlLmFjdHVhbGx5UGxheWluZ3x8KGUucG9zaXRpb25KdW1wZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSkpLGUuc3RhdGU9dGhpcy5fY2FsY3VsYXRlU3RhdGUoZSl9fSxlLnByb3RvdHlwZS5fdXBkYXRlRW5kZWRJblN0YXRlPWZ1bmN0aW9uKGUpe2UuZW5kZWQ9ZS5yZWFkeSYmdGhpcy5fZ2V0UG9zaXRpb25PclBvc2l0aW9uU2Vla2luZ1RvKCk9PT1lLmR1cmF0aW9ufSxlLnByb3RvdHlwZS5fc2NoZWR1bGVMb2FkaW5nRGVsYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2xvYWRpbmdEZWxheVRpbWVyfHwodGhpcy5fbG9hZGluZ0RlbGF5VGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9zdGF0ZU1hbmFnZXIudXBkYXRlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxvYWRpbmc9ITB9KX0sdGhpcy5fbG9hZGluZ0RlbGF5KSl9LGUucHJvdG90eXBlLl9jbGVhckxvYWRpbmdEZWxheT1mdW5jdGlvbigpe3RoaXMuX2xvYWRpbmdEZWxheVRpbWVyJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkaW5nRGVsYXlUaW1lciksdGhpcy5fbG9hZGluZ0RlbGF5VGltZXI9bnVsbCl9LGUucHJvdG90eXBlLl9nZXRQb3NpdGlvbk9yUG9zaXRpb25TZWVraW5nVG89ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZU1hbmFnZXIudXBkYXRlKCk7dmFyIGU9dGhpcy5fc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7cmV0dXJuIGUuc2VlayYmXCJJTl9QUk9HUkVTU1wiPT09ZS5zZWVrLnN0YXRlP2Uuc2Vlay5wb3NpdGlvbjplLnJlYWR5JiZudWxsIT09ZS5kdXJhdGlvbj9lLnBvc2l0aW9uOjB9LGUucHJvdG90eXBlLl9jYWxjdWxhdGVTdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLmRlYWQscj1lLmxvYWRpbmcsbj1lLnBsYXlpbmcsbz1lLmVuZGVkO3JldHVybiB0P2MuU3RhdGUuREVBRDpyP2MuU3RhdGUuTE9BRElORzpuJiYhbz9jLlN0YXRlLlBMQVlJTkc6Yy5TdGF0ZS5QQVVTRUR9LGUucHJvdG90eXBlLl9yZWdpc3Rlck1lZGlhU2Vzc2lvbkFjdGlvbkhhbmRsZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9tZWRpYVNlc3Npb25FbmFibGVkJiZ5JiYoeS5zZXRBY3Rpb25IYW5kbGVyKFwicGxheVwiLGZ1bmN0aW9uKCl7ZS5pc0RlYWQoKXx8ZS5wbGF5KCl9KSx5LnNldEFjdGlvbkhhbmRsZXIoXCJwYXVzZVwiLGZ1bmN0aW9uKCl7ZS5pc0RlYWQoKXx8ZS5wYXVzZSgpfSkseS5zZXRBY3Rpb25IYW5kbGVyKFwic2Vla2JhY2t3YXJkXCIsZnVuY3Rpb24oKXtlLmlzRGVhZCgpfHxlLnNlZWsoTWF0aC5tYXgoMCxlLmdldFBvc2l0aW9uKCktZykpfSkseS5zZXRBY3Rpb25IYW5kbGVyKFwic2Vla2ZvcndhcmRcIixmdW5jdGlvbigpe2UuaXNEZWFkKCl8fGUuc2VlayhNYXRoLm1pbihlLmdldER1cmF0aW9uKCl8fDAsZS5nZXRQb3NpdGlvbigpK2cpKX0pKX0sZS5wcm90b3R5cGUuX25vdGlmeU1lZGlhU2Vzc2lvblBsYXlpbmc9ZnVuY3Rpb24oKXt0aGlzLl9tZWRpYVNlc3Npb25FbmFibGVkJiZ5JiYoeS5wbGF5YmFja1N0YXRlPVwicGxheWluZ1wiKX0sZS5wcm90b3R5cGUuX25vdGlmeU1lZGlhU2Vzc2lvblBhdXNlZD1mdW5jdGlvbigpe3RoaXMuX21lZGlhU2Vzc2lvbkVuYWJsZWQmJnkmJih5LnBsYXliYWNrU3RhdGU9XCJwYXVzZWRcIil9LGUucHJvdG90eXBlLl9hZnRlclVwZGF0ZT1mdW5jdGlvbihlLHQpeyh0LmJlZm9yZVVwZGF0ZXx8dC51cGRhdGUubGVuZ3RoPjApJiYodGhpcy5fbG9nZ2VyLmVycm9yKFwiRXJyb3JzIG9jY3VycmVkIGR1cmluZyBzdGF0ZSB1cGRhdGUuIEtpbGxpbmcgcGxheWVyLlwiLHQpLHRoaXMuX3RyaWdnZXJFcnJvcihuZXcgby5QbGF5ZXJGYXRhbEVycm9yKFwiRXJyb3JzIG9jY3VycmVkIGR1cmluZyBzdGF0ZSB1cGRhdGUuXCIsdCkpKSx0aGlzLl9maW5hbGl6ZVN0YXRlKGUpfSxlLnByb3RvdHlwZS5fYWZ0ZXJEaXNwYXRjaGVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2Vycm9yczt0aGlzLl9lcnJvcnM9W10sdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9vbkVycm9yLmRpc3BhdGNoKHQpfSl9LGUucHJvdG90eXBlLl9vbkNoYW5nZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1lLnJlYWR5LG89ZS5kZWFkLGk9ZS5mYXRhbEVycm9yLGE9ZS5wbGF5aW5nLHM9ZS5hY3R1YWxseVBsYXlpbmcsdT1lLmVuZGVkO2lmKG49PT0hMCYmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlJlc29sdmluZyByZWFkeSBkZWZlcnJlZC5cIiksdGhpcy5fcmVhZHlEZWZlcnJlZC5yZXNvbHZlKHZvaWQgMCkpLHM9PT0hMCYmdGhpcy5fcmVnaXN0ZXJNZWRpYVNlc3Npb25BY3Rpb25IYW5kbGVycygpLGE9PT0hMD90aGlzLl9ub3RpZnlNZWRpYVNlc3Npb25QbGF5aW5nKCk6YT09PSExJiZ0aGlzLl9ub3RpZnlNZWRpYVNlc3Npb25QYXVzZWQoKSx0LnBhdXNlRGVmZXJyZWQmJiF0LnBhdXNlRGVmZXJyZWQuaXNTZXR0bGVkKCkmJnQucGxheWluZyl7dmFyIGM9dGhpcy5fbGFzdFBhdXNlRXJyb3J8fG5ldyBFcnJvcihcIlBhdXNlIHJlcXVlc3QgYWJvcnRlZC5cIik7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiUmVqZWN0aW5nIHBhdXNlIGRlZmVycmVkLlwiLGMpLHQucGF1c2VEZWZlcnJlZC5yZWplY3QoYyl9aWYodC5wbGF5RGVmZXJyZWQmJiF0LnBsYXlEZWZlcnJlZC5pc1NldHRsZWQoKSYmIXQucGxheWluZyl7dmFyIGM9dGhpcy5fbGFzdFBsYXlFcnJvcnx8bmV3IEVycm9yKFwiUGxheSByZXF1ZXN0IGFib3J0ZWQuXCIpO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIlJlamVjdGluZyBwbGF5IGRlZmVycmVkLlwiLGMpLHQucGxheURlZmVycmVkLnJlamVjdChjKX1pZih0LnBsYXlEZWZlcnJlZCYmIXQucGxheURlZmVycmVkLmlzU2V0dGxlZCgpJiZ0LmFjdHVhbGx5UGxheWluZyYmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlJlc29sdmluZyBwbGF5IGRlZmVycmVkLlwiKSx0LnBsYXlEZWZlcnJlZC5yZXNvbHZlKHZvaWQgMCkpLCF0LnBhdXNlRGVmZXJyZWR8fHQucGF1c2VEZWZlcnJlZC5pc1NldHRsZWQoKXx8dC5hY3R1YWxseVBsYXlpbmd8fCh0aGlzLl9sb2dnZXIuZGVidWcoXCJSZXNvbHZpbmcgcGF1c2UgZGVmZXJyZWQuXCIpLHQucGF1c2VEZWZlcnJlZC5yZXNvbHZlKHZvaWQgMCkpLHM9PT0hMCYmIXQuZW5kZWR8fHU9PT0hMSYmdC5hY3R1YWxseVBsYXlpbmc/dGhpcy5fdGltZVBsYXliYWNrU3RhcnRlZD1sLm5vdygpOihzPT09ITEmJiF0LmVuZGVkfHx1PT09ITAmJnQuYWN0dWFsbHlQbGF5aW5nKSYmKHRoaXMuX2xpc3RlblRpbWVCYXNlKz1sLm5vdygpLXRoaXMuX3RpbWVQbGF5YmFja1N0YXJ0ZWQsdGhpcy5fdGltZVBsYXliYWNrU3RhcnRlZD1udWxsKSx0aGlzLl9xdWV1ZWRTZWVrRGVmZXJyZWRzPXRoaXMuX3F1ZXVlZFNlZWtEZWZlcnJlZHMuZmlsdGVyKGZ1bmN0aW9uKGUpe3ZhciBuPWUucG9zaXRpb24sbz1lLmRlZmVycmVkO2lmKHQuc2VlaylpZihcIklOX1BST0dSRVNTXCIhPT10LnNlZWsuc3RhdGUpe2lmKCF0LnN0YWxsZWR8fFwiRVJST1JcIj09PXQuc2Vlay5zdGF0ZSlyZXR1cm5cIkVSUk9SXCIhPT10LnNlZWsuc3RhdGU/KHIuX2xvZ2dlci5kZWJ1ZyhcIlJlc29sdmluZyBzZWVrKCkuXCIpLG8ucmVzb2x2ZSh2b2lkIDApKTooci5fbG9nZ2VyLmRlYnVnKFwiUmVqZWN0aW5nIHNlZWsoKS5cIix0LnNlZWsuZXJyb3IpLG8ucmVqZWN0KHQuc2Vlay5lcnJvcikpLCExfWVsc2UgaWYoXCJJTl9QUk9HUkVTU1wiIT09dC5zZWVrLnN0YXRlfHx0LnNlZWsucG9zaXRpb24hPT1uKXJldHVybiByLl9sb2dnZXIuZGVidWcoXCJSZWplY3Rpbmcgc2VlaygpIGJlY2F1c2UgYW5vdGhlciBzZWVrIHdhcyByZXF1ZXN0ZWQuXCIsbiksby5yZWplY3QobmV3IEVycm9yKFwiU2VlayByZXF1ZXN0IGFib3J0ZWQgYmVjYXVzZSBhbm90aGVyIHNlZWsgd2FzIHJlcXVlc3RlZCB0byBhIGRpZmZlcmVudCBwb3NpdGlvbi5cIikpLCExO3JldHVybiEwfSksbz09PSEwKXt0aGlzLl9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIF9raWxsKCkgb24gcGxheWVyLlwiKTt0cnl7dGhpcy5fa2lsbCgpLHRoaXMuX2xvZ2dlci5pbmZvKFwiUGxheWVyIGtpbGxlZC5cIil9Y2F0Y2goZSl7dGhpcy5fdHJpZ2dlckVycm9yKG5ldyBoLkltcGxlbWVudGF0aW9uRXJyb3IoXCJFeGNlcHRpb24gb2NjdXJyZWQgaW4gX2tpbGwoKS5cIixlKSksdGhpcy5fbG9nZ2VyLmVycm9yKFwiRXhjZXB0aW9uIHdoZW4gaW1wbGVtZW50YXRpb24gd2FzIGJlaW5nIGtpbGxlZC5cIixlKX1pZighdC5yZWFkeSl7dmFyIGM9aXx8bmV3IEVycm9yKFwiUGxheWVyIHdhcyBraWxsZWQuXCIpO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIlJlamVjdGluZyB3aGVuUmVhZHkuXCIpLHRoaXMuX3JlYWR5RGVmZXJyZWQucmVqZWN0KGMpfXRoaXMuX3F1ZXVlZFNlZWtEZWZlcnJlZHMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLnBvc2l0aW9uLG49ZS5kZWZlcnJlZCxvPWl8fG5ldyBFcnJvcihcIlNlZWsgYWJvcnRlZCBhcyBwbGF5ZXIga2lsbGVkLlwiKTtyLl9sb2dnZXIuZGVidWcoXCJSZWplY3Rpbmcgc2VlaygpLlwiLHQpLG4ucmVqZWN0KG8pfSksdGhpcy5fc3RhdGVNYW5hZ2VyLmtpbGwoKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJQbGF5ZXIgZGVhZC5cIil9fSxlfSgpO3QuQmFzZVBsYXllcj12fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig5KSxpPXIoNCksYT1yKDApLHM9cigzKSx1PXIoMSksbD1yKDE2KSxjPXIoNSksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiByLl9vblByb3ZpZGVkUGxheWVyRXJyb3I9bmV3IHUuRXZlbnREaXNwYXRjaGVyLHIuX2Vycm9ySGFuZGxlcj1udWxsLHIuX2NoYW5nZUhhbmRsZXI9bnVsbCxyLl9wbGF5ZXI9bnVsbCxyLl9pbnN0YW5jZUxvY2s9bnVsbCxyLl9sYXN0UGxheWVyUG9zaXRpb249MCxyLl92b2x1bWU9MSxyLl9tdXRlZD0hMSxyLl9zeW5jZWQ9ITEsci5fdW5zeW5jSW5Qcm9ncmVzcz0hMSxyLl9sb2dnZXI9cy5wcmVmaXhMb2dnZXIoci5fbG9nZ2VyLFwiUHJveHlQbGF5ZXJCYXNlXCIpLHIub25Qcm92aWRlZFBsYXllckVycm9yPXIuX29uUHJvdmlkZWRQbGF5ZXJFcnJvci5nZXRIYW5kbGUoKSxyfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Vm9sdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXllciYmdGhpcy5fc3luY2VkP3RoaXMuX3BsYXllci5nZXRWb2x1bWUoKTp0aGlzLl92b2x1bWV9LHQucHJvdG90eXBlLmdldE11dGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXllciYmdGhpcy5fc3luY2VkP3RoaXMuX3BsYXllci5nZXRNdXRlZCgpOnRoaXMuX211dGVkfSx0LnByb3RvdHlwZS5zZXRNdXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcGxheWVyJiZ0aGlzLl9zeW5jZWQ/dGhpcy5fcGxheWVyLnNldE11dGVkKGUpOnZvaWQodGhpcy5fbXV0ZWQ9ZSl9LHQucHJvdG90eXBlLmdldEJ1ZmZlcmVkVGltZVJhbmdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5ZXImJnRoaXMuX3N5bmNlZD90aGlzLl9wbGF5ZXIuZ2V0QnVmZmVyZWRUaW1lUmFuZ2VzKCk6bnVsbH0sdC5wcm90b3R5cGUuZ2V0Q3VycmVudEJ1ZmZlcmVkVGltZVJhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXllciYmdGhpcy5fc3luY2VkP3RoaXMuX3BsYXllci5nZXRDdXJyZW50QnVmZmVyZWRUaW1lUmFuZ2UoKTpudWxsfSx0LnByb3RvdHlwZS5nZXRNYXhCdWZmZXJMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWVyJiZ0aGlzLl9zeW5jZWQ/dGhpcy5fcGxheWVyLmdldE1heEJ1ZmZlckxlbmd0aCgpOm51bGx9LHQucHJvdG90eXBlLl9wcm92aWRlUGxheWVyPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9e3N5bmNQb3NpdGlvbjohMCxzeW5jVm9sdW1lOiEwfSksdGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX3BsYXllcil0aHJvdyBuZXcgRXJyb3IoXCJBIHBsYXllciBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkLlwiKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJwcm92aWRlUGxheWVyKCkgY2FsbGVkLlwiKSx0aGlzLl9pbnN0YW5jZUxvY2s9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9wbGF5ZXI9ZSx0aGlzLl9zeW5jKHQpfSx0LnByb3RvdHlwZS5fcmVtb3ZlUGxheWVyPWZ1bmN0aW9uKCl7aWYodGhpcy5fZW5zdXJlTm90RGVhZCgpLCF0aGlzLl9wbGF5ZXIpdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcGxheWVyIHRvIHJlbW92ZS5cIik7aWYodGhpcy5fdW5zeW5jSW5Qcm9ncmVzcyl0aHJvdyBuZXcgRXJyb3IoXCJQbGF5ZXIgaXMgY3VycmVudGx5IHVuc3luY2luZy5cIik7dGhpcy5fbG9nZ2VyLmRlYnVnKFwicmVtb3ZlUGxheWVyKCkgY2FsbGVkLlwiKSx0aGlzLl9pbnN0YW5jZUxvY2s9bnVsbCx0aGlzLl91bnN5bmMoKSx0aGlzLl9wbGF5ZXI9bnVsbCx0aGlzLmlzUmVhZHkoKSYmIXRoaXMuaXNEZWFkKCkmJnRoaXMuX25vdGlmeVN0YWxsZWQoITApfSx0LnByb3RvdHlwZS5fc2V0SW5pdGlhbER1cmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5fZW5zdXJlTm90RGVhZCgpLGU8MCl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2V0IGR1cmF0aW9uIHRvIGEgdmFsdWUgPCAwLlwiKTtudWxsPT09dGhpcy5nZXREdXJhdGlvbigpJiZ0aGlzLl91cGRhdGUoZnVuY3Rpb24oKXt0Ll9lbnN1cmVCZWxvd1Bvc2l0aW9uKGUpLHQuX3Byb3ZpZGVEdXJhdGlvbihlKSx0LmlzUmVhZHkoKXx8KHQuX3NpZ25hbFJlYWR5KCksdC5faGFuZGxlU2tpcHBlZFNlZWsoKSl9KX0sdC5wcm90b3R5cGUuX3RyaWdnZXJFcnJvcj1mdW5jdGlvbih0KXtlLnByb3RvdHlwZS5fdHJpZ2dlckVycm9yLmNhbGwodGhpcyx0KX0sdC5wcm90b3R5cGUuX2dldFBsYXllcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGVhZCgpP251bGw6dGhpcy5fcGxheWVyfSx0LnByb3RvdHlwZS5fc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wbGF5ZXImJnRoaXMuX3N5bmNlZD90aGlzLl9wbGF5ZXIuc2V0Vm9sdW1lKGUpOnZvaWQodGhpcy5fdm9sdW1lPWUpfSx0LnByb3RvdHlwZS5faGFuZGxlUGxheVBhdXNlQ2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3BsYXllcjt0JiYoZT90aGlzLl9wbGF5QW5kSGFuZGxlQWJvcnQodCk6dGhpcy5fcGF1c2VBbmRIYW5kbGVBYm9ydCh0KSl9LHQucHJvdG90eXBlLl9oYW5kbGVTZWVrQ2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3BsYXllcjt0JiZ0aGlzLl9zeW5jZWQmJnQuc2VlayhlKX0sdC5wcm90b3R5cGUuX2dldFBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGxheWVyJiZ0aGlzLl9zeW5jZWQpe2lmKCF0aGlzLl9jaGFuZ2VIYW5kbGVyKXRocm93IG5ldyBFcnJvcihcIkhhbmRsZXIgc2hvdWxkIGV4aXN0LlwiKTtpZih0aGlzLl9jaGFuZ2VIYW5kbGVyLnJldHJpZXZlKCksdGhpcy5fc3luY2VkKXJldHVybiB0aGlzLl9wbGF5ZXIuZ2V0UG9zaXRpb24oKX1yZXR1cm4gdGhpcy5fbGFzdFBsYXllclBvc2l0aW9ufSx0LnByb3RvdHlwZS5fa2lsbD1mdW5jdGlvbigpe2lmKHRoaXMuX3BsYXllciYmIXRoaXMuX3BsYXllci5pc0RlYWQoKSl7aWYoIXRoaXMuX2NoYW5nZUhhbmRsZXIpdGhyb3cgbmV3IEVycm9yKFwiSGFuZGxlciBzaG91bGQgZXhpc3QuXCIpO2lmKHRoaXMuX2NoYW5nZUhhbmRsZXIucmV0cmlldmUoKSx0aGlzLl9zeW5jZWQmJih0aGlzLl9wbGF5ZXIua2lsbCgpLHRoaXMuX3N5bmNlZCkpdGhyb3cgbmV3IEVycm9yKFwiVW5zeW5jIHNob3VsZCBoYXZlIGhhcHBlbmVkLlwiKX10aGlzLl9wbGF5ZXI9bnVsbH0sdC5wcm90b3R5cGUuX2hhbmRsZVNraXBwZWRTZWVrPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGxheWVyJiZ0aGlzLl9zeW5jZWQpe3ZhciBlPXRoaXMuZ2V0U2Vla1N0YXRlKCksdD10aGlzLl9wbGF5ZXIuZ2V0U2Vla1N0YXRlKCk7IWV8fFwiSU5fUFJPR1JFU1NcIiE9PWUuc3RhdGV8fHQmJlwiSU5fUFJPR1JFU1NcIj09PXQuc3RhdGV8fCh0aGlzLl9sb2dnZXIuZGVidWcoXCJTaWduYWxsaW5nIHNlZWsgYXMgY29tcGxldGUgb24gcHJveHkgYmVjYXVzZSBwcm92aWRlZCBwbGF5ZXIgaXNuJ3Qgc2Vla2luZy5cIiksdGhpcy5fc2lnbmFsU2Vla0NvbXBsZXRlKCkpfX0sdC5wcm90b3R5cGUuX2Vuc3VyZUJlbG93UG9zaXRpb249ZnVuY3Rpb24oZSl7dGhpcy5nZXRQb3NpdGlvbigpPmUmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJDYXBwaW5nIHBvc2l0aW9uLlwiLGUpLHRoaXMuc2VlayhlKSx0aGlzLmlzUmVhZHkoKSYmKHRoaXMuX2xhc3RQbGF5ZXJQb3NpdGlvbj1lLHRoaXMuX3NpZ25hbFNlZWtDb21wbGV0ZSgpKSl9LHQucHJvdG90eXBlLl9zeW5jPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLl9wbGF5ZXI7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiUGxheWVyIHNob3VsZCBoYXZlIGJlY29tZSBhdmFpbGFibGUgYnkgbm93LlwiKTtyZXR1cm4gdGhpcy5fbG9nZ2VyLmRlYnVnKFwiU3luY2luZy4uLlwiLHRoaXMuaXNQbGF5aW5nKCksdGhpcy5pc0FjdHVhbGx5UGxheWluZygpKSxyLmlzRGVhZCgpP3ZvaWQgdGhpcy5fbG9nZ2VyLmRlYnVnKFwiUHJvdmlkZWQgcGxheWVyIGlzIGRlYWQuXCIpOih0aGlzLl9lcnJvckhhbmRsZXI9ci5vbkVycm9yLnN1YnNjcmliZShmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgYS5QbGF5ZXJGYXRhbEVycm9yP3QuX29uUHJvdmlkZWRQbGF5ZXJFcnJvci5kaXNwYXRjaChuZXcgYy5Qcm94eVByb3ZpZGVkUGxheWVyRmF0YWxFcnJvcihlLHIpKToodC5fdHJpZ2dlckVycm9yKGUpLHQuX29uUHJvdmlkZWRQbGF5ZXJFcnJvci5kaXNwYXRjaChuZXcgbC5Qcm94eVByb3ZpZGVkUGxheWVyRXJyb3IoZSxyKSkpfSksdGhpcy5fY2hhbmdlSGFuZGxlcj1yLm9uQ2hhbmdlLnN1YnNjcmliZShmdW5jdGlvbihlKXt0Ll91cGRhdGUoZnVuY3Rpb24oKXtpZih0Ll9sb2dnZXIuZGVidWcoXCJIYW5kbGluZyBjaGFuZ2VzLlwiLGUpLGUuZGVhZClyZXR1cm4gdC5fbG9nZ2VyLmRlYnVnKFwiUGxheWVyIGhhcyBnb25lIHRvIERFQUQgc3RhdGUuXCIpLHQuX3Vuc3luYygpLHZvaWQodC5pc0RlYWQoKXx8ZS5mYXRhbEVycm9yJiZ0Ll9oYW5kbGVGYXRhbEVycm9yKGUuZmF0YWxFcnJvcixyKSk7aWYodm9pZCAwIT09ZS5kdXJhdGlvbiYmKHQuX2Vuc3VyZUJlbG93UG9zaXRpb24oZS5kdXJhdGlvbiksdC5fcHJvdmlkZUR1cmF0aW9uKGUuZHVyYXRpb24pLHQuaXNSZWFkeSgpfHwodC5fc2lnbmFsUmVhZHkoKSx0Ll9oYW5kbGVTa2lwcGVkU2VlaygpLHQuX25vdGlmeVN0YWxsZWQoci5pc1N0YWxsZWQoKSkpKSxlLnNlZWspe3ZhciBuPXQuZ2V0U2Vla1N0YXRlKCk7biYmXCJJTl9QUk9HUkVTU1wiPT09bi5zdGF0ZSYmKFwiQ09NUExFVEVEXCI9PT1lLnNlZWsuc3RhdGUmJm4ucG9zaXRpb249PT1lLnNlZWsucG9zaXRpb24/dC5fc2lnbmFsU2Vla0NvbXBsZXRlKCk6XCJDT01QTEVURURcIj09PWUuc2Vlay5zdGF0ZSYmbi5wb3NpdGlvbiE9PWUuc2Vlay5wb3NpdGlvbj90Ll9ub3RpZnlTZWVrUmVqZWN0aW9uKG5ldyBFcnJvcihcIkFub3RoZXIgc2VlayBvY2N1cnJlZCB0byBhIGRpZmZlcmVudCBwb3NpdGlvbi5cIikpOlwiSU5fUFJPR1JFU1NcIj09PWUuc2Vlay5zdGF0ZSYmbi5wb3NpdGlvbiE9PWUuc2Vlay5wb3NpdGlvbj90LnNlZWsoZS5zZWVrLnBvc2l0aW9uKTpcIkVSUk9SXCI9PT1lLnNlZWsuc3RhdGUmJnQuX25vdGlmeVNlZWtSZWplY3Rpb24oZS5zZWVrLmVycm9yKSl9dm9pZCAwIT09ZS5zdGFsbGVkJiZ0Ll9ub3RpZnlTdGFsbGVkKGUuc3RhbGxlZCksZS5wbGF5aW5nPT09ITEmJmUucGxheVJlamVjdGlvbj90LmlzQWN0dWFsbHlQbGF5aW5nKCk/KHQuX3RyaWdnZXJFcnJvcihuZXcgaS5QbGF5ZXJFcnJvcihcIlBhdXNlZCBiZWNhdXNlIGEgcGxheWVyIHdhcyBwcm92aWRlZCB0aGF0IHJlZnVzZWQgdG8gcGxheS5cIikpLHQuX25vdGlmeVBsYXlpbmcoITEpKTp0Ll9ub3RpZnlQbGF5UmVqZWN0aW9uKGUucGxheVJlamVjdGlvbik6ZS5wbGF5aW5nPT09ITEmJihyLmlzQWN0dWFsbHlQbGF5aW5nKCk/dC5wYXVzZSgpOnZvaWQgMD09PWUuYWN0dWFsbHlQbGF5aW5nJiZ0LmlzUmVhZHkoKSYmdC5fbm90aWZ5UGxheWluZyghMSkpLGUucGxheWluZz09PSEwJiZlLnBhdXNlUmVqZWN0aW9uP3QuX25vdGlmeVBhdXNlUmVqZWN0aW9uKGUucGF1c2VSZWplY3Rpb24pOmUucGxheWluZz09PSEwJiZ0LnBsYXkoKSx2b2lkIDAhPT1lLmFjdHVhbGx5UGxheWluZyYmdC5fbm90aWZ5UGxheWluZyhlLmFjdHVhbGx5UGxheWluZyl9KX0pLHZvaWQgdGhpcy5fdXBkYXRlKGZ1bmN0aW9uKCl7dmFyIG49dC5faW5zdGFuY2VMb2NrO3RyeXtpZih0Ll9ub3RpZnlTdGFsbGVkKHIuaXNTdGFsbGVkKCkpLCF0LmlzUmVhZHkoKSYmci5pc1JlYWR5KCkpe3QuX2xvZ2dlci5kZWJ1ZyhcIlByb3ZpZGVkIHBsYXllciBpcyBhbHJlYWR5IHJlYWR5LiBNYWtpbmcgcHJveHkgcGxheWVyIHJlYWR5LlwiKTt2YXIgbz1yLmdldER1cmF0aW9uKCk7dC5fZW5zdXJlQmVsb3dQb3NpdGlvbihvKSx0Ll9wcm92aWRlRHVyYXRpb24obyksdC5fc2lnbmFsUmVhZHkoKX1pZihlLnN5bmNWb2x1bWUmJihyLnNldFZvbHVtZSh0Ll92b2x1bWUpLHIuc2V0TXV0ZWQodC5fbXV0ZWQpLHQuX2luc3RhbmNlTG9jayE9PW4pKXJldHVybjt2YXIgaT10LmdldFNlZWtTdGF0ZSgpO2lmKGUuc3luY1Bvc2l0aW9uKXt0Ll9sb2dnZXIuZGVidWcoXCJTZWVraW5nIHRvIG1hdGNoIHBvc2l0aW9uLlwiKTt2YXIgcz10LmdldFBvc2l0aW9uKCk7ci5nZXRQb3NpdGlvbigpIT09cz9yLnNlZWsocyk6KHQuX2xvZ2dlci5kZWJ1ZyhcIlNraXBwaW5nIHNlZWsgYmVjYXVzZSBhbHJlYWR5IGF0IHNhbWUgcG9zaXRpb24uXCIpLHQuaXNSZWFkeSgpJiZpJiZcIklOX1BST0dSRVNTXCI9PT1pLnN0YXRlJiZ0Ll9zaWduYWxTZWVrQ29tcGxldGUoKSl9ZWxzZSBpZihpJiZcIklOX1BST0dSRVNTXCI9PT1pLnN0YXRlKXQuX2xvZ2dlci5kZWJ1ZyhcIlNlZWtpbmcgdG8gbWF0Y2ggcG9zaXRpb24gYmVjYXVzZSBhIHNlZWsgaGFzIGJlZW4gcXVldWVkLlwiKSxyLnNlZWsodC5nZXRQb3NpdGlvbigpKTtlbHNle3ZhciB1PXIuZ2V0U2Vla1N0YXRlKCk7dSYmXCJJTl9QUk9HUkVTU1wiPT09dS5zdGF0ZSYmKHQuX2xvZ2dlci5kZWJ1ZyhcIlNlZWtpbmcgb24gcHJveHkgdG8gbWF0Y2ggc2VlayB0aGF0IGlzIGluIHByb2dyZXNzIG9uIHByb3ZpZGVkIHBsYXllci5cIiksdC5zZWVrKHUucG9zaXRpb24pKX1pZih0Ll9pbnN0YW5jZUxvY2shPT1uKXJldHVybjtpZihyLmlzQWN0dWFsbHlQbGF5aW5nKCk/KHQuX2xvZ2dlci5kZWJ1ZyhcIlByb3ZpZGVkIHBsYXllciBpcyBhbHJlYWR5IHBsYXlpbmcuXCIpLHQuX25vdGlmeVBsYXlpbmcoITApKTpyLmlzUGxheWluZygpPyh0Ll9sb2dnZXIuZGVidWcoXCJQcm92aWRlZCBwbGF5ZXIgaXMgcHJlcGFyaW5nIHRvIHBsYXkuXCIpLHQucGxheSgpKTp0LmlzUGxheWluZygpPyh0Ll9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIHBsYXkoKSBvbiBwcm92aWRlZCBwbGF5ZXIgdG8gbWF0Y2ggcHJveHkuXCIpLHQuX3BsYXlBbmRIYW5kbGVBYm9ydChyKSk6dC5pc1JlYWR5KCkmJnQuaXNBY3R1YWxseVBsYXlpbmcoKSYmKHQuX2xvZ2dlci5kZWJ1ZyhcIlN3aXRjaGluZyB0byBwYXVzZWQgc3RhdGUsIGFzIHByb3ZpZGVkIHBsYXllciBhbmQgcHJveHkgaW50ZW5kZWQgc3RhdGUgaXMgcGF1c2VkLlwiKSx0Ll9ub3RpZnlQbGF5aW5nKCExKSksdC5faW5zdGFuY2VMb2NrIT09bilyZXR1cm47dC5fc3luY2VkPSEwfWNhdGNoKGUpe3QuX3RyaWdnZXJFcnJvcihuZXcgYS5QbGF5ZXJGYXRhbEVycm9yKFwiVW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCB3aGlsc3Qgc3luY2luZy5cIixlKSl9fSkpfSx0LnByb3RvdHlwZS5fcGxheUFuZEhhbmRsZUFib3J0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbmNlTG9jazt0aGlzLl9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIHBsYXkoKSBvbiBwcm92aWRlZCBwbGF5ZXIuXCIpLGUucGxheSgpLHRoaXMuX2luc3RhbmNlTG9jaz09PXQmJiFlLmlzUGxheWluZygpJiZ0aGlzLmlzUGxheWluZygpJiYodGhpcy5fbG9nZ2VyLmRlYnVnKFwiUHJvdmlkZWQgcGxheWVyIHdhcyBub3QgcGxheWluZyBhZnRlciBwbGF5KCkgY2FsbCBjb21wbGV0ZWQuXCIpLHRoaXMuaXNBY3R1YWxseVBsYXlpbmcoKT8odGhpcy5fdHJpZ2dlckVycm9yKG5ldyBpLlBsYXllckVycm9yKFwiUGF1c2VkIGJlY2F1c2UgYSBwbGF5ZXIgd2FzIHByb3ZpZGVkIHRoYXQgcmVmdXNlZCB0byBwbGF5LlwiKSksdGhpcy5fbm90aWZ5UGxheWluZyghMSkpOnRoaXMucGF1c2UoKSl9LHQucHJvdG90eXBlLl9wYXVzZUFuZEhhbmRsZUFib3J0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbmNlTG9jazt0aGlzLl9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIHBhdXNlKCkgb24gcHJvdmlkZWQgcGxheWVyLlwiKSxlLnBhdXNlKCksdGhpcy5faW5zdGFuY2VMb2NrPT09dCYmZS5pc1BsYXlpbmcoKSYmIXRoaXMuaXNQbGF5aW5nKCkmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJQcm92aWRlZCBwbGF5ZXIgd2FzIG5vdCBwYXVzZWQgYWZ0ZXIgcGF1c2UoKSBjYWxsIGNvbXBsZXRlZC5cIiksdGhpcy5wbGF5KCkpfSx0LnByb3RvdHlwZS5fdW5zeW5jPWZ1bmN0aW9uKCl7aWYodGhpcy5fbG9nZ2VyLmRlYnVnKFwiVW5zeW5jaW5nLi4uXCIpLHRoaXMuX2NoYW5nZUhhbmRsZXImJih0aGlzLl9jaGFuZ2VIYW5kbGVyLnJlbW92ZSgpLHRoaXMuX2NoYW5nZUhhbmRsZXI9bnVsbCksdGhpcy5fZXJyb3JIYW5kbGVyJiYodGhpcy5fZXJyb3JIYW5kbGVyLnJlbW92ZSgpLHRoaXMuX2Vycm9ySGFuZGxlcj1udWxsKSwhdGhpcy5fc3luY2VkKXJldHVybiB2b2lkIHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlVuc3luY2VkLiAoU3luYyBuZXZlciBjb21wbGV0ZWQpXCIpO3RoaXMuX3N5bmNlZD0hMSx0aGlzLl91bnN5bmNJblByb2dyZXNzPSEwO3ZhciBlPXRoaXMuX3BsYXllcjtpZihlKXRyeXt0aGlzLl92b2x1bWU9ZS5nZXRWb2x1bWUoKSx0aGlzLl9tdXRlZD1lLmdldE11dGVkKCksdGhpcy5fbGFzdFBsYXllclBvc2l0aW9uPWUuZ2V0UG9zaXRpb24oKX1jYXRjaChlKXt0aGlzLl9sb2dnZXIuZXJyb3IoXCJFcnJvciB3aGlsc3QgdW5zeW5jaW5nLlwiLGUpfXRoaXMuX3Vuc3luY0luUHJvZ3Jlc3M9ITEsdGhpcy5fbG9nZ2VyLmRlYnVnKFwiVW5zeW5jZWQuXCIsdGhpcy5pc1BsYXlpbmcoKSx0aGlzLmlzQWN0dWFsbHlQbGF5aW5nKCkpfSx0fShvLkJhc2VQbGF5ZXIpO3QuUHJveHlQbGF5ZXJCYXNlPWR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbjshZnVuY3Rpb24oZSl7ZVtlLkxPQURJTkc9MF09XCJMT0FESU5HXCIsZVtlLlBMQVlJTkc9MV09XCJQTEFZSU5HXCIsZVtlLlBBVVNFRD0yXT1cIlBBVVNFRFwiLGVbZS5ERUFEPTNdPVwiREVBRFwifShuPXQuU3RhdGV8fCh0LlN0YXRlPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24odCxuKXsvKiFcblx0XHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdFx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0XHQgKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG5cdFx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHRcdCAqIEB2ZXJzaW9uICAgNC4wLjVcblx0XHQgKi9cbiFmdW5jdGlvbih0LHIpe2UuZXhwb3J0cz1yKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV8fFwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZX1mdW5jdGlvbiBvKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9ZnVuY3Rpb24gaShlKXtRPWV9ZnVuY3Rpb24gYShlKXtZPWV9ZnVuY3Rpb24gcygpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0Lm5leHRUaWNrKGYpfX1mdW5jdGlvbiB1KCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEo/ZnVuY3Rpb24oKXtKKGYpfTpkKCl9ZnVuY3Rpb24gbCgpe3ZhciBlPTAsdD1uZXcgJChmKSxyPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO3JldHVybiB0Lm9ic2VydmUocix7Y2hhcmFjdGVyRGF0YTohMH0pLGZ1bmN0aW9uKCl7ci5kYXRhPWU9KytlJTJ9fWZ1bmN0aW9uIGMoKXt2YXIgZT1uZXcgTWVzc2FnZUNoYW5uZWw7cmV0dXJuIGUucG9ydDEub25tZXNzYWdlPWYsZnVuY3Rpb24oKXtyZXR1cm4gZS5wb3J0Mi5wb3N0TWVzc2FnZSgwKX19ZnVuY3Rpb24gZCgpe3ZhciBlPXNldFRpbWVvdXQ7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUoZiwxKX19ZnVuY3Rpb24gZigpe2Zvcih2YXIgZT0wO2U8VztlKz0yKXt2YXIgdD1yZVtlXSxyPXJlW2UrMV07dChyKSxyZVtlXT12b2lkIDAscmVbZSsxXT12b2lkIDB9Vz0wfWZ1bmN0aW9uIHAoKXt0cnl7dmFyIGU9cigzOCk7cmV0dXJuIEo9ZS5ydW5Pbkxvb3B8fGUucnVuT25Db250ZXh0LHUoKX1jYXRjaChlKXtyZXR1cm4gZCgpfX1mdW5jdGlvbiBoKGUsdCl7dmFyIHI9YXJndW1lbnRzLG49dGhpcyxvPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGcpO3ZvaWQgMD09PW9bb2VdJiZMKG8pO3ZhciBpPW4uX3N0YXRlO3JldHVybiBpPyFmdW5jdGlvbigpe3ZhciBlPXJbaS0xXTtZKGZ1bmN0aW9uKCl7cmV0dXJuIGsoaSxvLGUsbi5fcmVzdWx0KX0pfSgpOkEobixvLGUsdCksb31mdW5jdGlvbiBfKGUpe3ZhciB0PXRoaXM7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuY29uc3RydWN0b3I9PT10KXJldHVybiBlO3ZhciByPW5ldyB0KGcpO3JldHVybiBQKHIsZSkscn1mdW5jdGlvbiBnKCl7fWZ1bmN0aW9uIHkoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIil9ZnVuY3Rpb24gdigpe3JldHVybiBuZXcgVHlwZUVycm9yKFwiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLlwiKX1mdW5jdGlvbiBtKGUpe3RyeXtyZXR1cm4gZS50aGVufWNhdGNoKGUpe3JldHVybiB1ZS5lcnJvcj1lLHVlfX1mdW5jdGlvbiBFKGUsdCxyLG4pe3RyeXtlLmNhbGwodCxyLG4pfWNhdGNoKGUpe3JldHVybiBlfX1mdW5jdGlvbiBiKGUsdCxyKXtZKGZ1bmN0aW9uKGUpe3ZhciBuPSExLG89RShyLHQsZnVuY3Rpb24ocil7bnx8KG49ITAsdCE9PXI/UChlLHIpOlQoZSxyKSl9LGZ1bmN0aW9uKHQpe258fChuPSEwLHgoZSx0KSl9LFwiU2V0dGxlOiBcIisoZS5fbGFiZWx8fFwiIHVua25vd24gcHJvbWlzZVwiKSk7IW4mJm8mJihuPSEwLHgoZSxvKSl9LGUpfWZ1bmN0aW9uIHcoZSx0KXt0Ll9zdGF0ZT09PWFlP1QoZSx0Ll9yZXN1bHQpOnQuX3N0YXRlPT09c2U/eChlLHQuX3Jlc3VsdCk6QSh0LHZvaWQgMCxmdW5jdGlvbih0KXtyZXR1cm4gUChlLHQpfSxmdW5jdGlvbih0KXtyZXR1cm4geChlLHQpfSl9ZnVuY3Rpb24gUyhlLHQscil7dC5jb25zdHJ1Y3Rvcj09PWUuY29uc3RydWN0b3ImJnI9PT1oJiZ0LmNvbnN0cnVjdG9yLnJlc29sdmU9PT1fP3coZSx0KTpyPT09dWU/eChlLHVlLmVycm9yKTp2b2lkIDA9PT1yP1QoZSx0KTpvKHIpP2IoZSx0LHIpOlQoZSx0KX1mdW5jdGlvbiBQKHQscil7dD09PXI/eCh0LHkoKSk6ZShyKT9TKHQscixtKHIpKTpUKHQscil9ZnVuY3Rpb24gUihlKXtlLl9vbmVycm9yJiZlLl9vbmVycm9yKGUuX3Jlc3VsdCksTyhlKX1mdW5jdGlvbiBUKGUsdCl7ZS5fc3RhdGU9PT1pZSYmKGUuX3Jlc3VsdD10LGUuX3N0YXRlPWFlLDAhPT1lLl9zdWJzY3JpYmVycy5sZW5ndGgmJlkoTyxlKSl9ZnVuY3Rpb24geChlLHQpe2UuX3N0YXRlPT09aWUmJihlLl9zdGF0ZT1zZSxlLl9yZXN1bHQ9dCxZKFIsZSkpfWZ1bmN0aW9uIEEoZSx0LHIsbil7dmFyIG89ZS5fc3Vic2NyaWJlcnMsaT1vLmxlbmd0aDtlLl9vbmVycm9yPW51bGwsb1tpXT10LG9baSthZV09cixvW2krc2VdPW4sMD09PWkmJmUuX3N0YXRlJiZZKE8sZSl9ZnVuY3Rpb24gTyhlKXt2YXIgdD1lLl9zdWJzY3JpYmVycyxyPWUuX3N0YXRlO2lmKDAhPT10Lmxlbmd0aCl7Zm9yKHZhciBuPXZvaWQgMCxvPXZvaWQgMCxpPWUuX3Jlc3VsdCxhPTA7YTx0Lmxlbmd0aDthKz0zKW49dFthXSxvPXRbYStyXSxuP2socixuLG8saSk6byhpKTtlLl9zdWJzY3JpYmVycy5sZW5ndGg9MH19ZnVuY3Rpb24gTSgpe3RoaXMuZXJyb3I9bnVsbH1mdW5jdGlvbiBEKGUsdCl7dHJ5e3JldHVybiBlKHQpfWNhdGNoKGUpe3JldHVybiBsZS5lcnJvcj1lLGxlfX1mdW5jdGlvbiBrKGUsdCxyLG4pe3ZhciBpPW8ociksYT12b2lkIDAscz12b2lkIDAsdT12b2lkIDAsbD12b2lkIDA7aWYoaSl7aWYoYT1EKHIsbiksYT09PWxlPyhsPSEwLHM9YS5lcnJvcixhPW51bGwpOnU9ITAsdD09PWEpcmV0dXJuIHZvaWQgeCh0LHYoKSl9ZWxzZSBhPW4sdT0hMDt0Ll9zdGF0ZSE9PWllfHwoaSYmdT9QKHQsYSk6bD94KHQscyk6ZT09PWFlP1QodCxhKTplPT09c2UmJngodCxhKSl9ZnVuY3Rpb24gSShlLHQpe3RyeXt0KGZ1bmN0aW9uKHQpe1AoZSx0KX0sZnVuY3Rpb24odCl7eChlLHQpfSl9Y2F0Y2godCl7eChlLHQpfX1mdW5jdGlvbiBDKCl7cmV0dXJuIGNlKyt9ZnVuY3Rpb24gTChlKXtlW29lXT1jZSsrLGUuX3N0YXRlPXZvaWQgMCxlLl9yZXN1bHQ9dm9pZCAwLGUuX3N1YnNjcmliZXJzPVtdfWZ1bmN0aW9uIGooZSx0KXt0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yPWUsdGhpcy5wcm9taXNlPW5ldyBlKGcpLHRoaXMucHJvbWlzZVtvZV18fEwodGhpcy5wcm9taXNlKSxLKHQpPyh0aGlzLl9pbnB1dD10LHRoaXMubGVuZ3RoPXQubGVuZ3RoLHRoaXMuX3JlbWFpbmluZz10Lmxlbmd0aCx0aGlzLl9yZXN1bHQ9bmV3IEFycmF5KHRoaXMubGVuZ3RoKSwwPT09dGhpcy5sZW5ndGg/VCh0aGlzLnByb21pc2UsdGhpcy5fcmVzdWx0KToodGhpcy5sZW5ndGg9dGhpcy5sZW5ndGh8fDAsdGhpcy5fZW51bWVyYXRlKCksMD09PXRoaXMuX3JlbWFpbmluZyYmVCh0aGlzLnByb21pc2UsdGhpcy5fcmVzdWx0KSkpOngodGhpcy5wcm9taXNlLE4oKSl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgRXJyb3IoXCJBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXlcIil9ZnVuY3Rpb24gVShlKXtyZXR1cm4gbmV3IGoodGhpcyxlKS5wcm9taXNlfWZ1bmN0aW9uIEYoZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHQoSyhlKT9mdW5jdGlvbihyLG4pe2Zvcih2YXIgbz1lLmxlbmd0aCxpPTA7aTxvO2krKyl0LnJlc29sdmUoZVtpXSkudGhlbihyLG4pfTpmdW5jdGlvbihlLHQpe3JldHVybiB0KG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuXCIpKX0pfWZ1bmN0aW9uIEIoZSl7dmFyIHQ9dGhpcyxyPW5ldyB0KGcpO3JldHVybiB4KHIsZSkscn1mdW5jdGlvbiBxKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3JcIil9ZnVuY3Rpb24gSCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIil9ZnVuY3Rpb24geihlKXt0aGlzW29lXT1DKCksdGhpcy5fcmVzdWx0PXRoaXMuX3N0YXRlPXZvaWQgMCx0aGlzLl9zdWJzY3JpYmVycz1bXSxnIT09ZSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJnEoKSx0aGlzIGluc3RhbmNlb2Ygej9JKHRoaXMsZSk6SCgpKX1mdW5jdGlvbiBHKCl7dmFyIGU9dm9pZCAwO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuKWU9bjtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmKWU9c2VsZjtlbHNlIHRyeXtlPUZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnRcIil9dmFyIHQ9ZS5Qcm9taXNlO2lmKHQpe3ZhciByPW51bGw7dHJ5e3I9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQucmVzb2x2ZSgpKX1jYXRjaChlKXt9aWYoXCJbb2JqZWN0IFByb21pc2VdXCI9PT1yJiYhdC5jYXN0KXJldHVybn1lLlByb21pc2U9en12YXIgVj12b2lkIDA7Vj1BcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfTt2YXIgSz1WLFc9MCxKPXZvaWQgMCxRPXZvaWQgMCxZPWZ1bmN0aW9uKGUsdCl7cmVbV109ZSxyZVtXKzFdPXQsVys9MiwyPT09VyYmKFE/UShmKTpuZSgpKX0sWD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDAsWj1YfHx7fSwkPVouTXV0YXRpb25PYnNlcnZlcnx8Wi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGVlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBzZWxmJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKHQpLHRlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OENsYW1wZWRBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGltcG9ydFNjcmlwdHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBNZXNzYWdlQ2hhbm5lbCxyZT1uZXcgQXJyYXkoMWUzKSxuZT12b2lkIDA7bmU9ZWU/cygpOiQ/bCgpOnRlP2MoKTp2b2lkIDA9PT1YP3AoKTpkKCk7dmFyIG9lPU1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNiksaWU9dm9pZCAwLGFlPTEsc2U9Mix1ZT1uZXcgTSxsZT1uZXcgTSxjZT0wO3JldHVybiBqLnByb3RvdHlwZS5fZW51bWVyYXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMubGVuZ3RoLHQ9dGhpcy5faW5wdXQscj0wO3RoaXMuX3N0YXRlPT09aWUmJnI8ZTtyKyspdGhpcy5fZWFjaEVudHJ5KHRbcl0scil9LGoucHJvdG90eXBlLl9lYWNoRW50cnk9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yLG49ci5yZXNvbHZlO2lmKG49PT1fKXt2YXIgbz1tKGUpO2lmKG89PT1oJiZlLl9zdGF0ZSE9PWllKXRoaXMuX3NldHRsZWRBdChlLl9zdGF0ZSx0LGUuX3Jlc3VsdCk7ZWxzZSBpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvKXRoaXMuX3JlbWFpbmluZy0tLHRoaXMuX3Jlc3VsdFt0XT1lO2Vsc2UgaWYocj09PXope3ZhciBpPW5ldyByKGcpO1MoaSxlLG8pLHRoaXMuX3dpbGxTZXR0bGVBdChpLHQpfWVsc2UgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyByKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSksdCl9ZWxzZSB0aGlzLl93aWxsU2V0dGxlQXQobihlKSx0KX0sai5wcm90b3R5cGUuX3NldHRsZWRBdD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5wcm9taXNlO24uX3N0YXRlPT09aWUmJih0aGlzLl9yZW1haW5pbmctLSxlPT09c2U/eChuLHIpOnRoaXMuX3Jlc3VsdFt0XT1yKSwwPT09dGhpcy5fcmVtYWluaW5nJiZUKG4sdGhpcy5fcmVzdWx0KX0sai5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7QShlLHZvaWQgMCxmdW5jdGlvbihlKXtyZXR1cm4gci5fc2V0dGxlZEF0KGFlLHQsZSl9LGZ1bmN0aW9uKGUpe3JldHVybiByLl9zZXR0bGVkQXQoc2UsdCxlKX0pfSx6LmFsbD1VLHoucmFjZT1GLHoucmVzb2x2ZT1fLHoucmVqZWN0PUIsei5fc2V0U2NoZWR1bGVyPWksei5fc2V0QXNhcD1hLHouX2FzYXA9WSx6LnByb3RvdHlwZT17Y29uc3RydWN0b3I6eix0aGVuOmgsY2F0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGUpfX0sei5wb2x5ZmlsbD1HLHouUHJvbWlzZT16LHp9KX0pLmNhbGwodCxyKDI3KSxyKDM3KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJERVBFTkRFTkNZX0VSUk9SXCJ9LHR9KG8uUGxheWVyRmF0YWxFcnJvcik7dC5EZXBlbmRlbmN5RXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7cmV0dXJuIGUuY2FsbCh0aGlzLHQscil8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJJTVBMRU1FTlRBVElPTl9FUlJPUlwifSx0fShvLlBsYXllckZhdGFsRXJyb3IpO3QuSW1wbGVtZW50YXRpb25FcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGUuY2FsbCh0aGlzLHR8fFwiVGhlIHBsYXllciBjYW5ub3QgcGxheSB0aGUgcHJvdmlkZWQgZGVzY3JpcHRvci5cIil8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJOT1RfU1VQUE9SVEVEX0VSUk9SXCJ9LHR9KG8uUGxheWVyRmF0YWxFcnJvcik7dC5Ob3RTdXBwb3J0ZWRFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig0KSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4pe3ZvaWQgMD09PW4mJihuPVwiVGhlIHBsYXllciB0aGF0IHRoZSBwcm94eSB3YXMgY29udHJvbGxpbmcgaGFkIGFuIGVycm9yLlwiKTt2YXIgbz1lLmNhbGwodGhpcyxuKXx8dGhpcztyZXR1cm4gby5fcHJvdmlkZWRQbGF5ZXJFcnJvcj10LG8uX3Byb3ZpZGVkUGxheWVyPXIsb31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlBST1hZX1BMQVlFUl9QUk9WSURFRF9QTEFZRVJfRVJST1JcIn0sdC5wcm90b3R5cGUuZ2V0UHJvdmlkZWRQbGF5ZXJFcnJvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm92aWRlZFBsYXllckVycm9yfSx0LnByb3RvdHlwZS5nZXRQcm92aWRlZFBsYXllcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm92aWRlZFBsYXllcn0sdH0oby5QbGF5ZXJFcnJvcik7dC5Qcm94eVByb3ZpZGVkUGxheWVyRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMiksbz1yKDE4KTt0LmFib3J0ZWRFcnJvcj1uZXcgRXJyb3IoXCJKb2IgYWJvcnRlZC5cIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09dCYmKHQ9e30pLHRoaXMuX2pvYj1lLHRoaXMuX29wdHM9dCx0aGlzLl9jb3VudGVyPTAsdGhpcy5fam9iQ29udHJvbD1udWxsLHRoaXMuX3Byb21pc2U9bnVsbCx0aGlzLl9qb2JDb21wbGV0ZWQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fam9iQ29udHJvbHx8KHRoaXMuX2pvYkNvbnRyb2w9dGhpcy5fam9iKCksdGhpcy5fcHJvbWlzZT10aGlzLl9qb2JDb250cm9sLnJlc3VsdCxvLmFsd2F5cyh0aGlzLl9wcm9taXNlLGZ1bmN0aW9uKCl7ZS5fam9iQ29tcGxldGVkPSEwLGUuX29wdHMuc3RvcmVSZXN1bHQ9PT0hMSYmKGUuX2pvYkNvbXBsZXRlZD0hMSxlLl9wcm9taXNlPW51bGwsZS5fam9iQ29udHJvbD1udWxsKX0pKTt2YXIgcj10aGlzLl9wcm9taXNlO3RoaXMuX2NvdW50ZXIrKzt2YXIgaT1uLmJ1aWxkRGVmZXJyZWQoKSxhPSExLHM9ITEsdT1bXSxsPVtdLGM9ZnVuY3Rpb24oKXtzfHwoYT0hMCxlLl9jb3VudGVyLS0pfTtyZXR1cm4gby5hbHdheXMocixjKSxyLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHUuZm9yRWFjaChmdW5jdGlvbih0KXt0cnl7dChlKX1jYXRjaChlKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGV9LDApfX0pLGkucmVzb2x2ZShlKSl9LGZ1bmN0aW9uKGUpe3N8fChsLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSxpLnJlamVjdChlKSl9KSx7d2hlbkNvbXBsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGkucHJvbWlzZX0sb25Db21wbGV0aW9uOmZ1bmN0aW9uKGUpe3UucHVzaChlKX0sb25FcnJvcjpmdW5jdGlvbihlKXtsLnB1c2goZSl9LGhhc0NvbXBsZXRlZDpmdW5jdGlvbigpe3JldHVybiBhfSxhYm9ydDpmdW5jdGlvbihyKXtzfHxhfHwocz0hMCwwPT09LS1lLl9jb3VudGVyJiYhZS5fam9iQ29tcGxldGVkJiZlLl9qb2JDb250cm9sJiZlLl9qb2JDb250cm9sLmFib3J0JiYoZS5fam9iQ29udHJvbC5hYm9ydChyKSxlLl9wcm9taXNlPW51bGwsZS5fam9iQ29udHJvbD1udWxsKSxsLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUodC5hYm9ydGVkRXJyb3IpfSksaS5yZWplY3QodC5hYm9ydGVkRXJyb3IpKX19fSxlfSgpO3QuQWJvcnRhYmxlSm9iPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUsdCl7cmV0dXJuIGUudGhlbih0LHQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuYWx3YXlzPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuIGN9ZnVuY3Rpb24gbygpe3JldHVybiBwfWZ1bmN0aW9uIGkoKXt2YXIgZT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaChoKTtpZihlJiZlLmxlbmd0aD49Myl7dmFyIHQ9cGFyc2VJbnQoZVsxXSwxMCkscj1wYXJzZUludChlWzJdLDEwKTtpZighaXNOYU4odCkmJiFpc05hTihyKSlyZXR1cm57bWFqb3I6dCxtaW5vcjpyfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBhKCl7cmV0dXJuIGR9ZnVuY3Rpb24gcygpe3JldHVybiBmfWZ1bmN0aW9uIHUoKXt2YXIgZT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaChfKTtpZihlJiZlLmxlbmd0aD49Myl7dmFyIHQ9cGFyc2VJbnQoZVsxXSwxMCkscj1wYXJzZUludChlWzJdLDEwKTtpZighaXNOYU4odCkmJiFpc05hTihyKSlyZXR1cm57bWFqb3I6dCxtaW5vcjpyfX1yZXR1cm4gbnVsbH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbD1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yP25hdmlnYXRvci51c2VyQWdlbnQ6XCJcIixjPSEvY2hyb21lfG9wZXJhL2kudGVzdChsKSYmL3NhZmFyaS9pLnRlc3QobCksZD1sLmluZGV4T2YoXCJNU0lFIFwiKT49MHx8bC5pbmRleE9mKFwiVHJpZGVudC9cIik+PTAsZj1sLmluZGV4T2YoXCJFZGdlL1wiKT49MCxwPWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKT49MCxoPS92ZXJzaW9uXFwvKFxcZCspXFwuKFxcZCspL2ksXz0vQ2hyb20oPzplfGl1bSlcXC8oWzAtOV0rKVxcLihbMC05XSspXFwuKFswLTldKykvO3QuaXNTYWZhcmk9bix0LmlzRmlyZWZveD1vLHQuZ2V0U2FmYXJpVmVyc2lvbj1pLHQuaXNJRT1hLHQuaXNFZGdlPXMsdC5nZXRDaHJvbWVWZXJzaW9uPXV9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDYpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5faW5DYWxsYmFjaz0hMSx0aGlzLl9vbkV4aXQ9ZSx0aGlzLl9vbkVudGVyPXR8fG51bGx9cmV0dXJuIGUucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5faW5DYWxsYmFjaylyZXR1cm4gZT9lKHRoaXMuX29uRW50ZXJSZXN1bHRSZXRyaWV2ZXIpOnZvaWQgMDt0aGlzLl9pbkNhbGxiYWNrPSEwO3ZhciByPVtdLG89ITE7dGhpcy5fb25FbnRlciYmKHRoaXMuX29uRW50ZXJSZXN1bHRSZXRyaWV2ZXI9e2dldFJlc3VsdDpmdW5jdGlvbihlKXtvP24uZGVmZXJFeGNlcHRpb24oZnVuY3Rpb24oKXtyZXR1cm4gZSh0Ll9vbkVudGVyRXJyb3IsdC5fb25FbnRlclJlc3VsdCl9KTpyLnB1c2goZSl9fSk7dHJ5e3ZhciBpPWU/ZSh0aGlzLl9vbkVudGVyUmVzdWx0UmV0cmlldmVyKTp2b2lkIDA7aWYodGhpcy5fb25FbnRlcil7dGhpcy5fb25FbnRlckVycm9yPXZvaWQgMCx0aGlzLl9vbkVudGVyUmVzdWx0PXZvaWQgMDt0cnl7dGhpcy5fb25FbnRlclJlc3VsdD10aGlzLl9vbkVudGVyKCl9Y2F0Y2goZSl7dGhpcy5fb25FbnRlckVycm9yPWV9bz0hMCxyLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIG4uZGVmZXJFeGNlcHRpb24oZnVuY3Rpb24oKXtyZXR1cm4gZSh0Ll9vbkVudGVyRXJyb3IsdC5fb25FbnRlclJlc3VsdCl9KX0pfXJldHVybiBpfWZpbmFsbHl7dGhpcy5faW5DYWxsYmFjaz0hMSxuLmRlZmVyRXhjZXB0aW9uKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uRXhpdCh0Ll9vbkVudGVyRXJyb3IsdC5fb25FbnRlclJlc3VsdCl9KX19LGV9KCk7dC5PbkV4aXQ9b30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuKXt2b2lkIDA9PT1uJiYobj17fSksdGhpcy5fdXJsPWUsdGhpcy5fcHJvdG9jb2w9dCx0aGlzLl9mb3JtYXQ9cix0aGlzLl9zZWdtZW50Rm9ybWF0PW59cmV0dXJuIGUucHJvdG90eXBlLmdldFVybD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9LGUucHJvdG90eXBlLmdldFByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3RvY29sfSxlLnByb3RvdHlwZS5nZXRGb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9ybWF0fSxlLnByb3RvdHlwZS5nZXRTZWdtZW50Rm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRGb3JtYXR9LGV9KCk7dC5EZXNjcmlwdG9yPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbixvPXIoMTMpLGk9cigxNSksYT1yKDI4KSxzPXIoMTQpLHU9cig1KSxsPXIoNCksYz1yKDApOyFmdW5jdGlvbihlKXtlLlBsYXllckVycm9yPWwuUGxheWVyRXJyb3IsZS5QbGF5ZXJGYXRhbEVycm9yPWMuUGxheWVyRmF0YWxFcnJvcixlLkRlcGVuZGVuY3lFcnJvcj1vLkRlcGVuZGVuY3lFcnJvcixlLk5vdFN1cHBvcnRlZEVycm9yPWkuTm90U3VwcG9ydGVkRXJyb3IsZS5VUkxVcGRhdGVFcnJvcj1hLlVSTFVwZGF0ZUVycm9yLGUuSW1wbGVtZW50YXRpb25FcnJvcj1zLkltcGxlbWVudGF0aW9uRXJyb3IsZS5Qcm94eVByb3ZpZGVkUGxheWVyRmF0YWxFcnJvcj11LlByb3h5UHJvdmlkZWRQbGF5ZXJGYXRhbEVycm9yfShuPXQuZXJyb3JzfHwodC5lcnJvcnM9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuLG89cigyKSxpPXIoMTcpLGE9cigzMykscz1yKDIwKSx1PXIoNyksbD1yKDMwKSxjPXIoOCksZD1yKDMyKSxmPXIoMTgpLHA9cigzMSksaD1yKDI5KSxfPXIoNiksZz1yKDE5KSx5PXIoMzQpOyFmdW5jdGlvbihlKXtlLk9uRXhpdD1zLk9uRXhpdCxlLmZpbmQ9dS5maW5kLGUuUHJvbWlzZT1kLlByb21pc2UsZS5hbHdheXM9Zi5hbHdheXMsZS5jb21wYWN0PXAuY29tcGFjdCxlLmRlZmVyRXhjZXB0aW9uPV8uZGVmZXJFeGNlcHRpb247dmFyIHQ7IWZ1bmN0aW9uKGUpe2UuYnVpbGRDYWNoZT1sLmJ1aWxkQ2FjaGV9KHQ9ZS5jYWNoZXx8KGUuY2FjaGU9e30pKTt2YXIgcjshZnVuY3Rpb24oZSl7ZS5idWlsZERlZmVycmVkPW8uYnVpbGREZWZlcnJlZH0ocj1lLmRlZmVycmVkfHwoZS5kZWZlcnJlZD17fSkpO3ZhciBuOyFmdW5jdGlvbihlKXtlLmdldEV4dGVuc2lvbj15LmdldEV4dGVuc2lvbixlLmJ1aWxkQWJzb2x1dGVVcmw9eS5idWlsZEFic29sdXRlVXJsfShuPWUudXJsfHwoZS51cmw9e30pKTt2YXIgdjshZnVuY3Rpb24oZSl7ZS5BYm9ydGFibGVKb2I9aS5BYm9ydGFibGVKb2IsZS5hYm9ydGVkRXJyb3I9aS5hYm9ydGVkRXJyb3J9KHY9ZS5hYm9ydGFibGVKb2J8fChlLmFib3J0YWJsZUpvYj17fSkpO3ZhciBtOyFmdW5jdGlvbihlKXtlLm5vTW9yZUF0dGVtcHRzRXJyb3I9YS5ub01vcmVBdHRlbXB0c0Vycm9yLGUucmV0cnk9YS5yZXRyeSxlLmJ1aWxkRXhwb25lbnRpYWxEZWxheUNhbGN1bGF0b3I9YS5idWlsZEV4cG9uZW50aWFsRGVsYXlDYWxjdWxhdG9yfShtPWUucmV0cnl8fChlLnJldHJ5PXt9KSk7dmFyIEU7IWZ1bmN0aW9uKGUpe2UuaXNTYWZhcmk9Zy5pc1NhZmFyaSxlLmdldFNhZmFyaVZlcnNpb249Zy5nZXRTYWZhcmlWZXJzaW9uLGUuaXNJRT1nLmlzSUUsZS5pc0VkZ2U9Zy5pc0VkZ2UsZS5pc0ZpcmVmb3g9Zy5pc0ZpcmVmb3gsZS5nZXRDaHJvbWVWZXJzaW9uPWcuZ2V0Q2hyb21lVmVyc2lvbn0oRT1lLmJyb3dzZXJ8fChlLmJyb3dzZXI9e30pKTt2YXIgYjshZnVuY3Rpb24oZSl7ZS5jb21iaW5lPWguY29tYmluZSxlLm51bWJlclRvVWludDhBcnJheT1oLm51bWJlclRvVWludDhBcnJheSxlLmNyZWF0ZVZpbnRCdWZmZXI9aC5jcmVhdGVWaW50QnVmZmVyfShiPWUuYXJyYXlCdWZmZXJ8fChlLmFycmF5QnVmZmVyPXt9KSk7dmFyIHc7IWZ1bmN0aW9uKGUpe2Uubm93PWMubm93fSh3PWUudGltZXx8KGUudGltZT17fSkpfShuPXQuaGVscGVyc3x8KHQuaGVscGVycz17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigyKSxvPXIoMSksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9hYm9ydGVkPSExLHRoaXMuX3JlcXVlc3RTdGFydGVkPSExLHRoaXMuX3Jlc3BvbnNlPW51bGwsdGhpcy5fcmVzcG9uc2VEZWZlcnJlZD1uLmJ1aWxkRGVmZXJyZWQoKSx0aGlzLl9yZXF1ZXN0U3RhcnRlZERlZmVycmVkPW4uYnVpbGREZWZlcnJlZCgpLHRoaXMuX29uUmVxdWVzdFN0YXJ0PW5ldyBvLkV2ZW50RGlzcGF0Y2hlcix0aGlzLm9uUmVxdWVzdFN0YXJ0PXRoaXMuX29uUmVxdWVzdFN0YXJ0LmdldEhhbmRsZSgpLHRoaXMud2hlblJlcXVlc3RTdGFydGVkPXRoaXMuX3JlcXVlc3RTdGFydGVkRGVmZXJyZWQucHJvbWlzZX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0UmVzcG9uc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzcG9uc2VEZWZlcnJlZC5wcm9taXNlfSxlLnByb3RvdHlwZS5oYXNSZXF1ZXN0U3RhcnRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXF1ZXN0U3RhcnRlZH0sZS5wcm90b3R5cGUuaGFzQ29tcGxldGVkPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9yZXNwb25zZXx8dGhpcy5fYWJvcnRlZH0sZS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fYWJvcnRlZCl7aWYodGhpcy5fYWJvcnRlZD0hMCx0aGlzLl9yZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGhhdmUgYSByZXNwb25zZS5cIik7dGhpcy5fYWJvcnQoKSx0aGlzLl9yZXNwb25zZURlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoXCJBYm9ydGVkLlwiKSksdGhpcy5fcmVxdWVzdFN0YXJ0ZWR8fHRoaXMuX3JlcXVlc3RTdGFydGVkRGVmZXJyZWQucmVqZWN0KG5ldyBFcnJvcihcIkFib3J0ZWQuXCIpKX19LGUucHJvdG90eXBlLl9wcm92aWRlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWJvcnRlZCl0aHJvdyBuZXcgRXJyb3IoXCJSZXNwb25zZSBhYm9ydGVkLlwiKTtpZih0aGlzLl9yZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoXCJSZXNwb25zZSBhbHJlYWR5IHByb3ZpZGVkLlwiKTtpZihlIGluc3RhbmNlb2YgRXJyb3IpdGhpcy5fYWJvcnRlZD0hMCx0aGlzLl9yZXNwb25zZURlZmVycmVkLnJlamVjdChlKTtlbHNle2lmKCF0aGlzLl9yZXF1ZXN0U3RhcnRlZCl0aHJvdyBuZXcgRXJyb3IoXCJSZXF1ZXN0IGhhc24ndCBzdGFydGVkIHlldC5cIik7dGhpcy5fcmVzcG9uc2U9ZSx0aGlzLl9yZXNwb25zZURlZmVycmVkLnJlc29sdmUoZSl9fSxlLnByb3RvdHlwZS5fc2lnbmFsUmVxdWVzdFN0YXJ0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYWJvcnRlZCl0aHJvdyBuZXcgRXJyb3IoXCJSZXNwb25zZSBhYm9ydGVkLlwiKTtpZih0aGlzLl9yZXF1ZXN0U3RhcnRlZCl0aHJvdyBuZXcgRXJyb3IoXCJSZXF1ZXN0IGFscmVhZHkgc3RhcnRlZC5cIik7dGhpcy5fcmVxdWVzdFN0YXJ0ZWQ9ITAsdGhpcy5fcmVxdWVzdFN0YXJ0ZWREZWZlcnJlZC5yZXNvbHZlKHZvaWQgMCksdGhpcy5fb25SZXF1ZXN0U3RhcnQuZGlzcGF0Y2godm9pZCAwKX0sZX0oKTt0LkxvYWRlclJlcXVlc3Q9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMSksaT1yKDMpLGE9cigxMCkscz1yKDUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gci5fb25QbGF5ZXJQcm92aWRlZD1uZXcgby5FdmVudERpc3BhdGNoZXIsci5fb25QbGF5ZXJSZW1vdmVkPW5ldyBvLkV2ZW50RGlzcGF0Y2hlcixyLl9zaG91bGRQYXNzVGhyb3VnaEZhdGFsRXJyb3JzPSEhdC5zaG91bGRQYXNzVGhyb3VnaEZhdGFsRXJyb3JzLHIub25QbGF5ZXJQcm92aWRlZD1yLl9vblBsYXllclByb3ZpZGVkLmdldEhhbmRsZSgpLHIub25QbGF5ZXJSZW1vdmVkPXIuX29uUGxheWVyUmVtb3ZlZC5nZXRIYW5kbGUoKSxyLl9sb2dnZXI9aS5wcmVmaXhMb2dnZXIoci5fbG9nZ2VyLFwiUHJveHlQbGF5ZXJcIikscn1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLnByb3ZpZGVQbGF5ZXI9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD17c3luY1Bvc2l0aW9uOiEwLHN5bmNWb2x1bWU6ITB9KSx0aGlzLl9wcm92aWRlUGxheWVyKGUsdCksdGhpcy5fb25QbGF5ZXJQcm92aWRlZC5kaXNwYXRjaChlKX0sdC5wcm90b3R5cGUucmVtb3ZlUGxheWVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0UGxheWVyKCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcGxheWVyIHRvIHJlbW92ZS5cIik7dGhpcy5fcmVtb3ZlUGxheWVyKCksdGhpcy5fb25QbGF5ZXJSZW1vdmVkLmRpc3BhdGNoKGUpfSx0LnByb3RvdHlwZS5zZXRJbml0aWFsRHVyYXRpb249ZnVuY3Rpb24oZSl7dGhpcy5fc2V0SW5pdGlhbER1cmF0aW9uKGUpfSx0LnByb3RvdHlwZS5nZXRQbGF5ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UGxheWVyKCl9LHQucHJvdG90eXBlLl9oYW5kbGVGYXRhbEVycm9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fc2hvdWxkUGFzc1Rocm91Z2hGYXRhbEVycm9ycz90aGlzLl90cmlnZ2VyRXJyb3IoZSk6dGhpcy5fdHJpZ2dlckVycm9yKG5ldyBzLlByb3h5UHJvdmlkZWRQbGF5ZXJGYXRhbEVycm9yKGUsdCkpfSx0fShhLlByb3h5UGxheWVyQmFzZSk7dC5Qcm94eVBsYXllcj11fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7aWYodGhpcy5zdGFydD1lLHRoaXMuZHVyYXRpb249dCx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJEdXJhdGlvbiBtdXN0IGJlID49IDAuXCIpO3RoaXMuZW5kPWUrdH1yZXR1cm4gZS5ub3JtYWxpemVSYXdUaW1lUmFuZ2VzPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNsaWNlKDApLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdGFydC10LnN0YXJ0fSkucmVkdWNlKGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1lLmxlbmd0aC0xO3JldHVybiByPjAmJmVbbl0uZW5kPj10LnN0YXJ0P2Vbbl0uZW5kPXQuZW5kOmUucHVzaCh0KSxlfSxbXSl9LGUubm9ybWFsaXplPWZ1bmN0aW9uKHQpe3JldHVybiBlLm5vcm1hbGl6ZVJhd1RpbWVSYW5nZXModC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue3N0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfX0pKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQuc3RhcnQsdC5lbmQtdC5zdGFydCl9KX0sZS5nZXRDb3ZlcmFnZT1mdW5jdGlvbih0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJuIG5ldyBlKDAsMCk7dmFyIHI9MS8wLG49MDtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RhcnQ8ciYmKHI9ZS5zdGFydCksZS5lbmQ+biYmKG49ZS5lbmQpfSksbmV3IGUocixuLXIpfSxlLnJhbmdlc0NvbnRhaW5UaW1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdC5jb250YWluc1RpbWUoZSl9KX0sZS5wcm90b3R5cGUuY29udGFpbnNUaW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnN0YXJ0PD1lJiZ0aGlzLmVuZD5lfSxlfSgpO3QuVGltZVJhbmdlPW59LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3Rocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gbigpe3Rocm93IG5ldyBFcnJvcihcImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBvKGUpe2lmKGM9PT1zZXRUaW1lb3V0KXJldHVybiBzZXRUaW1lb3V0KGUsMCk7aWYoKGM9PT1yfHwhYykmJnNldFRpbWVvdXQpcmV0dXJuIGM9c2V0VGltZW91dCxzZXRUaW1lb3V0KGUsMCk7dHJ5e3JldHVybiBjKGUsMCl9Y2F0Y2godCl7dHJ5e3JldHVybiBjLmNhbGwobnVsbCxlLDApfWNhdGNoKHQpe3JldHVybiBjLmNhbGwodGhpcyxlLDApfX19ZnVuY3Rpb24gaShlKXtpZihkPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoZSk7aWYoKGQ9PT1ufHwhZCkmJmNsZWFyVGltZW91dClyZXR1cm4gZD1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtyZXR1cm4gZChlKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGQuY2FsbChudWxsLGUpfWNhdGNoKHQpe3JldHVybiBkLmNhbGwodGhpcyxlKX19fWZ1bmN0aW9uIGEoKXtfJiZwJiYoXz0hMSxwLmxlbmd0aD9oPXAuY29uY2F0KGgpOmc9LTEsaC5sZW5ndGgmJnMoKSl9ZnVuY3Rpb24gcygpe2lmKCFfKXt2YXIgZT1vKGEpO189ITA7Zm9yKHZhciB0PWgubGVuZ3RoO3Q7KXtmb3IocD1oLGg9W107KytnPHQ7KXAmJnBbZ10ucnVuKCk7Zz0tMSx0PWgubGVuZ3RofXA9bnVsbCxfPSExLGkoZSl9fWZ1bmN0aW9uIHUoZSx0KXt0aGlzLmZ1bj1lLHRoaXMuYXJyYXk9dH1mdW5jdGlvbiBsKCl7fXZhciBjLGQsZj1lLmV4cG9ydHM9e307IWZ1bmN0aW9uKCl7dHJ5e2M9XCJmdW5jdGlvblwiPT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0OnJ9Y2F0Y2goZSl7Yz1yfXRyeXtkPVwiZnVuY3Rpb25cIj09dHlwZW9mIGNsZWFyVGltZW91dD9jbGVhclRpbWVvdXQ6bn1jYXRjaChlKXtkPW59fSgpO3ZhciBwLGg9W10sXz0hMSxnPS0xO2YubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTtoLnB1c2gobmV3IHUoZSx0KSksMSE9PWgubGVuZ3RofHxffHxvKHMpfSx1LnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSxmLnRpdGxlPVwiYnJvd3NlclwiLGYuYnJvd3Nlcj0hMCxmLmVudj17fSxmLmFyZ3Y9W10sZi52ZXJzaW9uPVwiXCIsZi52ZXJzaW9ucz17fSxmLm9uPWwsZi5hZGRMaXN0ZW5lcj1sLGYub25jZT1sLGYub2ZmPWwsZi5yZW1vdmVMaXN0ZW5lcj1sLGYucmVtb3ZlQWxsTGlzdGVuZXJzPWwsZi5lbWl0PWwsZi5wcmVwZW5kTGlzdGVuZXI9bCxmLnByZXBlbmRPbmNlTGlzdGVuZXI9bCxmLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm5bXX0sZi5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxmLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxmLmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sZi51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7cmV0dXJuIGUuY2FsbCh0aGlzLHR8fFwiVGhlIFVSTCB1cGRhdGUgZmFpbGVkIGZvciBzb21lIHJlYXNvbi5cIixyKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlVSTF9VUERBVEVfRVJST1JcIn0sdH0oby5QbGF5ZXJGYXRhbEVycm9yKTt0LlVSTFVwZGF0ZUVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3ZhciB0PW5ldyBVaW50OEFycmF5KGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5ieXRlTGVuZ3RofSwwKSkscj0wO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zZXQoZSxyKSxyKz1lLmJ5dGVMZW5ndGh9KSx0fWZ1bmN0aW9uIG8oZSx0KXtpZih2b2lkIDA9PT10JiYodD0hMSksZT1NYXRoLnJvdW5kKGUpLGU8MCl0aHJvdyBuZXcgRXJyb3IoXCJOZWdhdGl2ZSBudW1iZXJzIG5vdCBzdXBwb3J0ZWQuXCIpO2Zvcih2YXIgcj1NYXRoLm1heCgxLE1hdGguY2VpbChNYXRoLmxvZyhlKzEpL01hdGgubG9nKDIpLzgpKSxuPW5ldyBVaW50OEFycmF5KHIpLG89MDtvPHI7bysrKW5bdD9vOnItMS1vXT0yNTUmZSxlPj4+PTg7cmV0dXJuIG59ZnVuY3Rpb24gaShlKXtpZihlPDB8fGU+TWF0aC5wb3coMiw1MykpdGhyb3cgbmV3IEVycm9yKFwiVW5yZXByZXNlbnRhYmxlIHZhbHVlOiBcIitlKTt2YXIgdDtmb3IodD0xO3Q8PTgmJiEoZTxNYXRoLnBvdygyLDcqdCktMSk7dCsrKTtmb3IodmFyIHI9bmV3IFVpbnQ4QXJyYXkodCksbj0xO248PXQ7bisrKXt2YXIgbz0yNTUmZTtyW3Qtbl09byxlLT1vLGUvPU1hdGgucG93KDIsOCl9cmV0dXJuIHJbMF18PTE8PDgtdCxyfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuY29tYmluZT1uLHQubnVtYmVyVG9VaW50OEFycmF5PW8sdC5jcmVhdGVWaW50QnVmZmVyPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuIGk/bmV3IHdpbmRvdy5NYXA6bmV3IGF9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig3KSxpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwiTWFwXCJpbiB3aW5kb3c7dC5idWlsZENhY2hlPW47dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fc3RvcmU9W119cmV0dXJuIGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPW8uZmluZCh0aGlzLl9zdG9yZSxmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXk9PT1lfSk7cj9yLnZhbD10OnRoaXMuX3N0b3JlLnB1c2goe2tleTplLHZhbDp0fSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD1vLmZpbmQodGhpcy5fc3RvcmUsZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5PT09ZX0pO2lmKHQpcmV0dXJuIHQudmFsfSxlfSgpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWV9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmNvbXBhY3Q9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpO3QuUHJvbWlzZT1uLlByb21pc2V9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUscixuLG8pe3ZvaWQgMD09PW4mJihuPXdpbmRvdy5zZXRUaW1lb3V0KSx2b2lkIDA9PT1vJiYobz13aW5kb3cuY2xlYXJUaW1lb3V0KTt2YXIgcz1uZXcgaS5BYm9ydGFibGVKb2IoZnVuY3Rpb24oKXt2YXIgaT1hLmJ1aWxkRGVmZXJyZWQoKSxzPTAsdT1udWxsLGw9bnVsbCxjPWZ1bmN0aW9uKCl7dT1lKHMpLnJ1bigpLHUub25Db21wbGV0aW9uKGZ1bmN0aW9uKGUpe2lmKHU9bnVsbCxlLnN1Y2Nlc3MpaS5yZXNvbHZlKGUucmVzdWx0KTtlbHNle3ZhciBvPXIoKytzKTtudWxsIT09byYmbzwwP2kucmVqZWN0KG5ldyBFcnJvcihcIkRlbGF5IG11c3QgYmUgbnVsbCBvciA+PSAwLlwiKSk6bnVsbD09PW8/aS5yZWplY3QodC5ub01vcmVBdHRlbXB0c0Vycm9yKTpsPW4oZnVuY3Rpb24oKXtsPW51bGwsYygpfSxvKX19KSx1Lm9uRXJyb3IoZnVuY3Rpb24oZSl7dT1udWxsLGkucmVqZWN0KGUpfSl9O3JldHVybiBjKCkse3Jlc3VsdDppLnByb21pc2UsYWJvcnQ6ZnVuY3Rpb24oKXt1JiZ1LmFib3J0KCksbCYmbyhsKX19fSk7cmV0dXJuIHMucnVuKCl9ZnVuY3Rpb24gbyhlKXt2YXIgdD12b2lkIDA9PT1lP3t9OmUscj10LnRpbWVCYXNlLG49dm9pZCAwPT09cj81MDA6cixvPXQudGhyZXNob2xkLGk9dm9pZCAwPT09bz8zOm8sYT10LmRlbGF5Q2FwLHM9dm9pZCAwPT09YT80NWUzOmEsdT10LmppdHRlcixsPXZvaWQgMD09PXU/MjAwOnUsYz10Lm1heEF0dGVtcHRzLGQ9dm9pZCAwPT09Yz9udWxsOmM7aWYobjw9MCl0aHJvdyBuZXcgRXJyb3IoXCJUaW1lIGJhc2UgbXVzdCBiZSA+IDAuXCIpO2lmKGk8PTApdGhyb3cgbmV3IEVycm9yKFwiVGhyZXNob2xkIG11c3QgYmUgPiAwLlwiKTtpZigwPT09cyl0aHJvdyBuZXcgRXJyb3IoXCJEZWxheSBjYXAgbXVzdCBiZSBudWxsIG9yID4gMC5cIik7aWYobnVsbCE9PWQmJmQ8MSl0aHJvdyBuZXcgRXJyb3IoXCJNYXggYXR0ZW1wdHMgbXVzdCBiZSA+PSAxLlwiKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYobnVsbCE9PWQmJmU+PWQpcmV0dXJuIG51bGw7dmFyIHQ9ZT4wP01hdGgucG93KDIsZS9pLTEpOjA7cmV0dXJuIE1hdGgubWluKHQqbixzfHwxLzApK01hdGgucm91bmQoTWF0aC5yYW5kb20oKSpsKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9cigxNyksYT1yKDIpO3Qubm9Nb3JlQXR0ZW1wdHNFcnJvcj1uZXcgRXJyb3IoXCJObyBtb3JlIGF0dGVtcHRzIHJlbWFpbmluZy5cIiksdC5yZXRyeT1uLHQuYnVpbGRFeHBvbmVudGlhbERlbGF5Q2FsY3VsYXRvcj1vfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXt2YXIgdD1hLmV4ZWMoZSk7cmV0dXJuIHQ/dFsxXS50b0xvd2VyQ2FzZSgpOm51bGx9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBpLmJ1aWxkQWJzb2x1dGVVUkwoZSx0LHthbHdheXNOb3JtYWxpemU6ITB9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1yKDM2KSxhPS9eLipcXC4oW15cXC47XFw/I10qKS4qJC87dC5nZXRFeHRlbnNpb249bix0LmJ1aWxkQWJzb2x1dGVVcmw9b30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihyKXt0W3JdPWVbcl19KSx0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMjApLGk9cig2KSxhPWZ1bmN0aW9uKCl7fSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgcj10aGlzO3RoaXMuX3N1YnNjcmliZXJzPVtdLHRoaXMuX29uRXhpdD1uZXcgby5PbkV4aXQoZnVuY3Rpb24oKXtyZXR1cm4gci5fYWZ0ZXIoKX0sZnVuY3Rpb24oKXtyZXR1cm4gci5fb25FbnRlcigpfSksdGhpcy5fYmVmb3JlVXBkYXRlRXJyb3I9dm9pZCAwLHRoaXMuX2luQWZ0ZXJVcGRhdGU9ITEsdGhpcy5fZGVhZD0hMSx0aGlzLl9vZmZpY2lhbGx5RGVhZD0hMSx0aGlzLl9lcnJvcnM9W10sdGhpcy5fc3RhdGU9bihlKSx0aGlzLl9pbml0aWFsU3RhdGU9bihlKSx0aGlzLl9iZWZvcmVVcGRhdGU9dC5iZWZvcmVVcGRhdGV8fGZ1bmN0aW9uKCl7fSx0aGlzLl9hZnRlclVwZGF0ZT10LmFmdGVyVXBkYXRlfHxhLHRoaXMuX2FmdGVyRGlzcGF0Y2hlcz10LmFmdGVyRGlzcGF0Y2hlc3x8YX1yZXR1cm4gZS5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih2b2lkIDA9PT10JiYodD0hMCksdGhpcy5fZGVhZCl7dmFyIG89ITE7cmV0dXJue3JldHJpZXZlOmZ1bmN0aW9uKCl7fSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4hbyYmKG89ITApfX19dmFyIGk9e2NhbGxiYWNrOmUsbG9jYWxTdGF0ZTp0P24odGhpcy5fc3RhdGUpOnRoaXMuX2luaXRpYWxTdGF0ZX07cmV0dXJuIHRoaXMuX3N1YnNjcmliZXJzLnB1c2goaSksdHx8dGhpcy5fdXBkYXRlU3Vic2NyaWJlcihpKSx7cmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIHQ9ci5fc3Vic2NyaWJlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhbGxiYWNrfSkuaW5kZXhPZihlKTtyZXR1cm4gdD49MCYmKHIuX3N1YnNjcmliZXJzLnNwbGljZSh0LDEpLCEwKX0scmV0cmlldmU6ZnVuY3Rpb24oKXtyLl91cGRhdGVTdWJzY3JpYmVyKGkpfX19LGUucHJvdG90eXBlLnN1YnNjcmliZUluZGl2aWR1YWw9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnN1YnNjcmliZShmdW5jdGlvbihyKXt2YXIgbj1yW2VdO3ZvaWQgMCE9PW4mJnQobil9LHIpfSxlLnByb3RvdHlwZS5nZXRIYW5kbGU9ZnVuY3Rpb24oKXtyZXR1cm57c3Vic2NyaWJlOnRoaXMuc3Vic2NyaWJlLmJpbmQodGhpcyl9fSxlLnByb3RvdHlwZS5nZXRJbmRpdmlkdWFsSGFuZGxlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJue3N1YnNjcmliZTpmdW5jdGlvbihyKXtyZXR1cm4gdC5zdWJzY3JpYmVJbmRpdmlkdWFsKGUscil9fX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fb2ZmaWNpYWxseURlYWR8fCh0aGlzLl9pbkFmdGVyVXBkYXRlP2UmJmUodGhpcy5fc3RhdGUsdGhpcy5fYmVmb3JlVXBkYXRlRXJyb3IpOnRoaXMuX29uRXhpdC5lbnRlcihmdW5jdGlvbihyKXtyLmdldFJlc3VsdChmdW5jdGlvbigpe3RyeXtlJiZlKHQuX3N0YXRlLHQuX2JlZm9yZVVwZGF0ZUVycm9yKX1jYXRjaChlKXt0Ll9lcnJvcnMucHVzaChlKX19KX0pKX0sZS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGV9LGUucHJvdG90eXBlLmtpbGw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2RlYWR8fCh0aGlzLl9kZWFkPSEwLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fc3Vic2NyaWJlcnMuc3BsaWNlKDApLGUuX29mZmljaWFsbHlEZWFkPSEwfSwwKSl9LGUucHJvdG90eXBlLmlzRGVhZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWFkfSxlLnByb3RvdHlwZS5fb25FbnRlcj1mdW5jdGlvbigpe3RoaXMuX2JlZm9yZVVwZGF0ZUVycm9yPXZvaWQgMDt0cnl7dGhpcy5fYmVmb3JlVXBkYXRlKHRoaXMuX3N0YXRlKX1jYXRjaChlKXt0aGlzLl9iZWZvcmVVcGRhdGVFcnJvcj1lfX0sZS5wcm90b3R5cGUuX2FmdGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2Vycm9yczt0aGlzLl9lcnJvcnM9W10saS5kZWZlckV4Y2VwdGlvbihmdW5jdGlvbigpe2UuX2luQWZ0ZXJVcGRhdGU9ITA7dHJ5e2UuX2FmdGVyVXBkYXRlKGUuX3N0YXRlLHtiZWZvcmVVcGRhdGU6ZS5fYmVmb3JlVXBkYXRlRXJyb3IsdXBkYXRlOnR9KX1jYXRjaCh0KXt0aHJvdyBlLl9pbkFmdGVyVXBkYXRlPSExLHR9ZS5faW5BZnRlclVwZGF0ZT0hMSxlLl9zdWJzY3JpYmVycy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuX3VwZGF0ZVN1YnNjcmliZXIodCl9KSxlLl9hZnRlckRpc3BhdGNoZXMoZS5fc3RhdGUpfSl9LGUucHJvdG90eXBlLl91cGRhdGVTdWJzY3JpYmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NhbGN1bGF0ZURpZmYoZS5sb2NhbFN0YXRlKTtPYmplY3Qua2V5cyh0KS5sZW5ndGgmJihlLmxvY2FsU3RhdGU9bih0aGlzLl9zdGF0ZSksaS5kZWZlckV4Y2VwdGlvbihmdW5jdGlvbigpe3JldHVybiBlLmNhbGxiYWNrKHQsZS5sb2NhbFN0YXRlKX0pKX0sZS5wcm90b3R5cGUuX2NhbGN1bGF0ZURpZmY9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3N0YXRlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciBvPXQuX3N0YXRlW25dO28hPT1lW25dJiYocltuXT1vKX0pLHJ9LGV9KCk7dC5TdGF0ZU1hbmFnZXI9c30sZnVuY3Rpb24oZSx0LHIpeyFmdW5jdGlvbih0KXt2YXIgcj0vXigoPzpbXlxcLzs/I10rOik/KShcXC9cXC9bXlxcL1xcOz8jXSopPyguKj8pPz8oOy4qPyk/KFxcPy4qPyk/KCMuKj8pPyQvLG49L14oW15cXC87PyNdKikoLiopJC8sbz0vKD86XFwvfF4pXFwuKD89XFwvKS9nLGk9Lyg/OlxcL3xeKVxcLlxcLlxcLyg/IVxcLlxcLlxcLykuKj8oPz1cXC8pL2csYT17YnVpbGRBYnNvbHV0ZVVSTDpmdW5jdGlvbihlLHQscil7aWYocj1yfHx7fSxlPWUudHJpbSgpLHQ9dC50cmltKCksIXQpe2lmKCFyLmFsd2F5c05vcm1hbGl6ZSlyZXR1cm4gZTt2YXIgbz10aGlzLnBhcnNlVVJMKGUpO2lmKCFzKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHRyeWluZyB0byBwYXJzZSBiYXNlIFVSTC5cIik7cmV0dXJuIG8ucGF0aD1hLm5vcm1hbGl6ZVBhdGgoby5wYXRoKSxhLmJ1aWxkVVJMRnJvbVBhcnRzKG8pfXZhciBpPXRoaXMucGFyc2VVUkwodCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgdHJ5aW5nIHRvIHBhcnNlIHJlbGF0aXZlIFVSTC5cIik7aWYoaS5zY2hlbWUpcmV0dXJuIHIuYWx3YXlzTm9ybWFsaXplPyhpLnBhdGg9YS5ub3JtYWxpemVQYXRoKGkucGF0aCksYS5idWlsZFVSTEZyb21QYXJ0cyhpKSk6dDt2YXIgcz10aGlzLnBhcnNlVVJMKGUpO2lmKCFzKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHRyeWluZyB0byBwYXJzZSBiYXNlIFVSTC5cIik7aWYoIXMubmV0TG9jJiZzLnBhdGgmJlwiL1wiIT09cy5wYXRoWzBdKXt2YXIgdT1uLmV4ZWMocy5wYXRoKTtzLm5ldExvYz11WzFdLHMucGF0aD11WzJdfXMubmV0TG9jJiYhcy5wYXRoJiYocy5wYXRoPVwiL1wiKTt2YXIgbD17c2NoZW1lOnMuc2NoZW1lLG5ldExvYzppLm5ldExvYyxwYXRoOm51bGwscGFyYW1zOmkucGFyYW1zLHF1ZXJ5OmkucXVlcnksZnJhZ21lbnQ6aS5mcmFnbWVudH07aWYoIWkubmV0TG9jJiYobC5uZXRMb2M9cy5uZXRMb2MsXCIvXCIhPT1pLnBhdGhbMF0pKWlmKGkucGF0aCl7dmFyIGM9cy5wYXRoLGQ9Yy5zdWJzdHJpbmcoMCxjLmxhc3RJbmRleE9mKFwiL1wiKSsxKStpLnBhdGg7bC5wYXRoPWEubm9ybWFsaXplUGF0aChkKX1lbHNlIGwucGF0aD1zLnBhdGgsaS5wYXJhbXN8fChsLnBhcmFtcz1zLnBhcmFtcyxpLnF1ZXJ5fHwobC5xdWVyeT1zLnF1ZXJ5KSk7cmV0dXJuIG51bGw9PT1sLnBhdGgmJihsLnBhdGg9ci5hbHdheXNOb3JtYWxpemU/YS5ub3JtYWxpemVQYXRoKGkucGF0aCk6aS5wYXRoKSxhLmJ1aWxkVVJMRnJvbVBhcnRzKGwpfSxwYXJzZVVSTDpmdW5jdGlvbihlKXt2YXIgdD1yLmV4ZWMoZSk7cmV0dXJuIHQ/e3NjaGVtZTp0WzFdfHxcIlwiLG5ldExvYzp0WzJdfHxcIlwiLHBhdGg6dFszXXx8XCJcIixwYXJhbXM6dFs0XXx8XCJcIixxdWVyeTp0WzVdfHxcIlwiLGZyYWdtZW50OnRbNl18fFwiXCJ9Om51bGx9LG5vcm1hbGl6ZVBhdGg6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKS5yZXBsYWNlKG8sXCJcIik7ZS5sZW5ndGghPT0oZT1lLnJlcGxhY2UoaSxcIlwiKSkubGVuZ3RoOyk7cmV0dXJuIGUuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIil9LGJ1aWxkVVJMRnJvbVBhcnRzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNjaGVtZStlLm5ldExvYytlLnBhdGgrZS5wYXJhbXMrZS5xdWVyeStlLmZyYWdtZW50fX07ZS5leHBvcnRzPWF9KHRoaXMpfSxmdW5jdGlvbihlLHQpe3ZhciByO3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7cj1yfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl8fCgwLGV2YWwpKFwidGhpc1wiKX1jYXRjaChlKXtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiYocj13aW5kb3cpfWUuZXhwb3J0cz1yfSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj1cIjEzLjAuMFwiLHQuYnVpbGROdW1iZXI9MTA4NTt2YXIgbj1yKDEpLG89cigyNCksaT1yKDMpLGE9cigyNSk7dC5Qcm94eVBsYXllcj1hLlByb3h5UGxheWVyO3ZhciBzPXIoMTApO3QuUHJveHlQbGF5ZXJCYXNlPXMuUHJveHlQbGF5ZXJCYXNlO3ZhciB1PXIoMjIpO3QuZXJyb3JzPXUuZXJyb3JzO3ZhciBsPXIoMjMpO3QuaGVscGVycz1sLmhlbHBlcnM7dmFyIGM9cig5KTt0LkJhc2VQbGF5ZXI9Yy5CYXNlUGxheWVyO3ZhciBkPXIoMjEpO3QuRGVzY3JpcHRvcj1kLkRlc2NyaXB0b3I7dmFyIGY9cigxMSk7dC5TdGF0ZT1mLlN0YXRlO3ZhciBwPXIoMjYpO3QuVGltZVJhbmdlPXAuVGltZVJhbmdlO3ZhciBoOyFmdW5jdGlvbihlKXtlLkV2ZW50RGlzcGF0Y2hlcj1uLkV2ZW50RGlzcGF0Y2hlcn0oaD10LmV2ZW50RGlzcGF0Y2hlcnx8KHQuZXZlbnREaXNwYXRjaGVyPXt9KSk7dmFyIF87IWZ1bmN0aW9uKGUpe2UuTG9hZGVyUmVxdWVzdD1vLkxvYWRlclJlcXVlc3R9KF89dC5sb2FkZXJ8fCh0LmxvYWRlcj17fSkpO3ZhciBnOyFmdW5jdGlvbihlKXtlLm5vT3BMb2dnZXI9aS5ub09wTG9nZ2VyLGUuY29uc29sZUxvZ2dlcj1pLmNvbnNvbGVMb2dnZXIsZS5wcmVmaXhMb2dnZXI9aS5wcmVmaXhMb2dnZXIsZS5jbG9uZUxvZ2dlcj1pLmNsb25lTG9nZ2VyfShnPXQubG9nZ2VyfHwodC5sb2dnZXI9e30pKX1dKX0pfSxmdW5jdGlvbihlLHQscil7IWZ1bmN0aW9uKHQsbil7ZS5leHBvcnRzPW4ocigyKSxyKDQpLHIoNykpfSh0aGlzLGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChuKXtpZihyW25dKXJldHVybiByW25dLmV4cG9ydHM7dmFyIG89cltuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsdCksby5sPSEwLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4gdC5tPWUsdC5jPXIsdC5pPWZ1bmN0aW9uKGUpe3JldHVybiBlfSx0LmQ9ZnVuY3Rpb24oZSxyLG4pe3QubyhlLHIpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6bn0pfSx0Lm49ZnVuY3Rpb24oZSl7dmFyIHI9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHQuZChyLFwiYVwiLHIpLHJ9LHQubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sdC5wPVwiXCIsdCh0LnM9MTQpfShbZnVuY3Rpb24odCxyKXt0LmV4cG9ydHM9ZX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIkhMU19NU0VfUExBWUVSLk1TRV9FUlJPUlwifSx0fShvLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKTt0Lk1TRUVycm9yPWl9LGZ1bmN0aW9uKGUscil7ZS5leHBvcnRzPXR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDEpLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZS5jYWxsKHRoaXMsXCJBbiBlcnJvciBvY2N1cnJlZCB0cnlpbmcgdG8gYXBwZW5kIHRvIHRoZSBidWZmZXIuXCIsdCl8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJITFNfTVNFX1BMQVlFUi5BUFBFTkRfRVJST1JcIn0sdH0oby5NU0VFcnJvcik7dC5BcHBlbmRFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigxKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGUuY2FsbCh0aGlzLFwiQW4gZXJyb3Igb2NjdXJyZWQgdHJ5aW5nIHRvIGluaXRpYWxpemUgdGhlIGJ1ZmZlci5cIix0KXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIkhMU19NU0VfUExBWUVSLklOSVRJQUxJWkVfRVJST1JcIn0sdH0oby5NU0VFcnJvcik7dC5Jbml0aWFsaXplRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7XG50aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gZS5jYWxsKHRoaXMsXCJBIGZvcm1hdCBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZC5cIil8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJITFNfTVNFX1BMQVlFUi5OT19GT1JNQVRfREVURVJNSU5FRF9FUlJPUlwifSx0fShvLmVycm9ycy5Ob3RTdXBwb3J0ZWRFcnJvcik7dC5Ob0Zvcm1hdERldGVybWluZWRFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gZS5jYWxsKHRoaXMsXCJBIHRyYW5zbXV4ZXIgY291bGQgbm90IGJlIGZvdW5kLlwiKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIkhMU19NU0VfUExBWUVSLk5PX1RSQU5TTVVYRVJfRVJST1JcIn0sdH0oby5lcnJvcnMuTm90U3VwcG9ydGVkRXJyb3IpO3QuTm9UcmFuc211eGVyRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiB0cnlpbmcgdG8gcmV0cmlldmUgYSBzZWdtZW50L2tleS5cIix0KXx8dGhpcztyZXR1cm4gci5faW50ZXJuYWxSZXRyaWV2YWxFcnJvcj10LHJ9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJITFNfTVNFX1BMQVlFUi5SRVRSSUVWQUxfRVJST1IuXCIrdGhpcy5faW50ZXJuYWxSZXRyaWV2YWxFcnJvci5nZXRDb2RlKCl9LHR9KG8uZXJyb3JzLlBsYXllckVycm9yKTt0LlJldHJpZXZhbEVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBlLmNhbGwodGhpcyxcIlRoZSBwbGF5bGlzdCB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuXCIpfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiSExTX01TRV9QTEFZRVIuVU5TVVBQT1JURURfUExBWUxJU1RfVFlQRV9FUlJPUlwifSx0fShvLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKTt0LlVuc3VwcG9ydGVkUGxheWxpc3RUeXBlRXJyb3I9aX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9cn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuLG89cigzKSxpPXIoNCksYT1yKDEpLHM9cig1KSx1PXIoNiksbD1yKDcpLGM9cig4KTshZnVuY3Rpb24oZSl7ZS5BcHBlbmRFcnJvcj1vLkFwcGVuZEVycm9yLGUuSW5pdGlhbGl6ZUVycm9yPWkuSW5pdGlhbGl6ZUVycm9yLGUuTVNFRXJyb3I9YS5NU0VFcnJvcixlLk5vRm9ybWF0RGV0ZXJtaW5lZEVycm9yPXMuTm9Gb3JtYXREZXRlcm1pbmVkRXJyb3IsZS5Ob1RyYW5zbXV4ZXJFcnJvcj11Lk5vVHJhbnNtdXhlckVycm9yLGUuUmV0cmlldmFsRXJyb3I9bC5SZXRyaWV2YWxFcnJvcixlLlVuc3VwcG9ydGVkUGxheWxpc3RUeXBlRXJyb3I9Yy5VbnN1cHBvcnRlZFBsYXlsaXN0VHlwZUVycm9yfShuPXQuZXJyb3JzfHwodC5lcnJvcnM9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHZvaWQgMCE9PWUubWltZVR5cGV9dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9cigwKSxhPXIoMikscz1yKDkpLHU9cigxMiksbD1yKDEzKSxjPXIoOCksZD1yKDMpLGY9cig0KSxwPXIoNyksaD1yKDYpLF89cig1KSxnPWkuaGVscGVycy5maW5kLHk9aS5oZWxwZXJzLlByb21pc2Usdj1pLmhlbHBlcnMudGltZS5ub3csbT1pLmhlbHBlcnMuZGVmZXJyZWQuYnVpbGREZWZlcnJlZCxFPWkuZXJyb3JzLkRlcGVuZGVuY3lFcnJvcixiPWkuZXJyb3JzLlBsYXllckZhdGFsRXJyb3Isdz1pLmVycm9ycy5VUkxVcGRhdGVFcnJvcixTPWkuZXZlbnREaXNwYXRjaGVyLkV2ZW50RGlzcGF0Y2hlcixQPWkubG9nZ2VyLnByZWZpeExvZ2dlcixSPWkuaGVscGVycy5hYm9ydGFibGVKb2IuYWJvcnRlZEVycm9yLFQ9aS5oZWxwZXJzLmJyb3dzZXIuZ2V0U2FmYXJpVmVyc2lvbigpLHg9aS5oZWxwZXJzLmJyb3dzZXIuaXNTYWZhcmkoKSxBPWkuaGVscGVycy5icm93c2VyLmlzRmlyZWZveCgpLE89aS5oZWxwZXJzLmJyb3dzZXIuaXNFZGdlKCksTT0zZTQsRD0xZTgsaz02MDAsST01MCxDPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgbj1lLmNhbGwodGhpcyx0LHIpfHx0aGlzO3JldHVybiBuLl9vblBsYXlsaXN0UmVxdWVzdFF1ZXVlZD1uZXcgUyxuLl9vblBsYXlsaXN0UmVxdWVzdFN0YXJ0PW5ldyBTLG4uX29uUGxheWxpc3RSZXRyaWV2ZWQ9bmV3IFMsbi5fb25QbGF5bGlzdFJlcXVlc3RGYWlsZWQ9bmV3IFMsbi5fb25Jbml0RGF0YVJlcXVlc3RRdWV1ZWQ9bmV3IFMsbi5fb25Jbml0RGF0YVJlcXVlc3RTdGFydD1uZXcgUyxuLl9vbkluaXREYXRhUmV0cmlldmVkPW5ldyBTLG4uX29uSW5pdERhdGFSZXF1ZXN0RmFpbGVkPW5ldyBTLG4uX29uS2V5UmVxdWVzdFF1ZXVlZD1uZXcgUyxuLl9vbktleVJlcXVlc3RTdGFydD1uZXcgUyxuLl9vbktleVJldHJpZXZlZD1uZXcgUyxuLl9vbktleVJlcXVlc3RGYWlsZWQ9bmV3IFMsbi5fb25QbGF5bGlzdFBhcnNlU3RhcnQ9bmV3IFMsbi5fb25QbGF5bGlzdFBhcnNlRW5kPW5ldyBTLG4uX29uU2VnbWVudFJlcXVlc3RRdWV1ZWQ9bmV3IFMsbi5fb25TZWdtZW50UmVxdWVzdFN0YXJ0PW5ldyBTLG4uX29uU2VnbWVudFJldHJpZXZlZD1uZXcgUyxuLl9vblNlZ21lbnRSZXF1ZXN0RmFpbGVkPW5ldyBTLG4uX29uU2VnbWVudFRyYW5zbXV4U3RhcnQ9bmV3IFMsbi5fb25TZWdtZW50VHJhbnNtdXhFbmQ9bmV3IFMsbi5fb25TZWdtZW50RGVjcnlwdGlvblN0YXJ0PW5ldyBTLG4uX29uU2VnbWVudERlY3J5cHRpb25FbmQ9bmV3IFMsbi5fb25TZWdtZW50UmVhZHk9bmV3IFMsbi5fb25TZWdtZW50QXBwZW5kUXVldWVkPW5ldyBTLG4uX29uU2VnbWVudEFwcGVuZEVuZD1uZXcgUyxuLl9wbGF5bGlzdD1udWxsLG4uX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlcj1udWxsLG4uX2luaXRpYWxQbGF5bGlzdFJldHJpZXZlQ29tcGxldGVkPSExLG4uX21zZT1udWxsLG4uX3NpbXBsZU1TRT1udWxsLG4uX3JldHJpZXZlRHVyYXRpb25EZWZlcnJlZD1tKCksbi5faHRtbDVQbGF5ZXJSZWFkeT0hMSxuLl9zdGFydFBvc2l0aW9uT2Zmc2V0PTAsbi5fdHJhbnNtdXhlckFuZE1TRVR5cGU9bnVsbCxuLl9sYXN0U2VnbWVudEFwcGVuZGVkPW51bGwsbi5fbWF4QnVmZmVyTGVuZ3RoPW51bGwsbi5fY2FjaGVTaXplPW51bGwsbi5fb25GaXJzdFNlZ21lbnRSZXRyaWV2ZWQ9bnVsbCxuLl9zZWVrQXR0ZW1wdFRpbWVyPW51bGwsbi5fc2Vla01ldGFkYXRhRXZlbnRIYW5kbGU9bnVsbCxuLl9wbGF5bGlzdER1cmF0aW9uPW51bGwsbi5fbG9nZ2VyPVAobi5fbG9nZ2VyLFwiSExTTVNFUGxheWVyXCIpLG4ub25QbGF5bGlzdFJlcXVlc3RRdWV1ZWQ9bi5fb25QbGF5bGlzdFJlcXVlc3RRdWV1ZWQuZ2V0SGFuZGxlKCksbi5vblBsYXlsaXN0UmVxdWVzdFN0YXJ0PW4uX29uUGxheWxpc3RSZXF1ZXN0U3RhcnQuZ2V0SGFuZGxlKCksbi5vblBsYXlsaXN0UmV0cmlldmVkPW4uX29uUGxheWxpc3RSZXRyaWV2ZWQuZ2V0SGFuZGxlKCksbi5vblBsYXlsaXN0UmVxdWVzdEZhaWxlZD1uLl9vblBsYXlsaXN0UmVxdWVzdEZhaWxlZC5nZXRIYW5kbGUoKSxuLm9uSW5pdERhdGFSZXF1ZXN0UXVldWVkPW4uX29uSW5pdERhdGFSZXF1ZXN0UXVldWVkLmdldEhhbmRsZSgpLG4ub25Jbml0RGF0YVJlcXVlc3RTdGFydD1uLl9vbkluaXREYXRhUmVxdWVzdFN0YXJ0LmdldEhhbmRsZSgpLG4ub25Jbml0RGF0YVJldHJpZXZlZD1uLl9vbkluaXREYXRhUmV0cmlldmVkLmdldEhhbmRsZSgpLG4ub25Jbml0RGF0YVJlcXVlc3RGYWlsZWQ9bi5fb25Jbml0RGF0YVJlcXVlc3RGYWlsZWQuZ2V0SGFuZGxlKCksbi5vbktleVJlcXVlc3RRdWV1ZWQ9bi5fb25LZXlSZXF1ZXN0UXVldWVkLmdldEhhbmRsZSgpLG4ub25LZXlSZXF1ZXN0U3RhcnQ9bi5fb25LZXlSZXF1ZXN0U3RhcnQuZ2V0SGFuZGxlKCksbi5vbktleVJldHJpZXZlZD1uLl9vbktleVJldHJpZXZlZC5nZXRIYW5kbGUoKSxuLm9uS2V5UmVxdWVzdEZhaWxlZD1uLl9vbktleVJlcXVlc3RGYWlsZWQuZ2V0SGFuZGxlKCksbi5vblBsYXlsaXN0UGFyc2VTdGFydD1uLl9vblBsYXlsaXN0UGFyc2VTdGFydC5nZXRIYW5kbGUoKSxuLm9uUGxheWxpc3RQYXJzZUVuZD1uLl9vblBsYXlsaXN0UGFyc2VFbmQuZ2V0SGFuZGxlKCksbi5vblNlZ21lbnRSZXF1ZXN0UXVldWVkPW4uX29uU2VnbWVudFJlcXVlc3RRdWV1ZWQuZ2V0SGFuZGxlKCksbi5vblNlZ21lbnRSZXF1ZXN0U3RhcnQ9bi5fb25TZWdtZW50UmVxdWVzdFN0YXJ0LmdldEhhbmRsZSgpLG4ub25TZWdtZW50UmV0cmlldmVkPW4uX29uU2VnbWVudFJldHJpZXZlZC5nZXRIYW5kbGUoKSxuLm9uU2VnbWVudFJlcXVlc3RGYWlsZWQ9bi5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5nZXRIYW5kbGUoKSxuLm9uU2VnbWVudFRyYW5zbXV4U3RhcnQ9bi5fb25TZWdtZW50VHJhbnNtdXhTdGFydC5nZXRIYW5kbGUoKSxuLm9uU2VnbWVudFRyYW5zbXV4RW5kPW4uX29uU2VnbWVudFRyYW5zbXV4RW5kLmdldEhhbmRsZSgpLG4ub25TZWdtZW50RGVjcnlwdGlvblN0YXJ0PW4uX29uU2VnbWVudERlY3J5cHRpb25TdGFydC5nZXRIYW5kbGUoKSxuLm9uU2VnbWVudERlY3J5cHRpb25FbmQ9bi5fb25TZWdtZW50RGVjcnlwdGlvbkVuZC5nZXRIYW5kbGUoKSxuLm9uU2VnbWVudFJlYWR5PW4uX29uU2VnbWVudFJlYWR5LmdldEhhbmRsZSgpLG4ub25TZWdtZW50QXBwZW5kUXVldWVkPW4uX29uU2VnbWVudEFwcGVuZFF1ZXVlZC5nZXRIYW5kbGUoKSxuLm9uU2VnbWVudEFwcGVuZEVuZD1uLl9vblNlZ21lbnRBcHBlbmRFbmQuZ2V0SGFuZGxlKCksbi5fX2Rlc2NyaXB0b3I9dCxuLl9fcGxheWVyRGVwZW5kZW5jaWVzPXIsbi5fdXJsPXQuZ2V0VXJsKCksbn1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLmdldEJ1ZmZlcmVkVGltZVJhbmdlcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlcjtyZXR1cm4gZT9pLlRpbWVSYW5nZS5ub3JtYWxpemUoZS5nZXRTZWdtZW50c1dpdGhEYXRhKCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNlZ21lbnQuZ2V0VGltZVJhbmdlKCl9KSk6W119LHQucHJvdG90eXBlLmdldE1heEJ1ZmZlckxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhCdWZmZXJMZW5ndGh9LHQucHJvdG90eXBlLmdldEJ1ZmZlckNvbnRyb2xsZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybntzZXRNYXhCdWZmZXJMZW5ndGg6ZnVuY3Rpb24odCl7aWYodDwwKXRocm93IG5ldyBFcnJvcihcIk1heCBidWZmZXIgbGVuZ3RoIGNhbm5vdCBiZSA8IDAuXCIpO2UuX2xvZ2dlci5kZWJ1ZyhcIlVwZGF0aW5nIG1heCBidWZmZXIgbGVuZ3RoLlwiLHQpLGUuX21heEJ1ZmZlckxlbmd0aD10LGUuX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlcj9lLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXIudXBkYXRlTWF4QnVmZmVyTGVuZ3RoKHQpOmUuX2xvZ2dlci5kZWJ1ZyhcIkNhbm5vdCB1cGRhdGUgcmlnaHQgbm93LiBQbGF5bGlzdCBzZWdtZW50IHJldHJpZXZlciBkb2Vzbid0IGV4aXN0LlwiKX19fSx0LnByb3RvdHlwZS5nZXRVcmxDb250cm9sbGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm57dXBkYXRlVXJsOmZ1bmN0aW9uKHQpe2UuX2xvZ2dlci5kZWJ1ZyhcIlVwZGF0aW5nIFVSTC5cIix0KSxlLl91cmw9dDt2YXIgcj1lLl9wbGF5bGlzdDtyZXR1cm4gcj8oZS5fcGxheWxpc3RSZXRyaWV2ZUpvYiYmKGUuX3BsYXlsaXN0UmV0cmlldmVKb2IuYWJvcnQoKSxlLl9wbGF5bGlzdFJldHJpZXZlSm9iPW51bGwsZS5fbG9nZ2VyLmRlYnVnKFwiQWJvcnRlZCBwbGF5bGlzdCByZXRyaWV2ZSBqb2IuXCIpKSxlLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXImJihlLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXIuc3dpdGNoUGxheWxpc3QobnVsbCksZS5fbG9nZ2VyLmRlYnVnKFwiUmVtb3ZlZCBjdXJyZW50IFVSTC5cIikpLGUuX3BsYXlsaXN0PW51bGwsdm9pZCBlLl9yZXRyaWV2ZVBsYXlsaXN0KCkpOnZvaWQgZS5fbG9nZ2VyLmRlYnVnKFwiQ2Fubm90IHVwZGF0ZSByaWdodCBub3cuIFBsYXlsaXN0IGRvZXNuJ3QgZXhpc3QgeWV0LlwiKX19fSx0LnByb3RvdHlwZS5nZXRNZW1vcnlDYWNoZU1heFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuX2NhY2hlU2l6ZT90aGlzLl9jYWNoZVNpemU6RH0sdC5wcm90b3R5cGUuZ2V0TWVtb3J5Q2FjaGVVc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXI/dGhpcy5fcGxheWxpc3RTZWdtZW50UmV0cmlldmVyLmdldENhY2hlVXNhZ2UoKTowfSx0LnByb3RvdHlwZS5nZXRNZW1vcnlDYWNoZUNvbnRyb2xsZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybntzZXRNYXhDYWNoZVNpemU6ZnVuY3Rpb24odCl7aWYodDwwKXRocm93IG5ldyBFcnJvcihcIk1heCBzaXplIGNhbm5vdCBiZSA8IDAuXCIpO2UuX2xvZ2dlci5kZWJ1ZyhcIlVwZGF0aW5nIG1heGltdW0gY2FjaGUgc2l6ZS5cIix0KSxlLl9jYWNoZVNpemU9dCxlLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXImJmUuX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlci51cGRhdGVDYWNoZVNpemUodCl9fX0sdC5wcm90b3R5cGUuX2NhblBsYXk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB1Lk1TRS5pc1N1cHBvcnRlZCgpP2UucHJvdG90eXBlLl9jYW5QbGF5LmNhbGwodGhpcykudGhlbihmdW5jdGlvbihlKXtpZihlIT09ITApcmV0dXJuIHkucmVzb2x2ZShlKTt2YXIgcj10Ll9fZGVzY3JpcHRvci5nZXRTZWdtZW50Rm9ybWF0KCk7aWYoIW4ocikpcmV0dXJuIHQuX2xvZ2dlci5kZWJ1ZyhcIkZvcm1hdCBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZC5cIikseS5yZXNvbHZlKG5ldyBfLk5vRm9ybWF0RGV0ZXJtaW5lZEVycm9yKTt2YXIgbz10Ll9maW5kVHJhbnNtdXhlcihyKTtpZighbylyZXR1cm4gdC5fbG9nZ2VyLmRlYnVnKFwiTm8gdHJhbnNtdXhlciBmb3VuZC5cIikseS5yZXNvbHZlKG5ldyBoLk5vVHJhbnNtdXhlckVycm9yKTt2YXIgaT1vLmdldE91dHB1dEZvcm1hdCgpLGE9cjtyZXR1cm4gdC5fdHJhbnNtdXhlckFuZE1TRVR5cGU9e3RyYW5zbXV4ZXI6byxtc2VUeXBlOnQuX2J1aWxkTWltZVR5cGVBbmRDb2RlY1N0cmluZyhpLGEpfSx5LnJlc29sdmUoITApfSk6KHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIk1TRSBub3Qgc3VwcG9ydGVkLlwiKSx5LnJlc29sdmUoITEpKX0sdC5wcm90b3R5cGUuX2NhblBsYXlQcm90b2NvbD1mdW5jdGlvbihlKXtyZXR1cm5cImhsc1wiPT09ZS5uYW1lfSx0LnByb3RvdHlwZS5fY2FuUGxheVR5cGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhcHBsaWNhdGlvbi94LW1wZWdVUkxcIj09PWV9LHQucHJvdG90eXBlLl9yZXRyaWV2ZUR1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldHJpZXZlRHVyYXRpb25EZWZlcnJlZC5wcm9taXNlfSx0LnByb3RvdHlwZS5fc2lnbmFsUmVhZHk9ZnVuY3Rpb24oKXt0aGlzLl9odG1sNVBsYXllclJlYWR5PSEwLHRoaXMuX2luaXRpYWxQbGF5bGlzdFJldHJpZXZlQ29tcGxldGVkJiZlLnByb3RvdHlwZS5fc2lnbmFsUmVhZHkuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX2luaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9fcGxheWVyRGVwZW5kZW5jaWVzO2lmKG51bGw9PT10aGlzLl9tYXhCdWZmZXJMZW5ndGgpaWYodm9pZCAwIT09dC5tYXhCdWZmZXJMZW5ndGgpe2lmKHQubWF4QnVmZmVyTGVuZ3RoPDApcmV0dXJuIHZvaWQgdGhpcy5fdHJpZ2dlckVycm9yKG5ldyBFKFwibWF4QnVmZmVyTGVuZ3RoIGNhbm5vdCBiZSA8IDAuXCIpKTt0aGlzLl9tYXhCdWZmZXJMZW5ndGg9dC5tYXhCdWZmZXJMZW5ndGh9ZWxzZSB0aGlzLl9tYXhCdWZmZXJMZW5ndGg9TTtpZih0aGlzLl9sb2dnZXIuZGVidWcoXCJJbml0aWFsaXplZCBtYXggYnVmZmVyIGxlbmd0aC5cIix0aGlzLl9tYXhCdWZmZXJMZW5ndGgpLG51bGw9PT10aGlzLl9jYWNoZVNpemUpaWYodm9pZCAwIT09dC5tZW1vcnlDYWNoZVNpemUpe2lmKHQubWVtb3J5Q2FjaGVTaXplPDApcmV0dXJuIHZvaWQgdGhpcy5fdHJpZ2dlckVycm9yKG5ldyBFKFwibWVtb3J5Q2FjaGVTaXplIGNhbm5vdCBiZSA8IDAuXCIpKTt0aGlzLl9jYWNoZVNpemU9dC5tZW1vcnlDYWNoZVNpemV9ZWxzZSB0aGlzLl9jYWNoZVNpemU9RDt0aGlzLl9sb2dnZXIuZGVidWcoXCJJbml0aWFsaXplZCBjYWNoZSBzaXplLlwiLHRoaXMuX2NhY2hlU2l6ZSksZS5wcm90b3R5cGUuX2luaXRpYWxpemUuY2FsbCh0aGlzKSx0aGlzLl9yZXRyaWV2ZVBsYXlsaXN0KCl9LHQucHJvdG90eXBlLl9pbml0TWVkaWFFbGVtZW50PWZ1bmN0aW9uKHQscil7aWYodGhpcy5fc2ltcGxlTVNFJiYodGhpcy5fc2ltcGxlTVNFLmtpbGwoKSx0aGlzLl9zaW1wbGVNU0U9bnVsbCx0aGlzLl9sb2dnZXIuZGVidWcoXCJLaWxsZWQgU2ltcGxlTVNFLlwiKSksdGhpcy5fbXNlJiYodGhpcy5fbXNlLmtpbGwoKSx0aGlzLl9tc2U9bnVsbCx0aGlzLl9sb2dnZXIuZGVidWcoXCJLaWxsZWQgTVNFLlwiKSksbnVsbCE9PXRoaXMuX3NlZWtBdHRlbXB0VGltZXImJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3NlZWtBdHRlbXB0VGltZXIpLHRoaXMuX3NlZWtBdHRlbXB0VGltZXI9bnVsbCx0aGlzLl9sb2dnZXIuZGVidWcoXCJDYW5jZWxsZWQgc2VlayBhdHRlbXB0IHRpbWVyLlwiKSksdGhpcy5fb25GaXJzdFNlZ21lbnRSZXRyaWV2ZWQ9bnVsbCx0aGlzLl9zZWVrTWV0YWRhdGFFdmVudEhhbmRsZSYmKHRoaXMuX3NlZWtNZXRhZGF0YUV2ZW50SGFuZGxlLnJlbW92ZSgpLHRoaXMuX3NlZWtNZXRhZGF0YUV2ZW50SGFuZGxlPW51bGwpLG51bGw9PT1yKWUucHJvdG90eXBlLl9pbml0TWVkaWFFbGVtZW50LmNhbGwodGhpcyx0LG51bGwpO2Vsc2V7dGhpcy5faW5pdE1TRSgpO3ZhciBuPXRoaXMuX21zZS5nZXRVcmwoKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJTZXR0aW5nIE1TRSB1cmwuXCIsbiksZS5wcm90b3R5cGUuX2luaXRNZWRpYUVsZW1lbnQuY2FsbCh0aGlzLHQsbil9fSx0LnByb3RvdHlwZS5fc2hvdWxkQmVFbmRlZD1mdW5jdGlvbigpe2lmKCF4KXJldHVybiBlLnByb3RvdHlwZS5fc2hvdWxkQmVFbmRlZC5jYWxsKHRoaXMpO2lmKGUucHJvdG90eXBlLl9zaG91bGRCZUVuZGVkLmNhbGwodGhpcykpcmV0dXJuITA7aWYoIXRoaXMuZ2V0TWVkaWFFbGVtZW50KCkpcmV0dXJuITE7dmFyIHQ9dGhpcy5fZHVyYXRpb247cmV0dXJuIHRoaXMuX3N0YWxsRGV0ZWN0ZWQmJm51bGwhPT10JiZ0aGlzLl9nZXRUcnVlUG9zaXRpb24oKT49dC1rfSx0LnByb3RvdHlwZS5fZ2V0VHJ1ZVBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNZWRpYUVsZW1lbnQoKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJNZWRpYSBlbGVtZW50IHNob3VsZCBleGlzdC5cIik7cmV0dXJuIHRoaXMuX3N0YXJ0UG9zaXRpb25PZmZzZXQrdGhpcy5fZ2V0TWVkaWFFbGVtZW50UG9zaXRpb24oKX0sdC5wcm90b3R5cGUuX2hhbmRsZVNlZWtDaGFuZ2U9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUuX2hhbmRsZVNlZWtDaGFuZ2UuY2FsbCh0aGlzLHQpLHRoaXMuX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlciYmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIkV4cGxpY2l0bHkgdXBkYXRpbmcgcGxheWxpc3Qgc2VnbWVudCByZXRyaWV2ZXIsIGFzIHNlZWsgcmVxdWVzdGVkLlwiKSx0aGlzLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXIudXBkYXRlKCksdGhpcy5fZmluZFNlZ21lbnRBbmRBcHBlbmRUb01TRSgpKX0sdC5wcm90b3R5cGUuX3BlcmZvcm1TZWVrPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpcyxvPXRoaXMsaT1vLl9zaW1wbGVNU0UsYT1vLl9tc2Uscz10aGlzLmdldE1lZGlhRWxlbWVudCgpO2lmKCFhKXRocm93IG5ldyBFcnJvcihcIk1TRSBzaG91bGQgZXhpc3QuXCIpO2lmKCFzKXRocm93IG5ldyBFcnJvcihcIk1lZGlhIGVsZW1lbnQgc2hvdWxkIGV4aXN0LlwiKTt2YXIgdT0hcy5wYXVzZWQ7bnVsbCE9PXRoaXMuX3NlZWtBdHRlbXB0VGltZXImJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3NlZWtBdHRlbXB0VGltZXIpLHRoaXMuX3NlZWtBdHRlbXB0VGltZXI9bnVsbCx0aGlzLl9sb2dnZXIuZGVidWcoXCJDYW5jZWxsZWQgcHJldmlvdXMgc2VlayBhdHRlbXB0IHRpbWVyLlwiKSksdGhpcy5fc2Vla01ldGFkYXRhRXZlbnRIYW5kbGUmJih0aGlzLl9zZWVrTWV0YWRhdGFFdmVudEhhbmRsZS5yZW1vdmUoKSx0aGlzLl9zZWVrTWV0YWRhdGFFdmVudEhhbmRsZT1udWxsLHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlJlbW92ZWQgcHJldmlvdXMgbG9hZGVkIG1ldGFkYXRhIGV2ZW50IGhhbmRsZXIuXCIpKSxpJiZpLmtpbGwoKSxhLmtpbGwoKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJTaW1wbGVNU0UgYW5kIE1TRSBkZXN0cm95ZWQuXCIpLHRoaXMuX3N0YXJ0UG9zaXRpb25PZmZzZXQ9dDt2YXIgbD1udWxsO3RoaXMuX29uRmlyc3RTZWdtZW50UmV0cmlldmVkPWZ1bmN0aW9uKGUpe3JldHVybiBsPWV9LHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIkluaXRpYWxpemluZyBNU0UgYW5kIFNpbXBsZU1TRSBmb3IgbmV3IHBvc2l0aW9uLlwiKSx0aGlzLl9pbml0TVNFKCk7dmFyIGM9dGhpcy5fbXNlLmdldFVybCgpO2lmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlVwZGF0ZWQgbWVkaWEgZWxlbWVudCBNU0Ugc3JjLlwiLGMpLGUucHJvdG90eXBlLl9pbml0TWVkaWFFbGVtZW50LmNhbGwodGhpcyxzLGMpLHUpe3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkNhbGxpbmcgcGxheSgpIG9uIG1lZGlhIGVsZW1lbnQgYXMgaXQgd2FzIHBsYXlpbmcgcHJldmlvdXNseS5cIik7dmFyIGQ9cy5wbGF5KCk7ZCYmZC5jYXRjaCYmZC5jYXRjaChmdW5jdGlvbihlKXtcIkFib3J0RXJyb3JcIiE9PWUubmFtZSYmKG4uX2xvZ2dlci5lcnJvcihcIlVuZXhwZWN0ZWQgcGxheSgpIGVycm9yLlwiLGUpLG4uX3RyaWdnZXJFcnJvcihuZXcgYihcIkV4Y2VwdGlvbiBmcm9tIGNhbGxpbmcgcGxheSgpIGFmdGVyIHNlZWsuXCIsZSkpKX0pfXZhciBmPWZ1bmN0aW9uKGUpeyhUJiZULm1ham9yPDExfHxBKSYmZTxJJiYobi5fbG9nZ2VyLmRlYnVnKFwiVHdlYWtpbmcgb2Zmc2V0IHRvIGZpeCBnbGl0Y2ggaXNzdWUuXCIpLGU9SSk7dmFyIHQ9ZnVuY3Rpb24oKXtuLl9zdGFydFBvc2l0aW9uT2Zmc2V0PU1hdGgubWF4KDAsbi5fc3RhcnRQb3NpdGlvbk9mZnNldC1lKSxuLl9sb2dnZXIuZGVidWcoXCJVcGRhdGVkIHN0YXJ0IHBvc2l0aW9uIG9mZnNldC5cIixuLl9zdGFydFBvc2l0aW9uT2Zmc2V0LGUpO3ZhciB0PWZ1bmN0aW9uKCl7bi5fc2Vla0F0dGVtcHRUaW1lcj1udWxsLG4uX2xvZ2dlci5kZWJ1ZyhcIkF0dGVtcHRpbmcgdG8gc2VlayB0byB0aGUgcmVxdWlyZWQgb2Zmc2V0LlwiLGUpLHMuY3VycmVudFRpbWU9ZS8xZTM7dmFyIG89MWUzKnMuY3VycmVudFRpbWU7TWF0aC5hYnMoby1lKTw9MTAwPyhuLl9sb2dnZXIuZGVidWcoXCJTZWVrZWQgdG8gdGhlIHJlcXVpcmVkIG9mZnNldC5cIixvKSxyKCkpOihuLl9sb2dnZXIud2FybihcIlNlZWsgYXR0ZW1wdCBmYWlsZWQuIFRyeWluZyBhZ2FpbiBzaG9ydGx5LlwiLG8pLG4uX3NlZWtBdHRlbXB0VGltZXI9d2luZG93LnNldFRpbWVvdXQodCw1MCkpfTt0KCl9O24uX29uRmlyc3RTZWdtZW50UmV0cmlldmVkPW51bGwsT3x8cy5yZWFkeVN0YXRlPT09cy5IQVZFX01FVEFEQVRBPyhuLl9sb2dnZXIuZGVidWcoXCJNZWRpYSBlbGVtZW50IGhhcyBtZXRhZGF0YS4gU2Vla2luZyB0byBvZmZzZXQuXCIpLHQoKSk6KG4uX2xvZ2dlci5kZWJ1ZyhcIk1lZGlhIGVsZW1lbnQgaGFzIG5vdCBsb2FkZWQgbWV0YWRhdGEuIFdhaXRpbmcgZm9yIG1ldGFkYXRhLi4uXCIpLG4uX3NlZWtNZXRhZGF0YUV2ZW50SGFuZGxlPW4uX2xpc3RlblRvT25jZShcImxvYWRlZG1ldGFkYXRhXCIsZnVuY3Rpb24oKXtuLl9zZWVrTWV0YWRhdGFFdmVudEhhbmRsZT1udWxsLG4uX2xvZ2dlci5kZWJ1ZyhcIkdvdCBtZXRhZGF0YS4gU2Vla2luZyB0byBvZmZzZXQuXCIpLHQoKX0se2Vhcmx5QXR0YWNoOiEwfSkpfTtudWxsIT09bD8odGhpcy5fbG9nZ2VyLmRlYnVnKFwiRmlyc3Qgc2VnbWVudCBhbHJlYWR5IHJldHJpZXZlZC4gUHJlcGFyaW5nIHRvIHNlZWsgdG8gaW5pdGlhbCBvZmZzZXQuXCIpLGYobCkpOih0aGlzLl9sb2dnZXIuZGVidWcoXCJXYWl0aW5nIGZvciBmaXJzdCBzZWdtZW50IHRvIGJlIHJldHJpZXZlZC5cIiksdGhpcy5fb25GaXJzdFNlZ21lbnRSZXRyaWV2ZWQ9ZnVuY3Rpb24oZSl7bi5fbG9nZ2VyLmRlYnVnKFwiRmlyc3Qgc2VnbWVudCByZXRyaWV2ZWQuIFByZXBhcmluZyB0byBzZWVrIHRvIGluaXRpYWwgb2Zmc2V0LlwiKSxmKGUpfSl9LHQucHJvdG90eXBlLl9raWxsPWZ1bmN0aW9uKCl7dGhpcy5fc2ltcGxlTVNFJiYodGhpcy5fbG9nZ2VyLmRlYnVnKFwiS2lsbGluZyBTaW1wbGVNU0UuXCIpLHRoaXMuX3NpbXBsZU1TRS5raWxsKCksdGhpcy5fc2ltcGxlTVNFPW51bGwpLHRoaXMuX21zZSYmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIktpbGxpbmcgTVNFLlwiKSx0aGlzLl9tc2Uua2lsbCgpLHRoaXMuX21zZT1udWxsKSx0aGlzLl9wbGF5bGlzdFJldHJpZXZlSm9iJiYodGhpcy5fbG9nZ2VyLmRlYnVnKFwiQWJvcnRpbmcgcGxheWxpc3QgcmV0cmlldmUgam9iLlwiKSx0aGlzLl9wbGF5bGlzdFJldHJpZXZlSm9iLmFib3J0KCksdGhpcy5fcGxheWxpc3RSZXRyaWV2ZUpvYj1udWxsKSx0aGlzLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXImJih0aGlzLl9sb2dnZXIuZGVidWcoXCJLaWxsaW5nIHBsYXlsaXN0IHNlZ21lbnQgcmV0cmlldmVyLlwiKSx0aGlzLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXIua2lsbCgpLHRoaXMuX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlcj1udWxsKSx0aGlzLl9wbGF5bGlzdD1udWxsLGUucHJvdG90eXBlLl9raWxsLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl9pbml0TVNFPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5fdHJhbnNtdXhlckFuZE1TRVR5cGUpdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNtdXhlciBzaG91bGQgaGF2ZSBiZWVuIGNvbmZpZ3VyZWQuXCIpO3RoaXMuX2xhc3RTZWdtZW50QXBwZW5kZWQ9bnVsbDt2YXIgdD0hMTtUJiZULm1ham9yPDEwJiZ0aGlzLl90cmFuc211eGVyQW5kTVNFVHlwZS50cmFuc211eGVyPT09YS5NUDNUb01QNFRyYW5zbXV4ZXImJih0PSEwKTt2YXIgcj1uZXcgdS5NU0UodGhpcy5fdHJhbnNtdXhlckFuZE1TRVR5cGUubXNlVHlwZSx0aGlzLl9sb2dnZXIsdCksbj1uZXcgbC5TaW1wbGVNU0UocixmdW5jdGlvbigpe3JldHVybiBlLmdldFNlZ21lbnREYXRhVG9BcHBlbmROZXh0KCl9LGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2dldE1lZGlhRWxlbWVudFBvc2l0aW9uKCl9LGZ1bmN0aW9uKHQpe2UuX3RyaWdnZXJFcnJvcihuZXcgZC5BcHBlbmRFcnJvcih0KSl9LHRoaXMuX2xvZ2dlcik7bi5vbkFwcGVuZFF1ZXVlZC5zdWJzY3JpYmUodGhpcy5fb25TZWdtZW50QXBwZW5kUXVldWVkLmRpc3BhdGNoKSxuLm9uQXBwZW5kRW5kLnN1YnNjcmliZSh0aGlzLl9vblNlZ21lbnRBcHBlbmRFbmQuZGlzcGF0Y2gpLHRoaXMuX3NpbXBsZU1TRT1uLG4uc3RhcnQoKSx0aGlzLl9tc2U9cixyLndoZW5Jbml0aWFsaXplZCgpLmNhdGNoKGZ1bmN0aW9uKHQpe3QhPT11LmtpbGxlZEVycm9yJiYoZS5fbG9nZ2VyLmVycm9yKFwiRXJyb3IgZHVyaW5nIG1zZSBpbml0aWFsaXphdGlvbi5cIix0KSxlLl90cmlnZ2VyRXJyb3IobmV3IGYuSW5pdGlhbGl6ZUVycm9yKHQpKSl9KX0sdC5wcm90b3R5cGUuX2dldE1lZGlhRWxlbWVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNZWRpYUVsZW1lbnQoKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBtZWRpYSBlbGVtZW50LlwiKTtyZXR1cm4gMWUzKmUuY3VycmVudFRpbWV9LHQucHJvdG90eXBlLl93aGVuUGxheWxpc3RSZXRyaWV2ZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9dGhpcy5fcGxheWxpc3Q7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiUGxheWxpc3Qgc2hvdWxkIGhhdmUgYmVlbiByZXRyaWV2ZWQuXCIpO3ZhciBuPSF0aGlzLl9pbml0aWFsUGxheWxpc3RSZXRyaWV2ZUNvbXBsZXRlZDtpZihuKXRoaXMuX2luaXRpYWxQbGF5bGlzdFJldHJpZXZlQ29tcGxldGVkPSEwLHRoaXMuX3BsYXlsaXN0RHVyYXRpb249ci5nZXRUb3RhbER1cmF0aW9uKCksdGhpcy5fcmV0cmlldmVEdXJhdGlvbkRlZmVycmVkLnJlc29sdmUodGhpcy5fcGxheWxpc3REdXJhdGlvbik7ZWxzZXt2YXIgbz1yLmdldFRvdGFsRHVyYXRpb24oKTtpZih0aGlzLl9wbGF5bGlzdER1cmF0aW9uIT09bylyZXR1cm4gdGhpcy5fbG9nZ2VyLmVycm9yKFwiVGhlIGR1cmF0aW9uIGZyb20gdGhlIG5ldyBVUkwgZGlkIG5vdCBtYXRjaCB0aGUgcHJldmlvdXMgb25lLlwiKSx2b2lkIHRoaXMuX3RyaWdnZXJFcnJvcihuZXcgdyhcIlRoZSBkdXJhdGlvbiBmcm9tIHRoZSBuZXcgVVJMIGRpZCBub3QgbWF0Y2ggdGhlIHByZXZpb3VzIG9uZS5cIix7b2xkRHVyYXRpb246dGhpcy5fcGxheWxpc3REdXJhdGlvbixuZXdEdXJhdGlvbjpvfSkpfWlmKCF0aGlzLl90cmFuc211eGVyQW5kTVNFVHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc211eGVyIHNob3VsZCBoYXZlIGJlZW4gY29uZmlndXJlZC5cIik7aWYodGhpcy5fcGxheWxpc3RTZWdtZW50UmV0cmlldmVyKXRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlN3aXRjaGluZyBwbGF5bGlzdCBmb3IgcGxheWxpc3Qgc2VnbWVudCByZXRyaWV2ZXIuXCIpLHRoaXMuX3BsYXlsaXN0U2VnbWVudFJldHJpZXZlci5zd2l0Y2hQbGF5bGlzdChyKTtlbHNle3ZhciBpPXRoaXMuX21heEJ1ZmZlckxlbmd0aDtpZihudWxsPT09aSl0aHJvdyBuZXcgRXJyb3IoXCJtYXhCdWZmZXJMZW5ndGggc2hvdWxkIGhhdmUgYmVlbiBpbml0aWFpemVkIGJ5IG5vdy5cIik7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiQ3JlYXRpbmcgcGxheWxpc3Qgc2VnbWVudCByZXRyaWV2ZXIuXCIpO3ZhciBzPXRoaXMuX2NhY2hlU2l6ZTtpZihudWxsPT09cyl0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZVNpemUgc2hvdWxkIGJlIHNldC5cIik7dmFyIHU9bmV3IGEuUGxheWxpc3RTZWdtZW50UmV0cmlldmVyKHtwbGF5bGlzdDpyLGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0UG9zaXRpb24oKX0sbWF4QnVmZmVyTGVuZ3RoOmksY2FjaGVTaXplOnMsdHJhbnNtdXhlcjp0aGlzLl90cmFuc211eGVyQW5kTVNFVHlwZS50cmFuc211eGVyLGxvZ2dlcjp0aGlzLl9sb2dnZXJ9KTt1Lm9uU2VnbWVudFJlcXVlc3RRdWV1ZWQuc3Vic2NyaWJlKHRoaXMuX29uU2VnbWVudFJlcXVlc3RRdWV1ZWQuZGlzcGF0Y2gpLHUub25TZWdtZW50UmVxdWVzdFN0YXJ0LnN1YnNjcmliZSh0aGlzLl9vblNlZ21lbnRSZXF1ZXN0U3RhcnQuZGlzcGF0Y2gpLHUub25TZWdtZW50UmV0cmlldmVkLnN1YnNjcmliZSh0aGlzLl9vblNlZ21lbnRSZXRyaWV2ZWQuZGlzcGF0Y2gpLHUub25TZWdtZW50UmVxdWVzdEZhaWxlZC5zdWJzY3JpYmUodGhpcy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCksdS5vblNlZ21lbnREZWNyeXB0aW9uU3RhcnQuc3Vic2NyaWJlKHRoaXMuX29uU2VnbWVudERlY3J5cHRpb25TdGFydC5kaXNwYXRjaCksdS5vblNlZ21lbnREZWNyeXB0aW9uRW5kLnN1YnNjcmliZSh0aGlzLl9vblNlZ21lbnREZWNyeXB0aW9uRW5kLmRpc3BhdGNoKSx1Lm9uU2VnbWVudFRyYW5zbXV4U3RhcnQuc3Vic2NyaWJlKHRoaXMuX29uU2VnbWVudFRyYW5zbXV4U3RhcnQuZGlzcGF0Y2gpLHUub25TZWdtZW50VHJhbnNtdXhFbmQuc3Vic2NyaWJlKHRoaXMuX29uU2VnbWVudFRyYW5zbXV4RW5kLmRpc3BhdGNoKSx0aGlzLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXI9dSx1Lm9uRXJyb3Iuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QuX2xvZ2dlci5lcnJvcihcIkVycm9yIGZyb20gcGxheWxpc3Qgc2VnbWVudCByZXRyaWV2ZXIuXCIsZSksZSBpbnN0YW5jZW9mIGEucmV0cmlldmFsRXJyb3JzLlJldHJpZXZhbEVycm9yP3QuX3RyaWdnZXJFcnJvcihuZXcgcC5SZXRyaWV2YWxFcnJvcihlKSk6dC5fdHJpZ2dlckVycm9yKG5ldyBiKFwiVW5leHBlY3RlZCBlcnJvciB3aGVuIHRyeWluZyB0byByZXRyaWV2ZSBzZWdtZW50LlwiLGUpKX0pLHUub25TZWdtZW50UmVhZHkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciByPWUuZXZlbnRSZXByZXNlbnRhdGlvbixuPXYoKTt0Ll9sb2dnZXIuZGVidWcoXCJTZWdtZW50IHJlYWR5LlwiLHIpLHQuX2ZpbmRTZWdtZW50QW5kQXBwZW5kVG9NU0UoKSx0Ll9vblNlZ21lbnRSZWFkeS5kaXNwYXRjaCh7c2VnbWVudDpyfSx7dGltZTpufSl9KX10aGlzLl9pbml0aWFsUGxheWxpc3RSZXRyaWV2ZUNvbXBsZXRlZD0hMCxuJiZ0aGlzLl9odG1sNVBsYXllclJlYWR5JiZlLnByb3RvdHlwZS5fc2lnbmFsUmVhZHkuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX2ZpbmRTZWdtZW50QW5kQXBwZW5kVG9NU0U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zaW1wbGVNU0U7aWYoZSYmZS53YWl0aW5nRm9yU2VnbWVudERhdGEoKSl7dmFyIHQ9dGhpcy5nZXRTZWdtZW50RGF0YVRvQXBwZW5kTmV4dCgpO3QmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJQcm92aWRpbmcgc2VnbWVudCB0byBTaW1wbGVNU0UuXCIsdC5ldmVudFJlcHJlc2VudGF0aW9uKSxlLnByb3ZpZGVOZXh0U2VnbWVudERhdGEodCkpfX0sdC5wcm90b3R5cGUuX3JldHJpZXZlUGxheWxpc3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuX3BsYXlsaXN0KXRocm93IG5ldyBFcnJvcihcIlBsYXlsaXN0IGFscmVhZHkgZXhpc3RzLlwiKTt2YXIgdD10aGlzLl9fcGxheWVyRGVwZW5kZW5jaWVzLHI9dC5wbGF5bGlzdExvYWRlcixuPXQuc2VnbWVudExvYWRlcixvPXQua2V5TG9hZGVyLGk9dC5pc1BsYXlsaXN0UmVzcG9uc2VDb2RlQWNjZXB0YWJsZSxzPXQuaXNQbGF5bGlzdFJlc3BvbnNlQ29kZVJldHJ5YWJsZSx1PXQuaXNTZWdtZW50UmVzcG9uc2VDb2RlQWNjZXB0YWJsZSxsPXQuaXNTZWdtZW50UmVzcG9uc2VDb2RlUmV0cnlhYmxlLGQ9dC5pc0tleVJlc3BvbnNlQ29kZUFjY2VwdGFibGUsZj10LmlzS2V5UmVzcG9uc2VDb2RlUmV0cnlhYmxlO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkNyZWF0aW5nIHBsYXlsaXN0LlwiLHRoaXMuX3VybCk7dmFyIGg9bmV3IGEuUGxheWxpc3Qoe3VybDp0aGlzLl91cmwsc2VnbWVudEZvcm1hdDp0aGlzLl9fZGVzY3JpcHRvci5nZXRTZWdtZW50Rm9ybWF0KCkscGxheWxpc3RMb2FkZXI6cixzZWdtZW50TG9hZGVyOm4sa2V5TG9hZGVyOm8saXNQbGF5bGlzdFJlc3BvbnNlQ29kZUFjY2VwdGFibGU6aSxpc1BsYXlsaXN0UmVzcG9uc2VDb2RlUmV0cnlhYmxlOnMsaXNTZWdtZW50UmVzcG9uc2VDb2RlQWNjZXB0YWJsZTp1LGlzU2VnbWVudFJlc3BvbnNlQ29kZVJldHJ5YWJsZTpsLGlzS2V5UmVzcG9uc2VDb2RlQWNjZXB0YWJsZTpkLGlzS2V5UmVzcG9uc2VDb2RlUmV0cnlhYmxlOmYsbG9nZ2VyOnRoaXMuX2xvZ2dlcn0pO2gub25QbGF5bGlzdFJlcXVlc3RRdWV1ZWQuc3Vic2NyaWJlKHRoaXMuX29uUGxheWxpc3RSZXF1ZXN0UXVldWVkLmRpc3BhdGNoKSxoLm9uUGxheWxpc3RSZXF1ZXN0U3RhcnQuc3Vic2NyaWJlKHRoaXMuX29uUGxheWxpc3RSZXF1ZXN0U3RhcnQuZGlzcGF0Y2gpLGgub25QbGF5bGlzdFJldHJpZXZlZC5zdWJzY3JpYmUodGhpcy5fb25QbGF5bGlzdFJldHJpZXZlZC5kaXNwYXRjaCksaC5vblBsYXlsaXN0UmVxdWVzdEZhaWxlZC5zdWJzY3JpYmUodGhpcy5fb25QbGF5bGlzdFJlcXVlc3RGYWlsZWQuZGlzcGF0Y2gpLGgub25Jbml0RGF0YVJlcXVlc3RRdWV1ZWQuc3Vic2NyaWJlKHRoaXMuX29uSW5pdERhdGFSZXF1ZXN0UXVldWVkLmRpc3BhdGNoKSxoLm9uSW5pdERhdGFSZXF1ZXN0U3RhcnQuc3Vic2NyaWJlKHRoaXMuX29uSW5pdERhdGFSZXF1ZXN0U3RhcnQuZGlzcGF0Y2gpLGgub25Jbml0RGF0YVJldHJpZXZlZC5zdWJzY3JpYmUodGhpcy5fb25Jbml0RGF0YVJldHJpZXZlZC5kaXNwYXRjaCksaC5vbkluaXREYXRhUmVxdWVzdEZhaWxlZC5zdWJzY3JpYmUodGhpcy5fb25Jbml0RGF0YVJlcXVlc3RGYWlsZWQuZGlzcGF0Y2gpLGgub25LZXlSZXF1ZXN0UXVldWVkLnN1YnNjcmliZSh0aGlzLl9vbktleVJlcXVlc3RRdWV1ZWQuZGlzcGF0Y2gpLGgub25LZXlSZXF1ZXN0U3RhcnQuc3Vic2NyaWJlKHRoaXMuX29uS2V5UmVxdWVzdFN0YXJ0LmRpc3BhdGNoKSxoLm9uS2V5UmV0cmlldmVkLnN1YnNjcmliZSh0aGlzLl9vbktleVJldHJpZXZlZC5kaXNwYXRjaCksaC5vbktleVJlcXVlc3RGYWlsZWQuc3Vic2NyaWJlKHRoaXMuX29uS2V5UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCksaC5vblBsYXlsaXN0UGFyc2VTdGFydC5zdWJzY3JpYmUodGhpcy5fb25QbGF5bGlzdFBhcnNlU3RhcnQuZGlzcGF0Y2gpLGgub25QbGF5bGlzdFBhcnNlRW5kLnN1YnNjcmliZSh0aGlzLl9vblBsYXlsaXN0UGFyc2VFbmQuZGlzcGF0Y2gpLHRoaXMuX3BsYXlsaXN0PWgsdGhpcy5fcGxheWxpc3RSZXRyaWV2ZUpvYj10aGlzLl9wbGF5bGlzdC5yZXRyaWV2ZSgpLHRoaXMuX3BsYXlsaXN0UmV0cmlldmVKb2Iub25Db21wbGV0aW9uKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5fcGxheWxpc3QuZ2V0VHlwZSgpO3QhPT1hLlBsYXlsaXN0VHlwZS5WT0Q/KGUuX2xvZ2dlci5lcnJvcihcIlVuc3VwcG9ydGVkIHBsYXlsaXN0IHR5cGUuXCIsdCksZS5fdHJpZ2dlckVycm9yKG5ldyBjLlVuc3VwcG9ydGVkUGxheWxpc3RUeXBlRXJyb3IpKTooZS5fbG9nZ2VyLmRlYnVnKFwiUGxheWxpc3QgcmV0cmlldmVkLlwiKSxlLl93aGVuUGxheWxpc3RSZXRyaWV2ZWQoKSl9KSx0aGlzLl9wbGF5bGlzdFJldHJpZXZlSm9iLm9uRXJyb3IoZnVuY3Rpb24odCl7dCE9PVImJihlLl9sb2dnZXIuZXJyb3IoXCJFcnJvciB3aGVuIHJldHJpZXZpbmcgcGxheWxpc3QuXCIsdCksdCBpbnN0YW5jZW9mIGEucmV0cmlldmFsRXJyb3JzLlJldHJpZXZhbEVycm9yP2UuX3RyaWdnZXJFcnJvcihuZXcgcC5SZXRyaWV2YWxFcnJvcih0KSk6ZS5fdHJpZ2dlckVycm9yKG5ldyBiKFwiVW5leHBlY3RlZCBlcnJvciB3aGVuIHJldHJpZXZpbmcgcGxheWxpc3QuXCIsdCkpKX0pfSx0LnByb3RvdHlwZS5fZmluZFRyYW5zbXV4ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWEuVHJhbnNtdXhlckZhY3RvcnkucmV0cmlldmVUcmFuc211eGVycyhlKTt0aGlzLl9sb2dnZXIuaW5mbyhcIkZpbmRpbmcgYSB0cmFuc211eGVyLi4uXCIsZSk7dmFyIG49ZyhyLGZ1bmN0aW9uKHIpe3JldHVybiB1Lk1TRS5pc1N1cHBvcnRlZCh0Ll9idWlsZE1pbWVUeXBlQW5kQ29kZWNTdHJpbmcoci5nZXRPdXRwdXRGb3JtYXQoKSxlKSl9KXx8bnVsbDtyZXR1cm4gbj90aGlzLl9sb2dnZXIuaW5mbyhcIlRyYW5zbXV4ZXIgZm91bmQuXCIsbi5nZXRJbnB1dEZvcm1hdCgpLG4uZ2V0T3V0cHV0Rm9ybWF0KCkpOnRoaXMuX2xvZ2dlci53YXJuKFwiTm8gdHJhbnNtdXhlciBmb3VuZC5cIiksbn0sdC5wcm90b3R5cGUuZ2V0U2VnbWVudERhdGFUb0FwcGVuZE5leHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9sYXN0U2VnbWVudEFwcGVuZGVkO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkxvb2tpbmcgZm9yIHNlZ21lbnQgdG8gYXBwZW5kIG5leHQuXCIsISFlKTt2YXIgdD10aGlzLl9wbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXI7aWYoIXQpcmV0dXJuIHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIk5vIHNlZ21lbnQgcmV0cmlldmVyLlwiKSxudWxsO2lmKGUpe3ZhciByPXQuZ2V0U2VnbWVudHNXaXRoRGF0YSgpLG49cltyLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zZWdtZW50fSkuaW5kZXhPZihlKSsxXTtyZXR1cm4gbj8odGhpcy5fbG9nZ2VyLmRlYnVnKFwiRm91bmQgc2VnbWVudC5cIixuLmV2ZW50UmVwcmVzZW50YXRpb24pLHRoaXMuX2xhc3RTZWdtZW50QXBwZW5kZWQ9bi5zZWdtZW50LHtkYXRhOm4uZGF0YSxldmVudFJlcHJlc2VudGF0aW9uOm4uZXZlbnRSZXByZXNlbnRhdGlvbn0pOih0aGlzLl9sb2dnZXIuZGVidWcoXCJObyBzZWdtZW50IGZvdW5kLlwiKSxlLmlzRmluYWxTZWdtZW50KCkmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJUaGUgbGFzdCBzZWdtZW50IHdlIGFwcGVuZGVkIHdhcyB0aGUgbGFzdCBvbmUgaW4gdGhlIHN0cmVhbS4gU2lnbmFsbGluZyBFT1MuXCIpLHRoaXMuX3NpZ25hbEVPUygpKSxudWxsKX12YXIgbz10aGlzLmdldFBvc2l0aW9uKCksbj1nKHQuZ2V0U2VnbWVudHNXaXRoRGF0YSgpLGZ1bmN0aW9uKGUpe3JldHVybiBlLnNlZ21lbnQuZ2V0VGltZVJhbmdlKCkuY29udGFpbnNUaW1lKG8pfSk7aWYoIW4pcmV0dXJuIHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIk5vIHNlZ21lbnQgZm91bmQuXCIsbyksbnVsbDt2YXIgaT1vLW4uc2VnbWVudC5nZXRUaW1lUmFuZ2UoKS5zdGFydCxhPXRoaXMuZ2V0TWVkaWFFbGVtZW50KCk7aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwiTWVkaWEgZWxlbWVudCBzaG91bGQgZXhpc3QuXCIpO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkZvdW5kIGluaXRpYWwgc2VnbWVudC5cIixuLmV2ZW50UmVwcmVzZW50YXRpb24pLHRoaXMuX2xhc3RTZWdtZW50QXBwZW5kZWQ9bi5zZWdtZW50LHRoaXMuX29uRmlyc3RTZWdtZW50UmV0cmlldmVkJiZ0aGlzLl9vbkZpcnN0U2VnbWVudFJldHJpZXZlZChpKTt2YXIgcz1uLmRhdGEsdT1uLmluaXREYXRhLGw9cztyZXR1cm4gdSYmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlByZXBlbmRpbmcgaW5pdCBkYXRhLlwiKSxsPW5ldyBVaW50OEFycmF5KHUubGVuZ3RoK3MubGVuZ3RoKSxsLnNldCh1LDApLGwuc2V0KHMsdS5sZW5ndGgpKSx7ZGF0YTpsLGV2ZW50UmVwcmVzZW50YXRpb246bi5ldmVudFJlcHJlc2VudGF0aW9ufX0sdC5wcm90b3R5cGUuX3NpZ25hbEVPUz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiU2lnbmFsbGluZyBFT1MuXCIpLHRoaXMuX3NpbXBsZU1TRSYmKHRoaXMuX3NpbXBsZU1TRS5raWxsKCksdGhpcy5fbG9nZ2VyLmRlYnVnKFwiS2lsbGVkIFNpbXBsZU1TRS5cIiksdGhpcy5fc2ltcGxlTVNFPW51bGwpO3ZhciB0PXRoaXMuX21zZTt0JiYhdC5lb3NTaWduYWxsZWQoKSYmdC5zaWduYWxFT1MoKS5jYXRjaChmdW5jdGlvbihyKXt0PT09ZS5fbXNlJiYoZS5fbG9nZ2VyLmVycm9yKFwiRXJyb3Igb2NjdXJyZWQgd2hlbiBzaWduYWxsaW5nIEVPUy5cIixyKSxlLl90cmlnZ2VyRXJyb3IobmV3IGQuQXBwZW5kRXJyb3IocikpKX0pfSx0fShzLkhUTUw1UGxheWVyKTt0LkhMU01TRVBsYXllcj1DfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigwKSxvPXIoOSksaT1uLmhlbHBlcnMuZGVmZXJyZWQuYnVpbGREZWZlcnJlZCxhPW8uaGVscGVycy50aW1lUmFuZ2VzLmJ1aWxkVGltZVJhbmdlcyxzPW4uaGVscGVycy5Qcm9taXNlLHU9bi5sb2dnZXIucHJlZml4TG9nZ2VyLGw9bi5sb2dnZXIubm9PcExvZ2dlcixjPS8oTVNJRSApfChUcmlkZW50XFwvKS8sZD1uLmhlbHBlcnMuYnJvd3Nlci5pc1NhZmFyaSgpLGY9J2F1ZGlvL21wNDsgY29kZWNzPVwibXAzXCInLHA9XCJhdWRpby9tcGVnXCIsaD0nYXVkaW8vd2VibTsgY29kZWNzPVwib3B1c1wiJyxfPW4uaGVscGVycy5icm93c2VyLmdldFNhZmFyaVZlcnNpb24oKSxnPW4uaGVscGVycy5icm93c2VyLmdldENocm9tZVZlcnNpb24oKTt0LmtpbGxlZEVycm9yPW5ldyBFcnJvcihcIk1TRSBraWxsZWQuXCIpO3ZhciB5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49dGhpcy5jb25zdHJ1Y3RvcjtpZih2b2lkIDA9PT10JiYodD1sKSx2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5fc291cmNlQnVmZmVyPW51bGwsdGhpcy5faW5pdGlhbGl6ZWQ9ITEsdGhpcy5faW5pdGlhbGl6ZURlZmVycmVkPWkoKSx0aGlzLl93aGVuSWRsZURlZmVycmVkPWkoKSx0aGlzLl9lcnJvcj1udWxsLHRoaXMuX2RlYWQ9ITEsdGhpcy5fZW9zU2lnbmFsbGVkPSExLHRoaXMuX3BlbmRpbmdBY3Rpb25zPVtdLHRoaXMuX2N1cnJlbnRBY3Rpb249bnVsbCx0aGlzLl9sb2dnZXI9dSh0LFwiTVNFXCIpLHRoaXMuX29uTWVkaWFTb3VyY2VJbml0PXRoaXMuX29uTWVkaWFTb3VyY2VJbml0LmJpbmQodGhpcyksdGhpcy5fb25NZWRpYVNvdXJjZUVuZGVkPXRoaXMuX29uTWVkaWFTb3VyY2VFbmRlZC5iaW5kKHRoaXMpLHRoaXMuX29uTWVkaWFTb3VyY2VFcnJvcj10aGlzLl9vbk1lZGlhU291cmNlRXJyb3IuYmluZCh0aGlzKSx0aGlzLl9vblNvdXJjZUJ1ZmZlclVwZGF0ZUVuZD10aGlzLl9vblNvdXJjZUJ1ZmZlclVwZGF0ZUVuZC5iaW5kKHRoaXMpLHRoaXMuX29uU291cmNlQnVmZmVyRXJyb3I9dGhpcy5fb25Tb3VyY2VCdWZmZXJFcnJvci5iaW5kKHRoaXMpLCFuLmlzU3VwcG9ydGVkKGUpKXRocm93IHRoaXMuX2xvZ2dlci5lcnJvcihcIk5vdCBzdXBwb3J0ZWQuXCIpLG5ldyBFcnJvcihcIk5vdCBzdXBwb3J0ZWQuXCIpO2QmJmU9PT1mJiYoZT1cImF1ZGlvL21wNFwiKSx0aGlzLl90eXBlPWUsdGhpcy5fdXNlU2VnbWVudHNNb2RlPXIsdGhpcy5fbWVkaWFTb3VyY2U9bmV3IE1lZGlhU291cmNlLHRoaXMuX21lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJzb3VyY2VvcGVuXCIsdGhpcy5fb25NZWRpYVNvdXJjZUluaXQsITEpLHRoaXMuX21lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMuX29uTWVkaWFTb3VyY2VFcnJvciwhMSksdGhpcy5fdXJsPVVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5fbWVkaWFTb3VyY2UpLHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIkNyZWF0ZWQgVVJMLlwiLHRoaXMuX3VybCl9cmV0dXJuIGUuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIWMudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkmJlwiTWVkaWFTb3VyY2VcImluIHdpbmRvdyYmKCFlfHwhKCFkfHxlIT09Zil8fCEoXyYmXy5tYWpvcjwxMCYmZT09PXApJiYhKGcmJmcubWFqb3I8NTAmJmU9PT1oKSYmTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKGUpKX0sZS5wcm90b3R5cGUud2hlbkluaXRpYWxpemVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luaXRpYWxpemVEZWZlcnJlZC5wcm9taXNlfSxlLnByb3RvdHlwZS53aGVuSWRsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93aGVuSWRsZURlZmVycmVkP3RoaXMuX3doZW5JZGxlRGVmZXJyZWQucHJvbWlzZTpzLnJlc29sdmUodm9pZCAwKX0sZS5wcm90b3R5cGUuaXNJZGxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlYWR8fCF0aGlzLl93aGVuSWRsZURlZmVycmVkfSxlLnByb3RvdHlwZS5oYXNJbml0aWFsaXplZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbml0aWFsaXplZH0sZS5wcm90b3R5cGUuZ2V0RXJyb3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3J9LGUucHJvdG90eXBlLmdldFVybD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fdXJsfSxlLnByb3RvdHlwZS5nZXRCdWZmZXJlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbnN1cmVOb3REZWFkKCksdGhpcy5fc291cmNlQnVmZmVyP2EodGhpcy5fc291cmNlQnVmZmVyLmJ1ZmZlcmVkKTpbXX0sZS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUpe3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9lbnN1cmVJbml0aWFsaXplZCgpLHRoaXMuX2Vuc3VyZU5vdEVPUygpLHRoaXMuX2xvZ2dlci5kZWJ1ZyhcImFwcGVuZCgpIGNhbGxlZC5cIik7dmFyIHQ9aSgpO3JldHVybiB0aGlzLl9wZW5kaW5nQWN0aW9ucy5wdXNoKHt0eXBlOlwiYXBwZW5kXCIsZGF0YTplLGRlZmVycmVkOnR9KSx0aGlzLl9wZXJmb3JtTmV4dEFjdGlvbigpLHQucHJvbWlzZX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe2lmKDA9PT1lLmR1cmF0aW9uKXRocm93IG5ldyBFcnJvcihcIlJlbW92ZSByYW5nZSBtdXN0IGhhdmUgYSBkdXJhdGlvbiA+IDAuXCIpO3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9lbnN1cmVJbml0aWFsaXplZCgpLHRoaXMuX2Vuc3VyZU5vdEVPUygpLHRoaXMuX2xvZ2dlci5kZWJ1ZyhcInJlbW92ZSgpIGNhbGxlZC5cIixlKTt2YXIgdD1pKCk7cmV0dXJuIHRoaXMuX3BlbmRpbmdBY3Rpb25zLnB1c2goe3R5cGU6XCJyZW1vdmVcIixyYW5nZTplLGRlZmVycmVkOnR9KSx0aGlzLl9wZXJmb3JtTmV4dEFjdGlvbigpLHQucHJvbWlzZX0sZS5wcm90b3R5cGUuc2lnbmFsRU9TPWZ1bmN0aW9uKCl7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX2Vuc3VyZUluaXRpYWxpemVkKCksdGhpcy5fZW5zdXJlTm90RU9TKCksdGhpcy5fbG9nZ2VyLmRlYnVnKFwic2lnbmFsRU9TKCkgY2FsbGVkLlwiKSx0aGlzLl9lb3NTaWduYWxsZWQ9ITA7dmFyIGU9aSgpO3JldHVybiB0aGlzLl9wZW5kaW5nQWN0aW9ucy5wdXNoKHt0eXBlOlwiZW9zXCIsZGVmZXJyZWQ6ZX0pLHRoaXMuX3BlcmZvcm1OZXh0QWN0aW9uKCksZS5wcm9taXNlfSxlLnByb3RvdHlwZS5lb3NTaWduYWxsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW9zU2lnbmFsbGVkfSxlLnByb3RvdHlwZS5raWxsPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2RlYWQpe2lmKHRoaXMuX2xvZ2dlci5kZWJ1ZyhcImtpbGwoKSBjYWxsZWQuXCIpLHRoaXMuX2RlYWQ9ITAsdGhpcy5fc291cmNlQnVmZmVyKXt0aGlzLl9zb3VyY2VCdWZmZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWVuZFwiLHRoaXMuX29uU291cmNlQnVmZmVyVXBkYXRlRW5kLCExKSx0aGlzLl9zb3VyY2VCdWZmZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcy5fb25Tb3VyY2VCdWZmZXJFcnJvciwhMSk7dHJ5e3RoaXMuX21lZGlhU291cmNlLnJlbW92ZVNvdXJjZUJ1ZmZlcih0aGlzLl9zb3VyY2VCdWZmZXIpfWNhdGNoKGUpe3RoaXMuX2xvZ2dlci5lcnJvcihcIkVycm9yIGZyb20gcmVtb3ZlU291cmNlQnVmZmVyKClcIixlKX19dGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNvdXJjZW9wZW5cIix0aGlzLl9vbk1lZGlhU291cmNlSW5pdCwhMSksdGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNvdXJjZWVuZGVkXCIsdGhpcy5fb25NZWRpYVNvdXJjZUVuZGVkLCExKSx0aGlzLl9tZWRpYVNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzLl9vbk1lZGlhU291cmNlRXJyb3IsITEpLFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5fdXJsKTt2YXIgZT10aGlzLl9jdXJyZW50QWN0aW9uP1t0aGlzLl9jdXJyZW50QWN0aW9uXTpbXTtlPWUuY29uY2F0KHRoaXMuX3BlbmRpbmdBY3Rpb25zKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5kZWZlcnJlZC5yZWplY3QodC5raWxsZWRFcnJvcil9KSx0aGlzLl93aGVuSWRsZURlZmVycmVkfHwodGhpcy5fd2hlbklkbGVEZWZlcnJlZD1pKCkpLHRoaXMuX3doZW5JZGxlRGVmZXJyZWQucmVqZWN0KHQua2lsbGVkRXJyb3IpLHRoaXMuX2luaXRpYWxpemVkfHx0aGlzLl9pbml0aWFsaXplRGVmZXJyZWQucmVqZWN0KHRoaXMuX2Vycm9yfHx0LmtpbGxlZEVycm9yKSx0aGlzLl9wZW5kaW5nQWN0aW9ucy5sZW5ndGg9MCx0aGlzLl9sb2dnZXIuZGVidWcoXCJLaWxsZWQuXCIpfX0sZS5wcm90b3R5cGUuX2Vuc3VyZUluaXRpYWxpemVkPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2luaXRpYWxpemVkKXRocm93IG5ldyBFcnJvcihcIk5vdCBpbml0aWFsaXplZCB5ZXQuXCIpfSxlLnByb3RvdHlwZS5fZW5zdXJlTm90RU9TPWZ1bmN0aW9uKCl7aWYodGhpcy5fZW9zU2lnbmFsbGVkKXRocm93IG5ldyBFcnJvcihcIkVPUyBzaWduYWxsZWQuXCIpfSxlLnByb3RvdHlwZS5fZW5zdXJlTm90RGVhZD1mdW5jdGlvbigpe2lmKHRoaXMuX2RlYWQpdGhyb3cgbmV3IEVycm9yKFwiTVNFIGlzIGRlYWQuXCIpfSxlLnByb3RvdHlwZS5fb25NZWRpYVNvdXJjZUluaXQ9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIuZGVidWcoXCJNU0UgaW5pdGlhbGl6ZWQuXCIpLHRoaXMuX21lZGlhU291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzb3VyY2VvcGVuXCIsdGhpcy5fb25NZWRpYVNvdXJjZUluaXQsITEpO3RyeXt0aGlzLl9sb2dnZXIuZGVidWcoXCJDcmVhdGluZyBzb3VyY2UgYnVmZmVyLlwiLHRoaXMuX3R5cGUpLHRoaXMuX3NvdXJjZUJ1ZmZlcj10aGlzLl9tZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIodGhpcy5fdHlwZSksdGhpcy5fc291cmNlQnVmZmVyLm1vZGU9dGhpcy5fdXNlU2VnbWVudHNNb2RlP1wic2VnbWVudHNcIjpcInNlcXVlbmNlXCIsdGhpcy5fbG9nZ2VyLmRlYnVnKFwiVXNpbmcgYXBwZW5kIG1vZGU6IFwiK3RoaXMuX3NvdXJjZUJ1ZmZlci5tb2RlKSx0aGlzLl9zb3VyY2VCdWZmZXIuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWVuZFwiLHRoaXMuX29uU291cmNlQnVmZmVyVXBkYXRlRW5kLCExKSx0aGlzLl9zb3VyY2VCdWZmZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcy5fb25Tb3VyY2VCdWZmZXJFcnJvciwhMSl9Y2F0Y2goZSl7dGhpcy5faGFuZGxlRXJyb3IoZSl9dGhpcy5faW5pdGlhbGl6ZURlZmVycmVkLnJlc29sdmUodm9pZCAwKSx0aGlzLl93aGVuSWRsZURlZmVycmVkLnJlc29sdmUodm9pZCAwKSx0aGlzLl9pbml0aWFsaXplZD0hMCx0aGlzLl9wZXJmb3JtTmV4dEFjdGlvbigpfSxlLnByb3RvdHlwZS5fb25NZWRpYVNvdXJjZUVuZGVkPWZ1bmN0aW9uKCl7dGhpcy5fb25Tb3VyY2VCdWZmZXJVcGRhdGVFbmQoKX0sZS5wcm90b3R5cGUuX29uTWVkaWFTb3VyY2VFcnJvcj1mdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVFcnJvcihlKX0sZS5wcm90b3R5cGUuX2hhbmRsZUVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9sb2dnZXIuZXJyb3IoXCJFcnJvciBvY2N1cnJlZC5cIixlKSx0aGlzLl9lcnJvcj1lfHxuZXcgRXJyb3IoXCJVbmtub3duIGVycm9yLlwiKSx0aGlzLmtpbGwoKX0sZS5wcm90b3R5cGUuX29uU291cmNlQnVmZmVyVXBkYXRlRW5kPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY3VycmVudEFjdGlvbjtyZXR1cm4gdGhpcy5fbG9nZ2VyLmRlYnVnKFwiVXBkYXRlIGVuZGVkLlwiLHRoaXMuZ2V0QnVmZmVyZWQoKSksZT9cImFwcGVuZFwiPT09ZS50eXBlJiYwPT09bi5UaW1lUmFuZ2UuZ2V0Q292ZXJhZ2UodGhpcy5nZXRCdWZmZXJlZCgpKS5lbmQ/dm9pZCB0aGlzLl9oYW5kbGVFcnJvcihuZXcgRXJyb3IoXCJCdWZmZXIgZW5kIHBvaW50IGlzIHN0aWxsIDAgYWZ0ZXIgYW4gYXBwZW5kLlwiKSk6KHRoaXMuX2N1cnJlbnRBY3Rpb249bnVsbCxlLmRlZmVycmVkLnJlc29sdmUodm9pZCAwKSx2b2lkIHRoaXMuX3BlcmZvcm1OZXh0QWN0aW9uKCkpOnZvaWQgdGhpcy5faGFuZGxlRXJyb3IobmV3IEVycm9yKFwiTm8gYWN0aW9uIGluIHByb2dyZXNzLlwiKSl9LGUucHJvdG90eXBlLl9vblNvdXJjZUJ1ZmZlckVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZUVycm9yKGUpfSxlLnByb3RvdHlwZS5fcGVyZm9ybU5leHRBY3Rpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl93aGVuSWRsZURlZmVycmVkO2lmKCF0aGlzLl9jdXJyZW50QWN0aW9uJiZ0aGlzLl9zb3VyY2VCdWZmZXIpe3ZhciB0PXRoaXMuX3BlbmRpbmdBY3Rpb25zLnNoaWZ0KCk7aWYoIXQpcmV0dXJuIHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIk5vIG1vcmUgYWN0aW9ucy5cIiksdm9pZChlJiYodGhpcy5fd2hlbklkbGVEZWZlcnJlZD1udWxsLGUucmVzb2x2ZSh2b2lkIDApKSk7c3dpdGNoKGV8fCh0aGlzLl93aGVuSWRsZURlZmVycmVkPWkoKSksdGhpcy5fY3VycmVudEFjdGlvbj10LHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlBlcmZvcm1pbmcgbmV4dCBhY3Rpb24uLi5cIiksdC50eXBlKXtjYXNlXCJhcHBlbmRcIjp2YXIgcj1uLlRpbWVSYW5nZS5nZXRDb3ZlcmFnZSh0aGlzLmdldEJ1ZmZlcmVkKCkpO3RyeXtpZihcInNlZ21lbnRzXCI9PT10aGlzLl9zb3VyY2VCdWZmZXIubW9kZSl7dmFyIG89ci5lbmQvMWUzO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIlNldHRpbmcgdGltZXN0YW1wT2Zmc2V0IGJlY2F1c2UgZGV0ZWN0ZWQgc2FmYXJpLlwiLG8pLHRoaXMuX3NvdXJjZUJ1ZmZlci50aW1lc3RhbXBPZmZzZXQ9b310aGlzLl9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIGFwcGVuZEJ1ZmZlcigpLlwiKSx0aGlzLl9zb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKHQuZGF0YSl9Y2F0Y2goZSl7dGhpcy5faGFuZGxlRXJyb3IoZSl9YnJlYWs7Y2FzZVwicmVtb3ZlXCI6dHJ5e3ZhciBhPXQucmFuZ2U7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiQ2FsbGluZyByZW1vdmUoKS5cIixhLnN0YXJ0LGEuZW5kKSx0aGlzLl9zb3VyY2VCdWZmZXIucmVtb3ZlKGEuc3RhcnQvMWUzLGEuZW5kLzFlMyl9Y2F0Y2goZSl7dGhpcy5faGFuZGxlRXJyb3IoZSl9YnJlYWs7Y2FzZVwiZW9zXCI6dHJ5e3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIkNhbGxpbmcgZW5kT2ZTdHJlYW0oKS5cIiksdGhpcy5fc291cmNlQnVmZmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVlbmRcIix0aGlzLl9vblNvdXJjZUJ1ZmZlclVwZGF0ZUVuZCwhMSksdGhpcy5fbWVkaWFTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcInNvdXJjZWVuZGVkXCIsdGhpcy5fb25NZWRpYVNvdXJjZUVuZGVkLCExKSx0aGlzLl9tZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgpfWNhdGNoKGUpe3RoaXMuX2hhbmRsZUVycm9yKGUpfX19fSxlfSgpO3QuTVNFPXl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89bi5oZWxwZXJzLlByb21pc2UsaT1uLmV2ZW50RGlzcGF0Y2hlci5FdmVudERpc3BhdGNoZXIsYT1uLmxvZ2dlci5wcmVmaXhMb2dnZXIscz1uLmxvZ2dlci5ub09wTG9nZ2VyLHU9N2UzLGw9MmU0LGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG4sbyl7dm9pZCAwPT09byYmKG89cyk7dmFyIHU9dGhpczt0aGlzLl9vbkFwcGVuZFF1ZXVlZD1uZXcgaSx0aGlzLl9vbkFwcGVuZEVuZD1uZXcgaSx0aGlzLl91cGRhdGVUaW1lcklkPW51bGwsdGhpcy5fZ2NUaW1lcklkPW51bGwsdGhpcy5fd2FpdGluZ0ZvckRhdGE9ITEsdGhpcy5fc3RhcnRlZD0hMSx0aGlzLl9yZXNldHRpbmdQcm9taXNlPW51bGwsdGhpcy5fZXJyb3I9bnVsbCx0aGlzLl9sb2dnZXI9YShvLFwiU2ltcGxlTVNFXCIpLHRoaXMub25BcHBlbmRRdWV1ZWQ9dGhpcy5fb25BcHBlbmRRdWV1ZWQuZ2V0SGFuZGxlKCksdGhpcy5vbkFwcGVuZEVuZD10aGlzLl9vbkFwcGVuZEVuZC5nZXRIYW5kbGUoKSx0aGlzLl9tc2U9ZSx0aGlzLl9nZXROZXh0U2VnbWVudERhdGE9dCx0aGlzLl9nZXRQb3NpdGlvbj1yLHRoaXMuX29uRXJyb3I9bixlLndoZW5Jbml0aWFsaXplZCgpLnRoZW4oZnVuY3Rpb24oKXshdS5fZXJyb3ImJnUuX3N0YXJ0ZWQmJih1Ll9sb2dnZXIuZGVidWcoXCJNU0UgaW5pdGlhbGl6ZWQuIFByZXBhcmluZyB0byB1cGRhdGUuXCIpLHUuX3ByZXBhcmVVcGRhdGUoKSl9KS5jYXRjaChmdW5jdGlvbihlKXt1Ll9lcnJvcnx8KHUuX2xvZ2dlci5lcnJvcihcIkVycm9yIHdoZW4gd2FpdGluZyBmb3IgTVNFIHRvIGluaXRpYWxpemUuXCIsZSksdS5faGFuZGxlRXJyb3IoZXx8bmV3IEVycm9yKFwiRXJyb3Igd2FpdGluZyBmb3IgTVNFIHRvIGluaXRpYWxpemUuXCIpKSl9KX1yZXR1cm4gZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9jaGVja05vdEVycm9yZWQoKSx0aGlzLl9yZXNldHRpbmdQcm9taXNlKXRocm93IG5ldyBFcnJvcihcInN0YXJ0KCkgaXMgbm90IGFsbG93ZWQgd2hpbHN0IGEgcmVzZXQgaXMgaW4gcHJvZ3Jlc3MuXCIpO2lmKHRoaXMuX3N0YXJ0ZWQpdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSBzdGFydGVkLiByZXNldCgpIGZpcnN0LlwiKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJzdGFydCgpIGNhbGxlZC5cIiksdGhpcy5fc2NoZWR1bGVHQygpLHRoaXMuX3N0YXJ0ZWQ9ITAsdGhpcy5fcHJlcGFyZVVwZGF0ZSgpfSxlLnByb3RvdHlwZS5raWxsPWZ1bmN0aW9uKCl7dGhpcy5fZXJyb3J8fCh0aGlzLl9sb2dnZXIuZGVidWcoXCJraWxsKCkgY2FsbGVkLlwiKSx0aGlzLl9jbGVhclRpbWVycygpLHRoaXMuX2Vycm9yPW5ldyBFcnJvcihcIktpbGxlZC5cIiksdGhpcy5fbG9nZ2VyLmRlYnVnKFwiS2lsbGVkLlwiKSl9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLl9jaGVja05vdEVycm9yZWQoKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJyZXNldCgpIGNhbGxlZC5cIiksdGhpcy5fcmVzZXR0aW5nUHJvbWlzZSlyZXR1cm4gdGhpcy5fbG9nZ2VyLmRlYnVnKFwiUmVzZXQgYWxyZWFkeSBpbiBwcm9ncmVzcy5cIiksdGhpcy5fcmVzZXR0aW5nUHJvbWlzZTtpZighdGhpcy5fc3RhcnRlZClyZXR1cm4gdGhpcy5fbG9nZ2VyLmRlYnVnKFwiTm90aGluZyB0byBkbyB0bywgYWxyZWFkeSByZXNldC5cIiksby5yZXNvbHZlKCk7dmFyIHQ9dGhpcy5fbXNlO3JldHVybiB0aGlzLl93YWl0aW5nRm9yRGF0YT0hMSxcbnRoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fY2xlYXJUaW1lcnMoKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJXYWl0aW5nIHRvIGNsZWFyIE1TRSBidWZmZXIuLi5cIiksdGhpcy5fcmVzZXR0aW5nUHJvbWlzZT10LndoZW5JZGxlKCkudGhlbihmdW5jdGlvbigpe2lmKGUuX2Vycm9yKXRocm93IGUuX2Vycm9yO2UuX2xvZ2dlci5kZWJ1ZyhcIkNsZWFyaW5nIE1TRSBidWZmZXIuXCIpO3ZhciByPXQuZ2V0QnVmZmVyZWQoKSxvPW4uVGltZVJhbmdlLmdldENvdmVyYWdlKHIpO2lmKG8uZHVyYXRpb24+MClyZXR1cm4gdC5yZW1vdmUobyl9KS50aGVuKGZ1bmN0aW9uKCl7ZS5fbG9nZ2VyLmRlYnVnKFwiTVNFIGJ1ZmZlciBjbGVhcmVkLlwiKSxlLl9yZXNldHRpbmdQcm9taXNlPW51bGx9KS5jYXRjaChmdW5jdGlvbih0KXtlLl9sb2dnZXIuZXJyb3IoXCJFcnJvciByZXNldHRpbmcgTVNFLlwiLHQpO3ZhciByPXR8fG5ldyBFcnJvcihcIkVycm9yIHJlc2V0dGluZyBNU0UuXCIpO3Rocm93IGUuX2hhbmRsZUVycm9yKHIpLHJ9KX0sZS5wcm90b3R5cGUud2FpdGluZ0ZvclNlZ21lbnREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTm90RXJyb3JlZCgpLHRoaXMuX3dhaXRpbmdGb3JEYXRhfSxlLnByb3RvdHlwZS5wcm92aWRlTmV4dFNlZ21lbnREYXRhPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NoZWNrTm90RXJyb3JlZCgpLCF0aGlzLl93YWl0aW5nRm9yRGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgd2FpdGluZyBmb3IgZGF0YS5cIik7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiU2VnbWVudCBkYXRhIHByb3ZpZGVkLlwiKSx0aGlzLl93YWl0aW5nRm9yRGF0YT0hMSx0aGlzLl91cGRhdGUoZSl9LGUucHJvdG90eXBlLl9wcmVwYXJlVXBkYXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX3VwZGF0ZVRpbWVySWQpe3ZhciBlPXRoaXMuX21zZTtpZihlLmhhc0luaXRpYWxpemVkKCkpe3ZhciB0PW4uVGltZVJhbmdlLmdldENvdmVyYWdlKGUuZ2V0QnVmZmVyZWQoKSk7aWYodC5lbmQ8PXRoaXMuX2dldFBvc2l0aW9uKCkrdSl7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiUmVxdWVzdGluZyBuZXh0IHNlZ21lbnQgZGF0YS5cIik7dmFyIHI9dGhpcy5fZ2V0TmV4dFNlZ21lbnREYXRhKCk7cj8odGhpcy5fbG9nZ2VyLmRlYnVnKFwiR290IHNlZ21lbnQgZGF0YS5cIiksdGhpcy5fdXBkYXRlKHIpKToodGhpcy5fbG9nZ2VyLmRlYnVnKFwiRGlkIG5vdCBnZXQgYW55IGRhdGEuXCIpLHRoaXMuX3dhaXRpbmdGb3JEYXRhPSEwKX1lbHNlIHRoaXMuX3NjaGVkdWxlVXBkYXRlKCl9fX0sZS5wcm90b3R5cGUuX2djPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX21zZTtpZighdC5oYXNJbml0aWFsaXplZCgpKXJldHVybiB2b2lkIHRoaXMuX3NjaGVkdWxlR0MoKTt2YXIgcj1uLlRpbWVSYW5nZS5nZXRDb3ZlcmFnZSh0LmdldEJ1ZmZlcmVkKCkpLG89dGhpcy5fZ2V0UG9zaXRpb24oKS01ZTM7aWYoci5zdGFydDxvKXt2YXIgaT1uZXcgbi5UaW1lUmFuZ2Uoci5zdGFydCxvLXIuc3RhcnQpO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIlJlbW92aW5nIG1lZGlhIHRoYXQgaGFzIGJlZW4gcGxheWVkLlwiLGkpLHQucmVtb3ZlKGkpLnRoZW4oZnVuY3Rpb24oKXtlLl9sb2dnZXIuZGVidWcoXCJSZW1vdmVkIG1lZGlhIHRoYXQgaGFzIGJlZW4gcGxheWVkLlwiLGkpLGUuX2Vycm9yfHxlLl9zY2hlZHVsZUdDKCl9KS5jYXRjaChmdW5jdGlvbih0KXtlLl9sb2dnZXIuZXJyb3IoXCJFcnJvciB3aGVuIGF0dGVtcHRpbmcgdG8gcmVtb3ZlIG1lZGlhIHRoYXQgaGFzIGJlZW4gcGxheWVkLlwiLGksdCksZS5fZXJyb3J8fGUuX3NjaGVkdWxlR0MoKX0pfWVsc2UgdGhpcy5fc2NoZWR1bGVHQygpfSxlLnByb3RvdHlwZS5fdXBkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiVXBkYXRpbmcuLi5cIik7dmFyIHI9dGhpcy5fbXNlO3RoaXMuX29uQXBwZW5kUXVldWVkLmRpc3BhdGNoKHtzZWdtZW50OmUuZXZlbnRSZXByZXNlbnRhdGlvbn0pLHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIkFwcGVuZGluZy4uLlwiKSxyLmFwcGVuZChlLmRhdGEpLnRoZW4oZnVuY3Rpb24oKXt0Ll9sb2dnZXIuZGVidWcoXCJBcHBlbmRlZC5cIiksdC5fb25BcHBlbmRFbmQuZGlzcGF0Y2goe3NlZ21lbnQ6ZS5ldmVudFJlcHJlc2VudGF0aW9ufSksdC5fcmVzZXR0aW5nUHJvbWlzZXx8dC5fZXJyb3J8fHQuX3ByZXBhcmVVcGRhdGUoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3QuX2Vycm9yfHwodC5fbG9nZ2VyLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgTVNFLlwiLGUpLHQuX2hhbmRsZUVycm9yKGV8fG5ldyBFcnJvcihcIkVycm9yIHVwZGF0aW5nIE1TRS5cIikpKX0pfSxlLnByb3RvdHlwZS5fc2NoZWR1bGVVcGRhdGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3VwZGF0ZVRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl91cGRhdGVUaW1lcklkPW51bGwsZS5fcHJlcGFyZVVwZGF0ZSgpfSw1MDApfSxlLnByb3RvdHlwZS5fc2NoZWR1bGVHQz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fZ2NUaW1lcklkfHwodGhpcy5fZ2NUaW1lcklkPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fZ2NUaW1lcklkPW51bGwsZS5fZ2MoKX0sbCkpfSxlLnByb3RvdHlwZS5fY2hlY2tOb3RFcnJvcmVkPWZ1bmN0aW9uKCl7aWYodGhpcy5fZXJyb3IpdGhyb3cgdGhpcy5fZXJyb3J9LGUucHJvdG90eXBlLl9jbGVhclRpbWVycz1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZVRpbWVySWQmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJDbGVhcmluZyB1cGRhdGUgdGltZXIuXCIpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdXBkYXRlVGltZXJJZCksdGhpcy5fdXBkYXRlVGltZXJJZD1udWxsKSx0aGlzLl9nY1RpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2djVGltZXJJZCksdGhpcy5fZ2NUaW1lcklkPW51bGwpfSxlLnByb3RvdHlwZS5faGFuZGxlRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5fZXJyb3J8fCh0aGlzLl9lcnJvcj1lLHRoaXMuX2xvZ2dlci5lcnJvcihcIkVycm9yIG9jY3VycmVkLlwiLGUpLHRoaXMuX2NsZWFyVGltZXJzKCksdGhpcy5fb25FcnJvcihlKSl9LGV9KCk7dC5TaW1wbGVNU0U9Y30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj1cIjEzLjAuMFwiLHQuYnVpbGROdW1iZXI9MTA4NTt2YXIgbj1yKDExKTt0LkhMU01TRVBsYXllcj1uLkhMU01TRVBsYXllcjt2YXIgbz1yKDEwKTt0LmVycm9ycz1vLmVycm9yczt2YXIgaT1yKDIpO3QucmV0cmlldmFsRXJyb3JzPWkucmV0cmlldmFsRXJyb3JzfV0pfSl9LGZ1bmN0aW9uKGUsdCxyKXshZnVuY3Rpb24odCxuKXtlLmV4cG9ydHM9bihyKDIpLHIoNSkscig2KSl9KHRoaXMsZnVuY3Rpb24oZSx0LHIpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4pe2lmKHJbbl0pcmV0dXJuIHJbbl0uZXhwb3J0czt2YXIgbz1yW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtuXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyx0KSxvLmw9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiB0Lm09ZSx0LmM9cix0Lmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHQuZD1mdW5jdGlvbihlLHIsbil7dC5vKGUscil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpufSl9LHQubj1mdW5jdGlvbihlKXt2YXIgcj1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdC5kKHIsXCJhXCIscikscn0sdC5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSx0LnA9XCJcIix0KHQucz05MSl9KFtmdW5jdGlvbih0LHIpe3QuZXhwb3J0cz1lfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig0KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgbnVsbCBvciB1bmRlZmluZWRcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1yKDcyKSgpP1N5bWJvbDpyKDc0KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTcpKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlIT09biYmbnVsbCE9PWV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJHRU5FUklDXCJ9LGV9KCk7dC5SZXRyaWV2YWxFcnJvcj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbz1yKDEwKSxpPXIoMTkpLGE9cig1OCkscz1yKDIyKTtuPWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLG4sYSx1LGw7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mnx8XCJzdHJpbmdcIiE9dHlwZW9mIGU/KHU9dCx0PWUsZT1udWxsKTp1PWFyZ3VtZW50c1syXSxudWxsPT1lPyhyPWE9ITAsbj0hMSk6KHI9cy5jYWxsKGUsXCJjXCIpLG49cy5jYWxsKGUsXCJlXCIpLGE9cy5jYWxsKGUsXCJ3XCIpKSxsPXt2YWx1ZTp0LGNvbmZpZ3VyYWJsZTpyLGVudW1lcmFibGU6bix3cml0YWJsZTphfSx1P28oaSh1KSxsKTpsfSxuLmdzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbix1LGwsYztyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZT8obD1yLHI9dCx0PWUsZT1udWxsKTpsPWFyZ3VtZW50c1szXSxudWxsPT10P3Q9dm9pZCAwOmEodCk/bnVsbD09cj9yPXZvaWQgMDphKHIpfHwobD1yLHI9dm9pZCAwKToobD10LHQ9cj12b2lkIDApLG51bGw9PWU/KG49ITAsdT0hMSk6KG49cy5jYWxsKGUsXCJjXCIpLHU9cy5jYWxsKGUsXCJlXCIpKSxjPXtnZXQ6dCxzZXQ6cixjb25maWd1cmFibGU6bixlbnVtZXJhYmxlOnV9LGw/byhpKGwpLGMpOmN9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxvPW4uY2FsbChmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpPT09b319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG89bi5jYWxsKFwiXCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZXx8ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJihlIGluc3RhbmNlb2YgU3RyaW5nfHxuLmNhbGwoZSk9PT1vKXx8ITF9fSxmdW5jdGlvbihlLHIpe2UuZXhwb3J0cz10fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXIoNTMpKCk/T2JqZWN0LmFzc2lnbjpyKDU0KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1yKDIwKSgpP09iamVjdC5zZXRQcm90b3R5cGVPZjpyKDIxKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoNSksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fY29kZT10LHJ9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJPR0dfUEFSU0VSLlwiK3RoaXMuX2NvZGV9LHR9KG8uUmV0cmlldmFsRXJyb3IpO3QuT2dnUGFyc2VyRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoNSksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fc3RhdHVzQ29kZT10LHJ9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRTdGF0dXNDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c0NvZGV9LHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlVOQUNDRVBUQUJMRV9SRVNQT05TRV9TVEFUVVNfQ09ERVwifSx0fShvLlJldHJpZXZhbEVycm9yKTt0LlVuYWNjZXB0YWJsZVJlc3BvbnNlU3RhdHVzQ29kZUVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89cig4MSksaT1yKDEzKSxhPXIoMzApLHM9cigyOCksdT1yKDg3KSxsPW4uaGVscGVycy5hYm9ydGFibGVKb2IuQWJvcnRhYmxlSm9iLGM9bi5oZWxwZXJzLnJldHJ5LGQ9Yy5yZXRyeSxmPWMuYnVpbGRFeHBvbmVudGlhbERlbGF5Q2FsY3VsYXRvcixwPW4uaGVscGVycy5Qcm9taXNlLGg9bi5oZWxwZXJzLmFycmF5QnVmZmVyLmNvbWJpbmUsXz1uLmV2ZW50RGlzcGF0Y2hlci5FdmVudERpc3BhdGNoZXIsZz1uLmxvZ2dlci5wcmVmaXhMb2dnZXIseT1uLmxvZ2dlci5ub09wTG9nZ2VyLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PWUudXJsLHI9ZS5zZXF1ZW5jZU51bWJlcixuPWUucGxheWxpc3Qsbz1lLnRpbWVSYW5nZSxhPWUuZW5jcnlwdGlvbkNvbmZpZyxjPWUuaW5pdERhdGEsdj1lLmZvcm1hdCxtPWUubG9hZGVyLEU9ZS5wbGF5bGlzdEV2ZW50UmVwcmVzZW50YXRpb24sYj1lLmxvZ2dlcix3PXZvaWQgMD09PWI/eTpiLFM9ZS5kZWxheUNhbGN1bGF0b3IsUD12b2lkIDA9PT1TP2YoKTpTLFI9ZS5pc1Jlc3BvbnNlQ29kZUFjY2VwdGFibGUsVD12b2lkIDA9PT1SP2Z1bmN0aW9uKGUpe3JldHVybiAyMDA9PT1lfTpSLHg9ZS5pc1Jlc3BvbnNlQ29kZVJldHJ5YWJsZSxBPXZvaWQgMD09PXg/ZnVuY3Rpb24oZSl7cmV0dXJuIShlPj00MDAmJmU8NTAwKX06eCxPPXRoaXM7dGhpcy5fb25TZWdtZW50UmVxdWVzdFF1ZXVlZD1uZXcgXyx0aGlzLl9vblNlZ21lbnRSZXF1ZXN0U3RhcnQ9bmV3IF8sdGhpcy5fb25TZWdtZW50UmV0cmlldmVkPW5ldyBfLHRoaXMuX29uU2VnbWVudFJlcXVlc3RGYWlsZWQ9bmV3IF8sdGhpcy5fb25TZWdtZW50RGVjcnlwdGlvblN0YXJ0PW5ldyBfLHRoaXMuX29uU2VnbWVudERlY3J5cHRpb25FbmQ9bmV3IF8sdGhpcy5fbG9nZ2VyPWcodyxcIlNlZ21lbnRcIiksdGhpcy5vblNlZ21lbnRSZXF1ZXN0UXVldWVkPXRoaXMuX29uU2VnbWVudFJlcXVlc3RRdWV1ZWQuZ2V0SGFuZGxlKCksdGhpcy5vblNlZ21lbnRSZXF1ZXN0U3RhcnQ9dGhpcy5fb25TZWdtZW50UmVxdWVzdFN0YXJ0LmdldEhhbmRsZSgpLHRoaXMub25TZWdtZW50UmV0cmlldmVkPXRoaXMuX29uU2VnbWVudFJldHJpZXZlZC5nZXRIYW5kbGUoKSx0aGlzLm9uU2VnbWVudFJlcXVlc3RGYWlsZWQ9dGhpcy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5nZXRIYW5kbGUoKSx0aGlzLm9uU2VnbWVudERlY3J5cHRpb25TdGFydD10aGlzLl9vblNlZ21lbnREZWNyeXB0aW9uU3RhcnQuZ2V0SGFuZGxlKCksdGhpcy5vblNlZ21lbnREZWNyeXB0aW9uRW5kPXRoaXMuX29uU2VnbWVudERlY3J5cHRpb25FbmQuZ2V0SGFuZGxlKCksdGhpcy5fc2VxdWVuY2VOdW1iZXI9cix0aGlzLl9wbGF5bGlzdD1uLHRoaXMuX3RpbWVSYW5nZT1vLHRoaXMuX2VuY3J5cHRpb25Db25maWc9YXx8bnVsbCx0aGlzLl9pbml0RGF0YT1jfHxudWxsLHRoaXMuX2Zvcm1hdD12LHRoaXMuX2xvYWRlcj1tLHRoaXMuX2lzUmVzcG9uc2VDb2RlQWNjZXB0YWJsZT1ULHRoaXMuX2lzUmVzcG9uc2VDb2RlUmV0cnlhYmxlPUEsdGhpcy5fZG93bmxvYWRBYm9ydGFibGVKb2I9bmV3IGwoZnVuY3Rpb24oKXt2YXIgZT1kKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBsKGZ1bmN0aW9uKCl7dmFyIGU9bmV3IHMuU2VnbWVudChFLHQscik7Ty5fb25TZWdtZW50UmVxdWVzdFF1ZXVlZC5kaXNwYXRjaCh7c2VnbWVudDplfSk7dmFyIG49Ty5fbG9hZGVyLnJlcXVlc3Qoe3VybDp0fSk7bi53aGVuUmVxdWVzdFN0YXJ0ZWQudGhlbihmdW5jdGlvbigpe3JldHVybiBPLl9vblNlZ21lbnRSZXF1ZXN0U3RhcnQuZGlzcGF0Y2goe3NlZ21lbnQ6ZX0pfSksTy5fbG9nZ2VyLmRlYnVnKFwiUmVxdWVzdGluZyBzZWdtZW50LlwiLHQpO3ZhciBvPW4uZ2V0UmVzcG9uc2UoKS50aGVuKGZ1bmN0aW9uKHIpe2lmKCFyKXJldHVybiBPLl9sb2dnZXIud2FybihcIlNlZ21lbnQgcmVxdWVzdCB0aW1lZCBvdXQuXCIsdCksTy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7c2VnbWVudDplLHN0YXR1c0NvZGU6bnVsbH0pLHtzdWNjZXNzOiExfTt2YXIgbj1yLnN0YXR1c0NvZGU7aWYoTy5faXNSZXNwb25zZUNvZGVBY2NlcHRhYmxlKG4pKXt2YXIgbz1yLmRhdGE7cmV0dXJuIG8/KE8uX2xvZ2dlci5kZWJ1ZyhcIkdvdCBzZWdtZW50IHJlc3BvbnNlLlwiLHQsbiksTy5fb25TZWdtZW50UmV0cmlldmVkLmRpc3BhdGNoKHtzZWdtZW50OmUsc3RhdHVzQ29kZTpufSkse3N1Y2Nlc3M6ITAscmVzdWx0OntkYXRhOm5ldyBVaW50OEFycmF5KG8pLGV2ZW50UmVwcmVzZW50YXRpb246ZX19KTooTy5fbG9nZ2VyLndhcm4oXCJTZWdtZW50IHJlc3BvbnNlIGNvbnRhaW5lZCBubyBkYXRhLlwiLHQsbiksTy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7c2VnbWVudDplLHN0YXR1c0NvZGU6bn0pLHtzdWNjZXNzOiExfSl9cmV0dXJuIE8uX2lzUmVzcG9uc2VDb2RlUmV0cnlhYmxlKG4pPyhPLl9sb2dnZXIuZGVidWcoXCJTZWdtZW50IHJlc3BvbnNlIGNvZGUgd2FzIG5vdCBhY2NlcHRhYmxlLiBXaWxsIHJldHJ5LlwiLHQsbiksTy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7c2VnbWVudDplLHN0YXR1c0NvZGU6bn0pLHtzdWNjZXNzOiExfSk6KE8uX2xvZ2dlci5kZWJ1ZyhcIlNlZ21lbnQgcmVzcG9uc2UgY29kZSB3YXMgbm90IGFjY2VwdGFibGUuXCIsdCxuKSxPLl9vblNlZ21lbnRSZXF1ZXN0RmFpbGVkLmRpc3BhdGNoKHtzZWdtZW50OmUsc3RhdHVzQ29kZTpufSkscC5yZWplY3QobmV3IGkuVW5hY2NlcHRhYmxlUmVzcG9uc2VTdGF0dXNDb2RlRXJyb3IobikpKX0pO3JldHVybntyZXN1bHQ6byxhYm9ydDpmdW5jdGlvbigpe08uX2xvZ2dlci5kZWJ1ZyhcIkFib3J0aW5nIHNlZ21lbnQgcmVxdWVzdC5cIix0KSxuLmFib3J0KCksTy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7c2VnbWVudDplLGFib3J0ZWQ6ITB9KX19fSl9LFApO3JldHVybntyZXN1bHQ6ZS53aGVuQ29tcGxldGUoKSxhYm9ydDpmdW5jdGlvbigpe3JldHVybiBlLmFib3J0KCl9fX0se3N0b3JlUmVzdWx0OiExfSksdGhpcy5fcmV0cmlldmVBYm9ydGFibGVKb2I9bmV3IGwoZnVuY3Rpb24oKXt2YXIgZT1PLl9kb3dubG9hZEFib3J0YWJsZUpvYi5ydW4oKSx0PW51bGwscj1udWxsLG49ZS53aGVuQ29tcGxldGUoKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YSxvPWUuZXZlbnRSZXByZXNlbnRhdGlvbjtyZXR1cm4gcj1PLl9kZWNyeXB0KG4sbyksci53aGVuQ29tcGxldGUoKS50aGVuKGZ1bmN0aW9uKGUpe08uX2luaXREYXRhJiYoTy5fbG9nZ2VyLmRlYnVnKFwiUHJlcGVuZGluZyBpbml0IGRhdGEuXCIsbyksZT1oKFtPLl9pbml0RGF0YSxlXSkpO3ZhciByPXUuU2VnbWVudFBhcnNlckZhY3RvcnkucmV0cmlldmVTZWdtZW50UGFyc2VyKE8uX2Zvcm1hdCk7cmV0dXJuIE8uX2xvZ2dlci5kZWJ1ZyhcIlBhcnNpbmcgc2VnbWVudCBkYXRhLlwiLG8sci5nZXRGb3JtYXQoKSksdD1yLnBhcnNlU2VnbWVudERhdGEoZSxPLE8uX3BsYXlsaXN0KSx0LndoZW5Db21wbGV0ZSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIE8uX2xvZ2dlci5kZWJ1ZyhcIlNlZ21lbnQgZGF0YSByZWFkeS5cIixvKSx7ZGF0YTplLGV2ZW50UmVwcmVzZW50YXRpb246b319KX0pfSk7cmV0dXJue3Jlc3VsdDpuLGFib3J0OmZ1bmN0aW9uKCl7ZS5hYm9ydCgpLHImJnIuYWJvcnQoKSx0JiZ0LmFib3J0KCl9fX0se3N0b3JlUmVzdWx0OiExfSl9cmV0dXJuIGUucHJvdG90eXBlLmdldFNlcXVlbmNlTnVtYmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlcXVlbmNlTnVtYmVyfSxlLnByb3RvdHlwZS5pc0ZpbmFsU2VnbWVudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BsYXlsaXN0O3JldHVybiBlLmhhc0VuZGVkKCkmJmUuZ2V0U3RhcnRpbmdTZXF1ZW5jZU51bWJlcigpK2UuZ2V0U2VnbWVudENvdW50KCktMT09PXRoaXMuX3NlcXVlbmNlTnVtYmVyfSxlLnByb3RvdHlwZS5nZXRUaW1lUmFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZVJhbmdlfSxlLnByb3RvdHlwZS5yZXRyaWV2ZURhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmV0cmlldmVBYm9ydGFibGVKb2IucnVuKCl9LGUucHJvdG90eXBlLl9kZWNyeXB0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPW5ldyBsKGZ1bmN0aW9uKCl7dmFyIG49ci5fZW5jcnlwdGlvbkNvbmZpZztpZighbilyZXR1cm57cmVzdWx0OnAucmVzb2x2ZShlKX07ci5fbG9nZ2VyLmluZm8oXCJGaW5kaW5nIGEgZGVjcnlwdG9yLi4uXCIpO3ZhciBpPW8uRGVjcnlwdG9yRmFjdG9yeS5yZXRyaWV2ZURlY3J5cHRvcihuKTtpZighaSlyZXR1cm4gci5fbG9nZ2VyLmVycm9yKFwiQ291bGQgbm90IGZpbmQgYSBkZWNyeXB0b3IuXCIpLHtyZXN1bHQ6cC5yZWplY3QobmV3IGEuTm9EZWNyeXB0b3JFcnJvcil9O3IuX2xvZ2dlci5pbmZvKFwiRGVjcnlwdG9yIGZvdW5kLlwiKSxyLl9vblNlZ21lbnREZWNyeXB0aW9uU3RhcnQuZGlzcGF0Y2goe3NlZ21lbnQ6dH0pO3ZhciBzPWkuZGVjcnlwdChlLG4pO3JldHVybiBzLnRoZW4oZnVuY3Rpb24oKXtyLl9sb2dnZXIuZGVidWcoXCJEZWNyeXB0ZWQuXCIpLHIuX29uU2VnbWVudERlY3J5cHRpb25FbmQuZGlzcGF0Y2goe3NlZ21lbnQ6dH0pfSkse3Jlc3VsdDpzfX0pO3JldHVybiBuLnJ1bigpfSxlfSgpO3QuU2VnbWVudD12fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXt2YXIgdD1lLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlK3QubGVuZ3RofSwwKSxyPW5ldyBVaW50OEFycmF5KHQpLG49MDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Iuc2V0KGUsbiksbis9ZS5sZW5ndGh9KSxyfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1yKDM5KSxhPXIoNDApLHM9by5oZWxwZXJzLlByb21pc2UsdT17cmF0ZTo0NDEwMCxpZDozfSxsPTE2LGM9MixkPXUucmF0ZSxmPTIscD04O3QuTVAzVG9NUDQ9e2dldElucHV0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJue21pbWVUeXBlOlwiYXVkaW8vbXBlZ1wifX0sZ2V0T3V0cHV0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJue21pbWVUeXBlOlwiYXVkaW8vbXA0XCIsYXVkaW9Db2RlYzp7aWQ6XCJtcDNcIn19fSx0cmFuc211eDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHMoZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBvKGUpe2h8fChoPSEwLHIoZSkpfWZ1bmN0aW9uIHMoZSl7aHx8dChlKX12YXIgaD0hMTt0cnl7dmFyIF89W10sZz1uZXcgaS5NUDNQYXJzZXIseT1uZXcgYS5NUDRNdXgoe2F1ZGlvVHJhY2tJZDowLHZpZGVvVHJhY2tJZDotMSx0cmFja3M6W3tjb2RlY0lkOmYsY2hhbm5lbHM6YyxzYW1wbGVyYXRlOnUucmF0ZSxzYW1wbGVzaXplOmwsdGltZXNjYWxlOmR9XX0pO2lmKHkub25kYXRhPWZ1bmN0aW9uKGUpe3JldHVybiBfLnB1c2goZSl9LGcub25GcmFtZT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgrMSkscj1mPDw0O3J8PXUuaWQ8PDIscnw9KDE2PT09bD8xOjApPDwxLHJ8PTI9PT1jPzE6MCx0WzBdPXIsdC5zZXQoZSwxKTt2YXIgbj0wO3kucHVzaFBhY2tldChwLHQsbil9Y2F0Y2goZSl7byhlKX19LGcucHVzaChlLmRhdGEpLGcuY2xvc2UoKSx5LmZsdXNoKCksMD09PV8ubGVuZ3RoKW8obmV3IEVycm9yKFwiVGhlcmUgd2FzIG5vIG91dHB1dC5cIikpO2Vsc2V7dmFyIHY9Xy5zaGlmdCgpO3Y/cyh7aW5pdERhdGE6dixkYXRhOm4oXyl9KTpvKG5ldyBFcnJvcihcIk5vIGluaXQgZGF0YS5cIikpfX1jYXRjaChlKXtvKGUpfX0pfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89bi5oZWxwZXJzLlByb21pc2U7dC5QYXNzVGhyb3VnaD17Z2V0SW5wdXRGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX0sZ2V0T3V0cHV0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJue319LHRyYW5zbXV4OmZ1bmN0aW9uKGUpe3JldHVybiBvLnJlc29sdmUoZSl9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbigpe319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDQpLG89e2Z1bmN0aW9uOiEwLG9iamVjdDohMH07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpJiZvW3R5cGVvZiBlXXx8ITF9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig0KSxvPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLGk9T2JqZWN0LmNyZWF0ZSxhPWZ1bmN0aW9uKGUsdCl7dmFyIHI7Zm9yKHIgaW4gZSl0W3JdPWVbcl19O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1pKG51bGwpO3JldHVybiBvLmNhbGwoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe24oZSkmJmEoT2JqZWN0KGUpLHQpfSksdH19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1PYmplY3QuY3JlYXRlLG89T2JqZWN0LmdldFByb3RvdHlwZU9mLGk9e307ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mLHQ9YXJndW1lbnRzWzBdfHxuO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJm8oZSh0KG51bGwpLGkpKT09PWl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbz1yKDE4KSxpPXIoMSksYT1PYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yscz1PYmplY3QuZGVmaW5lUHJvcGVydHksdT17Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfTtuPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSxudWxsPT09dHx8byh0KSlyZXR1cm4gZTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvdG90eXBlIG11c3QgYmUgbnVsbCBvciBhbiBvYmplY3RcIil9LGUuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyO3JldHVybiBlPygyPT09ZS5sZXZlbD9lLnNldD8ocj1lLnNldCx0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChuKGUsdCksdCksZX0pOnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbihlLHQpLl9fcHJvdG9fXz10LGV9OnQ9ZnVuY3Rpb24gZSh0LHIpe3ZhciBvO3JldHVybiBuKHQsciksbz1hLmNhbGwoZS5udWxsUG9seWZpbGwsdCksbyYmZGVsZXRlIGUubnVsbFBvbHlmaWxsLl9fcHJvdG9fXyxudWxsPT09ciYmKHI9ZS5udWxsUG9seWZpbGwpLHQuX19wcm90b19fPXIsbyYmcyhlLm51bGxQb2x5ZmlsbCxcIl9fcHJvdG9fX1wiLHUpLHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwibGV2ZWxcIix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITEsdmFsdWU6ZS5sZXZlbH0pKTpudWxsfShmdW5jdGlvbigpe3ZhciBlLHQ9T2JqZWN0LmNyZWF0ZShudWxsKSxyPXt9LG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpO2lmKG4pe3RyeXtlPW4uc2V0LGUuY2FsbCh0LHIpfWNhdGNoKGUpe31pZihPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk9PT1yKXJldHVybntzZXQ6ZSxsZXZlbDoyfX1yZXR1cm4gdC5fX3Byb3RvX189cixPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk9PT1yP3tsZXZlbDoyfToodD17fSx0Ll9fcHJvdG9fXz1yLE9iamVjdC5nZXRQcm90b3R5cGVPZih0KT09PXImJntsZXZlbDoxfSl9KCkpLHIoNTYpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXIoNjQpKCk/U3RyaW5nLnByb3RvdHlwZS5jb250YWluczpyKDY1KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNyksbz1yKDgpLGk9cig2NyksYT1yKDcwKSxzPXIoNzEpLHU9cigzKS5pdGVyYXRvcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgcyhlKVt1XT9lW3VdKCk6bihlKT9uZXcgaShlKTpvKGUpP25ldyBhKGUpOm5ldyBpKGUpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG89cig0MiksaT1yKDEwKSxhPXIoMikscz1yKDEpLHU9cig2KSxsPXIoNDEpLGM9cigzKSxkPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxmPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO2UuZXhwb3J0cz1uPWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO2YodGhpcyx7X19saXN0X186dShcIndcIixzKGUpKSxfX2NvbnRleHRfXzp1KFwid1wiLHQpLF9fbmV4dEluZGV4X186dShcIndcIiwwKX0pLHQmJihhKHQub24pLHQub24oXCJfYWRkXCIsdGhpcy5fb25BZGQpLHQub24oXCJfZGVsZXRlXCIsdGhpcy5fb25EZWxldGUpLHQub24oXCJfY2xlYXJcIix0aGlzLl9vbkNsZWFyKSl9LGRlbGV0ZSBuLnByb3RvdHlwZS5jb25zdHJ1Y3RvcixmKG4ucHJvdG90eXBlLGkoe19uZXh0OnUoZnVuY3Rpb24oKXt2YXIgZTtpZih0aGlzLl9fbGlzdF9fKXJldHVybiB0aGlzLl9fcmVkb19fJiYoZT10aGlzLl9fcmVkb19fLnNoaWZ0KCksdm9pZCAwIT09ZSk/ZTp0aGlzLl9fbmV4dEluZGV4X188dGhpcy5fX2xpc3RfXy5sZW5ndGg/dGhpcy5fX25leHRJbmRleF9fKys6dm9pZCB0aGlzLl91bkJpbmQoKX0pLG5leHQ6dShmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcmVhdGVSZXN1bHQodGhpcy5fbmV4dCgpKX0pLF9jcmVhdGVSZXN1bHQ6dShmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT97ZG9uZTohMCx2YWx1ZTp2b2lkIDB9Ontkb25lOiExLHZhbHVlOnRoaXMuX3Jlc29sdmUoZSl9fSksX3Jlc29sdmU6dShmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2xpc3RfX1tlXX0pLF91bkJpbmQ6dShmdW5jdGlvbigpe3RoaXMuX19saXN0X189bnVsbCxkZWxldGUgdGhpcy5fX3JlZG9fXyx0aGlzLl9fY29udGV4dF9fJiYodGhpcy5fX2NvbnRleHRfXy5vZmYoXCJfYWRkXCIsdGhpcy5fb25BZGQpLHRoaXMuX19jb250ZXh0X18ub2ZmKFwiX2RlbGV0ZVwiLHRoaXMuX29uRGVsZXRlKSx0aGlzLl9fY29udGV4dF9fLm9mZihcIl9jbGVhclwiLHRoaXMuX29uQ2xlYXIpLHRoaXMuX19jb250ZXh0X189bnVsbCl9KSx0b1N0cmluZzp1KGZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IFwiKyh0aGlzW2MudG9TdHJpbmdUYWddfHxcIk9iamVjdFwiKStcIl1cIn0pfSxsKHtfb25BZGQ6dShmdW5jdGlvbihlKXtpZighKGU+PXRoaXMuX19uZXh0SW5kZXhfXykpe2lmKCsrdGhpcy5fX25leHRJbmRleF9fLCF0aGlzLl9fcmVkb19fKXJldHVybiB2b2lkIGQodGhpcyxcIl9fcmVkb19fXCIsdShcImNcIixbZV0pKTt0aGlzLl9fcmVkb19fLmZvckVhY2goZnVuY3Rpb24odCxyKXt0Pj1lJiYodGhpcy5fX3JlZG9fX1tyXT0rK3QpfSx0aGlzKSx0aGlzLl9fcmVkb19fLnB1c2goZSl9fSksX29uRGVsZXRlOnUoZnVuY3Rpb24oZSl7dmFyIHQ7ZT49dGhpcy5fX25leHRJbmRleF9ffHwoLS10aGlzLl9fbmV4dEluZGV4X18sdGhpcy5fX3JlZG9fXyYmKHQ9dGhpcy5fX3JlZG9fXy5pbmRleE9mKGUpLHQhPT0tMSYmdGhpcy5fX3JlZG9fXy5zcGxpY2UodCwxKSx0aGlzLl9fcmVkb19fLmZvckVhY2goZnVuY3Rpb24odCxyKXt0PmUmJih0aGlzLl9fcmVkb19fW3JdPS0tdCl9LHRoaXMpKSl9KSxfb25DbGVhcjp1KGZ1bmN0aW9uKCl7dGhpcy5fX3JlZG9fXyYmby5jYWxsKHRoaXMuX19yZWRvX18pLHRoaXMuX19uZXh0SW5kZXhfXz0wfSl9KSkpLGQobi5wcm90b3R5cGUsYy5pdGVyYXRvcix1KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9wbGF5bGlzdD1lLHRoaXMuX3VybD10fXJldHVybiBlLnByb3RvdHlwZS5nZXRQbGF5bGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5bGlzdH0sZS5wcm90b3R5cGUuZ2V0VXJsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH0sZX0oKTt0LkluaXREYXRhPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9wbGF5bGlzdD1lLHRoaXMuX3VybD10fXJldHVybiBlLnByb3RvdHlwZS5nZXRQbGF5bGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5bGlzdH0sZS5wcm90b3R5cGUuZ2V0VXJsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH0sZX0oKTt0LktleT1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX3VybD1lfXJldHVybiBlLnByb3RvdHlwZS5nZXRVcmw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfSxlfSgpO3QuUGxheWxpc3Q9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fcGxheWxpc3Q9ZSx0aGlzLl91cmw9dCx0aGlzLl9zZXF1ZW5jZU51bWJlcj1yfXJldHVybiBlLnByb3RvdHlwZS5nZXRQbGF5bGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5bGlzdH0sZS5wcm90b3R5cGUuZ2V0VXJsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH0sZS5wcm90b3R5cGUuZ2V0U2VxdWVuY2VOdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VxdWVuY2VOdW1iZXJ9LGV9KCk7dC5TZWdtZW50PW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUsdCl7cmV0dXJuIShlLm1pbWVUeXBlJiZ0Lm1pbWVUeXBlIT09ZS5taW1lVHlwZXx8ZS5hdWRpb0NvZGVjJiYoIXQuYXVkaW9Db2RlY3x8dC5hdWRpb0NvZGVjLmlkIT09ZS5hdWRpb0NvZGVjLmlkKXx8ZS52aWRlb0NvZGVjJiYoIXQudmlkZW9Db2RlY3x8dC52aWRlb0NvZGVjLmlkIT09ZS52aWRlb0NvZGVjLmlkKSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5pc1BhcnRpYWxNYXRjaD1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig1KSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiTk9fREVDUllQVE9SXCJ9LHR9KG8uUmV0cmlldmFsRXJyb3IpO3QuTm9EZWNyeXB0b3JFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cig1KSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLl9kZXRhaWxzPXQscn1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldERldGFpbHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGV0YWlsc30sdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiUExBWUxJU1RfUEFSU0VcIn0sdH0oby5SZXRyaWV2YWxFcnJvcik7dC5QbGF5bGlzdFBhcnNlRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoNSksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm5cIlVOU1VQUE9SVEVEX0VOQ1JZUFRJT05fRVJST1JcIn0sdH0oby5SZXRyaWV2YWxFcnJvcik7dC5VbnN1cHBvcnRlZEVuY3J5cHRpb25FcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG4sbz1yKDI1KSxpPXIoMjYpLGE9cigyNykscz1yKDI4KTshZnVuY3Rpb24oZSl7ZS5Jbml0RGF0YT1vLkluaXREYXRhLGUuS2V5PWkuS2V5LGUuUGxheWxpc3Q9YS5QbGF5bGlzdCxlLlNlZ21lbnQ9cy5TZWdtZW50fShuPXQuZXZlbnRzfHwodC5ldmVudHM9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0LHIpe3ZhciBuPWUuZ2V0VGltZVJhbmdlKCk7cmV0dXJuIHIhPT10JiYocj50P24uZW5kPnQmJm4uc3RhcnQ8cjpuLmVuZD50fHxuLnN0YXJ0PHIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvLGk9cigwKSxhPXIoOSkscz1yKDEyKSx1PWkuaGVscGVycy5maW5kLGw9aS5ldmVudERpc3BhdGNoZXIuRXZlbnREaXNwYXRjaGVyLGM9aS5oZWxwZXJzLmFib3J0YWJsZUpvYi5hYm9ydGVkRXJyb3IsZD1pLmhlbHBlcnMuYWJvcnRhYmxlSm9iLkFib3J0YWJsZUpvYixmPWkubG9nZ2VyLnByZWZpeExvZ2dlcixwPWkubG9nZ2VyLm5vT3BMb2dnZXI7IWZ1bmN0aW9uKGUpe2VbZS5SRVRSSUVWSU5HX1NFR01FTlQ9MF09XCJSRVRSSUVWSU5HX1NFR01FTlRcIixlW2UuUkVUUklFVkVEX1NFR01FTlQ9MV09XCJSRVRSSUVWRURfU0VHTUVOVFwiLGVbZS5SRVRSSUVWSU5HX0RBVEE9Ml09XCJSRVRSSUVWSU5HX0RBVEFcIixlW2UuQ09NUExFVEU9M109XCJDT01QTEVURVwifShvfHwobz17fSkpO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9vblNlZ21lbnRSZXF1ZXN0UXVldWVkPW5ldyBsLHRoaXMuX29uU2VnbWVudFJlcXVlc3RTdGFydD1uZXcgbCx0aGlzLl9vblNlZ21lbnRSZXRyaWV2ZWQ9bmV3IGwsdGhpcy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZD1uZXcgbCx0aGlzLl9vblNlZ21lbnREZWNyeXB0aW9uU3RhcnQ9bmV3IGwsdGhpcy5fb25TZWdtZW50RGVjcnlwdGlvbkVuZD1uZXcgbCx0aGlzLl9vblNlZ21lbnRUcmFuc211eFN0YXJ0PW5ldyBsLHRoaXMuX29uU2VnbWVudFRyYW5zbXV4RW5kPW5ldyBsLHRoaXMuX29uU2VnbWVudFJlYWR5PW5ldyBsLHRoaXMuX29uRXJyb3I9bmV3IGwsdGhpcy5fc2VnbWVudHM9W10sdGhpcy5fcmV0cmlldmluZ1NlZ21lbnQ9bnVsbCx0aGlzLl90aW1lcklkPW51bGwsdGhpcy5fZGVhZD0hMTt2YXIgdD1lLnBsYXlsaXN0LHI9ZS5nZXRQb3NpdGlvbixuPWUubWF4QnVmZmVyTGVuZ3RoLG89ZS5jYWNoZVNpemUsaT1lLnRyYW5zbXV4ZXIsYT1lLmxvZ2dlcixzPXZvaWQgMD09PWE/cDphO2lmKHRoaXMuX2xvZ2dlcj1mKHMsXCJQbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXJcIiksdCYmIXQuaGFzUmV0cmlldmVDb21wbGV0ZWQoKSl0aHJvdyBuZXcgRXJyb3IoXCJQbGF5bGlzdCByZXRyaWV2ZSBoYXMgbm90IGNvbXBsZXRlZC5cIik7aWYobjwwKXRocm93IG5ldyBFcnJvcihcIk1heCBidWZmZXIgbGVuZ3RoIG11c3QgYmUgPiAwLlwiKTtpZihvPDApdGhyb3cgbmV3IEVycm9yKFwiQ2FjaGUgc2l6ZSBtdXN0IGJlID4gMC5cIik7dGhpcy5vblNlZ21lbnRSZXF1ZXN0UXVldWVkPXRoaXMuX29uU2VnbWVudFJlcXVlc3RRdWV1ZWQuZ2V0SGFuZGxlKCksdGhpcy5vblNlZ21lbnRSZXF1ZXN0U3RhcnQ9dGhpcy5fb25TZWdtZW50UmVxdWVzdFN0YXJ0LmdldEhhbmRsZSgpLHRoaXMub25TZWdtZW50UmV0cmlldmVkPXRoaXMuX29uU2VnbWVudFJldHJpZXZlZC5nZXRIYW5kbGUoKSx0aGlzLm9uU2VnbWVudFJlcXVlc3RGYWlsZWQ9dGhpcy5fb25TZWdtZW50UmVxdWVzdEZhaWxlZC5nZXRIYW5kbGUoKSx0aGlzLm9uU2VnbWVudERlY3J5cHRpb25TdGFydD10aGlzLl9vblNlZ21lbnREZWNyeXB0aW9uU3RhcnQuZ2V0SGFuZGxlKCksdGhpcy5vblNlZ21lbnREZWNyeXB0aW9uRW5kPXRoaXMuX29uU2VnbWVudERlY3J5cHRpb25FbmQuZ2V0SGFuZGxlKCksdGhpcy5vblNlZ21lbnRUcmFuc211eFN0YXJ0PXRoaXMuX29uU2VnbWVudFRyYW5zbXV4U3RhcnQuZ2V0SGFuZGxlKCksdGhpcy5vblNlZ21lbnRUcmFuc211eEVuZD10aGlzLl9vblNlZ21lbnRUcmFuc211eEVuZC5nZXRIYW5kbGUoKSx0aGlzLm9uU2VnbWVudFJlYWR5PXRoaXMuX29uU2VnbWVudFJlYWR5LmdldEhhbmRsZSgpLHRoaXMub25FcnJvcj10aGlzLl9vbkVycm9yLmdldEhhbmRsZSgpLHRoaXMuX3BsYXlsaXN0PXQsdGhpcy5fdHJhbnNtdXhlcj1pLHRoaXMuX2dldFBvc2l0aW9uPXIsdGhpcy5fbWF4QnVmZmVyTGVuZ3RoPW4sdGhpcy5fY2FjaGVTaXplPW8sdGhpcy51cGRhdGUoKX1yZXR1cm4gZS5wcm90b3R5cGUudXBkYXRlTWF4QnVmZmVyTGVuZ3RoPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2Vuc3VyZU5vdERlYWQoKSxlPDApdGhyb3cgbmV3IEVycm9yKFwiTWF4IGJ1ZmZlciBsZW5ndGggbXVzdCBiZSA+IDAuXCIpO3RoaXMuX2xvZ2dlci5kZWJ1ZyhcInVwZGF0ZU1heEJ1ZmZlckxlbmd0aCgpIGNhbGxlZC5cIixlKSx0aGlzLl9tYXhCdWZmZXJMZW5ndGg9ZSx0aGlzLnVwZGF0ZSgpfSxlLnByb3RvdHlwZS51cGRhdGVDYWNoZVNpemU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZW5zdXJlTm90RGVhZCgpLGU8MCl0aHJvdyBuZXcgRXJyb3IoXCJDYWNoZSBzaXplIG11c3QgYmUgPiAwLlwiKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJ1cGRhdGVDYWNoZVNpemUoKSBjYWxsZWQuXCIsZSksdGhpcy5fY2FjaGVTaXplPWUsdGhpcy51cGRhdGUoKX0sZS5wcm90b3R5cGUuZ2V0Q2FjaGVTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhY2hlU2l6ZX0sZS5wcm90b3R5cGUuZ2V0Q2FjaGVVc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZWdtZW50cy5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdGF0ZT09PW8uQ09NUExFVEU/ZSt0LmRhdGEuYnl0ZUxlbmd0aCsodC5pbml0RGF0YT90LmluaXREYXRhLmJ5dGVMZW5ndGg6MCk6ZX0sMCl9LGUucHJvdG90eXBlLnN3aXRjaFBsYXlsaXN0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2Vuc3VyZU5vdERlYWQoKSxlJiYhZS5oYXNSZXRyaWV2ZUNvbXBsZXRlZCgpKXRocm93IG5ldyBFcnJvcihcIlBsYXlsaXN0IHJldHJpZXZlIGhhcyBub3QgY29tcGxldGVkLlwiKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJzd2l0Y2hQbGF5bGlzdCgpIGNhbGxlZC5cIiksdGhpcy5fYWJvcnRDdXJyZW50UmV0cmlldmUoKSx0aGlzLl9wbGF5bGlzdD1lLHRoaXMuX3NlZ21lbnRzPXRoaXMuX3NlZ21lbnRzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZT09PW8uQ09NUExFVEV9KSx0aGlzLnVwZGF0ZSgpfSxlLnByb3RvdHlwZS5nZXRTZWdtZW50c1dpdGhEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9zZWdtZW50cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGU9PT1vLkNPTVBMRVRFfSkubWFwKGZ1bmN0aW9uKGUpe2lmKGUuc3RhdGUhPT1vLkNPTVBMRVRFKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3IuXCIpO3ZhciB0PWUuc2VnbWVudCxyPWUuaW5pdERhdGEsbj1lLmRhdGEsaT1lLmV2ZW50UmVwcmVzZW50YXRpb247cmV0dXJue3NlZ21lbnQ6dCxpbml0RGF0YTpyLGRhdGE6bixldmVudFJlcHJlc2VudGF0aW9uOml9fSl9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fZW5zdXJlTm90RGVhZCgpLHRoaXMuX3RpbWVySWQmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJDYW5jZWxsaW5nIHVwZGF0ZSB0aW1lci5cIiksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lcklkKSx0aGlzLl90aW1lcklkPW51bGwpO3ZhciB0PXRoaXMuX2dldFBvc2l0aW9uKCkscj10LG49MDt0aGlzLl9zZWdtZW50cy5zb21lKGZ1bmN0aW9uKGUpe2lmKGUuc3RhdGUhPT1vLkNPTVBMRVRFKXJldHVybiExO3ZhciBpPWUuc2VnbWVudC5nZXRUaW1lUmFuZ2UoKTtyZXR1cm4gaS5jb250YWluc1RpbWUobikmJihuPWkuZW5kKSwhKGkuZW5kPHQpJiYoaS5zdGFydD5yfHwocj1pLmVuZCwhMSkpfSk7dmFyIGk9dCt0aGlzLl9tYXhCdWZmZXJMZW5ndGgsYT1mdW5jdGlvbigpe3ZhciB0PWUuX3BsYXlsaXN0O2lmKHQpe3ZhciBvPXQuaGFzRW5kZWQoKSYmcj09PXQuZ2V0VG90YWxEdXJhdGlvbigpO2lmKG8pcmV0dXJuIHI9bix0LmdldFRvdGFsRHVyYXRpb24oKStuPGl9cmV0dXJuIHI8aX0oKTtpZighYSlyZXR1cm4gdGhpcy5fYWJvcnRDdXJyZW50UmV0cmlldmUoKSx0aGlzLl9nYXJiYWdlQ29sbGVjdCh0KSx2b2lkIHRoaXMuX3NjaGVkdWxlTmV4dFVwZGF0ZSgpO3ZhciBzPXUodGhpcy5fc2VnbWVudHMsZnVuY3Rpb24oZSl7aWYoZS5zdGF0ZT09PW8uUkVUUklFVkVEX1NFR01FTlR8fGUuc3RhdGU9PT1vLlJFVFJJRVZJTkdfREFUQSl7dmFyIHQ9ZS5zZWdtZW50LmdldFRpbWVSYW5nZSgpO3JldHVybiB0LmNvbnRhaW5zVGltZShyKX1yZXR1cm4hMX0pO3M/dGhpcy5fcmV0cmlldmVTZWdtZW50RGF0YShzKTp0aGlzLl9yZXRyaWV2ZVNlZ21lbnQociksdGhpcy5fZ2FyYmFnZUNvbGxlY3QodCl9LGUucHJvdG90eXBlLmtpbGw9ZnVuY3Rpb24oKXt0aGlzLl9kZWFkfHwodGhpcy5fbG9nZ2VyLmRlYnVnKFwia2lsbCgpIGNhbGxlZC5cIiksdGhpcy5fYWJvcnRDdXJyZW50UmV0cmlldmUoKSx0aGlzLl9kZWFkPSEwLHRoaXMuX3RpbWVySWQmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJDYW5jZWxsaW5nIHVwZGF0ZSB0aW1lci5cIiksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lcklkKSksdGhpcy5fc2VnbWVudHM9W10sdGhpcy5fbG9nZ2VyLmRlYnVnKFwiS2lsbGVkLlwiKSl9LGUucHJvdG90eXBlLl9yZXRyaWV2ZVNlZ21lbnREYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZS5zdGF0ZSE9PW8uUkVUUklFVkVEX1NFR01FTlQmJmUuc3RhdGUhPT1vLlJFVFJJRVZJTkdfREFUQSl0aHJvdyBuZXcgRXJyb3IoXCJTZWdtZW50IGluIGluY29ycmVjdCBzdGF0ZSBmb3IgZGF0YSB0byBiZSByZXRyaWV2ZWQuXCIpO3ZhciByPXRoaXMuX3JldHJpZXZpbmdTZWdtZW50O2lmKCFyfHxyLnN0YXRlIT09by5SRVRSSUVWSU5HX0RBVEF8fGUuc2VnbWVudCE9PXIuc2VnbWVudCl7dGhpcy5fYWJvcnRDdXJyZW50UmV0cmlldmUoKTt2YXIgbj1uZXcgZChmdW5jdGlvbigpe3ZhciByPSExLG49ZS5zZWdtZW50LnJldHJpZXZlRGF0YSgpO3QuX2xvZ2dlci5kZWJ1ZyhcIlJldHJpZXZpbmcgc2VnbWVudCBkYXRhLi4uXCIpO3ZhciBvPW4ud2hlbkNvbXBsZXRlKCkudGhlbihmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEsbz1lLmV2ZW50UmVwcmVzZW50YXRpb247aWYocil0aHJvdyBjO3JldHVybiB0Ll9sb2dnZXIuZGVidWcoXCJSZXRyaWV2ZWQgc2VnbWVudCBkYXRhLlwiKSx0Ll9vblNlZ21lbnRUcmFuc211eFN0YXJ0LmRpc3BhdGNoKHtzZWdtZW50Om99KSx0Ll90cmFuc211eGVyLnRyYW5zbXV4KG4pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLGk9ZS5pbml0RGF0YTtpZihyKXRocm93IGM7cmV0dXJuIHQuX29uU2VnbWVudFRyYW5zbXV4RW5kLmRpc3BhdGNoKHtzZWdtZW50Om99KSx0Ll9sb2dnZXIuZGVidWcoXCJUcmFuc211eGVkIHNlZ21lbnQuXCIpLHtkYXRhOm4saW5pdERhdGE6aSxldmVudFJlcHJlc2VudGF0aW9uOm99fSl9KTtyZXR1cm57cmVzdWx0Om8sYWJvcnQ6ZnVuY3Rpb24oKXtyPSEwLG4uYWJvcnQoKX19fSx7c3RvcmVSZXN1bHQ6ITF9KS5ydW4oKTtuLm9uQ29tcGxldGlvbihmdW5jdGlvbihyKXt2YXIgbj1yLmluaXREYXRhLGk9ci5kYXRhLGE9ci5ldmVudFJlcHJlc2VudGF0aW9uO3QuX3JldHJpZXZpbmdTZWdtZW50PW51bGwsdC5fc2VnbWVudHMuc3BsaWNlKHQuX3NlZ21lbnRzLmluZGV4T2YoZSksMSx7c3RhdGU6by5DT01QTEVURSxpbml0RGF0YTpuLGRhdGE6aSxldmVudFJlcHJlc2VudGF0aW9uOmEsc2VnbWVudDplLnNlZ21lbnR9KSx0Ll9sb2dnZXIuZGVidWcoXCJTZWdtZW50IHJldHJpZXZlIGNvbXBsZXRlZC5cIixhKSx0LnVwZGF0ZSgpLHQuX29uU2VnbWVudFJlYWR5LmRpc3BhdGNoKHtzZWdtZW50OmUuc2VnbWVudCxpbml0RGF0YTpuLGRhdGE6aSxldmVudFJlcHJlc2VudGF0aW9uOmF9KX0pLG4ub25FcnJvcihmdW5jdGlvbihlKXtlIT09YyYmKHQuX2xvZ2dlci5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgc2VnbWVudCBkYXRhLlwiLGUpLHQuX3NjaGVkdWxlTmV4dFVwZGF0ZSgpLGUgaW5zdGFuY2VvZiBhLk9nZ1BhcnNlckVycm9yJiYoZT1lIGluc3RhbmNlb2YgYS5DaGVja3N1bUZhaWxlZEVycm9yP25ldyBzLk9nZ1BhcnNlckVycm9yKFwiQ0hFQ0tTVU1fRkFJTEVEXCIpOmUgaW5zdGFuY2VvZiBhLk5vU2VnbWVudHNJblBhZ2VFcnJvcj9uZXcgcy5PZ2dQYXJzZXJFcnJvcihcIk5PX1NFR01FTlRTX0lOX1BBR0VcIik6ZSBpbnN0YW5jZW9mIGEuUGFnZUZyb21EaWZmZXJlbnRCaXRzdHJlYW1FcnJvcj9uZXcgcy5PZ2dQYXJzZXJFcnJvcihcIlBBR0VfRlJPTV9ESUZGRVJFTlRfQklUU1RSRUFNXCIpOmUgaW5zdGFuY2VvZiBhLlBhZ2VTZXF1ZW5jZU51bWJlckRpZE5vdEluY3JlbWVudEVycm9yP25ldyBzLk9nZ1BhcnNlckVycm9yKFwiU0VRVUVOQ0VfTlVNQkVSX0RJRF9OT1RfSU5DUkVNRU5UXCIpOmUgaW5zdGFuY2VvZiBhLlVuZXhwZWN0ZWRCT1NFcnJvcj9uZXcgcy5PZ2dQYXJzZXJFcnJvcihcIlVORVhQRUNURURfQk9TXCIpOmUgaW5zdGFuY2VvZiBhLlVuZXhwZWN0ZWRFT1NFcnJvcj9uZXcgcy5PZ2dQYXJzZXJFcnJvcihcIlVORVhQRUNURURfRU9TXCIpOm5ldyBzLk9nZ1BhcnNlckVycm9yKFwiVU5LTk9XTlwiKSksdC5fb25FcnJvci5kaXNwYXRjaChlKSl9KSx0aGlzLl9yZXRyaWV2aW5nU2VnbWVudD17c3RhdGU6by5SRVRSSUVWSU5HX0RBVEEsZGF0YVJldHJpZXZlSm9iOm4sc2VnbWVudDplLnNlZ21lbnR9fX0sZS5wcm90b3R5cGUuX3JldHJpZXZlU2VnbWVudD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcy5fcmV0cmlldmluZ1NlZ21lbnQsbj10aGlzLl9wbGF5bGlzdCxpPW4/bi5nZXRTZWdtZW50SW5kZXhDb250YWluaW5nVGltZShlKTpudWxsO2lmKCFyfHxyLnN0YXRlIT09by5SRVRSSUVWSU5HX1NFR01FTlR8fHIuc2VnbWVudEluZGV4IT09aSlpZih0aGlzLl9hYm9ydEN1cnJlbnRSZXRyaWV2ZSgpLG4paWYobnVsbD09PWkpdGhpcy5fc2NoZWR1bGVOZXh0VXBkYXRlKCk7ZWxzZXt2YXIgYT1uLmdldFNlZ21lbnQoaSk7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiUmV0cmlldmluZyBzZWdtZW50LlwiLGkpLGEub25Db21wbGV0aW9uKGZ1bmN0aW9uKGUpe3QuX2xvZ2dlci5kZWJ1ZyhcIlJldHJpZXZlZCBzZWdtZW50LlwiLGkpLGUub25TZWdtZW50UmVxdWVzdFF1ZXVlZC5zdWJzY3JpYmUodC5fb25TZWdtZW50UmVxdWVzdFF1ZXVlZC5kaXNwYXRjaCksZS5vblNlZ21lbnRSZXF1ZXN0U3RhcnQuc3Vic2NyaWJlKHQuX29uU2VnbWVudFJlcXVlc3RTdGFydC5kaXNwYXRjaCksZS5vblNlZ21lbnRSZXRyaWV2ZWQuc3Vic2NyaWJlKHQuX29uU2VnbWVudFJldHJpZXZlZC5kaXNwYXRjaCksZS5vblNlZ21lbnRSZXF1ZXN0RmFpbGVkLnN1YnNjcmliZSh0Ll9vblNlZ21lbnRSZXF1ZXN0RmFpbGVkLmRpc3BhdGNoKSxlLm9uU2VnbWVudERlY3J5cHRpb25TdGFydC5zdWJzY3JpYmUodC5fb25TZWdtZW50RGVjcnlwdGlvblN0YXJ0LmRpc3BhdGNoKSxlLm9uU2VnbWVudERlY3J5cHRpb25FbmQuc3Vic2NyaWJlKHQuX29uU2VnbWVudERlY3J5cHRpb25FbmQuZGlzcGF0Y2gpLHQuX3NlZ21lbnRzLnNwbGljZSh0Ll9zZWdtZW50cy5pbmRleE9mKHMpLDEpO3ZhciByPWUuZ2V0VGltZVJhbmdlKCksbj10Ll9zZWdtZW50cy5sZW5ndGg7dC5fc2VnbWVudHMuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiBlLnN0YXRlIT09by5SRVRSSUVWSU5HX1NFR01FTlQmJmUuc2VnbWVudC5nZXRUaW1lUmFuZ2UoKS5zdGFydD5yLnN0YXJ0JiYobj10LCEwKX0pLHQuX3NlZ21lbnRzLnNwbGljZShuLDAse3N0YXRlOm8uUkVUUklFVkVEX1NFR01FTlQsc2VnbWVudDplfSksdC5fcmV0cmlldmluZ1NlZ21lbnQ9bnVsbCx0LnVwZGF0ZSgpfSksYS5vbkVycm9yKGZ1bmN0aW9uKGUpe2UhPT1jJiYodC5fbG9nZ2VyLmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyBzZWdtZW50LlwiLGUpLHQuX3NjaGVkdWxlTmV4dFVwZGF0ZSgpLHQuX29uRXJyb3IuZGlzcGF0Y2goZSkpfSk7dmFyIHM9e3N0YXRlOm8uUkVUUklFVklOR19TRUdNRU5ULHNlZ21lbnRJbmRleDppLHNlZ21lbnRSZXRyaWV2ZUpvYjphfTt0aGlzLl9zZWdtZW50cy5wdXNoKHMpLHRoaXMuX3JldHJpZXZpbmdTZWdtZW50PXN9ZWxzZSB0aGlzLl9sb2dnZXIuZGVidWcoXCJDYW5ub3QgcmV0cmlldmUgc2VnbWVudCBhcyB0aGVyZSBpcyBubyBwbGF5bGlzdC5cIiksdGhpcy5fc2NoZWR1bGVOZXh0VXBkYXRlKCl9LGUucHJvdG90eXBlLl9hYm9ydEN1cnJlbnRSZXRyaWV2ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3JldHJpZXZpbmdTZWdtZW50O2UmJihlLnN0YXRlPT09by5SRVRSSUVWSU5HX1NFR01FTlQ/KHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIkFib3J0aW5nIHNlZ21lbnQgcmV0cmlldmUgam9iLlwiKSxlLnNlZ21lbnRSZXRyaWV2ZUpvYi5hYm9ydCgpKTplLnN0YXRlPT09by5SRVRSSUVWSU5HX0RBVEEmJih0aGlzLl9sb2dnZXIuZGVidWcoXCJBYm9ydGluZyBzZWdtZW50IGRhdGEgcmV0cmlldmUgam9iLlwiKSxlLmRhdGFSZXRyaWV2ZUpvYi5hYm9ydCgpKSx0aGlzLl9yZXRyaWV2aW5nU2VnbWVudD1udWxsKX0sZS5wcm90b3R5cGUuX2dhcmJhZ2VDb2xsZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3NlZ21lbnRzLHI9dGhpcy5fY2FjaGVTaXplLGk9dGhpcy5nZXRDYWNoZVVzYWdlKCk7aWYoIShpPD1yKSl7dmFyIGE9dGhpcy5fcGxheWxpc3Qscz1hJiZhLmhhc0VuZGVkKCk/YS5nZXRUb3RhbER1cmF0aW9uKCk6MS8wLHU9ZSt0aGlzLl9tYXhCdWZmZXJMZW5ndGg7dT5zJiYodS09cyx1Pj1lKXx8dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RhdGU9PT1vLkNPTVBMRVRFJiYhbih0LnNlZ21lbnQsZSx1KX0pLm1hcChmdW5jdGlvbih0KXtpZih0LnN0YXRlIT09by5DT01QTEVURSl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yLlwiKTt2YXIgcj10LnNlZ21lbnQuZ2V0VGltZVJhbmdlKCksbj1yLnN0YXJ0LGk9TWF0aC5taW4oTWF0aC5hYnMoZS1uKSxuK3MtZSk7cmV0dXJue3NlZ21lbnQ6dCxkaXN0YW5jZTppLHNpemU6dC5kYXRhLmJ5dGVMZW5ndGgrKHQuaW5pdERhdGE/dC5pbml0RGF0YS5ieXRlTGVuZ3RoOjApfX0pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5kaXN0YW5jZS1lLmRpc3RhbmNlfSkuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gaTw9cnx8KHQuc3BsaWNlKHQuaW5kZXhPZihlLnNlZ21lbnQpLDEpLGktPWUuc2l6ZSwhMSl9KX19LGUucHJvdG90eXBlLl9zY2hlZHVsZU5leHRVcGRhdGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3RpbWVySWR8fCh0aGlzLl90aW1lcklkPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fdGltZXJJZD1udWxsLGUudXBkYXRlKCl9LDFlMykpfSxlLnByb3RvdHlwZS5fZW5zdXJlTm90RGVhZD1mdW5jdGlvbigpe2lmKHRoaXMuX2RlYWQpdGhyb3cgbmV3IEVycm9yKFwiUGxheWxpc3Qgc2VnbWVudCByZXRyaWV2ZXIgaGFzIGJlZW4ga2lsbGVkLlwiKX0sZX0oKTt0LlBsYXlsaXN0U2VnbWVudFJldHJpZXZlcj1ofSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gMD09PWUuaW5kZXhPZignXCInKSYmZS5sYXN0SW5kZXhPZignXCInKT09PWUubGVuZ3RoLTE/ZS5zbGljZSgxLC0xKTplfWZ1bmN0aW9uIG8oZSl7MD09PWUuaW5kZXhPZihcIjB4XCIpJiYoZT1lLnN1YnN0cigyKSk7dmFyIHQ9bmV3IFVpbnQxNkFycmF5KDgpO2lmKGUubGVuZ3RoJTQhPT0wKXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBJViAobGVuZ3RoIGlzIG5vdCBtdWx0aXBsZSBvZiA0KS5cIik7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKz00KXt2YXIgbj1wYXJzZUludChlLnN1YnN0cihyLDQpLDE2KTtpZihpc05hTihuKSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgaGV4IG51bWJlciBpbiBJViBzdHJpbmcuXCIpO3Rbci80XT1ufXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheSgxNikscj0xMjtyPDE2O3IrKyl0W3JdPWU+PjgqKDE1LXIpJjI1NTtyZXR1cm4gdH1mdW5jdGlvbiBhKGUpe3JldHVybiEoZT49NDAwJiZlPDUwMCl9ZnVuY3Rpb24gcyhlKXt2YXIgdD17fTtrLmxhc3RJbmRleD0wO2Zvcih2YXIgcjtudWxsIT09KHI9ay5leGVjKGUpKTspe3ZhciBvPXJbMV0udHJpbSgpLnRvTG93ZXJDYXNlKCksaT1uKHJbMl0udHJpbSgpKTt0W29dPWl9cmV0dXJuIHR9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHUsbD1yKDApLGM9cig5KSxkPXIoMTQpLGY9cigxMykscD1yKDMxKSxoPXIoMzIpLF89cigyNyksZz1yKDI2KSx5PXIoMjUpLHY9cigxMiksbT1sLmhlbHBlcnMuYWJvcnRhYmxlSm9iLkFib3J0YWJsZUpvYixFPWwuaGVscGVycy5kZWZlcnJlZC5idWlsZERlZmVycmVkLGI9bC5oZWxwZXJzLmNhY2hlLmJ1aWxkQ2FjaGUsdz1sLmhlbHBlcnMucmV0cnksUz13LnJldHJ5LFA9dy5idWlsZEV4cG9uZW50aWFsRGVsYXlDYWxjdWxhdG9yLFI9bC5oZWxwZXJzLlByb21pc2UsVD1sLmhlbHBlcnMuZmluZCx4PWwuaGVscGVycy51cmwsQT1sLmV2ZW50RGlzcGF0Y2hlci5FdmVudERpc3BhdGNoZXIsTz1sLmxvZ2dlci5wcmVmaXhMb2dnZXIsTT1sLmxvZ2dlci5ub09wTG9nZ2VyLEQ9Lyg/Oig/OiMoRVhUTTNVKSl8KD86I0VYVC1YLShQTEFZTElTVC1UWVBFKTooLispKXwoPzojRVhULVgtKE1FRElBLVNFUVVFTkNFKTogKihcXGQrKSl8KD86I0VYVC1YLShUQVJHRVREVVJBVElPTik6ICooXFxkKykpfCg/OiNFWFQtWC0oS0VZKTooLispKXwoPzojRVhULVgtKE1BUCk6KC4rKSl8KD86I0VYVC1YLShTVEFSVCk6KC4rKSl8KD86I0VYVChJTkYpOiAqKFxcZCsoPzpcXC5cXGQrKT8pKD86LCguKikpPyl8KD86KD8hIykoKShcXFMuKykpfCg/OiNFWFQtWC0oQllURVJBTkdFKTogKihcXGQrKD86QFxcZCsoPzpcXC5cXGQrKT8pPyl8KD86I0VYVC1YLShFTkRMSVNUKSl8KD86I0VYVC1YLShESVNDT05USU5VSVRZLVNFUSlVRU5DRTooXFxkKykpfCg/OiNFWFQtWC0oRElTKUNPTlRJTlVJVFkpKXwoPzojRVhULVgtKFBST0dSQU0tREFURS1USU1FKTooLispKXwoPzojRVhULVgtKFZFUlNJT04pOihcXGQrKSl8KD86KCMpKC4qKTooLiopKXwoPzooIykoLiopKSkoPzouKilcXHI/XFxuPy9nLGs9LyguKz8pPSguKz8pKD86LHwkKS9nLEk9L15cXGQqKFxcLlxcZCspPyQvOyFmdW5jdGlvbihlKXtlW2UuTk9ORT0wXT1cIk5PTkVcIixlW2UuQUVTXzEyOD0xXT1cIkFFU18xMjhcIixlW2UuU0FNUExFX0FFUz0yXT1cIlNBTVBMRV9BRVNcIn0odXx8KHU9e30pKTt2YXIgQzshZnVuY3Rpb24oZSl7ZVtlLlZPRD0wXT1cIlZPRFwiLGVbZS5MSVZFPTFdPVwiTElWRVwiLGVbZS5FVkVOVD0yXT1cIkVWRU5UXCJ9KEM9dC5QbGF5bGlzdFR5cGV8fCh0LlBsYXlsaXN0VHlwZT17fSkpO3ZhciBMPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1lLnVybCxyPWUucGxheWxpc3RMb2FkZXIsbj1lLnNlZ21lbnRMb2FkZXIsbz1lLmtleUxvYWRlcixpPXZvaWQgMD09PW8/bnVsbDpvLHM9ZS5zZWdtZW50Rm9ybWF0LHU9ZS5sb2dnZXIsbD12b2lkIDA9PT11P006dSxjPWUuZGVsYXlDYWxjdWxhdG9yLGQ9dm9pZCAwPT09Yz9QKCk6YyxwPWUua2V5RGVsYXlDYWxjdWxhdG9yLGg9dm9pZCAwPT09cD9QKCk6cCxnPWUuc2VnbWVudERlbGF5Q2FsY3VsYXRvcix5PWUuaXNQbGF5bGlzdFJlc3BvbnNlQ29kZUFjY2VwdGFibGUsdj12b2lkIDA9PT15P2Z1bmN0aW9uKGUpe3JldHVybiAyMDA9PT1lfTp5LHc9ZS5pc1BsYXlsaXN0UmVzcG9uc2VDb2RlUmV0cnlhYmxlLFQ9dm9pZCAwPT09dz9hOncseD1lLmlzU2VnbWVudFJlc3BvbnNlQ29kZUFjY2VwdGFibGUsRD12b2lkIDA9PT14P2Z1bmN0aW9uKGUpe1xucmV0dXJuIDIwMD09PWV9Ongsaz1lLmlzU2VnbWVudFJlc3BvbnNlQ29kZVJldHJ5YWJsZSxJPXZvaWQgMD09PWs/YTprLEM9ZS5pc0tleVJlc3BvbnNlQ29kZUFjY2VwdGFibGUsTD12b2lkIDA9PT1DP2Z1bmN0aW9uKGUpe3JldHVybiAyMDA9PT1lfTpDLGo9ZS5pc0tleVJlc3BvbnNlQ29kZVJldHJ5YWJsZSxOPXZvaWQgMD09PWo/YTpqLFU9dGhpczt0aGlzLl9rZXlSZXRyaWV2YWxKb2JzQ2FjaGU9YigpLHRoaXMuX2luaXREYXRhUmV0cmlldmFsSm9ic0NhY2hlPWIoKSx0aGlzLl9kYXRhPW51bGwsdGhpcy5fcGxheWxpc3RFdmVudFJlcHJlc2VudGF0aW9uPW51bGwsdGhpcy5fb25QbGF5bGlzdFJlcXVlc3RRdWV1ZWQ9bmV3IEEsdGhpcy5fb25QbGF5bGlzdFJlcXVlc3RTdGFydD1uZXcgQSx0aGlzLl9vblBsYXlsaXN0UmV0cmlldmVkPW5ldyBBLHRoaXMuX29uUGxheWxpc3RSZXF1ZXN0RmFpbGVkPW5ldyBBLHRoaXMuX29uUGxheWxpc3RQYXJzZVN0YXJ0PW5ldyBBLHRoaXMuX29uUGxheWxpc3RQYXJzZUVuZD1uZXcgQSx0aGlzLl9vbktleVJlcXVlc3RRdWV1ZWQ9bmV3IEEsdGhpcy5fb25LZXlSZXF1ZXN0U3RhcnQ9bmV3IEEsdGhpcy5fb25LZXlSZXRyaWV2ZWQ9bmV3IEEsdGhpcy5fb25LZXlSZXF1ZXN0RmFpbGVkPW5ldyBBLHRoaXMuX29uSW5pdERhdGFSZXF1ZXN0UXVldWVkPW5ldyBBLHRoaXMuX29uSW5pdERhdGFSZXF1ZXN0U3RhcnQ9bmV3IEEsdGhpcy5fb25Jbml0RGF0YVJldHJpZXZlZD1uZXcgQSx0aGlzLl9vbkluaXREYXRhUmVxdWVzdEZhaWxlZD1uZXcgQSx0aGlzLl9sb2dnZXI9TyhsLFwiUGxheWxpc3RcIiksdGhpcy5vblBsYXlsaXN0UmVxdWVzdFF1ZXVlZD10aGlzLl9vblBsYXlsaXN0UmVxdWVzdFF1ZXVlZC5nZXRIYW5kbGUoKSx0aGlzLm9uUGxheWxpc3RSZXF1ZXN0U3RhcnQ9dGhpcy5fb25QbGF5bGlzdFJlcXVlc3RTdGFydC5nZXRIYW5kbGUoKSx0aGlzLm9uUGxheWxpc3RSZXRyaWV2ZWQ9dGhpcy5fb25QbGF5bGlzdFJldHJpZXZlZC5nZXRIYW5kbGUoKSx0aGlzLm9uUGxheWxpc3RSZXF1ZXN0RmFpbGVkPXRoaXMuX29uUGxheWxpc3RSZXF1ZXN0RmFpbGVkLmdldEhhbmRsZSgpLHRoaXMub25QbGF5bGlzdFBhcnNlU3RhcnQ9dGhpcy5fb25QbGF5bGlzdFBhcnNlU3RhcnQuZ2V0SGFuZGxlKCksdGhpcy5vblBsYXlsaXN0UGFyc2VFbmQ9dGhpcy5fb25QbGF5bGlzdFBhcnNlRW5kLmdldEhhbmRsZSgpLHRoaXMub25LZXlSZXF1ZXN0UXVldWVkPXRoaXMuX29uS2V5UmVxdWVzdFF1ZXVlZC5nZXRIYW5kbGUoKSx0aGlzLm9uS2V5UmVxdWVzdFN0YXJ0PXRoaXMuX29uS2V5UmVxdWVzdFN0YXJ0LmdldEhhbmRsZSgpLHRoaXMub25LZXlSZXRyaWV2ZWQ9dGhpcy5fb25LZXlSZXRyaWV2ZWQuZ2V0SGFuZGxlKCksdGhpcy5vbktleVJlcXVlc3RGYWlsZWQ9dGhpcy5fb25LZXlSZXF1ZXN0RmFpbGVkLmdldEhhbmRsZSgpLHRoaXMub25Jbml0RGF0YVJlcXVlc3RRdWV1ZWQ9dGhpcy5fb25Jbml0RGF0YVJlcXVlc3RRdWV1ZWQuZ2V0SGFuZGxlKCksdGhpcy5vbkluaXREYXRhUmVxdWVzdFN0YXJ0PXRoaXMuX29uSW5pdERhdGFSZXF1ZXN0U3RhcnQuZ2V0SGFuZGxlKCksdGhpcy5vbkluaXREYXRhUmV0cmlldmVkPXRoaXMuX29uSW5pdERhdGFSZXRyaWV2ZWQuZ2V0SGFuZGxlKCksdGhpcy5vbkluaXREYXRhUmVxdWVzdEZhaWxlZD10aGlzLl9vbkluaXREYXRhUmVxdWVzdEZhaWxlZC5nZXRIYW5kbGUoKSx0aGlzLl91cmw9dCx0aGlzLl9wbGF5bGlzdExvYWRlcj1yLHRoaXMuX3NlZ21lbnRMb2FkZXI9bix0aGlzLl9rZXlMb2FkZXI9aSx0aGlzLl9zZWdtZW50Rm9ybWF0PXMsdGhpcy5fa2V5RGVsYXlDYWxjdWxhdG9yPWgsdGhpcy5faXNQbGF5bGlzdFJlc3BvbnNlQ29kZUFjY2VwdGFibGU9dix0aGlzLl9pc1BsYXlsaXN0UmVzcG9uc2VDb2RlUmV0cnlhYmxlPVQsdGhpcy5faXNTZWdtZW50UmVzcG9uc2VDb2RlQWNjZXB0YWJsZT1ELHRoaXMuX2lzU2VnbWVudFJlc3BvbnNlQ29kZVJldHJ5YWJsZT1JLHRoaXMuX2lzS2V5T3JJbml0RGF0YVJlc3BvbnNlQ29kZUFjY2VwdGFibGU9TCx0aGlzLl9pc0tleU9ySW5pdERhdGFSZXNwb25zZUNvZGVSZXRyeWFibGU9Tix0aGlzLl9zZWdtZW50RGVsYXlDYWxjdWxhdG9yPWcsdGhpcy5fZG93bmxvYWRBYm9ydGFibGVKb2I9bmV3IG0oZnVuY3Rpb24oKXt2YXIgZT1TKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtKGZ1bmN0aW9uKCl7dmFyIGU9bmV3IF8uUGxheWxpc3QodCk7VS5fb25QbGF5bGlzdFJlcXVlc3RRdWV1ZWQuZGlzcGF0Y2goe3BsYXlsaXN0OmV9KTt2YXIgcj1VLl9wbGF5bGlzdExvYWRlci5yZXF1ZXN0KHt1cmw6dH0pO3Iud2hlblJlcXVlc3RTdGFydGVkLnRoZW4oZnVuY3Rpb24oKXtVLl9vblBsYXlsaXN0UmVxdWVzdFN0YXJ0LmRpc3BhdGNoKHtwbGF5bGlzdDplfSl9KSxVLl9sb2dnZXIuZGVidWcoXCJSZXF1ZXN0aW5nIHBsYXlsaXN0LlwiLHQpO3ZhciBuPXIuZ2V0UmVzcG9uc2UoKS50aGVuKGZ1bmN0aW9uKHIpe2lmKCFyKXJldHVybiBVLl9sb2dnZXIud2FybihcIlBsYXlsaXN0IHJlcXVlc3QgdGltZWQgb3V0LlwiLHQpLFUuX29uUGxheWxpc3RSZXF1ZXN0RmFpbGVkLmRpc3BhdGNoKHtwbGF5bGlzdDplLHN0YXR1c0NvZGU6bnVsbH0pLHtzdWNjZXNzOiExfTt2YXIgbj1yLnN0YXR1c0NvZGU7aWYoVS5faXNQbGF5bGlzdFJlc3BvbnNlQ29kZUFjY2VwdGFibGUobikpe3ZhciBvPXIuZGF0YTtyZXR1cm4gbz8oVS5fbG9nZ2VyLmRlYnVnKFwiR290IHBsYXlsaXN0IHJlc3BvbnNlLlwiLHQsbiksVS5fb25QbGF5bGlzdFJldHJpZXZlZC5kaXNwYXRjaCh7cGxheWxpc3Q6ZSxzdGF0dXNDb2RlOm59KSx7c3VjY2VzczohMCxyZXN1bHQ6e3BsYXlsaXN0Q29udGVudDpvLGV2ZW50UmVwcmVzZW50YXRpb246ZX19KTooVS5fbG9nZ2VyLndhcm4oXCJQbGF5bGlzdCByZXNwb25zZSBjb250YWluZWQgbm8gZGF0YS5cIix0LG4pLFUuX29uUGxheWxpc3RSZXF1ZXN0RmFpbGVkLmRpc3BhdGNoKHtwbGF5bGlzdDplLHN0YXR1c0NvZGU6bn0pLHtzdWNjZXNzOiExfSl9cmV0dXJuIFUuX2lzUGxheWxpc3RSZXNwb25zZUNvZGVSZXRyeWFibGUobik/KFUuX2xvZ2dlci5kZWJ1ZyhcIlBsYXlsaXN0IHJlc3BvbnNlIGNvZGUgd2FzIG5vdCBhY2NlcHRhYmxlLiBXaWxsIHJldHJ5LlwiLHQsbiksVS5fb25QbGF5bGlzdFJlcXVlc3RGYWlsZWQuZGlzcGF0Y2goe3BsYXlsaXN0OmUsc3RhdHVzQ29kZTpufSkse3N1Y2Nlc3M6ITF9KTooVS5fbG9nZ2VyLmRlYnVnKFwiUGxheWxpc3QgcmVzcG9uc2UgY29kZSB3YXMgbm90IGFjY2VwdGFibGUuXCIsdCxuKSxVLl9vblBsYXlsaXN0UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7cGxheWxpc3Q6ZSxzdGF0dXNDb2RlOm59KSxSLnJlamVjdChuZXcgZi5VbmFjY2VwdGFibGVSZXNwb25zZVN0YXR1c0NvZGVFcnJvcihuKSkpfSk7cmV0dXJue3Jlc3VsdDpuLGFib3J0OmZ1bmN0aW9uKCl7VS5fbG9nZ2VyLmRlYnVnKFwiQWJvcnRpbmcgcGxheWxpc3QgcmVxdWVzdC5cIix0KSxyLmFib3J0KCksVS5fb25QbGF5bGlzdFJlcXVlc3RGYWlsZWQuZGlzcGF0Y2goe3BsYXlsaXN0OmUsYWJvcnRlZDohMH0pfX19KX0sZCk7cmV0dXJue3Jlc3VsdDplLndoZW5Db21wbGV0ZSgpLGFib3J0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuYWJvcnQoKX19fSx7c3RvcmVSZXN1bHQ6ITF9KSx0aGlzLl9yZXRyaWV2ZUpvYj1uZXcgbShmdW5jdGlvbigpe3ZhciBlPVUuX2Rvd25sb2FkQWJvcnRhYmxlSm9iLnJ1bigpLHQ9RSgpO3JldHVybiBlLm9uQ29tcGxldGlvbihmdW5jdGlvbihlKXt2YXIgcj1lLnBsYXlsaXN0Q29udGVudCxuPWUuZXZlbnRSZXByZXNlbnRhdGlvbjtVLl9vblBsYXlsaXN0UGFyc2VTdGFydC5kaXNwYXRjaCh7cGxheWxpc3Q6bn0pO3RyeXtVLl9kYXRhPVUuX3BhcnNlUGxheWxpc3Qocil9Y2F0Y2goZSl7cmV0dXJuIFUuX2xvZ2dlci5lcnJvcihcIkVycm9yIHdoZW4gcGFyc2luZyBwbGF5bGlzdC5cIixlLHIpLHZvaWQgdC5yZWplY3QoZSl9VS5fcGxheWxpc3RFdmVudFJlcHJlc2VudGF0aW9uPW4sVS5fb25QbGF5bGlzdFBhcnNlRW5kLmRpc3BhdGNoKHtwbGF5bGlzdDpufSksdC5yZXNvbHZlKHZvaWQgMCl9KSxlLm9uRXJyb3IodC5yZWplY3QpLHtyZXN1bHQ6dC5wcm9taXNlLGFib3J0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuYWJvcnQoKX19fSx7c3RvcmVSZXN1bHQ6ITF9KX1yZXR1cm4gZS5wcm90b3R5cGUucmV0cmlldmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmV0cmlldmVKb2IucnVuKCl9LGUucHJvdG90eXBlLmhhc1JldHJpZXZlQ29tcGxldGVkPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9kYXRhfSxlLnByb3RvdHlwZS5nZXRTdGFydGluZ1NlcXVlbmNlTnVtYmVyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2RhdGEpdGhyb3cgbmV3IEVycm9yKFwiTm90IGxvYWRlZCB5ZXQuXCIpO3JldHVybiB0aGlzLl9kYXRhLm1lZGlhU2VxdWVuY2V9LGUucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtpZighdGhpcy5fZGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgbG9hZGVkIHlldC5cIik7cmV0dXJuIHRoaXMuX2RhdGEudHlwZX0sZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtpZighdGhpcy5fZGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgbG9hZGVkIHlldC5cIik7cmV0dXJuIHRoaXMuX2RhdGEudGFyZ2V0RHVyYXRpb259LGUucHJvdG90eXBlLmdldFRvdGFsRHVyYXRpb249ZnVuY3Rpb24oKXtpZighdGhpcy5fZGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgbG9hZGVkIHlldC5cIik7cmV0dXJuIHRoaXMuX2RhdGEudG90YWxEdXJhdGlvbn0sZS5wcm90b3R5cGUuaGFzRW5kZWQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fZGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgbG9hZGVkIHlldC5cIik7cmV0dXJuIHRoaXMuX2RhdGEuZW5kZWR9LGUucHJvdG90eXBlLmdldFNlZ21lbnRDb3VudD1mdW5jdGlvbigpe2lmKCF0aGlzLl9kYXRhKXRocm93IG5ldyBFcnJvcihcIk5vdCBsb2FkZWQgeWV0LlwiKTtyZXR1cm4gdGhpcy5fZGF0YS5zZWdtZW50cy5sZW5ndGh9LGUucHJvdG90eXBlLmdldFNlZ21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0U2VnbWVudHMoZSxlKzEpWzBdfSxlLnByb3RvdHlwZS5nZXRTZWdtZW50cz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzLl9kYXRhO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIk5vdCBsb2FkZWQgeWV0LlwiKTt2YXIgbz1uLm1lZGlhU2VxdWVuY2U7dm9pZCAwPT09ZSYmKGU9byk7dmFyIGk9bi5zZWdtZW50cy5sZW5ndGg7aWYodm9pZCAwPT09dCYmKHQ9bytpKSxlPG8pdGhyb3cgbmV3IEVycm9yKFwiU3RhcnQgaW5kZXggbXVzdCBiZSA+PSB0aGUgZmlyc3Qgc2VnbWVudCBpbmRleC5cIik7aWYodDxvKXRocm93IG5ldyBFcnJvcihcIkVuZCBpbmRleCBtdXN0IGJlID49IHRoZSBmaXJzdCBzZWdtZW50IGluZGV4LlwiKTtpZih0Pm8raSl0aHJvdyBuZXcgRXJyb3IoXCJFbmQgaW5kZXggY2Fubm90IGJlID4gdGhhbiB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgc2VnbWVudC5cIik7aWYodDxlKXRocm93IG5ldyBFcnJvcihcIkVuZCBpbmRleCBtdXN0IGJlID49IHN0YXJ0IGluZGV4LlwiKTtyZXR1cm4gbi5zZWdtZW50cy5zbGljZShlLW8sdC1vKS5tYXAoZnVuY3Rpb24odCxuKXt2YXIgbz1uZXcgbShmdW5jdGlvbigpe3ZhciBvPXQuZW5jcnlwdGlvbkRhdGEsaT1lK24sYT1yLl9wbGF5bGlzdEV2ZW50UmVwcmVzZW50YXRpb247aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwiUGxheWxpc3QgZXZlbnQgcmVwcmVzZW50YXRpb24gc2hvdWxkIGV4aXN0LlwiKTt2YXIgcz1yLl9idWlsZEVuY3J5cHRpb25Db25maWcobyxpKSx1PXQuaW5pdERhdGFVcmw/ci5fcmV0cmlldmVJbml0RGF0YSh0LmluaXREYXRhVXJsKTpudWxsLGw9cy53aGVuQ29tcGxldGUoKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgZC5TZWdtZW50KHt1cmw6dC51cmwsc2VxdWVuY2VOdW1iZXI6aSxwbGF5bGlzdDpyLHRpbWVSYW5nZTp0LnRpbWVSYW5nZSxmb3JtYXQ6ci5fc2VnbWVudEZvcm1hdCxsb2FkZXI6ci5fc2VnbWVudExvYWRlcixwbGF5bGlzdEV2ZW50UmVwcmVzZW50YXRpb246YSxsb2dnZXI6ci5fbG9nZ2VyLGRlbGF5Q2FsY3VsYXRvcjpyLl9zZWdtZW50RGVsYXlDYWxjdWxhdG9yLGlzUmVzcG9uc2VDb2RlQWNjZXB0YWJsZTpyLl9pc1NlZ21lbnRSZXNwb25zZUNvZGVBY2NlcHRhYmxlLGlzUmVzcG9uc2VDb2RlUmV0cnlhYmxlOnIuX2lzU2VnbWVudFJlc3BvbnNlQ29kZVJldHJ5YWJsZSxlbmNyeXB0aW9uQ29uZmlnOmUsaW5pdERhdGE6bn0pfTtyZXR1cm4gdT91LndoZW5Db21wbGV0ZSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KTpuKHZvaWQgMCl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyBlIGluc3RhbmNlb2YgYy5PZ2dQYXJzZXJFcnJvcj9lIGluc3RhbmNlb2YgYy5DaGVja3N1bUZhaWxlZEVycm9yP25ldyB2Lk9nZ1BhcnNlckVycm9yKFwiQ0hFQ0tTVU1fRkFJTEVEXCIpOmUgaW5zdGFuY2VvZiBjLk5vU2VnbWVudHNJblBhZ2VFcnJvcj9uZXcgdi5PZ2dQYXJzZXJFcnJvcihcIk5PX1NFR01FTlRTX0lOX1BBR0VcIik6ZSBpbnN0YW5jZW9mIGMuUGFnZUZyb21EaWZmZXJlbnRCaXRzdHJlYW1FcnJvcj9uZXcgdi5PZ2dQYXJzZXJFcnJvcihcIlBBR0VfRlJPTV9ESUZGRVJFTlRfQklUU1RSRUFNXCIpOmUgaW5zdGFuY2VvZiBjLlBhZ2VTZXF1ZW5jZU51bWJlckRpZE5vdEluY3JlbWVudEVycm9yP25ldyB2Lk9nZ1BhcnNlckVycm9yKFwiU0VRVUVOQ0VfTlVNQkVSX0RJRF9OT1RfSU5DUkVNRU5UXCIpOmUgaW5zdGFuY2VvZiBjLlVuZXhwZWN0ZWRCT1NFcnJvcj9uZXcgdi5PZ2dQYXJzZXJFcnJvcihcIlVORVhQRUNURURfQk9TXCIpOmUgaW5zdGFuY2VvZiBjLlVuZXhwZWN0ZWRFT1NFcnJvcj9uZXcgdi5PZ2dQYXJzZXJFcnJvcihcIlVORVhQRUNURURfRU9TXCIpOm5ldyB2Lk9nZ1BhcnNlckVycm9yKFwiVU5LTk9XTlwiKTplfSk7cmV0dXJue3Jlc3VsdDpsLGFib3J0OmZ1bmN0aW9uKCl7cy5hYm9ydCgpLHUmJnUuYWJvcnQoKX19fSx7c3RvcmVSZXN1bHQ6ITF9KTtyZXR1cm4gby5ydW4oKX0pfSxlLnByb3RvdHlwZS5nZXRTZWdtZW50SW5kZXhDb250YWluaW5nVGltZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIk5vdCBsb2FkZWQgeWV0LlwiKTt2YXIgcj1UKHQuc2VnbWVudHMsZnVuY3Rpb24odCl7cmV0dXJuIHQudGltZVJhbmdlLmNvbnRhaW5zVGltZShlKX0pO3JldHVybiByP3QubWVkaWFTZXF1ZW5jZSt0LnNlZ21lbnRzLmluZGV4T2Yocik6bnVsbH0sZS5wcm90b3R5cGUuX2J1aWxkRW5jcnlwdGlvbkNvbmZpZz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1uZXcgbShmdW5jdGlvbigpe2lmKGUubWV0aG9kPT09dS5OT05FKXJldHVybntyZXN1bHQ6Ui5yZXNvbHZlKHZvaWQgMCl9O2lmKGUubWV0aG9kIT09dS5BRVNfMTI4KXJldHVybiByLl9sb2dnZXIuZXJyb3IoXCJVbnN1cHBvcnRlZCBlbmNyeXB0aW9uIG1ldGhvZC5cIixlLm1ldGhvZCkse3Jlc3VsdDpSLnJlamVjdChuZXcgaC5VbnN1cHBvcnRlZEVuY3J5cHRpb25FcnJvcil9O3ZhciBuPXIuX2tleUxvYWRlcjtpZighbilyZXR1cm57cmVzdWx0OlIucmVqZWN0KG5ldyBFcnJvcihcIkVuY3J5cHRpb24gbWV0aG9kIG5vdCBzdXBwb3J0ZWQgYXMgbm8ga2V5IGxvYWRlciBwcm92aWRlZC5cIikpfTt2YXIgbz1yLl9yZXRyaWV2ZUtleShlLmtleVVybCksYT1vLndoZW5Db21wbGV0ZSgpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJue2NpcGhlcjpcIkFFUy1DQkNcIixrZXk6cixpdjplLml2fHxpKHQpfX0pO3JldHVybntyZXN1bHQ6YSxhYm9ydDpmdW5jdGlvbigpe3JldHVybiBvLmFib3J0KCl9fX0pO3JldHVybiBuLnJ1bigpfSxlLnByb3RvdHlwZS5fcmV0cmlldmVLZXk9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuX2tleUxvYWRlcjtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJObyBrZXkgbG9hZGVyLlwiKTt2YXIgbj10aGlzLl9wbGF5bGlzdEV2ZW50UmVwcmVzZW50YXRpb247aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiUGxheWxpc3QgZXZlbnQgcmVwcmVzZW50YXRpb24gc2hvdWxkIGV4aXN0LlwiKTt2YXIgbz1uZXcgZy5LZXkobixlKTtyZXR1cm4gdGhpcy5fcmV0cmlldmVLZXlPckluaXREYXRhKHt1cmw6ZSxsb2FkZXI6cixjYWNoZTp0aGlzLl9rZXlSZXRyaWV2YWxKb2JzQ2FjaGUsb25SZXF1ZXN0UXVldWVkOmZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uS2V5UmVxdWVzdFF1ZXVlZC5kaXNwYXRjaCh7a2V5Om99KX0sb25SZXF1ZXN0U3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25LZXlSZXF1ZXN0U3RhcnQuZGlzcGF0Y2goe2tleTpvfSl9LG9uUmVxdWVzdFRpbWVkT3V0OmZ1bmN0aW9uKCl7dC5fb25LZXlSZXF1ZXN0RmFpbGVkLmRpc3BhdGNoKHtrZXk6byxzdGF0dXNDb2RlOm51bGx9KX0sb25SZXF1ZXN0RmFpbGVkOmZ1bmN0aW9uKGUpe3QuX29uS2V5UmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7a2V5Om8sc3RhdHVzQ29kZTplfSl9LG9uUmVxdWVzdEFib3J0ZWQ6ZnVuY3Rpb24oKXt0Ll9vbktleVJlcXVlc3RGYWlsZWQuZGlzcGF0Y2goe2tleTpvLGFib3J0ZWQ6ITB9KX0sb25SZXRyaWV2ZWQ6ZnVuY3Rpb24oZSl7dC5fb25LZXlSZXRyaWV2ZWQuZGlzcGF0Y2goe2tleTpvLHN0YXR1c0NvZGU6ZX0pfSx0eXBlOlwia2V5XCJ9KX0sZS5wcm90b3R5cGUuX3JldHJpZXZlSW5pdERhdGE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuX3BsYXlsaXN0RXZlbnRSZXByZXNlbnRhdGlvbjtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJQbGF5bGlzdCBldmVudCByZXByZXNlbnRhdGlvbiBzaG91bGQgZXhpc3QuXCIpO3ZhciBuPW5ldyB5LkluaXREYXRhKHIsZSk7cmV0dXJuIHRoaXMuX3JldHJpZXZlS2V5T3JJbml0RGF0YSh7dXJsOmUsbG9hZGVyOnRoaXMuX3NlZ21lbnRMb2FkZXIsY2FjaGU6dGhpcy5faW5pdERhdGFSZXRyaWV2YWxKb2JzQ2FjaGUsb25SZXF1ZXN0UXVldWVkOmZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uSW5pdERhdGFSZXF1ZXN0UXVldWVkLmRpc3BhdGNoKHtpbml0RGF0YTpufSl9LG9uUmVxdWVzdFN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uSW5pdERhdGFSZXF1ZXN0U3RhcnQuZGlzcGF0Y2goe2luaXREYXRhOm59KX0sb25SZXF1ZXN0VGltZWRPdXQ6ZnVuY3Rpb24oKXt0Ll9vbkluaXREYXRhUmVxdWVzdEZhaWxlZC5kaXNwYXRjaCh7aW5pdERhdGE6bixzdGF0dXNDb2RlOm51bGx9KX0sb25SZXF1ZXN0RmFpbGVkOmZ1bmN0aW9uKGUpe3QuX29uSW5pdERhdGFSZXF1ZXN0RmFpbGVkLmRpc3BhdGNoKHtpbml0RGF0YTpuLHN0YXR1c0NvZGU6ZX0pfSxvblJlcXVlc3RBYm9ydGVkOmZ1bmN0aW9uKCl7dC5fb25Jbml0RGF0YVJlcXVlc3RGYWlsZWQuZGlzcGF0Y2goe2luaXREYXRhOm4sYWJvcnRlZDohMH0pfSxvblJldHJpZXZlZDpmdW5jdGlvbihlKXt0Ll9vbkluaXREYXRhUmV0cmlldmVkLmRpc3BhdGNoKHtpbml0RGF0YTpuLHN0YXR1c0NvZGU6ZX0pfSx0eXBlOlwiaW5pdCBkYXRhXCJ9KX0sZS5wcm90b3R5cGUuX3JldHJpZXZlS2V5T3JJbml0RGF0YT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS51cmwsbj1lLmxvYWRlcixvPWUuY2FjaGUsaT1lLm9uUmVxdWVzdFF1ZXVlZCxhPWUub25SZXF1ZXN0U3RhcnQscz1lLm9uUmVxdWVzdFRpbWVkT3V0LHU9ZS5vblJlcXVlc3RGYWlsZWQsbD1lLm9uUmVxdWVzdEFib3J0ZWQsYz1lLm9uUmV0cmlldmVkLGQ9ZS50eXBlLHA9by5nZXQocik7cmV0dXJuIHA/dGhpcy5fbG9nZ2VyLmRlYnVnKGQrXCIgcmV0cmlldmFsIGFscmVhZHkgaW4gcHJvZ3Jlc3MuXCIscik6KHA9bmV3IG0oZnVuY3Rpb24oKXt2YXIgZT1TKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtKGZ1bmN0aW9uKCl7aSgpO3ZhciBlPW4ucmVxdWVzdCh7dXJsOnJ9KTtlLndoZW5SZXF1ZXN0U3RhcnRlZC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGEoKX0pLHQuX2xvZ2dlci5kZWJ1ZyhcIlJldHJpZXZpbmcgXCIrZCtcIi5cIixyKTt2YXIgbz1lLmdldFJlc3BvbnNlKCkudGhlbihmdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdC5fbG9nZ2VyLndhcm4oZCtcIiByZXF1ZXN0IHRpbWVkIG91dC5cIixyKSxzKCkse3N1Y2Nlc3M6ITF9O3ZhciBuPWUuc3RhdHVzQ29kZTtpZih0Ll9pc0tleU9ySW5pdERhdGFSZXNwb25zZUNvZGVBY2NlcHRhYmxlKG4pKXt2YXIgbz1lLmRhdGE7cmV0dXJuIG8/KHQuX2xvZ2dlci5kZWJ1ZyhcIkdvdCBcIitkK1wiIHJlc3BvbnNlLlwiLHIsbiksYyhuKSx7c3VjY2VzczohMCxyZXN1bHQ6bmV3IFVpbnQ4QXJyYXkobyl9KToodC5fbG9nZ2VyLndhcm4oZCtcIiByZXNwb25zZSBjb250YWluZWQgbm8gZGF0YS5cIixyLG4pLHUobikse3N1Y2Nlc3M6ITF9KX1yZXR1cm4gdC5faXNLZXlPckluaXREYXRhUmVzcG9uc2VDb2RlUmV0cnlhYmxlKG4pPyh0Ll9sb2dnZXIud2FybihkK1wiIHJlc3BvbnNlIGNvZGUgd2FzIG5vdCBhY2NlcHRhYmxlLiBXaWxsIHJldHJ5LlwiLHIsbiksdShuKSx7c3VjY2VzczohMX0pOih0Ll9sb2dnZXIud2FybihkK1wiIHJlc3BvbnNlIGNvZGUgd2FzIG5vdCBhY2NlcHRhYmxlLlwiLHIsbiksdShuKSxSLnJlamVjdChuZXcgZi5VbmFjY2VwdGFibGVSZXNwb25zZVN0YXR1c0NvZGVFcnJvcihuKSkpfSk7cmV0dXJue3Jlc3VsdDpvLGFib3J0OmZ1bmN0aW9uKCl7dC5fbG9nZ2VyLmRlYnVnKFwiQWJvcnRpbmcgXCIrZCtcIiByZXF1ZXN0LlwiLHIpLGUuYWJvcnQoKSxsKCl9fX0pfSx0Ll9rZXlEZWxheUNhbGN1bGF0b3IpO3JldHVybntyZXN1bHQ6ZS53aGVuQ29tcGxldGUoKSxhYm9ydDpmdW5jdGlvbigpe3JldHVybiBlLmFib3J0KCl9fX0se3N0b3JlUmVzdWx0OiExfSksby5zZXQocixwKSkscC5ydW4oKX0sZS5wcm90b3R5cGUuX3BhcnNlUGxheWxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9e3ZlcnNpb246bnVsbCx0eXBlOkMuTElWRSxtZWRpYVNlcXVlbmNlOm51bGwsdGFyZ2V0RHVyYXRpb246bnVsbCx0b3RhbER1cmF0aW9uOjAsZW5kZWQ6ITF9LHI9W10sbj17bWV0aG9kOnUuTk9ORX0saT1udWxsLGE9bnVsbDtELmxhc3RJbmRleD0wO2Zvcih2YXIgYyxkPTAsZj0hMTtudWxsIT09KGM9RC5leGVjKGUpKTspe3ZhciBoPWMuZmlsdGVyKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIDAhPT10JiZ2b2lkIDAhPT1lfSkubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA9PT10P2UudG9Mb3dlckNhc2UoKTplfSksXz1oWzBdLGc9aC5zbGljZSgxKTtpZigwPT09ZCl7aWYoXCJleHRtM3VcIiE9PV8pdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiRmlyc3QgbGluZSBkaWQgbm90IGNvbnRhaW4gRVhUTTNVIHRhZy5cIil9ZWxzZXtpZighZilzd2l0Y2goXyl7Y2FzZVwicGxheWxpc3QtdHlwZVwiOmlmKHQudHlwZSE9PUMuTElWRSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJBbHJlYWR5IGhhdmUgcGxheWxpc3QgdHlwZS5cIik7c3dpdGNoKGdbMF0udG9Mb3dlckNhc2UoKSl7Y2FzZVwidm9kXCI6dC50eXBlPUMuVk9EO2JyZWFrO2Nhc2VcImV2ZW50XCI6dC50eXBlPUMuRVZFTlQ7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJJbnZhbGlkIHBsYXlsaXN0IHR5cGUuXCIpfWJyZWFrO2Nhc2VcIm1lZGlhLXNlcXVlbmNlXCI6aWYobnVsbCE9PXQubWVkaWFTZXF1ZW5jZSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJBbHJlYWR5IGhhdmUgbWVkaWEgc2VxdWVuY2UgbnVtYmVyLlwiKTt2YXIgeT1wYXJzZUludChnWzBdLDEwKTtpZih5K1wiXCIhPT1nWzBdKXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIkludmFsaWQgbWVkaWEgc2VxdWVuY2UgbnVtYmVyLlwiKTt0Lm1lZGlhU2VxdWVuY2U9eTticmVhaztjYXNlXCJ0YXJnZXRkdXJhdGlvblwiOmlmKG51bGwhPT10LnRhcmdldER1cmF0aW9uKXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIkFscmVhZHkgaGF2ZSB0YXJnZXQgZHVyYXRpb24uXCIpO3ZhciB2PXBhcnNlSW50KGdbMF0sMTApO2lmKHYrXCJcIiE9PWdbMF18fHY8MCl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJJbnZhbGlkIHRhcmdldCBkdXJhdGlvbi5cIik7dC50YXJnZXREdXJhdGlvbj0xZTMqdjticmVhaztjYXNlXCJ2ZXJzaW9uXCI6aWYobnVsbCE9PXQudmVyc2lvbil0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJBbHJlYWR5IGhhdmUgdmVyc2lvbi5cIik7dmFyIG09cGFyc2VJbnQoZ1swXSwxMCk7aWYobStcIlwiIT09Z1swXSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJJbnZhbGlkIHZlcnNpb24uXCIpO2lmKG08Myl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJITFMgdmVyc2lvbiBtdXN0IGJlIDMgb3IgYWJvdmUuXCIpO3QudmVyc2lvbj1tO2JyZWFrO2RlZmF1bHQ6Zj0hMH1pZihmKXN3aXRjaChfKXtjYXNlXCJrZXlcIjp2YXIgRT1zKGdbMF0pLGI9XCJtZXRob2RcImluIEU/RS5tZXRob2QudG9Mb3dlckNhc2UoKTpudWxsLHc9XCJ1cmlcImluIEU/eC5idWlsZEFic29sdXRlVXJsKHRoaXMuX3VybCxFLnVyaSk6bnVsbCxTPVwiaXZcImluIEU/byhFLml2KTpudWxsO2lmKCFiKXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIk1pc3NpbmcgZW5jcnlwdGlvbiBtZXRob2QuXCIpO2lmKCF3JiZcIm5vbmVcIiE9PWIpdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiTWlzc2luZyBrZXkgdXJsLlwiKTtzd2l0Y2goYil7Y2FzZVwibm9uZVwiOmlmKG51bGwhPT13KXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIktleSB1cmwgbm90IGFsbG93ZWQuXCIpO2lmKG51bGwhPT1TKXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIklWIG5vdCBhbGxvd2VkLlwiKTtuPXttZXRob2Q6dS5OT05FfTticmVhaztjYXNlXCJhZXMtMTI4XCI6aWYoIXcpdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiS2V5IHVybCByZXF1aXJlZC5cIik7bj17bWV0aG9kOnUuQUVTXzEyOCxrZXlVcmw6dyxpdjpTfTticmVhaztjYXNlXCJzYW1wbGUtYWVzXCI6aWYoIXcpdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiS2V5IHVybCByZXF1aXJlZC5cIik7bj17bWV0aG9kOnUuU0FNUExFX0FFUyxrZXlVcmw6dyxpdjpTfTticmVhaztkZWZhdWx0OnRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIlVua25vd24gZW5jcnlwdGlvbiBtZXRob2QuXCIpfWJyZWFrO2Nhc2VcIm1hcFwiOnZhciBFPXMoZ1swXSk7aWYoIShcInVyaVwiaW4gRSkpdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiVVJJIG1pc3NpbmcgZnJvbSBFWFQtWC1NQVAgdGFnLlwiKTtpZihcImJ5dGVyYW5nZVwiaW4gRSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJCWVRFUkFOR0UgaW4gRVhULVgtTUFQIHRhZyBpcyBjdXJyZW50bHkgdW5zdXBwb3J0ZWQuXCIpO2k9RS51cmk/eC5idWlsZEFic29sdXRlVXJsKHRoaXMuX3VybCxFLnVyaSk6bnVsbDticmVhaztjYXNlXCJpbmZcIjppZighZ1swXS5tYXRjaChJKSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJJbnZhbGlkIHNlZ21lbnQgZHVyYXRpb24uXCIpO2E9MWUzKnBhcnNlRmxvYXQoZ1swXSk7YnJlYWs7Y2FzZVwiXCI6aWYodC5lbmRlZCl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJBbHJlYWR5IHJlY2VpdmVkIEVORExJU1QgdGFnLlwiKTtpZihudWxsPT09YSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJOb3QgcmVjZWl2ZWQgc2VnbWVudCBkdXJhdGlvbi5cIik7dmFyIFA9eC5idWlsZEFic29sdXRlVXJsKHRoaXMuX3VybCxnWzBdKTtyLnB1c2goe3VybDpQLHRpbWVSYW5nZTpuZXcgbC5UaW1lUmFuZ2UodC50b3RhbER1cmF0aW9uLGEpLGluaXREYXRhVXJsOmksZW5jcnlwdGlvbkRhdGE6bn0pLHQudG90YWxEdXJhdGlvbis9YSxhPW51bGw7YnJlYWs7Y2FzZVwiZW5kbGlzdFwiOmlmKHQuZW5kZWQpdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiQWxyZWFkeSBoYWQgRU5ETElTVCB0YWcuXCIpO3QuZW5kZWQ9ITA7YnJlYWs7ZGVmYXVsdDp0aGlzLl9sb2dnZXIud2FybihcIlVuYWJsZSB0byBwYXJzZSBwbGF5bGlzdCBsaW5lLlwiLF8pfX1kKyt9dmFyIFI9dC52ZXJzaW9uLFQ9dC50eXBlLEE9dC5tZWRpYVNlcXVlbmNlLE89dC50YXJnZXREdXJhdGlvbixNPXQuZW5kZWQsaz10LnRvdGFsRHVyYXRpb247aWYobnVsbD09PVIpdGhyb3cgbmV3IHAuUGxheWxpc3RQYXJzZUVycm9yKFwiTWlzc2luZyB2ZXJzaW9uLlwiKTtpZihudWxsPT09Tyl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJNaXNzaW5nIHRhcmdldCBkdXJhdGlvbi5cIik7aWYoTSYmVD09PUMuTElWRSl0aHJvdyBuZXcgcC5QbGF5bGlzdFBhcnNlRXJyb3IoXCJDYW5ub3QgYmUgZW5kZWQgaWYgdHlwZSBpcyBMSVZFLlwiKTtpZighTSYmVD09PUMuVk9EKXRocm93IG5ldyBwLlBsYXlsaXN0UGFyc2VFcnJvcihcIk11c3QgYmUgZW5kZWQgaWYgdHlwZSBpcyBWT0QuXCIpO3JldHVybiBudWxsPT09QSYmKEE9MCkse3ZlcnNpb246Uix0eXBlOlQsbWVkaWFTZXF1ZW5jZTpBLHRhcmdldER1cmF0aW9uOk8sdG90YWxEdXJhdGlvbjprLGVuZGVkOk0sc2VnbWVudHM6cn19LGV9KCk7dC5QbGF5bGlzdD1MfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG4sbz1yKDMwKSxpPXIoMzEpLGE9cigxMikscz1yKDUpLHU9cigxMyksbD1yKDMyKTshZnVuY3Rpb24oZSl7ZS5Ob0RlY3J5cHRvckVycm9yPW8uTm9EZWNyeXB0b3JFcnJvcixlLlBsYXlsaXN0UGFyc2VFcnJvcj1pLlBsYXlsaXN0UGFyc2VFcnJvcixlLk9nZ1BhcnNlckVycm9yPWEuT2dnUGFyc2VyRXJyb3IsZS5SZXRyaWV2YWxFcnJvcj1zLlJldHJpZXZhbEVycm9yLGUuVW5hY2NlcHRhYmxlUmVzcG9uc2VTdGF0dXNDb2RlRXJyb3I9dS5VbmFjY2VwdGFibGVSZXNwb25zZVN0YXR1c0NvZGVFcnJvcixlLlVuc3VwcG9ydGVkRW5jcnlwdGlvbkVycm9yPWwuVW5zdXBwb3J0ZWRFbmNyeXB0aW9uRXJyb3J9KG49dC5yZXRyaWV2YWxFcnJvcnN8fCh0LnJldHJpZXZhbEVycm9ycz17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigyOSksbz1yKDg4KTt0LlRyYW5zbXV4ZXJGYWN0b3J5PXtyZXRyaWV2ZVRyYW5zbXV4ZXJzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8uZGVmYXVsdC5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG89ci5nZXRJbnB1dEZvcm1hdCgpLGk9ci5nZXRPdXRwdXRGb3JtYXQoKTtyZXR1cm4oIWV8fG4uaXNQYXJ0aWFsTWF0Y2gobyxlKSkmJighdHx8bi5pc1BhcnRpYWxNYXRjaChpLHQpKX0pfSxyZXRyaWV2ZVRyYW5zbXV4ZXI6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5UcmFuc211eGVyRmFjdG9yeS5yZXRyaWV2ZVRyYW5zbXV4ZXJzKGUscilbMF18fG51bGx9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXQuX19lc01vZHVsZT0hMDt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpO3QuQUVTRGVjcnlwdG9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe24odGhpcyxlKSx0aGlzLnJjb249WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdLHRoaXMuc3ViTWl4PVtdLHRoaXMuc3ViTWl4WzBdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuc3ViTWl4WzFdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuc3ViTWl4WzJdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuc3ViTWl4WzNdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuaW52U3ViTWl4PVtdLHRoaXMuaW52U3ViTWl4WzBdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuaW52U3ViTWl4WzFdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuaW52U3ViTWl4WzJdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuaW52U3ViTWl4WzNdPW5ldyBVaW50MzJBcnJheSgyNTYpLHRoaXMuc0JveD1uZXcgVWludDMyQXJyYXkoMjU2KSx0aGlzLmludlNCb3g9bmV3IFVpbnQzMkFycmF5KDI1NiksdGhpcy5rZXk9bmV3IFVpbnQzMkFycmF5KDApLHRoaXMuaW5pdFRhYmxlKCl9cmV0dXJuIG8oZSxbe2tleTpcInVpbnQ4QXJyYXlUb1VpbnQzMkFycmF5X1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgRGF0YVZpZXcoZSkscj1uZXcgVWludDMyQXJyYXkoNCksbj0wO248ci5sZW5ndGg7bisrKXJbbl09dC5nZXRVaW50MzIoNCpuKTtyZXR1cm4gcn19LHtrZXk6XCJpbml0VGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc0JveCx0PXRoaXMuaW52U0JveCxyPXRoaXMuc3ViTWl4WzBdLG49dGhpcy5zdWJNaXhbMV0sbz10aGlzLnN1Yk1peFsyXSxpPXRoaXMuc3ViTWl4WzNdLGE9dGhpcy5pbnZTdWJNaXhbMF0scz10aGlzLmludlN1Yk1peFsxXSx1PXRoaXMuaW52U3ViTWl4WzJdLGw9dGhpcy5pbnZTdWJNaXhbM10sYz1uZXcgVWludDMyQXJyYXkoMjU2KSxkPTAsZj0wLHA9MDtmb3IocD0wO3A8MjU2O3ArKylwPDEyOD9jW3BdPXA8PDE6Y1twXT1wPDwxXjI4Mztmb3IocD0wO3A8MjU2O3ArKyl7dmFyIGg9Zl5mPDwxXmY8PDJeZjw8M15mPDw0O2g9aD4+PjheMjU1JmheOTksZVtkXT1oLHRbaF09ZDt2YXIgXz1jW2RdLGc9Y1tfXSx5PWNbZ10sdj0yNTcqY1toXV4xNjg0MzAwOCpoO3JbZF09djw8MjR8dj4+PjgsbltkXT12PDwxNnx2Pj4+MTYsb1tkXT12PDw4fHY+Pj4yNCxpW2RdPXYsdj0xNjg0MzAwOSp5XjY1NTM3KmdeMjU3Kl9eMTY4NDMwMDgqZCxhW2hdPXY8PDI0fHY+Pj44LHNbaF09djw8MTZ8dj4+PjE2LHVbaF09djw8OHx2Pj4+MjQsbFtoXT12LGQ/KGQ9X15jW2NbY1t5Xl9dXV0sZl49Y1tjW2ZdXSk6ZD1mPTF9fX0se2tleTpcImV4cGFuZEtleVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnVpbnQ4QXJyYXlUb1VpbnQzMkFycmF5XyhlKSxyPSEwLG49MDtuPHQubGVuZ3RoJiZyOylyPXRbbl09PT10aGlzLmtleVtuXSxuKys7aWYoIXIpe3RoaXMua2V5PXQ7dmFyIG89dGhpcy5rZXlTaXplPXQubGVuZ3RoO2lmKDQhPT1vJiY2IT09byYmOCE9PW8pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhZXMga2V5IHNpemU9XCIrbyk7dmFyIGk9dGhpcy5rc1Jvd3M9NCoobys2KzEpLGE9dm9pZCAwLHM9dm9pZCAwLHU9dGhpcy5rZXlTY2hlZHVsZT1uZXcgVWludDMyQXJyYXkodGhpcy5rc1Jvd3MpLGw9dGhpcy5pbnZLZXlTY2hlZHVsZT1uZXcgVWludDMyQXJyYXkodGhpcy5rc1Jvd3MpLGM9dGhpcy5zQm94LGQ9dGhpcy5yY29uLGY9dGhpcy5pbnZTdWJNaXhbMF0scD10aGlzLmludlN1Yk1peFsxXSxoPXRoaXMuaW52U3ViTWl4WzJdLF89dGhpcy5pbnZTdWJNaXhbM10sZz12b2lkIDAseT12b2lkIDA7Zm9yKGE9MDthPGk7YSsrKWE8bz9nPXVbYV09dFthXTooeT1nLGElbz09PTA/KHk9eTw8OHx5Pj4+MjQseT1jW3k+Pj4yNF08PDI0fGNbeT4+PjE2JjI1NV08PDE2fGNbeT4+PjgmMjU1XTw8OHxjWzI1NSZ5XSx5Xj1kW2Evb3wwXTw8MjQpOm8+NiYmYSVvPT09NCYmKHk9Y1t5Pj4+MjRdPDwyNHxjW3k+Pj4xNiYyNTVdPDwxNnxjW3k+Pj44JjI1NV08PDh8Y1syNTUmeV0pLHVbYV09Zz0odVthLW9dXnkpPj4+MCk7Zm9yKHM9MDtzPGk7cysrKWE9aS1zLHk9MyZzP3VbYV06dVthLTRdLHM8NHx8YTw9ND9sW3NdPXk6bFtzXT1mW2NbeT4+PjI0XV1ecFtjW3k+Pj4xNiYyNTVdXV5oW2NbeT4+PjgmMjU1XV1eX1tjWzI1NSZ5XV0sbFtzXT1sW3NdPj4+MH19fSx7a2V5OlwibmV0d29ya1RvSG9zdE9yZGVyU3dhcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPDwyNHwoNjUyODAmZSk8PDh8KDE2NzExNjgwJmUpPj44fGU+Pj4yNH19LHtrZXk6XCJkZWNyeXB0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbixvLGk9dGhpcy5rZXlTaXplKzYsYT10aGlzLmludktleVNjaGVkdWxlLHM9dGhpcy5pbnZTQm94LHU9dGhpcy5pbnZTdWJNaXhbMF0sbD10aGlzLmludlN1Yk1peFsxXSxjPXRoaXMuaW52U3ViTWl4WzJdLGQ9dGhpcy5pbnZTdWJNaXhbM10sZj10aGlzLnVpbnQ4QXJyYXlUb1VpbnQzMkFycmF5XyhyKSxwPWZbMF0saD1mWzFdLF89ZlsyXSxnPWZbM10seT1uZXcgSW50MzJBcnJheShlKSx2PW5ldyBJbnQzMkFycmF5KHkubGVuZ3RoKSxtPXZvaWQgMCxFPXZvaWQgMCxiPXZvaWQgMCx3PXZvaWQgMCxTPXZvaWQgMCxQPXZvaWQgMCxSPXZvaWQgMCxUPXZvaWQgMCx4PXZvaWQgMCxBPXZvaWQgMCxPPXZvaWQgMCxNPXZvaWQgMDt0PHkubGVuZ3RoOyl7Zm9yKHg9dGhpcy5uZXR3b3JrVG9Ib3N0T3JkZXJTd2FwKHlbdF0pLEE9dGhpcy5uZXR3b3JrVG9Ib3N0T3JkZXJTd2FwKHlbdCsxXSksTz10aGlzLm5ldHdvcmtUb0hvc3RPcmRlclN3YXAoeVt0KzJdKSxNPXRoaXMubmV0d29ya1RvSG9zdE9yZGVyU3dhcCh5W3QrM10pLFM9eF5hWzBdLFA9TV5hWzFdLFI9T15hWzJdLFQ9QV5hWzNdLG49NCxvPTE7bzxpO28rKyltPXVbUz4+PjI0XV5sW1A+PjE2JjI1NV1eY1tSPj44JjI1NV1eZFsyNTUmVF1eYVtuXSxFPXVbUD4+PjI0XV5sW1I+PjE2JjI1NV1eY1tUPj44JjI1NV1eZFsyNTUmU11eYVtuKzFdLGI9dVtSPj4+MjRdXmxbVD4+MTYmMjU1XV5jW1M+PjgmMjU1XV5kWzI1NSZQXV5hW24rMl0sdz11W1Q+Pj4yNF1ebFtTPj4xNiYyNTVdXmNbUD4+OCYyNTVdXmRbMjU1JlJdXmFbbiszXSxTPW0sUD1FLFI9YixUPXcsbis9NDttPXNbUz4+PjI0XTw8MjRec1tQPj4xNiYyNTVdPDwxNl5zW1I+PjgmMjU1XTw8OF5zWzI1NSZUXV5hW25dLEU9c1tQPj4+MjRdPDwyNF5zW1I+PjE2JjI1NV08PDE2XnNbVD4+OCYyNTVdPDw4XnNbMjU1JlNdXmFbbisxXSxiPXNbUj4+PjI0XTw8MjRec1tUPj4xNiYyNTVdPDwxNl5zW1M+PjgmMjU1XTw8OF5zWzI1NSZQXV5hW24rMl0sdz1zW1Q+Pj4yNF08PDI0XnNbUz4+MTYmMjU1XTw8MTZec1tQPj44JjI1NV08PDhec1syNTUmUl1eYVtuKzNdLG4rPTMsdlt0XT10aGlzLm5ldHdvcmtUb0hvc3RPcmRlclN3YXAobV5wKSx2W3QrMV09dGhpcy5uZXR3b3JrVG9Ib3N0T3JkZXJTd2FwKHdeaCksdlt0KzJdPXRoaXMubmV0d29ya1RvSG9zdE9yZGVyU3dhcChiXl8pLHZbdCszXT10aGlzLm5ldHdvcmtUb0hvc3RPcmRlclN3YXAoRV5nKSxwPXgsaD1BLF89TyxnPU0sdCs9NH1yZXR1cm4gdi5idWZmZXJ9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5rZXk9dm9pZCAwLHRoaXMua2V5U2l6ZT12b2lkIDAsdGhpcy5rc1Jvd3M9dm9pZCAwLHRoaXMuc0JveD12b2lkIDAsdGhpcy5pbnZTQm94PXZvaWQgMCx0aGlzLnN1Yk1peD12b2lkIDAsdGhpcy5pbnZTdWJNaXg9dm9pZCAwLHRoaXMua2V5U2NoZWR1bGU9dm9pZCAwLHRoaXMuaW52S2V5U2NoZWR1bGU9dm9pZCAwLHRoaXMucmNvbj12b2lkIDB9fV0pLGV9KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7dGhpcy5idWZmZXI9bnVsbCx0aGlzLmJ1ZmZlclNpemU9MH10Ll9fZXNNb2R1bGU9ITAsdC5NUDNQYXJzZXI9bjt2YXIgbz1bMzIsNjQsOTYsMTI4LDE2MCwxOTIsMjI0LDI1NiwyODgsMzIwLDM1MiwzODQsNDE2LDQ0OCwzMiw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE2MCwxOTIsMjI0LDI1NiwzMjAsMzg0LDMyLDQwLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTYwLDE5MiwyMjQsMjU2LDMyMCwzMiw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE0NCwxNjAsMTc2LDE5MiwyMjQsMjU2LDgsMTYsMjQsMzIsNDAsNDgsNTYsNjQsODAsOTYsMTEyLDEyOCwxNDQsMTYwXSxpPVs0NDEwMCw0OGUzLDMyZTMsMjIwNTAsMjRlMywxNmUzLDExMDI1LDEyZTMsOGUzXTtuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKHRoaXMuYnVmZmVyU2l6ZT4wKXt2YXIgcj1lLmxlbmd0aCt0aGlzLmJ1ZmZlclNpemU7aWYoIXRoaXMuYnVmZmVyfHx0aGlzLmJ1ZmZlci5sZW5ndGg8cil7dmFyIG49bmV3IFVpbnQ4QXJyYXkocik7dGhpcy5idWZmZXJTaXplPjAmJm4uc2V0KHRoaXMuYnVmZmVyLnN1YmFycmF5KDAsdGhpcy5idWZmZXJTaXplKSksdGhpcy5idWZmZXI9bn10aGlzLmJ1ZmZlci5zZXQoZSx0aGlzLmJ1ZmZlclNpemUpLHRoaXMuYnVmZmVyU2l6ZT1yLGU9dGhpcy5idWZmZXIsdD1yfWVsc2UgdD1lLmxlbmd0aDtmb3IodmFyIG8saT0wO2k8dCYmKG89dGhpcy5fcGFyc2UoZSxpLHQpKT4wOylpKz1vO3ZhciBhPXQtaTthPjAmJighdGhpcy5idWZmZXJ8fHRoaXMuYnVmZmVyLmxlbmd0aDxhP3RoaXMuYnVmZmVyPW5ldyBVaW50OEFycmF5KGUuc3ViYXJyYXkoaSx0KSk6dGhpcy5idWZmZXIuc2V0KGUuc3ViYXJyYXkoaSx0KSkpLHRoaXMuYnVmZmVyU2l6ZT1hfSxuLnByb3RvdHlwZS5fcGFyc2U9ZnVuY3Rpb24oZSx0LHIpe2lmKHQrMj5yKXJldHVybi0xO2lmKDI1NT09PWVbdF18fDIyND09PSgyMjQmZVt0KzFdKSl7aWYodCsyND5yKXJldHVybi0xO3ZhciBuPWVbdCsxXT4+MyYzLGE9ZVt0KzFdPj4xJjMscz1lW3QrMl0+PjQmMTUsdT1lW3QrMl0+PjImMyxsPSEhKDImZVt0KzJdKTtpZigxIT09biYmMCE9PXMmJjE1IT09cyYmMyE9PXUpe3ZhciBjPTM9PT1uPzMtYTozPT09YT8zOjQsZD0xZTMqb1sxNCpjK3MtMV0sZj0zPT09bj8wOjI9PT1uPzE6MixwPWlbMypmK3VdLGg9bD8xOjAsXz0zPT09YT8oMz09PW4/MTI6NikqZC9wK2g8PDI6KDM9PT1uPzE0NDo3MikqZC9wK2h8MDtyZXR1cm4gdCtfPnI/LTE6KHRoaXMub25GcmFtZSYmdGhpcy5vbkZyYW1lKGUuc3ViYXJyYXkodCx0K18pKSxfKX19Zm9yKHZhciBnPXQrMjtnPHI7KXtpZigyNTU9PT1lW2ctMV0mJjIyND09PSgyMjQmZVtnXSkpcmV0dXJuIHRoaXMub25Ob2lzZSYmdGhpcy5vbk5vaXNlKGUuc3ViYXJyYXkodCxnLTEpKSxnLXQtMTtnKyt9cmV0dXJuLTF9LG4ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5idWZmZXJTaXplPjAmJnRoaXMub25Ob2lzZSYmdGhpcy5vbk5vaXNlKHRoaXMuYnVmZmVyLnN1YmFycmF5KDAsdGhpcy5idWZmZXJTaXplKSksdGhpcy5idWZmZXI9bnVsbCx0aGlzLmJ1ZmZlclNpemU9MCx0aGlzLm9uQ2xvc2UmJnRoaXMub25DbG9zZSgpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMDt2YXIgbixvLGk9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX07IWZ1bmN0aW9uKGUpe3ZhciB0OyFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheSg0KmUubGVuZ3RoKSxyPTAsbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl7dmFyIGk9ZS5jaGFyQ29kZUF0KG4pO2lmKGk8PTEyNyl0W3IrK109aTtlbHNle2lmKDU1Mjk2PD1pJiZpPD01NjMxOSl7dmFyIGE9ZS5jaGFyQ29kZUF0KG4rMSk7NTYzMjA8PWEmJmE8PTU3MzQzJiYoaT0oKDEwMjMmaSk8PDEwKSsoMTAyMyZhKSs2NTUzNiwrK24pfTAhPT0oNDI5Mjg3MDE0NCZpKT8odFtyKytdPTI0OHxpPj4+MjQmMyx0W3IrK109MTI4fGk+Pj4xOCY2Myx0W3IrK109MTI4fGk+Pj4xMiY2Myx0W3IrK109MTI4fGk+Pj42JjYzLHRbcisrXT0xMjh8NjMmaSk6MCE9PSg0Mjk0OTAxNzYwJmkpPyh0W3IrK109MjQwfGk+Pj4xOCY3LHRbcisrXT0xMjh8aT4+PjEyJjYzLHRbcisrXT0xMjh8aT4+PjYmNjMsdFtyKytdPTEyOHw2MyZpKTowIT09KDQyOTQ5NjUyNDgmaSk/KHRbcisrXT0yMjR8aT4+PjEyJjE1LHRbcisrXT0xMjh8aT4+PjYmNjMsdFtyKytdPTEyOHw2MyZpKToodFtyKytdPTE5MnxpPj4+NiYzMSx0W3IrK109MTI4fDYzJmkpfX1yZXR1cm4gdC5zdWJhcnJheSgwLHIpfWZ1bmN0aW9uIHIoZSl7Zm9yKHZhciB0PTAscj1cIlwiO3Q8ZS5sZW5ndGg7KXt2YXIgbj0yNTUmZVt0KytdO2lmKG48PTEyNylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4pO2Vsc2V7dmFyIG89MTkyLGk9NTtkb3t2YXIgYT1vPj4xfDEyODtpZigobiZhKT09PW8pYnJlYWs7bz1vPj4xfDEyOCwtLWl9d2hpbGUoaT49MCk7aWYoaTw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFVURjggY2hhcmFjdGVyXCIpO2Zvcih2YXIgcz1uJigxPDxpKS0xLHU9NTt1Pj1pOy0tdSl7dmFyIGw9ZVt0KytdO2lmKDEyOCE9PSgxOTImbCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBVVEY4IGNoYXJhY3RlciBzZXF1ZW5jZVwiKTtzPXM8PDZ8NjMmbH1yKz1zPj02NTUzNj9TdHJpbmcuZnJvbUNoYXJDb2RlKHMtNjU1MzY+PjEwJjEwMjN8NTUyOTYsMTAyMyZzfDU2MzIwKTpTdHJpbmcuZnJvbUNoYXJDb2RlKHMpfX1yZXR1cm4gcn1lLnV0ZjhkZWNvZGU9dCxlLnV0ZjhlbmNvZGU9cn0odD1lLlN0cmluZ1V0aWxpdGllc3x8KGUuU3RyaW5nVXRpbGl0aWVzPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7Zm9yKHZhciB0PWUubGVuZ3RoPj4xLHI9bmV3IFVpbnQ4QXJyYXkodCksbj0wO248dDtuKyspcltuXT1wYXJzZUludChlLnN1YnN0cigyKm4sMiksMTYpO3JldHVybiByfWZ1bmN0aW9uIHIoZSl7dmFyIHQscj0wLG49YS5SQVcsbz1lW3JdLGk9bz4+NCxkPW8+PjImMyxmPTImbz8xNjo4LHA9MSZvPzI6MTtzd2l0Y2gocisrLGkpe2Nhc2UgYzp2YXIgaD1lW3IrK107bj1oLHQ9MTAyNDticmVhaztjYXNlIGw6dmFyIF89ZVtyKzFdPj4zJjMsZz1lW3IrMV0+PjEmMzt0PTE9PT1nPzM9PT1fPzExNTI6NTc2OjM9PT1nPzM4NDoxMTUyfXJldHVybntjb2RlY0Rlc2NyaXB0aW9uOnVbaV0sY29kZWNJZDppLGRhdGE6ZS5zdWJhcnJheShyKSxyYXRlOnNbZF0sc2l6ZTpmLGNoYW5uZWxzOnAsc2FtcGxlczp0LHBhY2tldFR5cGU6bn19ZnVuY3Rpb24gbihlKXt2YXIgdD0wLHI9ZVt0XT4+NCxuPTE1JmVbdF07dCsrO3ZhciBvPXtmcmFtZVR5cGU6cixjb2RlY0lkOm4sY29kZWNEZXNjcmlwdGlvbjpmW25dfTtzd2l0Y2gobil7Y2FzZSBoOnZhciBpPWVbdCsrXTtvLnBhY2tldFR5cGU9aSxvLmNvbXBvc2l0aW9uVGltZT0oZVt0XTw8MjR8ZVt0KzFdPDwxNnxlW3QrMl08PDgpPj44LHQrPTM7YnJlYWs7Y2FzZSBwOm8ucGFja2V0VHlwZT1fLk5BTFUsby5ob3Jpem9udGFsT2Zmc2V0PWVbdF0+PjQmMTUsby52ZXJ0aWNhbE9mZnNldD0xNSZlW3RdLG8uY29tcG9zaXRpb25UaW1lPTAsdCsrfXJldHVybiBvLmRhdGE9ZS5zdWJhcnJheSh0KSxvfWZ1bmN0aW9uIG8oZSl7dmFyIHQscixuPVtdLG89LTEsaT0tMSxhPStlLmFzR2V0UHVibGljUHJvcGVydHkoXCJkdXJhdGlvblwiKSxzPWUuYXNHZXRQdWJsaWNQcm9wZXJ0eShcImF1ZGlvY29kZWNpZFwiKTtzd2l0Y2gocyl7Y2FzZSBsOmNhc2VcIm1wM1wiOnQ9XCJtcDNcIixyPWw7YnJlYWs7Y2FzZSBjOmNhc2VcIm1wNGFcIjp0PVwibXA0YVwiLHI9YzticmVhaztkZWZhdWx0OmlmKCFpc05hTihzKSl0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBhdWRpbyBjb2RlYzogXCIrcyk7dD1udWxsLHI9LTF9dmFyIHUsZCxmPWUuYXNHZXRQdWJsaWNQcm9wZXJ0eShcInZpZGVvY29kZWNpZFwiKTtzd2l0Y2goZil7Y2FzZSBwOmNhc2VcInZwNmZcIjp1PVwidnA2ZlwiLGQ9cDticmVhaztjYXNlIGg6Y2FzZVwiYXZjMVwiOnU9XCJhdmMxXCIsZD1oO2JyZWFrO2RlZmF1bHQ6aWYoIWlzTmFOKGYpKXRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZpZGVvIGNvZGVjOiBcIitmKTt1PW51bGwsZD0tMX12YXIgXz1udWxsPT09dD9udWxsOntjb2RlY0Rlc2NyaXB0aW9uOnQsY29kZWNJZDpyLGxhbmd1YWdlOlwidW5kXCIsdGltZXNjYWxlOitlLmFzR2V0UHVibGljUHJvcGVydHkoXCJhdWRpb3NhbXBsZXJhdGVcIil8fDQ0MTAwLHNhbXBsZXJhdGU6K2UuYXNHZXRQdWJsaWNQcm9wZXJ0eShcImF1ZGlvc2FtcGxlcmF0ZVwiKXx8NDQxMDAsY2hhbm5lbHM6K2UuYXNHZXRQdWJsaWNQcm9wZXJ0eShcImF1ZGlvY2hhbm5lbHNcIil8fDIsc2FtcGxlc2l6ZToxNn0sZz1udWxsPT09dT9udWxsOntjb2RlY0Rlc2NyaXB0aW9uOnUsY29kZWNJZDpkLGxhbmd1YWdlOlwidW5kXCIsdGltZXNjYWxlOjZlNCxmcmFtZXJhdGU6K2UuYXNHZXRQdWJsaWNQcm9wZXJ0eShcInZpZGVvZnJhbWVyYXRlXCIpfHwrZS5hc0dldFB1YmxpY1Byb3BlcnR5KFwiZnJhbWVyYXRlXCIpLHdpZHRoOitlLmFzR2V0UHVibGljUHJvcGVydHkoXCJ3aWR0aFwiKSxoZWlnaHQ6K2UuYXNHZXRQdWJsaWNQcm9wZXJ0eShcImhlaWdodFwiKX0seT1lLmFzR2V0UHVibGljUHJvcGVydHkoXCJ0cmFja2luZm9cIik7aWYoeSlmb3IodmFyIHY9MDt2PHkubGVuZ3RoO3YrKyl7dmFyIG09eVt2XSxFPW0uYXNHZXRQdWJsaWNQcm9wZXJ0eShcInNhbXBsZWRlc2NyaXB0aW9uXCIpWzBdO0UuYXNHZXRQdWJsaWNQcm9wZXJ0eShcInNhbXBsZXR5cGVcIik9PT1zPyhfLmxhbmd1YWdlPW0uYXNHZXRQdWJsaWNQcm9wZXJ0eShcImxhbmd1YWdlXCIpLF8udGltZXNjYWxlPSttLmFzR2V0UHVibGljUHJvcGVydHkoXCJ0aW1lc2NhbGVcIikpOkUuYXNHZXRQdWJsaWNQcm9wZXJ0eShcInNhbXBsZXR5cGVcIik9PT1mJiYoZy5sYW5ndWFnZT1tLmFzR2V0UHVibGljUHJvcGVydHkoXCJsYW5ndWFnZVwiKSxnLnRpbWVzY2FsZT0rbS5hc0dldFB1YmxpY1Byb3BlcnR5KFwidGltZXNjYWxlXCIpKX1yZXR1cm4gZyYmKGk9bi5sZW5ndGgsbi5wdXNoKGcpKSxfJiYobz1uLmxlbmd0aCxuLnB1c2goXykpLHt0cmFja3M6bixkdXJhdGlvbjphLGF1ZGlvVHJhY2tJZDpvLHZpZGVvVHJhY2tJZDppfX1mdW5jdGlvbiBpKGUpe3ZhciB0PVtdO3JldHVybiBlLmF1ZGlvVHJhY2tJZD49MCYmdC5wdXNoKHt0cmFja3M6W2UudHJhY2tzW2UuYXVkaW9UcmFja0lkXV0sZHVyYXRpb246ZS5kdXJhdGlvbixhdWRpb1RyYWNrSWQ6MCx2aWRlb1RyYWNrSWQ6LTF9KSxlLnZpZGVvVHJhY2tJZD49MCYmdC5wdXNoKHt0cmFja3M6W2UudHJhY2tzW2UudmlkZW9UcmFja0lkXV0sZHVyYXRpb246ZS5kdXJhdGlvbixhdWRpb1RyYWNrSWQ6LTEsdmlkZW9UcmFja0lkOjB9KSx0fXZhciBhLHM9WzU1MDAsMTEwMjUsMjIwNTAsNDQxMDBdLHU9W1wiUENNXCIsXCJBRFBDTVwiLFwiTVAzXCIsXCJQQ00gbGVcIixcIk5lbGx5bW91c2VyMTZcIixcIk5lbGx5bW91c2VyOFwiLFwiTmVsbHltb3VzZXJcIixcIkcuNzExIEEtbGF3XCIsXCJHLjcxMSBtdS1sYXdcIixudWxsLFwiQUFDXCIsXCJTcGVleFwiLFwiTVAzIDhraHpcIl0sbD0yLGM9MTA7IWZ1bmN0aW9uKGUpe2VbZS5IRUFERVI9MF09XCJIRUFERVJcIixlW2UuUkFXPTFdPVwiUkFXXCJ9KGF8fChhPXt9KSk7dmFyIGQsZj1bbnVsbCxcIkpQRUdcIixcIlNvcmVuc29uXCIsXCJTY3JlZW5cIixcIlZQNlwiLFwiVlA2IGFscGhhXCIsXCJTY3JlZW4yXCIsXCJBVkNcIl0scD00LGg9NzshZnVuY3Rpb24oZSl7ZVtlLktFWT0xXT1cIktFWVwiLGVbZS5JTk5FUj0yXT1cIklOTkVSXCIsZVtlLkRJU1BPU0FCTEU9M109XCJESVNQT1NBQkxFXCIsZVtlLkdFTkVSQVRFRD00XT1cIkdFTkVSQVRFRFwiLGVbZS5JTkZPPTVdPVwiSU5GT1wifShkfHwoZD17fSkpO3ZhciBfOyFmdW5jdGlvbihlKXtlW2UuSEVBREVSPTBdPVwiSEVBREVSXCIsZVtlLk5BTFU9MV09XCJOQUxVXCIsZVtlLkVORD0yXT1cIkVORFwifShffHwoXz17fSkpO3ZhciBnLHk9OCx2PTksbT01MCxFPSEwOyFmdW5jdGlvbihlKXtlW2UuQ0FOX0dFTkVSQVRFX0hFQURFUj0wXT1cIkNBTl9HRU5FUkFURV9IRUFERVJcIixlW2UuTkVFRF9IRUFERVJfREFUQT0xXT1cIk5FRURfSEVBREVSX0RBVEFcIixlW2UuTUFJTl9QQUNLRVRTPTJdPVwiTUFJTl9QQUNLRVRTXCJ9KGd8fChnPXt9KSk7dmFyIGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBvKGUpe3ZhciB0PXRoaXM7dGhpcy5vbmNvZGVjaW5mbz1mdW5jdGlvbihlKXt9LHRoaXMub25kYXRhPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1QNE11eC5vbmRhdGEgaXMgbm90IHNldFwiKX0sdGhpcy5tZXRhZGF0YT1lLHRoaXMudHJhY2tTdGF0ZXM9dGhpcy5tZXRhZGF0YS50cmFja3MubWFwKGZ1bmN0aW9uKGUscil7dmFyIG49e3RyYWNrSWQ6cisxLHRyYWNrSW5mbzplLGNhY2hlZER1cmF0aW9uOjAsc2FtcGxlc1Byb2Nlc3NlZDowLGluaXRpYWxpemF0aW9uRGF0YTpbXX07cmV0dXJuIHQubWV0YWRhdGEuYXVkaW9UcmFja0lkPT09ciYmKHQuYXVkaW9UcmFja1N0YXRlPW4pLHQubWV0YWRhdGEudmlkZW9UcmFja0lkPT09ciYmKHQudmlkZW9UcmFja1N0YXRlPW4pLG59LHRoaXMpLHRoaXMuX2NoZWNrSWZOZWVkSGVhZGVyRGF0YSgpLHRoaXMuZmlsZVBvcz0wLHRoaXMuY2FjaGVkUGFja2V0cz1bXSx0aGlzLmNodW5rSW5kZXg9MH1yZXR1cm4gby5wcm90b3R5cGUucHVzaFBhY2tldD1mdW5jdGlvbihlLHQsbyl7c3dpdGNoKHRoaXMuc3RhdGU9PT1nLkNBTl9HRU5FUkFURV9IRUFERVImJnRoaXMuX3RyeUdlbmVyYXRlSGVhZGVyKCksZSl7Y2FzZSB5OnZhciBpPXRoaXMuYXVkaW9UcmFja1N0YXRlLHM9cih0KTtpZighaXx8aS50cmFja0luZm8uY29kZWNJZCE9PXMuY29kZWNJZCl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGF1ZGlvIHBhY2tldCBjb2RlYzogXCIrcy5jb2RlY0Rlc2NyaXB0aW9uKTtzd2l0Y2gocy5jb2RlY0lkKXtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGF1ZGlvIGNvZGVjOiBcIitzLmNvZGVjRGVzY3JpcHRpb24pO2Nhc2UgbDpicmVhaztjYXNlIGM6aWYocy5wYWNrZXRUeXBlPT09YS5IRUFERVIpcmV0dXJuIHZvaWQgaS5pbml0aWFsaXphdGlvbkRhdGEucHVzaChzLmRhdGEpfXRoaXMuY2FjaGVkUGFja2V0cy5wdXNoKHtwYWNrZXQ6cyx0aW1lc3RhbXA6byx0cmFja0lkOmkudHJhY2tJZH0pO2JyZWFrO2Nhc2Ugdjp2YXIgdT10aGlzLnZpZGVvVHJhY2tTdGF0ZSxkPW4odCk7aWYoIXV8fHUudHJhY2tJbmZvLmNvZGVjSWQhPT1kLmNvZGVjSWQpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB2aWRlbyBwYWNrZXQgY29kZWM6IFwiK2QuY29kZWNEZXNjcmlwdGlvbik7c3dpdGNoKGQuY29kZWNJZCl7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCB2aWRlbyBjb2RlYzogXCIrZC5jb2RlY0Rlc2NyaXB0aW9uKTtjYXNlIHA6YnJlYWs7Y2FzZSBoOmlmKGQucGFja2V0VHlwZT09PV8uSEVBREVSKXJldHVybiB2b2lkIHUuaW5pdGlhbGl6YXRpb25EYXRhLnB1c2goZC5kYXRhKX10aGlzLmNhY2hlZFBhY2tldHMucHVzaCh7cGFja2V0OmQsdGltZXN0YW1wOm8sdHJhY2tJZDp1LnRyYWNrSWR9KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcInVua25vd24gcGFja2V0IHR5cGU6IFwiK2UpfXRoaXMuc3RhdGU9PT1nLk5FRURfSEVBREVSX0RBVEEmJnRoaXMuX3RyeUdlbmVyYXRlSGVhZGVyKCksdGhpcy5jYWNoZWRQYWNrZXRzLmxlbmd0aD49bSYmdGhpcy5zdGF0ZT09PWcuTUFJTl9QQUNLRVRTJiZ0aGlzLl9jaHVuaygpfSxvLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe3RoaXMuY2FjaGVkUGFja2V0cy5sZW5ndGg+MCYmdGhpcy5fY2h1bmsoKX0sby5wcm90b3R5cGUuX2NoZWNrSWZOZWVkSGVhZGVyRGF0YT1mdW5jdGlvbigpe3RoaXMudHJhY2tTdGF0ZXMuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFja0luZm8uY29kZWNJZD09PWN8fGUudHJhY2tJbmZvLmNvZGVjSWQ9PT1ofSk/dGhpcy5zdGF0ZT1nLk5FRURfSEVBREVSX0RBVEE6dGhpcy5zdGF0ZT1nLkNBTl9HRU5FUkFURV9IRUFERVJ9LG8ucHJvdG90eXBlLl90cnlHZW5lcmF0ZUhlYWRlcj1mdW5jdGlvbigpe3ZhciByPXRoaXMudHJhY2tTdGF0ZXMuZXZlcnkoZnVuY3Rpb24oZSl7c3dpdGNoKGUudHJhY2tJbmZvLmNvZGVjSWQpe2Nhc2UgYzpjYXNlIGg6cmV0dXJuIGUuaW5pdGlhbGl6YXRpb25EYXRhLmxlbmd0aD4wO2RlZmF1bHQ6cmV0dXJuITB9fSk7aWYocil7Zm9yKHZhciBuPVtcImlzb21cIl0sbz0xLGk9MSxhPVtdLHM9MDtzPHRoaXMudHJhY2tTdGF0ZXMubGVuZ3RoO3MrKyl7dmFyIHUsZD10aGlzLnRyYWNrU3RhdGVzW3NdLGY9ZC50cmFja0luZm87c3dpdGNoKGYuY29kZWNJZCl7Y2FzZSBjOnZhciBfPWQuaW5pdGlhbGl6YXRpb25EYXRhWzBdO3U9bmV3IGUuSXNvLkF1ZGlvU2FtcGxlRW50cnkoXCJtcDRhXCIsbyxmLmNoYW5uZWxzLGYuc2FtcGxlc2l6ZSxmLnNhbXBsZXJhdGUpO3ZhciB5PW5ldyBVaW50OEFycmF5KDQxK18ubGVuZ3RoKTt5LnNldCh0KFwiMDAwMDAwMDAwMzgwODA4MFwiKSwwKSx5WzhdPTMyK18ubGVuZ3RoLHkuc2V0KHQoXCIwMDAyMDAwNDgwODA4MFwiKSw5KSx5WzE2XT0xOCtfLmxlbmd0aCx5LnNldCh0KFwiNDAxNTAwMDAwMDAwMDBGQTAwMDAwMDAwMDAwNTgwODA4MFwiKSwxNykseVszNF09Xy5sZW5ndGgseS5zZXQoXywzNSkseS5zZXQodChcIjA2ODA4MDgwMDEwMlwiKSwzNStfLmxlbmd0aCksdS5vdGhlckJveGVzPVtuZXcgZS5Jc28uUmF3VGFnKFwiZXNkc1wiLHkpXTt2YXIgdj1fWzBdPj4zO2QubWltZVR5cGVDb2RlYz1cIm1wNGEuNDAuXCIrdjticmVhaztjYXNlIGw6dT1uZXcgZS5Jc28uQXVkaW9TYW1wbGVFbnRyeShcIi5tcDNcIixvLGYuY2hhbm5lbHMsZi5zYW1wbGVzaXplLGYuc2FtcGxlcmF0ZSksZC5taW1lVHlwZUNvZGVjPVwibXAzXCI7YnJlYWs7Y2FzZSBoOnZhciBtPWQuaW5pdGlhbGl6YXRpb25EYXRhWzBdO3U9bmV3IGUuSXNvLlZpZGVvU2FtcGxlRW50cnkoXCJhdmMxXCIsaSxmLndpZHRoLGYuaGVpZ2h0KSx1Lm90aGVyQm94ZXM9W25ldyBlLklzby5SYXdUYWcoXCJhdmNDXCIsbSldO3ZhciBFPW1bMV08PDE2fG1bMl08PDh8bVszXTtkLm1pbWVUeXBlQ29kZWM9XCJhdmMxLlwiKygxNjc3NzIxNnxFKS50b1N0cmluZygxNikuc3Vic3RyKDEpLG4ucHVzaChcImlzbzJcIixcImF2YzFcIixcIm1wNDFcIik7YnJlYWs7Y2FzZSBwOnU9bmV3IGUuSXNvLlZpZGVvU2FtcGxlRW50cnkoXCJWUDZGXCIsaSxmLndpZHRoLGYuaGVpZ2h0KSx1Lm90aGVyQm94ZXM9W25ldyBlLklzby5SYXdUYWcoXCJnbGJsXCIsdChcIjAwXCIpKV0sZC5taW1lVHlwZUNvZGVjPVwiYXZjMS40MjAwMUVcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIm5vdCBzdXBwb3J0ZWQgdHJhY2sgdHlwZVwiKX12YXIgYix3PWUuSXNvLlRyYWNrSGVhZGVyRmxhZ3MuVFJBQ0tfRU5BQkxFRHxlLklzby5UcmFja0hlYWRlckZsYWdzLlRSQUNLX0lOX01PVklFO2Q9PT10aGlzLmF1ZGlvVHJhY2tTdGF0ZT9iPW5ldyBlLklzby5UcmFja0JveChuZXcgZS5Jc28uVHJhY2tIZWFkZXJCb3godyxkLnRyYWNrSWQsLTEsMCwwLDEscyksbmV3IGUuSXNvLk1lZGlhQm94KG5ldyBlLklzby5NZWRpYUhlYWRlckJveChmLnRpbWVzY2FsZSwtMSxmLmxhbmd1YWdlKSxuZXcgZS5Jc28uSGFuZGxlckJveChcInNvdW5cIixcIlNvdW5kSGFuZGxlclwiKSxuZXcgZS5Jc28uTWVkaWFJbmZvcm1hdGlvbkJveChuZXcgZS5Jc28uU291bmRNZWRpYUhlYWRlckJveCxuZXcgZS5Jc28uRGF0YUluZm9ybWF0aW9uQm94KG5ldyBlLklzby5EYXRhUmVmZXJlbmNlQm94KFtuZXcgZS5Jc28uRGF0YUVudHJ5VXJsQm94KGUuSXNvLlNFTEZfQ09OVEFJTkVEX0RBVEFfUkVGRVJFTkNFX0ZMQUcpXSkpLG5ldyBlLklzby5TYW1wbGVUYWJsZUJveChuZXcgZS5Jc28uU2FtcGxlRGVzY3JpcHRpb25Cb3goW3VdKSxuZXcgZS5Jc28uUmF3VGFnKFwic3R0c1wiLHQoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgZS5Jc28uUmF3VGFnKFwic3RzY1wiLHQoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgZS5Jc28uUmF3VGFnKFwic3RzelwiLHQoXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyBlLklzby5SYXdUYWcoXCJzdGNvXCIsdChcIjAwMDAwMDAwMDAwMDAwMDBcIikpKSkpKTpkPT09dGhpcy52aWRlb1RyYWNrU3RhdGUmJihiPW5ldyBlLklzby5UcmFja0JveChuZXcgZS5Jc28uVHJhY2tIZWFkZXJCb3godyxkLnRyYWNrSWQsLTEsZi53aWR0aCxmLmhlaWdodCwwLHMpLG5ldyBlLklzby5NZWRpYUJveChuZXcgZS5Jc28uTWVkaWFIZWFkZXJCb3goZi50aW1lc2NhbGUsLTEsZi5sYW5ndWFnZSksbmV3IGUuSXNvLkhhbmRsZXJCb3goXCJ2aWRlXCIsXCJWaWRlb0hhbmRsZXJcIiksbmV3IGUuSXNvLk1lZGlhSW5mb3JtYXRpb25Cb3gobmV3IGUuSXNvLlZpZGVvTWVkaWFIZWFkZXJCb3gsbmV3IGUuSXNvLkRhdGFJbmZvcm1hdGlvbkJveChuZXcgZS5Jc28uRGF0YVJlZmVyZW5jZUJveChbbmV3IGUuSXNvLkRhdGFFbnRyeVVybEJveChlLklzby5TRUxGX0NPTlRBSU5FRF9EQVRBX1JFRkVSRU5DRV9GTEFHKV0pKSxuZXcgZS5Jc28uU2FtcGxlVGFibGVCb3gobmV3IGUuSXNvLlNhbXBsZURlc2NyaXB0aW9uQm94KFt1XSksbmV3IGUuSXNvLlJhd1RhZyhcInN0dHNcIix0KFwiMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IGUuSXNvLlJhd1RhZyhcInN0c2NcIix0KFwiMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IGUuSXNvLlJhd1RhZyhcInN0c3pcIix0KFwiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgZS5Jc28uUmF3VGFnKFwic3Rjb1wiLHQoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSkpKSkpLGEucHVzaChiKX12YXIgUz1uZXcgZS5Jc28uTW92aWVFeHRlbmRzQm94KG51bGwsW25ldyBlLklzby5UcmFja0V4dGVuZHNCb3goMSwxLDAsMCwwKSxuZXcgZS5Jc28uVHJhY2tFeHRlbmRzQm94KDIsMSwwLDAsMCldLG51bGwpLFA9bmV3IGUuSXNvLkJveENvbnRhaW5lckJveChcInVkYXRcIixbbmV3IGUuSXNvLk1ldGFCb3gobmV3IGUuSXNvLlJhd1RhZyhcImhkbHJcIix0KFwiMDAwMDAwMDAwMDAwMDAwMDZENjQ2OTcyNjE3MDcwNkMwMDAwMDAwMDAwMDAwMDAwMDBcIikpLFtuZXcgZS5Jc28uUmF3VGFnKFwiaWxzdFwiLHQoXCIwMDAwMDAyNUE5NzQ2RjZGMDAwMDAwMUQ2NDYxNzQ2MTAwMDAwMDAxMDAwMDAwMDA0QzYxNzY2NjM1MzQyRTM2MzMyRTMxMzAzNFwiKSldKV0pLFI9bmV3IGUuSXNvLk1vdmllSGVhZGVyQm94KDFlMywwLHRoaXMudHJhY2tTdGF0ZXMubGVuZ3RoKzEpLFQ9bmV3IGUuSXNvLk1vdmllQm94KFIsYSxTLFApLHg9bmV3IGUuSXNvLkZpbGVUeXBlQm94KFwiaXNvbVwiLDUxMixuKSxBPXgubGF5b3V0KDApLE89VC5sYXlvdXQoQSksTT1uZXcgVWludDhBcnJheShBK08pO3gud3JpdGUoTSksVC53cml0ZShNKSx0aGlzLm9uY29kZWNpbmZvKHRoaXMudHJhY2tTdGF0ZXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1pbWVUeXBlQ29kZWN9KSksdGhpcy5vbmRhdGEoTSksdGhpcy5maWxlUG9zKz1NLmxlbmd0aCx0aGlzLnN0YXRlPWcuTUFJTl9QQUNLRVRTfX0sby5wcm90b3R5cGUuX2NodW5rPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYWNoZWRQYWNrZXRzO2lmKEUmJnRoaXMudmlkZW9UcmFja1N0YXRlKXtmb3IodmFyIHI9dC5sZW5ndGgtMSxuPXRoaXMudmlkZW9UcmFja1N0YXRlLnRyYWNrSWQ7cj4wJiYodFtyXS50cmFja0lkIT09bnx8dFtyXS5wYWNrZXQuZnJhbWVUeXBlIT09ZC5LRVkpOylyLS07cj4wJiYodD10LnNsaWNlKDAscikpfWlmKDAhPT10Lmxlbmd0aCl7Zm9yKHZhciBvPVtdLGk9MCxhPVtdLHM9W10sdT0wO3U8dGhpcy50cmFja1N0YXRlcy5sZW5ndGg7dSsrKXt2YXIgZj10aGlzLnRyYWNrU3RhdGVzW3VdLF89Zi50cmFja0luZm8sZz1mLnRyYWNrSWQseT10LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFja0lkPT09Z30pO2lmKDAhPT15Lmxlbmd0aCl7dmFyIHYsbSxiLHc9bmV3IGUuSXNvLlRyYWNrRnJhZ21lbnRCYXNlTWVkaWFEZWNvZGVUaW1lQm94KGYuY2FjaGVkRHVyYXRpb24pO3N3aXRjaChzLnB1c2goaSksXy5jb2RlY0lkKXtjYXNlIGM6Y2FzZSBsOmI9W107Zm9yKHZhciByPTA7cjx5Lmxlbmd0aDtyKyspe3ZhciBTPXlbcl0ucGFja2V0LFA9TWF0aC5yb3VuZChTLnNhbXBsZXMqXy50aW1lc2NhbGUvXy5zYW1wbGVyYXRlKTtvLnB1c2goUy5kYXRhKSxpKz1TLmRhdGEubGVuZ3RoLGIucHVzaCh7ZHVyYXRpb246UCxzaXplOlMuZGF0YS5sZW5ndGhcbn0pLGYuc2FtcGxlc1Byb2Nlc3NlZCs9Uy5zYW1wbGVzfXZhciBSPWUuSXNvLlRyYWNrRnJhZ21lbnRGbGFncy5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UO3Y9bmV3IGUuSXNvLlRyYWNrRnJhZ21lbnRIZWFkZXJCb3goUixnLDAsMCwwLDAsZS5Jc28uU2FtcGxlRmxhZ3MuU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTKTt2YXIgVD1lLklzby5UcmFja1J1bkZsYWdzLkRBVEFfT0ZGU0VUX1BSRVNFTlR8ZS5Jc28uVHJhY2tSdW5GbGFncy5TQU1QTEVfRFVSQVRJT05fUFJFU0VOVHxlLklzby5UcmFja1J1bkZsYWdzLlNBTVBMRV9TSVpFX1BSRVNFTlQ7bT1uZXcgZS5Jc28uVHJhY2tSdW5Cb3goVCxiLDAsMCksZi5jYWNoZWREdXJhdGlvbj1NYXRoLnJvdW5kKGYuc2FtcGxlc1Byb2Nlc3NlZCpfLnRpbWVzY2FsZS9fLnNhbXBsZXJhdGUpO2JyZWFrO2Nhc2UgaDpjYXNlIHA6Yj1bXTtmb3IodmFyIHg9Zi5zYW1wbGVzUHJvY2Vzc2VkLEE9eCpfLnRpbWVzY2FsZS9fLmZyYW1lcmF0ZSxPPU1hdGgucm91bmQoQSkscj0wO3I8eS5sZW5ndGg7cisrKXt2YXIgTT15W3JdLnBhY2tldDt4Kys7dmFyIEQ9TWF0aC5yb3VuZCh4Kl8udGltZXNjYWxlL18uZnJhbWVyYXRlKSxrPUQtTztPPUQ7dmFyIEk9TWF0aC5yb3VuZCh4Kl8udGltZXNjYWxlL18uZnJhbWVyYXRlK00uY29tcG9zaXRpb25UaW1lKl8udGltZXNjYWxlLzFlMyk7by5wdXNoKE0uZGF0YSksaSs9TS5kYXRhLmxlbmd0aDt2YXIgQz1NLmZyYW1lVHlwZT09PWQuS0VZP2UuSXNvLlNhbXBsZUZsYWdzLlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSUzplLklzby5TYW1wbGVGbGFncy5TQU1QTEVfREVQRU5EU19PTl9PVEhFUnxlLklzby5TYW1wbGVGbGFncy5TQU1QTEVfSVNfTk9UX1NZTkM7Yi5wdXNoKHtkdXJhdGlvbjprLHNpemU6TS5kYXRhLmxlbmd0aCxmbGFnczpDLGNvbXBvc2l0aW9uVGltZU9mZnNldDpJLUR9KX12YXIgUj1lLklzby5UcmFja0ZyYWdtZW50RmxhZ3MuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVDt2PW5ldyBlLklzby5UcmFja0ZyYWdtZW50SGVhZGVyQm94KFIsZywwLDAsMCwwLGUuSXNvLlNhbXBsZUZsYWdzLlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSUyk7dmFyIFQ9ZS5Jc28uVHJhY2tSdW5GbGFncy5EQVRBX09GRlNFVF9QUkVTRU5UfGUuSXNvLlRyYWNrUnVuRmxhZ3MuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlR8ZS5Jc28uVHJhY2tSdW5GbGFncy5TQU1QTEVfU0laRV9QUkVTRU5UfGUuSXNvLlRyYWNrUnVuRmxhZ3MuU0FNUExFX0ZMQUdTX1BSRVNFTlR8ZS5Jc28uVHJhY2tSdW5GbGFncy5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQ7bT1uZXcgZS5Jc28uVHJhY2tSdW5Cb3goVCxiLDAsMCksZi5jYWNoZWREdXJhdGlvbj1PLGYuc2FtcGxlc1Byb2Nlc3NlZD14O2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW4gY29kZWNcIil9dmFyIEw9bmV3IGUuSXNvLlRyYWNrRnJhZ21lbnRCb3godix3LG0pO2EucHVzaChMKX19dGhpcy5jYWNoZWRQYWNrZXRzLnNwbGljZSgwLHQubGVuZ3RoKTtmb3IodmFyIGo9bmV3IGUuSXNvLk1vdmllRnJhZ21lbnRIZWFkZXJCb3goKyt0aGlzLmNodW5rSW5kZXgpLE49bmV3IGUuSXNvLk1vdmllRnJhZ21lbnRCb3goaixhKSxVPU4ubGF5b3V0KDApLEY9bmV3IGUuSXNvLk1lZGlhRGF0YUJveChvKSxCPUYubGF5b3V0KFUpLHE9VSs4LHU9MDt1PGEubGVuZ3RoO3UrKylhW3VdLnJ1bi5kYXRhT2Zmc2V0PXErc1t1XTt2YXIgSD1uZXcgVWludDhBcnJheShVK0IpO04ud3JpdGUoSCksRi53cml0ZShIKSx0aGlzLm9uZGF0YShIKSx0aGlzLmZpbGVQb3MrPUgubGVuZ3RofX0sb30oKTtlLk1QNE11eD1iLGUucGFyc2VGTFZNZXRhZGF0YT1vLGUuc3BsaXRNZXRhZGF0YT1pfSh0PWUuTVA0fHwoZS5NUDQ9e30pKX0obnx8KG49e30pKSxmdW5jdGlvbihlKXt2YXIgdDshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoZSx0KX1mdW5jdGlvbiByKGUsdCxyKXtlW3RdPXI+PjI0JjI1NSxlW3QrMV09cj4+MTYmMjU1LGVbdCsyXT1yPj44JjI1NSxlW3QrM109MjU1JnJ9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApPDwyNHxlLmNoYXJDb2RlQXQoMSk8PDE2fGUuY2hhckNvZGVBdCgyKTw8OHxlLmNoYXJDb2RlQXQoMyl9ZnVuY3Rpb24gYShlKXtyZXR1cm4oZS1mKS8xZTN8MH1mdW5jdGlvbiBzKGUpe3JldHVybiA2NTUzNiplfDB9ZnVuY3Rpb24gdShlKXtyZXR1cm4gMTA3Mzc0MTgyNCplfDB9ZnVuY3Rpb24gbChlKXtyZXR1cm4gMjU2KmV8MH1mdW5jdGlvbiBjKGUpe3JldHVybigzMSZlLmNoYXJDb2RlQXQoMCkpPDwxMHwoMzEmZS5jaGFyQ29kZUF0KDEpKTw8NXwzMSZlLmNoYXJDb2RlQXQoMil9dmFyIGQ9by5TdHJpbmdVdGlsaXRpZXMudXRmOGRlY29kZSxmPS0yMDgyODQ0OGU1LHA9WzEsMCwwLDAsMSwwLDAsMCwxXSxoPVswLDAsMF0sXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmJveHR5cGU9ZSxcInV1aWRcIj09PWUmJih0aGlzLnVzZXJUeXBlPXQpfXJldHVybiBlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dGhpcy5vZmZzZXQ9ZTt2YXIgdD04O3JldHVybiB0aGlzLnVzZXJUeXBlJiYodCs9MTYpLHRoaXMuc2l6ZT10LHR9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3JldHVybiByKGUsdGhpcy5vZmZzZXQsdGhpcy5zaXplKSxyKGUsdGhpcy5vZmZzZXQrNCxuKHRoaXMuYm94dHlwZSkpLHRoaXMudXNlclR5cGU/KGUuc2V0KHRoaXMudXNlclR5cGUsdGhpcy5vZmZzZXQrOCksMjQpOjh9LGUucHJvdG90eXBlLnRvVWludDhBcnJheT1mdW5jdGlvbigpe3ZhciBlPXRoaXMubGF5b3V0KDApLHQ9bmV3IFVpbnQ4QXJyYXkoZSk7cmV0dXJuIHRoaXMud3JpdGUodCksdH0sZX0oKTtlLkJveD1fO3ZhciBnPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4pe3ZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW4mJihuPTApO3ZhciBvPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiBvLnZlcnNpb249cixvLmZsYWdzPW4sb31yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrNCx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBuPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sdGhpcy52ZXJzaW9uPDwyNHx0aGlzLmZsYWdzKSxuKzR9LHR9KF8pO2UuRnVsbEJveD1nO3ZhciB5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4pe3ZhciBvPWUuY2FsbCh0aGlzLFwiZnR5cGVcIil8fHRoaXM7cmV0dXJuIG8ubWFqb3JCcmFuZD10LG8ubWlub3JWZXJzaW9uPXIsby5jb21wYXRpYmxlQnJhbmRzPW4sb31yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrNCooMit0aGlzLmNvbXBhdGlibGVCcmFuZHMubGVuZ3RoKSx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMsaT1lLnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsdCk7cmV0dXJuIHIodCx0aGlzLm9mZnNldCtpLG4odGhpcy5tYWpvckJyYW5kKSkscih0LHRoaXMub2Zmc2V0K2krNCx0aGlzLm1pbm9yVmVyc2lvbiksaSs9OCx0aGlzLmNvbXBhdGlibGVCcmFuZHMuZm9yRWFjaChmdW5jdGlvbihlKXtyKHQsby5vZmZzZXQraSxuKGUpKSxpKz00fSx0aGlzKSxpfSx0fShfKTtlLkZpbGVUeXBlQm94PXk7dmFyIHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBuPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiBuLmNoaWxkcmVuPXIsbn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXt2YXIgcj1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpO3JldHVybiB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oZSl7ZSYmKHIrPWUubGF5b3V0KHQrcikpfSksdGhpcy5zaXplPXJ9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciByPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UmJihyKz1lLndyaXRlKHQpKX0pLHJ9LHR9KF8pO2UuQm94Q29udGFpbmVyQm94PXY7dmFyIG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcihyLG4sbyxpKXt2YXIgYT1lLmNhbGwodGhpcyxcIm1vb3ZcIix0KFtyXSxuLFtvLGldKSl8fHRoaXM7cmV0dXJuIGEuaGVhZGVyPXIsYS50cmFja3M9bixhLmV4dGVuZHNCb3g9byxhLnVzZXJEYXRhPWksYX1yZXR1cm4gaShyLGUpLHJ9KHYpO2UuTW92aWVCb3g9bTt2YXIgRT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuLG8saSxhLHMsdSl7dm9pZCAwPT09byYmKG89MSksdm9pZCAwPT09aSYmKGk9MSksdm9pZCAwPT09YSYmKGE9cCksdm9pZCAwPT09cyYmKHM9Ziksdm9pZCAwPT09dSYmKHU9Zik7dmFyIGw9ZS5jYWxsKHRoaXMsXCJtdmhkXCIsMCwwKXx8dGhpcztyZXR1cm4gbC50aW1lc2NhbGU9dCxsLmR1cmF0aW9uPXIsbC5uZXh0VHJhY2tJZD1uLGwucmF0ZT1vLGwudm9sdW1lPWksbC5tYXRyaXg9YSxsLmNyZWF0aW9uVGltZT1zLGwubW9kaWZpY2F0aW9uVGltZT11LGx9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2l6ZT1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpKzE2KzQrMisyKzgrMzYrMjQrNCx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBuPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sYSh0aGlzLmNyZWF0aW9uVGltZSkpLHIodCx0aGlzLm9mZnNldCtuKzQsYSh0aGlzLm1vZGlmaWNhdGlvblRpbWUpKSxyKHQsdGhpcy5vZmZzZXQrbis4LHRoaXMudGltZXNjYWxlKSxyKHQsdGhpcy5vZmZzZXQrbisxMix0aGlzLmR1cmF0aW9uKSxuKz0xNixyKHQsdGhpcy5vZmZzZXQrbixzKHRoaXMucmF0ZSkpLHIodCx0aGlzLm9mZnNldCtuKzQsbCh0aGlzLnZvbHVtZSk8PDE2KSxyKHQsdGhpcy5vZmZzZXQrbis4LDApLHIodCx0aGlzLm9mZnNldCtuKzEyLDApLG4rPTE2LHIodCx0aGlzLm9mZnNldCtuLHModGhpcy5tYXRyaXhbMF0pKSxyKHQsdGhpcy5vZmZzZXQrbis0LHModGhpcy5tYXRyaXhbMV0pKSxyKHQsdGhpcy5vZmZzZXQrbis4LHModGhpcy5tYXRyaXhbMl0pKSxyKHQsdGhpcy5vZmZzZXQrbisxMixzKHRoaXMubWF0cml4WzNdKSkscih0LHRoaXMub2Zmc2V0K24rMTYscyh0aGlzLm1hdHJpeFs0XSkpLHIodCx0aGlzLm9mZnNldCtuKzIwLHModGhpcy5tYXRyaXhbNV0pKSxyKHQsdGhpcy5vZmZzZXQrbisyNCx1KHRoaXMubWF0cml4WzZdKSkscih0LHRoaXMub2Zmc2V0K24rMjgsdSh0aGlzLm1hdHJpeFs3XSkpLHIodCx0aGlzLm9mZnNldCtuKzMyLHUodGhpcy5tYXRyaXhbOF0pKSxuKz0zNixyKHQsdGhpcy5vZmZzZXQrbiwwKSxyKHQsdGhpcy5vZmZzZXQrbis0LDApLHIodCx0aGlzLm9mZnNldCtuKzgsMCkscih0LHRoaXMub2Zmc2V0K24rMTIsMCkscih0LHRoaXMub2Zmc2V0K24rMTYsMCkscih0LHRoaXMub2Zmc2V0K24rMjAsMCksbis9MjQscih0LHRoaXMub2Zmc2V0K24sdGhpcy5uZXh0VHJhY2tJZCksbis9NH0sdH0oZyk7ZS5Nb3ZpZUhlYWRlckJveD1FO3ZhciBiOyFmdW5jdGlvbihlKXtlW2UuVFJBQ0tfRU5BQkxFRD0xXT1cIlRSQUNLX0VOQUJMRURcIixlW2UuVFJBQ0tfSU5fTU9WSUU9Ml09XCJUUkFDS19JTl9NT1ZJRVwiLGVbZS5UUkFDS19JTl9QUkVWSUVXPTRdPVwiVFJBQ0tfSU5fUFJFVklFV1wifShiPWUuVHJhY2tIZWFkZXJGbGFnc3x8KGUuVHJhY2tIZWFkZXJGbGFncz17fSkpO3ZhciB3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4sbyxpLGEscyx1LGwsYyxkKXt2b2lkIDA9PT1zJiYocz0wKSx2b2lkIDA9PT11JiYodT0wKSx2b2lkIDA9PT1sJiYobD1wKSx2b2lkIDA9PT1jJiYoYz1mKSx2b2lkIDA9PT1kJiYoZD1mKTt2YXIgaD1lLmNhbGwodGhpcyxcInRraGRcIiwwLHQpfHx0aGlzO3JldHVybiBoLnRyYWNrSWQ9cixoLmR1cmF0aW9uPW4saC53aWR0aD1vLGguaGVpZ2h0PWksaC52b2x1bWU9YSxoLmFsdGVybmF0ZUdyb3VwPXMsaC5sYXllcj11LGgubWF0cml4PWwsaC5jcmVhdGlvblRpbWU9YyxoLm1vZGlmaWNhdGlvblRpbWU9ZCxofXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNpemU9ZS5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyx0KSsyMCs4KzYrMiszNis4LHRoaXMuc2l6ZX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG49ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpO3JldHVybiByKHQsdGhpcy5vZmZzZXQrbixhKHRoaXMuY3JlYXRpb25UaW1lKSkscih0LHRoaXMub2Zmc2V0K24rNCxhKHRoaXMubW9kaWZpY2F0aW9uVGltZSkpLHIodCx0aGlzLm9mZnNldCtuKzgsdGhpcy50cmFja0lkKSxyKHQsdGhpcy5vZmZzZXQrbisxMiwwKSxyKHQsdGhpcy5vZmZzZXQrbisxNix0aGlzLmR1cmF0aW9uKSxuKz0yMCxyKHQsdGhpcy5vZmZzZXQrbiwwKSxyKHQsdGhpcy5vZmZzZXQrbis0LDApLHIodCx0aGlzLm9mZnNldCtuKzgsdGhpcy5sYXllcjw8MTZ8dGhpcy5hbHRlcm5hdGVHcm91cCkscih0LHRoaXMub2Zmc2V0K24rMTIsbCh0aGlzLnZvbHVtZSk8PDE2KSxuKz0xNixyKHQsdGhpcy5vZmZzZXQrbixzKHRoaXMubWF0cml4WzBdKSkscih0LHRoaXMub2Zmc2V0K24rNCxzKHRoaXMubWF0cml4WzFdKSkscih0LHRoaXMub2Zmc2V0K24rOCxzKHRoaXMubWF0cml4WzJdKSkscih0LHRoaXMub2Zmc2V0K24rMTIscyh0aGlzLm1hdHJpeFszXSkpLHIodCx0aGlzLm9mZnNldCtuKzE2LHModGhpcy5tYXRyaXhbNF0pKSxyKHQsdGhpcy5vZmZzZXQrbisyMCxzKHRoaXMubWF0cml4WzVdKSkscih0LHRoaXMub2Zmc2V0K24rMjQsdSh0aGlzLm1hdHJpeFs2XSkpLHIodCx0aGlzLm9mZnNldCtuKzI4LHUodGhpcy5tYXRyaXhbN10pKSxyKHQsdGhpcy5vZmZzZXQrbiszMix1KHRoaXMubWF0cml4WzhdKSksbis9MzYscih0LHRoaXMub2Zmc2V0K24scyh0aGlzLndpZHRoKSkscih0LHRoaXMub2Zmc2V0K24rNCxzKHRoaXMuaGVpZ2h0KSksbis9OH0sdH0oZyk7ZS5UcmFja0hlYWRlckJveD13O3ZhciBTPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4sbyxpKXt2b2lkIDA9PT1uJiYobj1cInVua1wiKSx2b2lkIDA9PT1vJiYobz1mKSx2b2lkIDA9PT1pJiYoaT1mKTt2YXIgYT1lLmNhbGwodGhpcyxcIm1kaGRcIiwwLDApfHx0aGlzO3JldHVybiBhLnRpbWVzY2FsZT10LGEuZHVyYXRpb249cixhLmxhbmd1YWdlPW4sYS5jcmVhdGlvblRpbWU9byxhLm1vZGlmaWNhdGlvblRpbWU9aSxhfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNpemU9ZS5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyx0KSsxNis0LHRoaXMuc2l6ZX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG49ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpO3JldHVybiByKHQsdGhpcy5vZmZzZXQrbixhKHRoaXMuY3JlYXRpb25UaW1lKSkscih0LHRoaXMub2Zmc2V0K24rNCxhKHRoaXMubW9kaWZpY2F0aW9uVGltZSkpLHIodCx0aGlzLm9mZnNldCtuKzgsdGhpcy50aW1lc2NhbGUpLHIodCx0aGlzLm9mZnNldCtuKzEyLHRoaXMuZHVyYXRpb24pLHIodCx0aGlzLm9mZnNldCtuKzE2LGModGhpcy5sYW5ndWFnZSk8PDE2KSxuKzIwfSx0fShnKTtlLk1lZGlhSGVhZGVyQm94PVM7dmFyIFA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBuPWUuY2FsbCh0aGlzLFwiaGRsclwiLDAsMCl8fHRoaXM7cmV0dXJuIG4uaGFuZGxlclR5cGU9dCxuLm5hbWU9cixuLl9lbmNvZGVkTmFtZT1kKG4ubmFtZSksbn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrOCsxMisodGhpcy5fZW5jb2RlZE5hbWUubGVuZ3RoKzEpLHRoaXMuc2l6ZX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG89ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpO3JldHVybiByKHQsdGhpcy5vZmZzZXQrbywwKSxyKHQsdGhpcy5vZmZzZXQrbys0LG4odGhpcy5oYW5kbGVyVHlwZSkpLHIodCx0aGlzLm9mZnNldCtvKzgsMCkscih0LHRoaXMub2Zmc2V0K28rMTIsMCkscih0LHRoaXMub2Zmc2V0K28rMTYsMCksbys9MjAsdC5zZXQodGhpcy5fZW5jb2RlZE5hbWUsdGhpcy5vZmZzZXQrbyksdFt0aGlzLm9mZnNldCtvK3RoaXMuX2VuY29kZWROYW1lLmxlbmd0aF09MCxvKz10aGlzLl9lbmNvZGVkTmFtZS5sZW5ndGgrMX0sdH0oZyk7ZS5IYW5kbGVyQm94PVA7dmFyIFI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD0wKTt2YXIgcj1lLmNhbGwodGhpcyxcInNtaGRcIiwwLDApfHx0aGlzO3JldHVybiByLmJhbGFuY2U9dCxyfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNpemU9ZS5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyx0KSs0LHRoaXMuc2l6ZX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG49ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpO3JldHVybiByKHQsdGhpcy5vZmZzZXQrbixsKHRoaXMuYmFsYW5jZSk8PDE2KSxuKzR9LHR9KGcpO2UuU291bmRNZWRpYUhlYWRlckJveD1SO3ZhciBUPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1yJiYocj1oKTt2YXIgbj1lLmNhbGwodGhpcyxcInZtaGRcIiwwLDApfHx0aGlzO3JldHVybiBuLmdyYXBoaWNzTW9kZT10LG4ub3BDb2xvcj1yLG59cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2l6ZT1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpKzgsdGhpcy5zaXplfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgbj1lLnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsdCk7cmV0dXJuIHIodCx0aGlzLm9mZnNldCtuLHRoaXMuZ3JhcGhpY3NNb2RlPDwxNnx0aGlzLm9wQ29sb3JbMF0pLHIodCx0aGlzLm9mZnNldCtuKzQsdGhpcy5vcENvbG9yWzFdPDwxNnx0aGlzLm9wQ29sb3JbMl0pLG4rOH0sdH0oZyk7ZS5WaWRlb01lZGlhSGVhZGVyQm94PVQsZS5TRUxGX0NPTlRBSU5FRF9EQVRBX1JFRkVSRU5DRV9GTEFHPTE7dmFyIHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihyLG4pe3ZvaWQgMD09PW4mJihuPW51bGwpO3ZhciBvPXQuY2FsbCh0aGlzLFwidXJsIFwiLDAscil8fHRoaXM7cmV0dXJuIG8ubG9jYXRpb249bixyJmUuU0VMRl9DT05UQUlORURfREFUQV9SRUZFUkVOQ0VfRkxBR3x8KG8uX2VuY29kZWRMb2NhdGlvbj1kKG4pKSxvfXJldHVybiBpKHIsdCksci5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciByPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuX2VuY29kZWRMb2NhdGlvbiYmKHIrPXRoaXMuX2VuY29kZWRMb2NhdGlvbi5sZW5ndGgrMSksdGhpcy5zaXplPXJ9LHIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciByPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5fZW5jb2RlZExvY2F0aW9uJiYoZS5zZXQodGhpcy5fZW5jb2RlZExvY2F0aW9uLHRoaXMub2Zmc2V0K3IpLGVbdGhpcy5vZmZzZXQrcit0aGlzLl9lbmNvZGVkTG9jYXRpb24ubGVuZ3RoXT0wLHIrPXRoaXMuX2VuY29kZWRMb2NhdGlvbi5sZW5ndGgpLHJ9LHJ9KGcpO2UuRGF0YUVudHJ5VXJsQm94PXg7dmFyIEE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyxcImRyZWZcIiwwLDApfHx0aGlzO3JldHVybiByLmVudHJpZXM9dCxyfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKHQpe3ZhciByPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrNDtyZXR1cm4gdGhpcy5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24oZSl7cis9ZS5sYXlvdXQodCtyKX0pLHRoaXMuc2l6ZT1yfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgbj1lLnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsdCk7cmV0dXJuIHIodCx0aGlzLm9mZnNldCtuLHRoaXMuZW50cmllcy5sZW5ndGgpLHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe24rPWUud3JpdGUodCl9KSxufSx0fShnKTtlLkRhdGFSZWZlcmVuY2VCb3g9QTt2YXIgTz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzLFwiZGluZlwiLFt0XSl8fHRoaXM7cmV0dXJuIHIuZGF0YVJlZmVyZW5jZT10LHJ9cmV0dXJuIGkodCxlKSx0fSh2KTtlLkRhdGFJbmZvcm1hdGlvbkJveD1PO3ZhciBNPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMsXCJzdHNkXCIsMCwwKXx8dGhpcztyZXR1cm4gci5lbnRyaWVzPXQscn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXt2YXIgcj1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpO3JldHVybiByKz00LHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IrPWUubGF5b3V0KHQrcil9KSx0aGlzLnNpemU9cn0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG49ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpO3JldHVybiByKHQsdGhpcy5vZmZzZXQrbix0aGlzLmVudHJpZXMubGVuZ3RoKSxuKz00LHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe24rPWUud3JpdGUodCl9KSxufSx0fShnKTtlLlNhbXBsZURlc2NyaXB0aW9uQm94PU07dmFyIEQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsbixvLGkpe3ZhciBhPWUuY2FsbCh0aGlzLFwic3RibFwiLFt0LHIsbixvLGldKXx8dGhpcztyZXR1cm4gYS5zYW1wbGVEZXNjcmlwdGlvbnM9dCxhLnRpbWVUb1NhbXBsZT1yLGEuc2FtcGxlVG9DaHVuaz1uLGEuc2FtcGxlU2l6ZXM9byxhLmNodW5rT2Zmc2V0PWksYX1yZXR1cm4gaSh0LGUpLHR9KHYpO2UuU2FtcGxlVGFibGVCb3g9RDt2YXIgaz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuKXt2YXIgbz1lLmNhbGwodGhpcyxcIm1pbmZcIixbdCxyLG5dKXx8dGhpcztyZXR1cm4gby5oZWFkZXI9dCxvLmluZm89cixvLnNhbXBsZVRhYmxlPW4sb31yZXR1cm4gaSh0LGUpLHR9KHYpO2UuTWVkaWFJbmZvcm1hdGlvbkJveD1rO3ZhciBJPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4pe3ZhciBvPWUuY2FsbCh0aGlzLFwibWRpYVwiLFt0LHIsbl0pfHx0aGlzO3JldHVybiBvLmhlYWRlcj10LG8uaGFuZGxlcj1yLG8uaW5mbz1uLG99cmV0dXJuIGkodCxlKSx0fSh2KTtlLk1lZGlhQm94PUk7dmFyIEM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBuPWUuY2FsbCh0aGlzLFwidHJha1wiLFt0LHJdKXx8dGhpcztyZXR1cm4gbi5oZWFkZXI9dCxuLm1lZGlhPXIsbn1yZXR1cm4gaSh0LGUpLHR9KHYpO2UuVHJhY2tCb3g9Qzt2YXIgTD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuLG8saSl7dmFyIGE9ZS5jYWxsKHRoaXMsXCJ0cmV4XCIsMCwwKXx8dGhpcztyZXR1cm4gYS50cmFja0lkPXQsYS5kZWZhdWx0U2FtcGxlRGVzY3JpcHRpb25JbmRleD1yLGEuZGVmYXVsdFNhbXBsZUR1cmF0aW9uPW4sYS5kZWZhdWx0U2FtcGxlU2l6ZT1vLGEuZGVmYXVsdFNhbXBsZUZsYWdzPWksYX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrMjAsdGhpcy5zaXplfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgbj1lLnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsdCk7cmV0dXJuIHIodCx0aGlzLm9mZnNldCtuLHRoaXMudHJhY2tJZCkscih0LHRoaXMub2Zmc2V0K24rNCx0aGlzLmRlZmF1bHRTYW1wbGVEZXNjcmlwdGlvbkluZGV4KSxyKHQsdGhpcy5vZmZzZXQrbis4LHRoaXMuZGVmYXVsdFNhbXBsZUR1cmF0aW9uKSxyKHQsdGhpcy5vZmZzZXQrbisxMix0aGlzLmRlZmF1bHRTYW1wbGVTaXplKSxyKHQsdGhpcy5vZmZzZXQrbisxNix0aGlzLmRlZmF1bHRTYW1wbGVGbGFncyksbisyMH0sdH0oZyk7ZS5UcmFja0V4dGVuZHNCb3g9TDt2YXIgaj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHIsbixvKXt2YXIgaT1lLmNhbGwodGhpcyxcIm12ZXhcIix0KFtyXSxuLFtvXSkpfHx0aGlzO3JldHVybiBpLmhlYWRlcj1yLGkudHJhY0RlZmF1bHRzPW4saS5sZXZlbHM9byxpfXJldHVybiBpKHIsZSkscn0odik7ZS5Nb3ZpZUV4dGVuZHNCb3g9ajt2YXIgTj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIG49ZS5jYWxsKHRoaXMsXCJtZXRhXCIsMCwwKXx8dGhpcztyZXR1cm4gbi5oYW5kbGVyPXQsbi5vdGhlckJveGVzPXIsbn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXt2YXIgcj1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpO3JldHVybiByKz10aGlzLmhhbmRsZXIubGF5b3V0KHQrciksdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24oZSl7cis9ZS5sYXlvdXQodCtyKX0pLHRoaXMuc2l6ZT1yfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgcj1lLnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsdCk7cmV0dXJuIHIrPXRoaXMuaGFuZGxlci53cml0ZSh0KSx0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbihlKXtyKz1lLndyaXRlKHQpfSkscn0sdH0oZyk7ZS5NZXRhQm94PU47dmFyIFU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyxcIm1maGRcIiwwLDApfHx0aGlzO3JldHVybiByLnNlcXVlbmNlTnVtYmVyPXQscn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrNCx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBuPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sdGhpcy5zZXF1ZW5jZU51bWJlciksbis0fSx0fShnKTtlLk1vdmllRnJhZ21lbnRIZWFkZXJCb3g9VTt2YXIgRjshZnVuY3Rpb24oZSl7ZVtlLkJBU0VfREFUQV9PRkZTRVRfUFJFU0VOVD0xXT1cIkJBU0VfREFUQV9PRkZTRVRfUFJFU0VOVFwiLGVbZS5TQU1QTEVfREVTQ1JJUFRJT05fSU5ERVhfUFJFU0VOVD0yXT1cIlNBTVBMRV9ERVNDUklQVElPTl9JTkRFWF9QUkVTRU5UXCIsZVtlLkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQ9OF09XCJERUZBVUxUX1NBTVBMRV9EVVJBVElPTl9QUkVTRU5UXCIsZVtlLkRFRkFVTFRfU0FNUExFX1NJWkVfUFJFU0VOVD0xNl09XCJERUZBVUxUX1NBTVBMRV9TSVpFX1BSRVNFTlRcIixlW2UuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVD0zMl09XCJERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UXCJ9KEY9ZS5UcmFja0ZyYWdtZW50RmxhZ3N8fChlLlRyYWNrRnJhZ21lbnRGbGFncz17fSkpO3ZhciBCPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4sbyxpLGEscyl7dmFyIHU9ZS5jYWxsKHRoaXMsXCJ0ZmhkXCIsMCx0KXx8dGhpcztyZXR1cm4gdS50cmFja0lkPXIsdS5iYXNlRGF0YU9mZnNldD1uLHUuc2FtcGxlRGVzY3JpcHRpb25JbmRleD1vLHUuZGVmYXVsdFNhbXBsZUR1cmF0aW9uPWksdS5kZWZhdWx0U2FtcGxlU2l6ZT1hLHUuZGVmYXVsdFNhbXBsZUZsYWdzPXMsdX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXt2YXIgcj1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpKzQsbj10aGlzLmZsYWdzO3JldHVybiBuJkYuQkFTRV9EQVRBX09GRlNFVF9QUkVTRU5UJiYocis9OCksbiZGLlNBTVBMRV9ERVNDUklQVElPTl9JTkRFWF9QUkVTRU5UJiYocis9NCksbiZGLkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQmJihyKz00KSxuJkYuREVGQVVMVF9TQU1QTEVfU0laRV9QUkVTRU5UJiYocis9NCksbiZGLkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihyKz00KSx0aGlzLnNpemU9cn0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG49ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpLG89dGhpcy5mbGFncztyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sdGhpcy50cmFja0lkKSxuKz00LG8mRi5CQVNFX0RBVEFfT0ZGU0VUX1BSRVNFTlQmJihyKHQsdGhpcy5vZmZzZXQrbiwwKSxyKHQsdGhpcy5vZmZzZXQrbis0LHRoaXMuYmFzZURhdGFPZmZzZXQpLG4rPTgpLG8mRi5TQU1QTEVfREVTQ1JJUFRJT05fSU5ERVhfUFJFU0VOVCYmKHIodCx0aGlzLm9mZnNldCtuLHRoaXMuc2FtcGxlRGVzY3JpcHRpb25JbmRleCksbis9NCksbyZGLkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQmJihyKHQsdGhpcy5vZmZzZXQrbix0aGlzLmRlZmF1bHRTYW1wbGVEdXJhdGlvbiksbis9NCksbyZGLkRFRkFVTFRfU0FNUExFX1NJWkVfUFJFU0VOVCYmKHIodCx0aGlzLm9mZnNldCtuLHRoaXMuZGVmYXVsdFNhbXBsZVNpemUpLG4rPTQpLG8mRi5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYocih0LHRoaXMub2Zmc2V0K24sdGhpcy5kZWZhdWx0U2FtcGxlRmxhZ3MpLG4rPTQpLG59LHR9KGcpO2UuVHJhY2tGcmFnbWVudEhlYWRlckJveD1CO3ZhciBxPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMsXCJ0ZmR0XCIsMCwwKXx8dGhpcztyZXR1cm4gci5iYXNlTWVkaWFEZWNvZGVUaW1lPXQscn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrNCx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBuPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sdGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lKSxuKzR9LHR9KGcpO2UuVHJhY2tGcmFnbWVudEJhc2VNZWRpYURlY29kZVRpbWVCb3g9cTt2YXIgSD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuKXt2YXIgbz1lLmNhbGwodGhpcyxcInRyYWZcIixbdCxyLG5dKXx8dGhpcztyZXR1cm4gby5oZWFkZXI9dCxvLmRlY29kZVRpbWU9cixvLnJ1bj1uLG99cmV0dXJuIGkodCxlKSx0fSh2KTtlLlRyYWNrRnJhZ21lbnRCb3g9SDt2YXIgejshZnVuY3Rpb24oZSl7ZVtlLklTX0xFQURJTkdfTUFTSz0yMDEzMjY1OTJdPVwiSVNfTEVBRElOR19NQVNLXCIsZVtlLlNBTVBMRV9ERVBFTkRTX09OX01BU0s9NTAzMzE2NDhdPVwiU0FNUExFX0RFUEVORFNfT05fTUFTS1wiLGVbZS5TQU1QTEVfREVQRU5EU19PTl9PVEhFUj0xNjc3NzIxNl09XCJTQU1QTEVfREVQRU5EU19PTl9PVEhFUlwiLGVbZS5TQU1QTEVfREVQRU5EU19PTl9OT19PVEhFUlM9MzM1NTQ0MzJdPVwiU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTXCIsZVtlLlNBTVBMRV9JU19ERVBFTkRFRF9PTl9NQVNLPTEyNTgyOTEyXT1cIlNBTVBMRV9JU19ERVBFTkRFRF9PTl9NQVNLXCIsZVtlLlNBTVBMRV9IQVNfUkVEVU5EQU5DWV9NQVNLPTMxNDU3MjhdPVwiU0FNUExFX0hBU19SRURVTkRBTkNZX01BU0tcIixlW2UuU0FNUExFX1BBRERJTkdfVkFMVUVfTUFTSz05MTc1MDRdPVwiU0FNUExFX1BBRERJTkdfVkFMVUVfTUFTS1wiLGVbZS5TQU1QTEVfSVNfTk9UX1NZTkM9NjU1MzZdPVwiU0FNUExFX0lTX05PVF9TWU5DXCIsZVtlLlNBTVBMRV9ERUdSQURBVElPTl9QUklPUklUWV9NQVNLPTY1NTM1XT1cIlNBTVBMRV9ERUdSQURBVElPTl9QUklPUklUWV9NQVNLXCJ9KHo9ZS5TYW1wbGVGbGFnc3x8KGUuU2FtcGxlRmxhZ3M9e30pKTt2YXIgRzshZnVuY3Rpb24oZSl7ZVtlLkRBVEFfT0ZGU0VUX1BSRVNFTlQ9MV09XCJEQVRBX09GRlNFVF9QUkVTRU5UXCIsZVtlLkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UPTRdPVwiRklSU1RfU0FNUExFX0ZMQUdTX1BSRVNFTlRcIixlW2UuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQ9MjU2XT1cIlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UXCIsZVtlLlNBTVBMRV9TSVpFX1BSRVNFTlQ9NTEyXT1cIlNBTVBMRV9TSVpFX1BSRVNFTlRcIixlW2UuU0FNUExFX0ZMQUdTX1BSRVNFTlQ9MTAyNF09XCJTQU1QTEVfRkxBR1NfUFJFU0VOVFwiLGVbZS5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQ9MjA0OF09XCJTQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVRcIn0oRz1lLlRyYWNrUnVuRmxhZ3N8fChlLlRyYWNrUnVuRmxhZ3M9e30pKTt2YXIgVj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuLG8pe3ZhciBpPWUuY2FsbCh0aGlzLFwidHJ1blwiLDEsdCl8fHRoaXM7cmV0dXJuIGkuc2FtcGxlcz1yLGkuZGF0YU9mZnNldD1uLGkuZmlyc3RTYW1wbGVGbGFncz1vLGl9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyx0KSs0LG49dGhpcy5zYW1wbGVzLmxlbmd0aCxvPXRoaXMuZmxhZ3M7cmV0dXJuIG8mRy5EQVRBX09GRlNFVF9QUkVTRU5UJiYocis9NCksbyZHLkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYocis9NCksbyZHLlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UJiYocis9NCpuKSxvJkcuU0FNUExFX1NJWkVfUFJFU0VOVCYmKHIrPTQqbiksbyZHLlNBTVBMRV9GTEFHU19QUkVTRU5UJiYocis9NCpuKSxvJkcuU0FNUExFX0NPTVBPU0lUSU9OX1RJTUVfT0ZGU0VUJiYocis9NCpuKSx0aGlzLnNpemU9cn0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIG49ZS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLHQpLG89dGhpcy5zYW1wbGVzLmxlbmd0aCxpPXRoaXMuZmxhZ3M7cih0LHRoaXMub2Zmc2V0K24sbyksbis9NCxpJkcuREFUQV9PRkZTRVRfUFJFU0VOVCYmKHIodCx0aGlzLm9mZnNldCtuLHRoaXMuZGF0YU9mZnNldCksbis9NCksaSZHLkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYocih0LHRoaXMub2Zmc2V0K24sdGhpcy5maXJzdFNhbXBsZUZsYWdzKSxuKz00KTtmb3IodmFyIGE9MDthPG87YSsrKXt2YXIgcz10aGlzLnNhbXBsZXNbYV07aSZHLlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UJiYocih0LHRoaXMub2Zmc2V0K24scy5kdXJhdGlvbiksbis9NCksaSZHLlNBTVBMRV9TSVpFX1BSRVNFTlQmJihyKHQsdGhpcy5vZmZzZXQrbixzLnNpemUpLG4rPTQpLGkmRy5TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKHIodCx0aGlzLm9mZnNldCtuLHMuZmxhZ3MpLG4rPTQpLGkmRy5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQmJihyKHQsdGhpcy5vZmZzZXQrbixzLmNvbXBvc2l0aW9uVGltZU9mZnNldCksbis9NCl9cmV0dXJuIG59LHR9KGcpO2UuVHJhY2tSdW5Cb3g9Vjt2YXIgSz1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHIsbil7dmFyIG89ZS5jYWxsKHRoaXMsXCJtb29mXCIsdChbcl0sbikpfHx0aGlzO3JldHVybiBvLmhlYWRlcj1yLG8udHJhZnM9bixvfXJldHVybiBpKHIsZSkscn0odik7ZS5Nb3ZpZUZyYWdtZW50Qm94PUs7dmFyIFc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyxcIm1kYXRcIil8fHRoaXM7cmV0dXJuIHIuY2h1bmtzPXQscn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXt2YXIgcj1lLnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLHQpO3JldHVybiB0aGlzLmNodW5rcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IrPWUubGVuZ3RofSksdGhpcy5zaXplPXJ9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMsbj1lLnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsdCk7cmV0dXJuIHRoaXMuY2h1bmtzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zZXQoZSxyLm9mZnNldCtuKSxuKz1lLmxlbmd0aH0sdGhpcyksbn0sdH0oXyk7ZS5NZWRpYURhdGFCb3g9Vzt2YXIgSj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIG49ZS5jYWxsKHRoaXMsdCl8fHRoaXM7cmV0dXJuIG4uZGF0YVJlZmVyZW5jZUluZGV4PXIsbn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrOCx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBuPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sMCkscih0LHRoaXMub2Zmc2V0K24rNCx0aGlzLmRhdGFSZWZlcmVuY2VJbmRleCksbis4fSx0fShfKTtlLlNhbXBsZUVudHJ5PUo7dmFyIFE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsbixvLGksYSl7dm9pZCAwPT09biYmKG49Miksdm9pZCAwPT09byYmKG89MTYpLHZvaWQgMD09PWkmJihpPTQ0MTAwKSx2b2lkIDA9PT1hJiYoYT1udWxsKTt2YXIgcz1lLmNhbGwodGhpcyx0LHIpfHx0aGlzO3JldHVybiBzLmNoYW5uZWxDb3VudD1uLHMuc2FtcGxlU2l6ZT1vLHMuc2FtcGxlUmF0ZT1pLHMub3RoZXJCb3hlcz1hLHN9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24odCl7dmFyIHI9ZS5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyx0KSsyMDtyZXR1cm4gdGhpcy5vdGhlckJveGVzJiZ0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbihlKXtyKz1lLmxheW91dCh0K3IpfSksdGhpcy5zaXplPXJ9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBuPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gcih0LHRoaXMub2Zmc2V0K24sMCkscih0LHRoaXMub2Zmc2V0K24rNCwwKSxyKHQsdGhpcy5vZmZzZXQrbis4LHRoaXMuY2hhbm5lbENvdW50PDwxNnx0aGlzLnNhbXBsZVNpemUpLHIodCx0aGlzLm9mZnNldCtuKzEyLDApLHIodCx0aGlzLm9mZnNldCtuKzE2LHRoaXMuc2FtcGxlUmF0ZTw8MTYpLG4rPTIwLHRoaXMub3RoZXJCb3hlcyYmdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24oZSl7bis9ZS53cml0ZSh0KX0pLG59LHR9KEopO2UuQXVkaW9TYW1wbGVFbnRyeT1RLGUuQ09MT1JfTk9fQUxQSEFfVklERU9fU0FNUExFX0RFUFRIPTI0O3ZhciBZPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4ocixuLG8saSxhLHMsdSxsLGMsZCl7dm9pZCAwPT09YSYmKGE9XCJcIiksdm9pZCAwPT09cyYmKHM9NzIpLHZvaWQgMD09PXUmJih1PTcyKSx2b2lkIDA9PT1sJiYobD0xKSx2b2lkIDA9PT1jJiYoYz1lLkNPTE9SX05PX0FMUEhBX1ZJREVPX1NBTVBMRV9ERVBUSCksdm9pZCAwPT09ZCYmKGQ9bnVsbCk7dmFyIGY9dC5jYWxsKHRoaXMscixuKXx8dGhpcztpZihmLndpZHRoPW8sZi5oZWlnaHQ9aSxmLmNvbXByZXNzb3JOYW1lPWEsZi5ob3JpelJlc29sdXRpb249cyxmLnZlcnRSZXNvbHV0aW9uPXUsZi5mcmFtZUNvdW50PWwsZi5kZXB0aD1jLGYub3RoZXJCb3hlcz1kLGEubGVuZ3RoPjMxKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgY29tcHJlc3NvciBuYW1lXCIpO3JldHVybiBmfXJldHVybiBpKG4sdCksbi5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciByPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMTYrMTIrNCsyKzMyKzIrMjtyZXR1cm4gdGhpcy5vdGhlckJveGVzJiZ0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtyKz10LmxheW91dChlK3IpfSksdGhpcy5zaXplPXJ9LG4ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LDApLHIoZSx0aGlzLm9mZnNldCtuKzgsMCkscihlLHRoaXMub2Zmc2V0K24rMTIsMCksbis9MTYscihlLHRoaXMub2Zmc2V0K24sdGhpcy53aWR0aDw8MTZ8dGhpcy5oZWlnaHQpLHIoZSx0aGlzLm9mZnNldCtuKzQscyh0aGlzLmhvcml6UmVzb2x1dGlvbikpLHIoZSx0aGlzLm9mZnNldCtuKzgscyh0aGlzLnZlcnRSZXNvbHV0aW9uKSksbis9MTIscihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCx0aGlzLmZyYW1lQ291bnQ8PDE2KSxuKz02LGVbdGhpcy5vZmZzZXQrbl09dGhpcy5jb21wcmVzc29yTmFtZS5sZW5ndGg7Zm9yKHZhciBvPTA7bzwzMTtvKyspZVt0aGlzLm9mZnNldCtuK28rMV09bzx0aGlzLmNvbXByZXNzb3JOYW1lLmxlbmd0aD8xMjcmdGhpcy5jb21wcmVzc29yTmFtZS5jaGFyQ29kZUF0KG8pOjA7cmV0dXJuIG4rPTMyLHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZGVwdGg8PDE2fDY1NTM1KSxuKz00LHRoaXMub3RoZXJCb3hlcyYmdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC53cml0ZShlKX0pLG59LG59KEopO2UuVmlkZW9TYW1wbGVFbnRyeT1ZO3ZhciBYPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgbj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gbi5kYXRhPXIsbn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zaXplPWUucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsdCkrdGhpcy5kYXRhLmxlbmd0aCx0aGlzLnNpemV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciByPWUucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyx0KTtyZXR1cm4gdC5zZXQodGhpcy5kYXRhLHRoaXMub2Zmc2V0K3IpLHIrdGhpcy5kYXRhLmxlbmd0aH0sdH0oXyk7ZS5SYXdUYWc9WH0odD1lLklzb3x8KGUuSXNvPXt9KSl9KHQ9ZS5NUDR8fChlLk1QND17fSkpfShufHwobj17fSkpLHQuTVA0TXV4PW4uTVA0Lk1QNE11eH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG89cig1NSksaT1yKDE5KSxhPXIoMikscz1yKDYyKSx1PXIoMiksbD1yKDEpLGM9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsZD1PYmplY3QuZGVmaW5lUHJvcGVydHksZj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O249ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGk9bCh0KSYmdSh0LnZhbHVlKTtyZXR1cm4gbj1vKHQpLGRlbGV0ZSBuLndyaXRhYmxlLGRlbGV0ZSBuLnZhbHVlLG4uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXIub3ZlcndyaXRlRGVmaW5pdGlvbiYmZi5jYWxsKHRoaXMsZSk/aToodC52YWx1ZT1jLmNhbGwoaSxyLnJlc29sdmVDb250ZXh0P3IucmVzb2x2ZUNvbnRleHQodGhpcyk6dGhpcyksZCh0aGlzLGUsdCksdGhpc1tlXSl9LG59LGUuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1pKGFyZ3VtZW50c1sxXSk7cmV0dXJuIG51bGwhPXQucmVzb2x2ZUNvbnRleHQmJmEodC5yZXNvbHZlQ29udGV4dCkscyhlLGZ1bmN0aW9uKGUscil7cmV0dXJuIG4ocixlLHQpfSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigxKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzKS5sZW5ndGg9MCx0aGlzfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1yKDQ0KSgpP0FycmF5LmZyb206cig0NSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHI9QXJyYXkuZnJvbTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYoZT1bXCJyYXpcIixcImR3YVwiXSx0PXIoZSksQm9vbGVhbih0JiZ0IT09ZSYmXCJkd2FcIj09PXRbMV0pKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDMpLml0ZXJhdG9yLG89cig3KSxpPXIoNDYpLGE9cig1MSkscz1yKDIpLHU9cigxKSxsPXIoNCksYz1yKDgpLGQ9QXJyYXkuaXNBcnJheSxmPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLHA9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9LGg9T2JqZWN0LmRlZmluZVByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLF8sZyx5LHYsbSxFLGIsdyxTPWFyZ3VtZW50c1sxXSxQPWFyZ3VtZW50c1syXTtpZihlPU9iamVjdCh1KGUpKSxsKFMpJiZzKFMpLHRoaXMmJnRoaXMhPT1BcnJheSYmaSh0aGlzKSl0PXRoaXM7ZWxzZXtpZighUyl7aWYobyhlKSlyZXR1cm4geT1lLmxlbmd0aCwxIT09eT9BcnJheS5hcHBseShudWxsLGUpOihnPW5ldyBBcnJheSgxKSxnWzBdPWVbMF0sZyk7aWYoZChlKSl7Zm9yKGc9bmV3IEFycmF5KHk9ZS5sZW5ndGgpLHI9MDtyPHk7KytyKWdbcl09ZVtyXTtyZXR1cm4gZ319Zz1bXX1pZighZChlKSlpZih2b2lkIDAhPT0oYj1lW25dKSl7Zm9yKG09cyhiKS5jYWxsKGUpLHQmJihnPW5ldyB0KSxFPW0ubmV4dCgpLHI9MDshRS5kb25lOyl3PVM/Zi5jYWxsKFMsUCxFLnZhbHVlLHIpOkUudmFsdWUsdD8ocC52YWx1ZT13LGgoZyxyLHApKTpnW3JdPXcsRT1tLm5leHQoKSwrK3I7eT1yfWVsc2UgaWYoYyhlKSl7Zm9yKHk9ZS5sZW5ndGgsdCYmKGc9bmV3IHQpLHI9MCxfPTA7cjx5Oysrcil3PWVbcl0scisxPHkmJih2PXcuY2hhckNvZGVBdCgwKSx2Pj01NTI5NiYmdjw9NTYzMTkmJih3Kz1lWysrcl0pKSx3PVM/Zi5jYWxsKFMsUCx3LF8pOncsdD8ocC52YWx1ZT13LGgoZyxfLHApKTpnW19dPXcsKytfO3k9X31pZih2b2lkIDA9PT15KWZvcih5PWEoZS5sZW5ndGgpLHQmJihnPW5ldyB0KHkpKSxyPTA7cjx5Oysrcil3PVM/Zi5jYWxsKFMsUCxlW3JdLHIpOmVbcl0sdD8ocC52YWx1ZT13LGgoZyxyLHApKTpnW3JdPXc7cmV0dXJuIHQmJihwLnZhbHVlPW51bGwsZy5sZW5ndGg9eSksZ319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG89bi5jYWxsKHIoMTcpKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmbi5jYWxsKGUpPT09b319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cig0OCkoKT9NYXRoLnNpZ246cig0OSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT1NYXRoLnNpZ247cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmMT09PWUoMTApJiZlKC0yMCk9PT0tMX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9TnVtYmVyKGUpLGlzTmFOKGUpfHwwPT09ZT9lOmU+MD8xOi0xfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNDcpLG89TWF0aC5hYnMsaT1NYXRoLmZsb29yO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZSk/MDooZT1OdW1iZXIoZSksMCE9PWUmJmlzRmluaXRlKGUpP24oZSkqaShvKGUpKTplKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDUwKSxvPU1hdGgubWF4O2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbygwLG4oZSkpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMiksbz1yKDEpLGk9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsYT1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxzPU9iamVjdC5rZXlzLHU9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixsKXt2YXIgYyxkPWFyZ3VtZW50c1syXSxmPWFyZ3VtZW50c1szXTtyZXR1cm4gcj1PYmplY3QobyhyKSksbihsKSxjPXMociksZiYmYy5zb3J0KFwiZnVuY3Rpb25cIj09dHlwZW9mIGY/aS5jYWxsKGYscik6dm9pZCAwKSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiYoZT1jW2VdKSxhLmNhbGwoZSxjLGZ1bmN0aW9uKGUsbil7cmV0dXJuIHUuY2FsbChyLGUpP2EuY2FsbChsLGQscltlXSxlLHIsbik6dH0pfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0PU9iamVjdC5hc3NpZ247cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmKGU9e2ZvbzpcInJhelwifSx0KGUse2JhcjpcImR3YVwifSx7dHJ6eTpcInRyenlcIn0pLGUuZm9vK2UuYmFyK2UudHJ6eT09PVwicmF6ZHdhdHJ6eVwiKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDU5KSxvPXIoMSksaT1NYXRoLm1heDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixhLHMsdT1pKGFyZ3VtZW50cy5sZW5ndGgsMik7Zm9yKGU9T2JqZWN0KG8oZSkpLHM9ZnVuY3Rpb24obil7dHJ5e2Vbbl09dFtuXX1jYXRjaChlKXtyfHwocj1lKX19LGE9MTthPHU7KythKXQ9YXJndW1lbnRzW2FdLG4odCkuZm9yRWFjaChzKTtpZih2b2lkIDAhPT1yKXRocm93IHI7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig0Myksbz1yKDEwKSxpPXIoMSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdChpKGUpKSxyPWFyZ3VtZW50c1sxXSxhPU9iamVjdChhcmd1bWVudHNbMl0pO2lmKHQhPT1lJiYhcilyZXR1cm4gdDt2YXIgcz17fTtyZXR1cm4gcj9uKHIsZnVuY3Rpb24odCl7KGEuZW5zdXJlfHx0IGluIGUpJiYoc1t0XT1lW3RdKX0pOm8ocyxlKSxzfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG89T2JqZWN0LmNyZWF0ZTtyKDIwKSgpfHwobj1yKDIxKSksZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyO3JldHVybiBuPzEhPT1uLmxldmVsP286KGU9e30sdD17fSxyPXtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9LE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5wcm90b3R5cGUpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuXCJfX3Byb3RvX19cIj09PWU/dm9pZCh0W2VdPXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KTp2b2lkKHRbZV09cil9KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwibnVsbFBvbHlmaWxsXCIse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiExLHZhbHVlOmV9KSxmdW5jdGlvbih0LHIpe3JldHVybiBvKG51bGw9PT10P2U6dCxyKX0pOm99KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9cig1MikoXCJmb3JFYWNoXCIpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXIoNjApKCk/T2JqZWN0LmtleXM6cig2MSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIE9iamVjdC5rZXlzKFwicHJpbWl0aXZlXCIpLCEwfWNhdGNoKGUpe3JldHVybiExfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDQpLG89T2JqZWN0LmtleXM7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSk/T2JqZWN0KGUpOmUpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMiksbz1yKDU3KSxpPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPXt9LGE9YXJndW1lbnRzWzJdO3JldHVybiBuKHQpLG8oZSxmdW5jdGlvbihlLG4sbyxzKXtyW25dPWkuY2FsbCh0LGEsZSxuLG8scyl9KSxyfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKGUrXCIgaXMgbm90IGFuIE9iamVjdFwiKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1cInJhemR3YXRyenlcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmNvbnRhaW5zJiZuLmNvbnRhaW5zKFwiZHdhXCIpPT09ITAmJm4uY29udGFpbnMoXCJmb29cIik9PT0hMX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1TdHJpbmcucHJvdG90eXBlLmluZGV4T2Y7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwodGhpcyxlLGFyZ3VtZW50c1sxXSk+LTF9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxvPU1hdGgucmFuZG9tO2UuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlO2RvIGU9bygpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTt3aGlsZShuW2VdKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbixvPXIoMTEpLGk9cigyMiksYT1yKDYpLHM9cigzKSx1PXIoMjQpLGw9T2JqZWN0LmRlZmluZVByb3BlcnR5O249ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO3UuY2FsbCh0aGlzLGUpLHQ9dD9pLmNhbGwodCxcImtleSt2YWx1ZVwiKT9cImtleSt2YWx1ZVwiOmkuY2FsbCh0LFwia2V5XCIpP1wia2V5XCI6XCJ2YWx1ZVwiOlwidmFsdWVcIixsKHRoaXMsXCJfX2tpbmRfX1wiLGEoXCJcIix0KSl9LG8mJm8obix1KSxkZWxldGUgbi5wcm90b3R5cGUuY29uc3RydWN0b3Isbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSx7X3Jlc29sdmU6YShmdW5jdGlvbihlKXtyZXR1cm5cInZhbHVlXCI9PT10aGlzLl9fa2luZF9fP3RoaXMuX19saXN0X19bZV06XCJrZXkrdmFsdWVcIj09PXRoaXMuX19raW5kX18/W2UsdGhpcy5fX2xpc3RfX1tlXV06ZX0pfSksbChuLnByb3RvdHlwZSxzLnRvU3RyaW5nVGFnLGEoXCJjXCIsXCJBcnJheSBJdGVyYXRvclwiKSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDcpLG89cigyKSxpPXIoOCksYT1yKDIzKSxzPUFycmF5LmlzQXJyYXksdT1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxsPUFycmF5LnByb3RvdHlwZS5zb21lO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGMsZCxmLHAsaCxfLGcseT1hcmd1bWVudHNbMl07aWYocyhlKXx8bihlKT9yPVwiYXJyYXlcIjppKGUpP3I9XCJzdHJpbmdcIjplPWEoZSksbyh0KSxkPWZ1bmN0aW9uKCl7Zj0hMH0sXCJhcnJheVwiPT09cilyZXR1cm4gdm9pZCBsLmNhbGwoZSxmdW5jdGlvbihlKXtyZXR1cm4gdS5jYWxsKHQseSxlLGQpLGZ9KTtpZihcInN0cmluZ1wiIT09cilmb3IoYz1lLm5leHQoKTshYy5kb25lOyl7aWYodS5jYWxsKHQseSxjLnZhbHVlLGQpLGYpcmV0dXJuO2M9ZS5uZXh0KCl9ZWxzZSBmb3IoaD1lLmxlbmd0aCxwPTA7cDxoJiYoXz1lW3BdLHArMTxoJiYoZz1fLmNoYXJDb2RlQXQoMCksZz49NTUyOTYmJmc8PTU2MzE5JiYoXys9ZVsrK3BdKSksdS5jYWxsKHQseSxfLGQpLCFmKTsrK3ApO319LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDcpLG89cig0KSxpPXIoOCksYT1yKDMpLml0ZXJhdG9yLHM9QXJyYXkuaXNBcnJheTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuISghbyhlKXx8IXMoZSkmJiFpKGUpJiYhbihlKSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZVthXSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbz1yKDExKSxpPXIoNiksYT1yKDMpLHM9cigyNCksdT1PYmplY3QuZGVmaW5lUHJvcGVydHk7bj1lLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO2U9U3RyaW5nKGUpLHMuY2FsbCh0aGlzLGUpLHUodGhpcyxcIl9fbGVuZ3RoX19cIixpKFwiXCIsZS5sZW5ndGgpKX0sbyYmbyhuLHMpLGRlbGV0ZSBuLnByb3RvdHlwZS5jb25zdHJ1Y3RvcixuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlLHtfbmV4dDppKGZ1bmN0aW9uKCl7aWYodGhpcy5fX2xpc3RfXylyZXR1cm4gdGhpcy5fX25leHRJbmRleF9fPHRoaXMuX19sZW5ndGhfXz90aGlzLl9fbmV4dEluZGV4X18rKzp2b2lkIHRoaXMuX3VuQmluZCgpfSksX3Jlc29sdmU6aShmdW5jdGlvbihlKXt2YXIgdCxyPXRoaXMuX19saXN0X19bZV07cmV0dXJuIHRoaXMuX19uZXh0SW5kZXhfXz09PXRoaXMuX19sZW5ndGhfXz9yOih0PXIuY2hhckNvZGVBdCgwKSx0Pj01NTI5NiYmdDw9NTYzMTk/cit0aGlzLl9fbGlzdF9fW3RoaXMuX19uZXh0SW5kZXhfXysrXTpyKX0pfSksdShuLnByb3RvdHlwZSxhLnRvU3RyaW5nVGFnLGkoXCJjXCIsXCJTdHJpbmcgSXRlcmF0b3JcIikpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig2OSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoZStcIiBpcyBub3QgaXRlcmFibGVcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49e29iamVjdDohMCxzeW1ib2w6ITB9O2UuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFN5bWJvbClyZXR1cm4hMTtlPVN5bWJvbChcInRlc3Qgc3ltYm9sXCIpO3RyeXtTdHJpbmcoZSl9Y2F0Y2goZSl7cmV0dXJuITF9cmV0dXJuISFuW3R5cGVvZiBTeW1ib2wuaXRlcmF0b3JdJiYhIW5bdHlwZW9mIFN5bWJvbC50b1ByaW1pdGl2ZV0mJiEhblt0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnXX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoXCJzeW1ib2xcIj09dHlwZW9mIGV8fCEhZS5jb25zdHJ1Y3RvciYmXCJTeW1ib2xcIj09PWUuY29uc3RydWN0b3IubmFtZSYmXCJTeW1ib2xcIj09PWVbZS5jb25zdHJ1Y3Rvci50b1N0cmluZ1RhZ10pfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG8saSxhLHM9cig2KSx1PXIoNzUpLGw9T2JqZWN0LmNyZWF0ZSxjPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLGQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LGY9T2JqZWN0LnByb3RvdHlwZSxwPWwobnVsbCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sKXtuPVN5bWJvbDt0cnl7U3RyaW5nKG4oKSksYT0hMH1jYXRjaChlKXt9fXZhciBoPWZ1bmN0aW9uKCl7dmFyIGU9bChudWxsKTtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLG4sbz0wO2VbdCsob3x8XCJcIildOykrK287cmV0dXJuIHQrPW98fFwiXCIsZVt0XT0hMCxyPVwiQEBcIit0LGQoZixyLHMuZ3MobnVsbCxmdW5jdGlvbihlKXtufHwobj0hMCxkKHRoaXMscixzKGUpKSxuPSExKX0pKSxyfX0oKTtpPWZ1bmN0aW9uKGUpe2lmKHRoaXMgaW5zdGFuY2VvZiBpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3JcIik7cmV0dXJuIG8oZSl9LGUuZXhwb3J0cz1vPWZ1bmN0aW9uIGUodCl7dmFyIHI7aWYodGhpcyBpbnN0YW5jZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvclwiKTtyZXR1cm4gYT9uKHQpOihyPWwoaS5wcm90b3R5cGUpLHQ9dm9pZCAwPT09dD9cIlwiOlN0cmluZyh0KSxjKHIse19fZGVzY3JpcHRpb25fXzpzKFwiXCIsdCksX19uYW1lX186cyhcIlwiLGgodCkpfSkpfSxjKG8se2ZvcjpzKGZ1bmN0aW9uKGUpe3JldHVybiBwW2VdP3BbZV06cFtlXT1vKFN0cmluZyhlKSl9KSxrZXlGb3I6cyhmdW5jdGlvbihlKXt2YXIgdDt1KGUpO2Zvcih0IGluIHApaWYocFt0XT09PWUpcmV0dXJuIHR9KSxoYXNJbnN0YW5jZTpzKFwiXCIsbiYmbi5oYXNJbnN0YW5jZXx8byhcImhhc0luc3RhbmNlXCIpKSxpc0NvbmNhdFNwcmVhZGFibGU6cyhcIlwiLG4mJm4uaXNDb25jYXRTcHJlYWRhYmxlfHxvKFwiaXNDb25jYXRTcHJlYWRhYmxlXCIpKSxpdGVyYXRvcjpzKFwiXCIsbiYmbi5pdGVyYXRvcnx8byhcIml0ZXJhdG9yXCIpKSxtYXRjaDpzKFwiXCIsbiYmbi5tYXRjaHx8byhcIm1hdGNoXCIpKSxyZXBsYWNlOnMoXCJcIixuJiZuLnJlcGxhY2V8fG8oXCJyZXBsYWNlXCIpKSxzZWFyY2g6cyhcIlwiLG4mJm4uc2VhcmNofHxvKFwic2VhcmNoXCIpKSxzcGVjaWVzOnMoXCJcIixuJiZuLnNwZWNpZXN8fG8oXCJzcGVjaWVzXCIpKSxzcGxpdDpzKFwiXCIsbiYmbi5zcGxpdHx8byhcInNwbGl0XCIpKSx0b1ByaW1pdGl2ZTpzKFwiXCIsbiYmbi50b1ByaW1pdGl2ZXx8byhcInRvUHJpbWl0aXZlXCIpKSx0b1N0cmluZ1RhZzpzKFwiXCIsbiYmbi50b1N0cmluZ1RhZ3x8byhcInRvU3RyaW5nVGFnXCIpKSx1bnNjb3BhYmxlczpzKFwiXCIsbiYmbi51bnNjb3BhYmxlc3x8byhcInVuc2NvcGFibGVzXCIpKX0pLGMoaS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnMobyksdG9TdHJpbmc6cyhcIlwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19uYW1lX199KX0pLGMoby5wcm90b3R5cGUse3RvU3RyaW5nOnMoZnVuY3Rpb24oKXtyZXR1cm5cIlN5bWJvbCAoXCIrdSh0aGlzKS5fX2Rlc2NyaXB0aW9uX18rXCIpXCJ9KSx2YWx1ZU9mOnMoZnVuY3Rpb24oKXtyZXR1cm4gdSh0aGlzKX0pfSksZChvLnByb3RvdHlwZSxvLnRvUHJpbWl0aXZlLHMoXCJcIixmdW5jdGlvbigpe3ZhciBlPXUodGhpcyk7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGU/ZTplLnRvU3RyaW5nKCl9KSksZChvLnByb3RvdHlwZSxvLnRvU3RyaW5nVGFnLHMoXCJjXCIsXCJTeW1ib2xcIikpLGQoaS5wcm90b3R5cGUsby50b1N0cmluZ1RhZyxzKFwiY1wiLG8ucHJvdG90eXBlW28udG9TdHJpbmdUYWddKSksZChpLnByb3RvdHlwZSxvLnRvUHJpbWl0aXZlLHMoXCJjXCIsby5wcm90b3R5cGVbby50b1ByaW1pdGl2ZV0pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNzMpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKGUrXCIgaXMgbm90IGEgc3ltYm9sXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1yKDc3KSgpP1dlYWtNYXA6cig3OSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuITE7dHJ5e2U9bmV3IFdlYWtNYXAoW1t0PXt9LFwib25lXCJdLFt7fSxcInR3b1wiXSxbe30sXCJ0aHJlZVwiXV0pfWNhdGNoKGUpe3JldHVybiExfXJldHVyblwiW29iamVjdCBXZWFrTWFwXVwiPT09U3RyaW5nKGUpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnNldCYmZS5zZXQoe30sMSk9PT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmRlbGV0ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5oYXMmJlwib25lXCI9PT1lLmdldCh0KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBXZWFrTWFwJiZcIltvYmplY3QgV2Vha01hcF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXcgV2Vha01hcCl9KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbixvPXIoMTEpLGk9cig2MyksYT1yKDEpLHM9cig2NiksdT1yKDYpLGw9cigyMyksYz1yKDY4KSxkPXIoMykudG9TdHJpbmdUYWcsZj1yKDc4KSxwPUFycmF5LmlzQXJyYXksaD1PYmplY3QuZGVmaW5lUHJvcGVydHksXz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGc9T2JqZWN0LmdldFByb3RvdHlwZU9mO2UuZXhwb3J0cz1uPWZ1bmN0aW9uKCl7dmFyIGUsdD1hcmd1bWVudHNbMF07aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzICduZXcnXCIpO3JldHVybiBlPWYmJm8mJldlYWtNYXAhPT1uP28obmV3IFdlYWtNYXAsZyh0aGlzKSk6dGhpcyxudWxsIT10JiYocCh0KXx8KHQ9bCh0KSkpLGgoZSxcIl9fd2Vha01hcERhdGFfX1wiLHUoXCJjXCIsXCIkd2Vha01hcCRcIitzKCkpKSx0PyhjKHQsZnVuY3Rpb24odCl7YSh0KSxlLnNldCh0WzBdLHRbMV0pfSksZSk6ZTtcbn0sZiYmKG8mJm8obixXZWFrTWFwKSxuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFdlYWtNYXAucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp1KG4pfSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG4ucHJvdG90eXBlLHtkZWxldGU6dShmdW5jdGlvbihlKXtyZXR1cm4hIV8uY2FsbChpKGUpLHRoaXMuX193ZWFrTWFwRGF0YV9fKSYmKGRlbGV0ZSBlW3RoaXMuX193ZWFrTWFwRGF0YV9fXSwhMCl9KSxnZXQ6dShmdW5jdGlvbihlKXtpZihfLmNhbGwoaShlKSx0aGlzLl9fd2Vha01hcERhdGFfXykpcmV0dXJuIGVbdGhpcy5fX3dlYWtNYXBEYXRhX19dfSksaGFzOnUoZnVuY3Rpb24oZSl7cmV0dXJuIF8uY2FsbChpKGUpLHRoaXMuX193ZWFrTWFwRGF0YV9fKX0pLHNldDp1KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGgoaShlKSx0aGlzLl9fd2Vha01hcERhdGFfXyx1KFwiY1wiLHQpKSx0aGlzfSksdG9TdHJpbmc6dShmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBXZWFrTWFwXVwifSl9KSxoKG4ucHJvdG90eXBlLGQsdShcImNcIixcIldlYWtNYXBcIikpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig4Myksbz1yKDgyKSxpPVtuLldlYkNyeXB0byxvLkpTQ3J5cHRvXTt0LmRlZmF1bHQ9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMCksbz1yKDgwKSxpPW4uaGVscGVycy5maW5kO3QuRGVjcnlwdG9yRmFjdG9yeT17cmV0cmlldmVEZWNyeXB0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoby5kZWZhdWx0LGZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbkRlY3J5cHQoZSl9KXx8bnVsbH19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigwKSxvPXIoMzgpLGk9bi5oZWxwZXJzLlByb21pc2UsYT1udWxsO3QuSlNDcnlwdG89e2NhbkRlY3J5cHQ6ZnVuY3Rpb24oZSl7cmV0dXJuXCJBRVMtQ0JDXCI9PT1lLmNpcGhlcn0sZGVjcnlwdDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwoYT1uZXcgby5BRVNEZWNyeXB0b3IpLGEuZXhwYW5kS2V5KHQua2V5LmJ1ZmZlciksaS5yZXNvbHZlKG5ldyBVaW50OEFycmF5KGEuZGVjcnlwdChlLmJ1ZmZlciwwLHQuaXYuYnVmZmVyKSkpfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89bi5oZWxwZXJzLlByb21pc2UsaT13aW5kb3cuY3J5cHRvJiZ3aW5kb3cuY3J5cHRvLnN1YnRsZTt0LldlYkNyeXB0bz17Y2FuRGVjcnlwdDpmdW5jdGlvbihlKXtyZXR1cm4hIWkmJndpbmRvdy5pc1NlY3VyZUNvbnRleHQmJlwiQUVTLUNCQ1wiPT09ZS5jaXBoZXJ9LGRlY3J5cHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IG8oZnVuY3Rpb24ocixuKXtmdW5jdGlvbiBvKGUpe3JldHVybiBpLmltcG9ydEtleShcInJhd1wiLGUse25hbWU6XCJBRVMtQ0JDXCJ9LCExLFtcImRlY3J5cHRcIl0pfW8odC5rZXkpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGkuZGVjcnlwdCh7bmFtZTpcIkFFUy1DQkNcIixpdjp0Lml2fSxyLGUpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gcihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChuKX0pfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDg2KSxvPXIoODUpLGk9W24uT2dnT3B1c1NlZ21lbnRQYXJzZXIsby5EZWZhdWx0U2VnbWVudFBhcnNlcl07dC5kZWZhdWx0PWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89bi5oZWxwZXJzLmFib3J0YWJsZUpvYi5BYm9ydGFibGVKb2IsaT1uLmhlbHBlcnMuUHJvbWlzZTt0LkRlZmF1bHRTZWdtZW50UGFyc2VyPXtnZXRGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX0scGFyc2VTZWdtZW50RGF0YTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgbyhmdW5jdGlvbigpe3JldHVybntyZXN1bHQ6aS5yZXNvbHZlKHtkYXRhOmV9KX19KTtyZXR1cm4gdC5ydW4oKX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigwKSxvPXIoOSksaT1yKDc2KSxhPW4uaGVscGVycy5hYm9ydGFibGVKb2IuQWJvcnRhYmxlSm9iLHM9bi5oZWxwZXJzLlByb21pc2UsdT1uLmhlbHBlcnMuYXJyYXlCdWZmZXIuY29tYmluZSxsPW5ldyBpO3QuT2dnT3B1c1NlZ21lbnRQYXJzZXI9e2dldEZvcm1hdDpmdW5jdGlvbigpe3JldHVybnttaW1lVHlwZTpcImF1ZGlvL29nZ1wiLGF1ZGlvQ29kZWM6e2lkOlwib3B1c1wifX19LHBhcnNlU2VnbWVudERhdGE6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW5ldyBhKGZ1bmN0aW9uKCl7dmFyIG49by5yZXRyaWV2ZVBhZ2VzKGUpO2lmKG4ubGVuZ3RoKXt2YXIgaT1vLnJldHJpZXZlUGFja2V0cyhbblswXV0pWzBdO2lmKGkmJmkuZmlyc3Qpe3ZhciBhPTE7bi5zbGljZSgxKS5zb21lKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ISEoMSZlLmhlYWRlci50eXBlWzBdKTtyZXR1cm4gdD4wJiYhcnx8KGE9dCsyLCExKX0pO3ZhciBjPXUobi5zbGljZSgwLGEpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5lbnRpcmVQYWdlfSkpO3JldHVybiBsLnNldChyLGMpLHtyZXN1bHQ6cy5yZXNvbHZlKHtkYXRhOnUobi5zbGljZShhKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW50aXJlUGFnZX0pKSxpbml0RGF0YTpjfSl9fX1pZih0LmdldFNlcXVlbmNlTnVtYmVyKCk8PXIuZ2V0U3RhcnRpbmdTZXF1ZW5jZU51bWJlcigpKXJldHVybntyZXN1bHQ6cy5yZWplY3QobmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgaW5pdCBkYXRhLlwiKSl9O2lmKGwuaGFzKHIpKXJldHVybntyZXN1bHQ6cy5yZXNvbHZlKHtpbml0RGF0YTpsLmdldChyKSxkYXRhOmV9KX07dmFyIGQ9ci5nZXRTZWdtZW50KHIuZ2V0U3RhcnRpbmdTZXF1ZW5jZU51bWJlcigpKSxmPW51bGwscD1kLndoZW5Db21wbGV0ZSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGY9dC5yZXRyaWV2ZURhdGEoKSxmLndoZW5Db21wbGV0ZSgpLnRoZW4oZnVuY3Rpb24odCl7dmFyIHI9dC5kYXRhO3JldHVybntpbml0RGF0YTpyLmluaXREYXRhLGRhdGE6ZX19KX0pO3JldHVybntyZXN1bHQ6cCxhYm9ydDpmdW5jdGlvbigpe2QuYWJvcnQoKSxmJiZmLmFib3J0KCl9fX0pO3JldHVybiBuLnJ1bigpfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89cigyOSksaT1yKDg0KSxhPW4uaGVscGVycy5maW5kO3QuU2VnbWVudFBhcnNlckZhY3Rvcnk9e3JldHJpZXZlU2VnbWVudFBhcnNlcjpmdW5jdGlvbihlKXt2YXIgdD1hKGkuZGVmYXVsdCxmdW5jdGlvbih0KXtyZXR1cm4gby5pc1BhcnRpYWxNYXRjaCh0LmdldEZvcm1hdCgpLGUpfSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiTm8gc2VnbWVudCBwYXJzZXIgZm91bmQuXCIpO3JldHVybiB0fX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE2KSxvPXIoMTUpLGk9cig4OSksYT1bbi5QYXNzVGhyb3VnaCxvLk1QM1RvTVA0LGkuT2dnT3B1c1RvV2VibV07dC5kZWZhdWx0PWF9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89cig5KSxpPXIoOTApLGE9bi5oZWxwZXJzLlByb21pc2Uscz1uLmhlbHBlcnMuYXJyYXlCdWZmZXIuY29tYmluZTt0Lk9nZ09wdXNUb1dlYm09e2dldElucHV0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJue21pbWVUeXBlOlwiYXVkaW8vb2dnXCIsYXVkaW9Db2RlYzp7aWQ6XCJvcHVzXCJ9fX0sZ2V0T3V0cHV0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJue21pbWVUeXBlOlwiYXVkaW8vd2VibVwiLGF1ZGlvQ29kZWM6e2lkOlwib3B1c1wifX19LHRyYW5zbXV4OmZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLmluaXREYXRhP3MoW2UuaW5pdERhdGEsZS5kYXRhXSk6ZS5kYXRhLHI9by5yZXRyaWV2ZVBhY2tldHMoby5yZXRyaWV2ZVBhZ2VzKHQpKSxuPWkuYnVpbGRXZWJtKHIpO3JldHVybiBhLnJlc29sdmUoe2RhdGE6bi5kYXRhLGluaXREYXRhOm4uaW5pdERhdGF9KX1jYXRjaChlKXtyZXR1cm4gYS5yZWplY3QoZSl9fX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPXJ9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnZlcnNpb249XCIxMy4wLjBcIix0LmJ1aWxkTnVtYmVyPTEwODU7dmFyIG49cigzNCk7dC5QbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXI9bi5QbGF5bGlzdFNlZ21lbnRSZXRyaWV2ZXI7dmFyIG89cigzNSk7dC5QbGF5bGlzdD1vLlBsYXlsaXN0LHQuUGxheWxpc3RUeXBlPW8uUGxheWxpc3RUeXBlO3ZhciBpPXIoMTQpO3QuU2VnbWVudD1pLlNlZ21lbnQ7dmFyIGE9cigzNyk7dC5UcmFuc211eGVyRmFjdG9yeT1hLlRyYW5zbXV4ZXJGYWN0b3J5O3ZhciBzPXIoMTUpO3QuTVAzVG9NUDRUcmFuc211eGVyPXMuTVAzVG9NUDQ7dmFyIHU9cigxNik7dC5QYXNzVGhyb3VnaFRyYW5zbXV4ZXI9dS5QYXNzVGhyb3VnaDt2YXIgbD1yKDM2KTt0LnJldHJpZXZhbEVycm9ycz1sLnJldHJpZXZhbEVycm9yczt2YXIgYz1yKDMzKTt0LmV2ZW50cz1jLmV2ZW50c31dKX0pfSxmdW5jdGlvbihlLHQscil7IWZ1bmN0aW9uKHQsbil7ZS5leHBvcnRzPW4ocigyKSl9KHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIHQubT1lLHQuYz1yLHQuaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sdC5kPWZ1bmN0aW9uKGUscixuKXt0Lm8oZSxyKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sdC5uPWZ1bmN0aW9uKGUpe3ZhciByPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQocixcImFcIixyKSxyfSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD1cIlwiLHQodC5zPTEwKX0oW2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fbXNnPWV9cmV0dXJuIGUucHJvdG90eXBlLmdldE1zZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tc2d9LGV9KCk7dC5PZ2dQYXJzZXJFcnJvcj1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKHQsZSksdH0oby5PZ2dQYXJzZXJFcnJvcik7dC5DaGVja3N1bUZhaWxlZEVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0fShvLk9nZ1BhcnNlckVycm9yKTt0Lk5vU2VnbWVudHNJblBhZ2VFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKHQsZSksdH0oby5PZ2dQYXJzZXJFcnJvcik7dC5QYWdlRnJvbURpZmZlcmVudEJpdHN0cmVhbUVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0fShvLk9nZ1BhcnNlckVycm9yKTt0LlBhZ2VTZXF1ZW5jZU51bWJlckRpZE5vdEluY3JlbWVudEVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0fShvLk9nZ1BhcnNlckVycm9yKTt0LlVuZXhwZWN0ZWRCT1NFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9O3JldHVybiBmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LHIpLHQucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKHQsZSksdH0oby5PZ2dQYXJzZXJFcnJvcik7dC5VbmV4cGVjdGVkRU9TRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0LHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj0xKSxlLnNsaWNlKHQsdCtyKX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSEwKSxuZXcgRGF0YVZpZXcoZSkuZ2V0VWludDMyKDAsdCl9ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9ZS5idWZmZXIscj1bXSxuPWUuYnl0ZU9mZnNldC0xOzspe3ZhciBvPW4rMSxpPW5ldyBVaW50OEFycmF5KHQsbykuZmluZEluZGV4KGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gclt0XT09PXlbMF0mJnJbdCsxXT09PXlbMV0mJnJbdCsyXT09PXlbMl0mJnJbdCszXT09PXlbM119KTtpZihpPT09LTEpYnJlYWs7aSs9byxuPWk7dmFyIHM9bmV3IERhdGFWaWV3KHQsaSk7ci5wdXNoKGEocykpfXJldHVybiByfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIsZS5ieXRlT2Zmc2V0KSxyPW4odCwyNiksaT1uKHQsMjcsclswXSksYT17dmVyc2lvbjpuKHQsNCksdHlwZTpuKHQsNSksZ3JhbnVsZVBvc2l0aW9uOm4odCw2LDgpLGJpdHN0cmVhbVNlcmlhbE51bWJlcjpuKHQsMTQsNCkscGFnZVNlcXVlbmNlTnVtYmVyOm4odCwxOCw0KSxjaGVja3N1bTpuKHQsMjIsNCkscGFnZVNlZ21lbnRzOnIsc2VnbWVudFRhYmxlOml9LHM9W10sdT0yNytyWzBdO2lmKGkuZm9yRWFjaChmdW5jdGlvbihlKXtzLnB1c2gobih0LHUsZSkpLHUrPWV9KSwhcy5sZW5ndGgpdGhyb3cgbmV3IF8uTm9TZWdtZW50c0luUGFnZUVycm9yKFwiTm8gc2VnbWVudHMuXCIpO3ZhciBkPWwuY2FsY3VsYXRlQ1JDKFt5LGEudmVyc2lvbixhLnR5cGUsYS5ncmFudWxlUG9zaXRpb24sYS5iaXRzdHJlYW1TZXJpYWxOdW1iZXIsYS5wYWdlU2VxdWVuY2VOdW1iZXIsdixyLGldLmNvbmNhdChzKSksZj1vKGEuY2hlY2tzdW0uYnVmZmVyKTtpZihkIT09Zil0aHJvdyBuZXcgYy5DaGVja3N1bUZhaWxlZEVycm9yKFwiQ2hlY2tzdW0gZmFpbGVkLlwiKTtyZXR1cm57aGVhZGVyOmEsc2VnbWVudHM6cyxlbnRpcmVQYWdlOm4odCwwLHUpfX1mdW5jdGlvbiBzKGUpe2lmKCFlLmxlbmd0aClyZXR1cm5bXTt2YXIgdD1vKGVbMF0uaGVhZGVyLmJpdHN0cmVhbVNlcmlhbE51bWJlci5idWZmZXIpLHI9LTEsbj1udWxsLGk9W107cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihhLHMpe2lmKG8oYS5oZWFkZXIuYml0c3RyZWFtU2VyaWFsTnVtYmVyLmJ1ZmZlcikhPT10KXRocm93IG5ldyBkLlBhZ2VGcm9tRGlmZmVyZW50Qml0c3RyZWFtRXJyb3IoXCJHb3QgYSBwYWdlIGZyb20gYSBkaWZmZXJlbnQgYml0c3RyZWFtLlwiKTt2YXIgdT1vKGEuaGVhZGVyLnBhZ2VTZXF1ZW5jZU51bWJlci5idWZmZXIpO2lmKHU8PXIpdGhyb3cgbmV3IGYuUGFnZVNlcXVlbmNlTnVtYmVyRGlkTm90SW5jcmVtZW50RXJyb3IoXCJQYWdlIHNlcXVlbmNlIG51bWJlciB3YXMgbm90IGdyZWF0ZXIgdGhhbiB0aGUgcHJldmlvdXMgb25lLlwiKTt2YXIgbD11IT09cisxO3I9dTt2YXIgYz1hLmhlYWRlci50eXBlWzBdLF89ISEoMSZjKSx5PSEhKDImYyk7aWYoeSYmcz4wKXRocm93IG5ldyBwLlVuZXhwZWN0ZWRCT1NFcnJvcihcIkdvdCBCT1Mgb24gYSBwYWdlIHdoaWNoIGlzIG5vdCB0aGUgZmlyc3QuXCIpO3ZhciB2PSEhKDQmYyk7aWYodiYmcyE9PWUubGVuZ3RoLTEpdGhyb3cgbmV3IGguVW5leHBlY3RlZEVPU0Vycm9yKFwiR290IEVPUyBvbiBhIHBhZ2Ugd2hpY2ggaXMgbm90IHRoZSBsYXN0LlwiKTt2YXIgbT0wO2wmJihuPW51bGwpO3ZhciBFPWEuc2VnbWVudHMubGVuZ3RoO2Euc2VnbWVudHMuZm9yRWFjaChmdW5jdGlvbihlLHQpe2lmKG4/bi5kYXRhPWcoW24uZGF0YSxlXSk6XyYmMD09PXR8fChuPXtncmFudWxlUG9zaXRpb246bnVsbCxwYWdlU2VxdWVuY2VOdW1iZXI6cixwYWNrZXRPZmZzZXQ6bSxkaXNjb250aW51aXR5OmwmJjA9PT1tLGZpcnN0OnkmJjA9PT1tLGxhc3Q6ITEsZGF0YTplfSxtKyspLG4mJmUuYnl0ZUxlbmd0aDwyNTUpe3ZhciBzPXQ9PT1FLTE7cyYmKG4uZ3JhbnVsZVBvc2l0aW9uPW8oYS5oZWFkZXIuZ3JhbnVsZVBvc2l0aW9uLmJ1ZmZlcikpLG4ubGFzdD12JiZzLGkucHVzaChuKSxuPW51bGx9fSl9KSxpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciB1PXIoOSksbD1yKDgpLGM9cigxKSxkPXIoMyksZj1yKDQpLHA9cig1KSxoPXIoNiksXz1yKDIpLGc9dS5oZWxwZXJzLmFycmF5QnVmZmVyLmNvbWJpbmUseT1uZXcgVWludDhBcnJheShbNzksMTAzLDEwMyw4M10pLHY9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDBdKTt0LnJldHJpZXZlUGFnZXM9aSx0LnBhcnNlUGFnZT1hLHQucmV0cmlldmVQYWNrZXRzPXN9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3ZhciB0PTA7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0PXQ8PDheb1t0Pj4yNCYyNTVeZVtyXV19KSx0Pj4+MH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1uZXcgVWludDMyQXJyYXkoWzAsNzk3NjQ5MTksMTU5NTI5ODM4LDIyMjUwNDY2NSwzMTkwNTk2NzYsMzk4ODE0MDU5LDQ0NTAwOTMzMCw1MDc5OTAwMjEsNjM4MTE5MzUyLDU4MzY1OTUzNSw3OTc2MjgxMTgsNzI2Mzg3NTUzLDg5MDAxODY2MCw4MzU1NTI5NzksMTAxNTk4MDA0Miw5NDQ3NTAwMTMsMTI3NjIzODcwNCwxMjIxNjQxOTI3LDExNjczMTkwNzAsMTA5NTk1NzkyOSwxNTk1MjU2MjM2LDE1NDA2NjUzNzEsMTQ1Mjc3NTEwNiwxMzgxNDAzNTA5LDE3ODAwMzczMjAsMTg1OTY2MDY3MSwxNjcxMTA1OTU4LDE3MzM5NTU2MDEsMjAzMTk2MDA4NCwyMTExNTkzODkxLDE4ODk1MDAwMjYsMTk1MjM0Mzc1NywyNTUyNDc3NDA4LDI2MzIxMDA2OTUsMjQ0MzI4Mzg1NCwyNTA2MTMzNTYxLDIzMzQ2MzgxNDAsMjQxNDI3MTg4MywyMTkxOTE1ODU4LDIyNTQ3NTk2NTMsMzE5MDUxMjQ3MiwzMTM1OTE1NzU5LDMwODEzMzA3NDIsMzAwOTk2OTUzNywyOTA1NTUwMjEyLDI4NTA5NTk0MTEsMjc2MjgwNzAxOCwyNjkxNDM1MzU3LDM1NjAwNzQ2NDAsMzUwNTYxNDg4NywzNzE5MzIxMzQyLDM2NDgwODA3MTMsMzM0MjIxMTkxNiwzMjg3NzQ2Mjk5LDM0Njc5MTEyMDIsMzM5NjY4MTEwOSw0MDYzOTIwMTY4LDQxNDM2ODUwMjMsNDIyMzE4Nzc4Miw0Mjg2MTYyNjczLDM3NzkwMDAwNTIsMzg1ODc1NDM3MSwzOTA0Njg3NTE0LDM5Njc2NjgyNjksODgxMjI1ODQ3LDgwOTk4NzUyMCwxMDIzNjkxNTQ1LDk2OTIzNDA5NCw2NjI4MzI4MTEsNTkxNjAwNDEyLDc3MTc2Nzc0OSw3MTcyOTk4MjYsMzExMzM2Mzk5LDM3NDMwODk4NCw0NTM4MTM5MjEsNTMzNTc2NDcwLDI1ODgxMzYzLDg4ODY0NDIwLDEzNDc5NTM4OSwyMTQ1NTIwMTAsMjAyMzIwNTYzOSwyMDg2MDU3NjQ4LDE4OTcyMzg2MzMsMTk3Njg2NDIyMiwxODA0ODUyNjk5LDE4Njc2OTQxODgsMTY0NTM0MDM0MSwxNzI0OTcxNzc4LDE1ODc0OTY2MzksMTUxNjEzMzEyOCwxNDYxNTUwNTQ1LDE0MDY5NTE1MjYsMTMwMjAxNjA5OSwxMjMwNjQ2NzQwLDExNDI0OTE5MTcsMTA4NzkwMzQxOCwyODk2NTQ1NDMxLDI4MjUxODE5ODQsMjc3MDg2MTU2MSwyNzE2MjYyNDc4LDMyMTUwNDQ2ODMsMzE0MzY3NTM4OCwzMDU1NzgyNjkzLDMwMDExOTQxMzAsMjMyNjYwNDU5MSwyMzg5NDU2NTM2LDIyMDA4OTk2NDksMjI4MDUyNTMwMiwyNTc4MDEzNjgzLDI2NDA4NTUxMDgsMjQxODc2MzQyMSwyNDk4Mzk0OTIyLDM3Njk5MDA1MTksMzgzMjg3MzA0MCwzOTEyNjQwMTM3LDM5OTI0MDI3NTAsNDA4ODQyNTI3NSw0MTUxNDA4MjY4LDQxOTc2MDEzNjUsNDI3NzM1ODA1MCwzMzM0MjcxMDcxLDMyNjMwMzI4MDgsMzQ3Njk5ODk2MSwzNDIyNTQxNDQ2LDM1ODU2NDAwNjcsMzUxNDQwNzczMiwzNjk0ODM3MjI5LDM2NDAzNjkyNDIsMTc2MjQ1MTY5NCwxODQyMjE2MjgxLDE2MTk5NzUwNDAsMTY4Mjk0OTY4NywyMDQ3MzgzMDkwLDIxMjcxMzc2NjksMTkzODQ2ODE4OCwyMDAxNDQ5MTk1LDEzMjU2NjU2MjIsMTI3MTIwNjExMywxMTgzMjAwODI0LDExMTE5NjA0NjMsMTU0MzUzNTQ5OCwxNDg5MDY5NjI5LDE0MzQ1OTk2NTIsMTM2MzM2OTI5OSw2MjI2NzI3OTgsNTY4MDc1ODE3LDc0ODYxNzk2OCw2NzcyNTY1MTksOTA3NjI3ODQyLDg1MzAzNzMwMSwxMDY3MTUyOTQwLDk5NTc4MTUzMSw1MTc2MjcyNiwxMzEzODYyNTcsMTc3NzI4ODQwLDI0MDU3ODgxNSwyNjk1OTA3NzgsMzQ5MjI0MjY5LDQyOTEwNDAyMCw0OTE5NDc1NTUsNDA0NjQxMTI3OCw0MTI2MDM0ODczLDQxNzIxMTUyOTYsNDIzNDk2NTIwNywzNzk0NDc3MjY2LDM4NzQxMTA4MjEsMzk1MzcyODQ0NCw0MDE2NTcxOTE1LDM2MDk3MDUzOTgsMzU1NTEwODM1MywzNzM1Mzg4Mzc2LDM2NjQwMjY5OTEsMzI5MDY4MDY4MiwzMjM2MDkwMDc3LDM0NDk5NDM1NTYsMzM3ODU3MjIxMSwzMTc0OTkzMjc4LDMxMjA1MzM3MDUsMzAzMjI2NjI1NiwyOTYxMDI1OTU5LDI5MjMxMDEwOTAsMjg2ODYzNTE1NywyODEzOTAzMDUyLDI3NDI2NzI3NjMsMjYwNDAzMjE5OCwyNjgzNzk2ODQ5LDI0NjEyOTM0ODAsMjUyNDI2ODA2MywyMjg0OTgzODM0LDIzNjQ3Mzg0NzcsMjE3NTgwNjgzNiwyMjM4Nzg3Nzc5LDE1NjkzNjIwNzMsMTQ5ODEyMzU2NiwxNDA5ODU0NDU1LDEzNTUzOTY2NzIsMTMxNzk4NzkwOSwxMjQ2NzU1ODI2LDExOTIwMjUzODcsMTEzNzU1NzY2MCwyMDcyMTQ5MjgxLDIxMzUxMjIwNzAsMTkxMjYyMDYyMywxOTkyMzgzNDgwLDE3NTM2MTUzNTcsMTgxNjU5ODA5MCwxNjI3NjY0NTMxLDE3MDc0MjA5NjQsMjk1MzkwMTg1LDM1ODI0MTg4Niw0MDQzMjAzOTEsNDgzOTQ1Nzc2LDQzOTkwMzI1LDEwNjgzMjAwMiwxODY0NTE1NDcsMjY2MDgzMzA4LDkzMjQyMzI0OSw4NjEwNjAwNzAsMTA0MTM0MTc1OSw5ODY3NDI5MjAsNjEzOTI5MTAxLDU0MjU1OTU0Niw3NTY0MTEzNjMsNzAxODIyNTQ4LDMzMTYxOTY5ODUsMzI0NDgzMzc0MiwzNDI1Mzc3NTU5LDMzNzA3Nzg3ODQsMzYwMTY4MjU5NywzNTMwMzEyOTc4LDM3NDQ0MjY5NTUsMzY4OTgzODIwNCwzODE5MDMxNDg5LDM4ODE4ODMyNTQsMzkyODIyMzkxOSw0MDA3ODQ5MjQwLDQwMzczOTM2OTMsNDEwMDIzNTQzNCw0MTgwMTE3MTA3LDQyNTk3NDg4MDQsMjMxMDYwMTk5MywyMzczNTc0ODQ2LDIxNTEzMzU1MjcsMjIzMTA5ODMyMCwyNTk2MDQ3ODI5LDI2NTkwMzA2MjYsMjQ3MDM1OTIyNywyNTUwMTE1NTk2LDI5NDc1NTE0MDksMjg3NjMxMjgzOCwyNzg4MzA1ODg3LDI3MzM4NDgxNjgsMzE2NTkzOTMwOSwzMDk0NzA3MTYyLDMwNDAyMzg4NTEsMjk4NTc3MTE4OF0pO3QuY2FsY3VsYXRlQ1JDPW59LGZ1bmN0aW9uKHQscil7dC5leHBvcnRzPWV9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe2Zvcih2YXIgciBpbiBlKXQuaGFzT3duUHJvcGVydHkocil8fCh0W3JdPWVbcl0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj1cIjEzLjAuMFwiLHQuYnVpbGROdW1iZXI9MTA4NSxuKHIoNykpO3ZhciBvPXIoMCk7dC5PZ2dQYXJzZXJFcnJvcj1vLk9nZ1BhcnNlckVycm9yO3ZhciBpPXIoMSk7dC5DaGVja3N1bUZhaWxlZEVycm9yPWkuQ2hlY2tzdW1GYWlsZWRFcnJvcjt2YXIgYT1yKDIpO3QuTm9TZWdtZW50c0luUGFnZUVycm9yPWEuTm9TZWdtZW50c0luUGFnZUVycm9yO3ZhciBzPXIoMyk7dC5QYWdlRnJvbURpZmZlcmVudEJpdHN0cmVhbUVycm9yPXMuUGFnZUZyb21EaWZmZXJlbnRCaXRzdHJlYW1FcnJvcjt2YXIgdT1yKDQpO3QuUGFnZVNlcXVlbmNlTnVtYmVyRGlkTm90SW5jcmVtZW50RXJyb3I9dS5QYWdlU2VxdWVuY2VOdW1iZXJEaWROb3RJbmNyZW1lbnRFcnJvcjt2YXIgbD1yKDUpO3QuVW5leHBlY3RlZEJPU0Vycm9yPWwuVW5leHBlY3RlZEJPU0Vycm9yO3ZhciBjPXIoNik7dC5VbmV4cGVjdGVkRU9TRXJyb3I9Yy5VbmV4cGVjdGVkRU9TRXJyb3J9XSl9KX0sZnVuY3Rpb24oZSx0LHIpeyFmdW5jdGlvbih0LG4pe2UuZXhwb3J0cz1uKHIoMikpfSh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4pe2lmKHJbbl0pcmV0dXJuIHJbbl0uZXhwb3J0czt2YXIgbz1yW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtuXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyx0KSxvLmw9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiB0Lm09ZSx0LmM9cix0Lmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHQuZD1mdW5jdGlvbihlLHIsbil7dC5vKGUscil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpufSl9LHQubj1mdW5jdGlvbihlKXt2YXIgcj1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdC5kKHIsXCJhXCIscikscn0sdC5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSx0LnA9XCJcIix0KHQucz0zKX0oW2Z1bmN0aW9uKHQscil7dC5leHBvcnRzPWV9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3ZhciB0PTMmZVswXTtyZXR1cm4gMD09PXQ/MTozIT09dD8yOjYzJmVbMV19ZnVuY3Rpb24gbyhlKXt2YXIgdD1lWzBdPj4+MyYzMTtpZih0Pj1mLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvbmZpZ3VyYXRpb24uXCIpO3JldHVybiBmW3RdfWZ1bmN0aW9uIGkoZSl7aWYoIWUuZmlyc3QpdGhyb3cgbmV3IEVycm9yKFwiT3B1c0hlYWQgaXMgYWx3YXlzIGluIHRoZSBmaXJzdCBwYWNrZXQuXCIpO3ZhciB0PWUuZGF0YSxyPW5ldyBEYXRhVmlldyh0LmJ1ZmZlciksbj1yLmdldFVpbnQ4KDkpLG89ci5nZXRVaW50OCgxNyksaT12b2lkIDAsYT12b2lkIDAscz12b2lkIDA7aWYobz4wKXtpPXIuZ2V0VWludDgoMTgpLGE9ci5nZXRVaW50OCgxOSkscz1bXTtmb3IodmFyIHU9MDt1PG47dSsrKXMucHVzaChyLmdldFVpbnQ4KDIwK3UpKX1yZXR1cm57dmVyc2lvbjpyLmdldFVpbnQ4KDgpLGNoYW5uZWxDb3VudDpuLHByZVNraXA6ci5nZXRVaW50MTYoMTAsITApLGlucHV0U2FtcGxlUmF0ZTpyLmdldFVpbnQzMigxMiwhMCksb3V0cHV0R2FpbjpyLmdldFVpbnQxNigxNiksY2hhbm5lbE1hcEZhbWlseTpvLHN0cmVhbUNvdW50OmksdHdvQ2hhbm5lbFN0cmVhbUNvdW50OmEsY2hhbm5lbE1hcHBpbmdUYWJsZTpzfX1mdW5jdGlvbiBhKGUpe3ZhciB0PWVbMF07aWYoIXR8fCF0LmZpcnN0KXRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgc3RhcnQgb2Ygc3RyZWFtLlwiKTt2YXIgcj1lLnNsaWNlKDIpLGE9aSh0KSxzPTAsbD0wLGY9ci5tYXAoZnVuY3Rpb24oZSx0KXtpZihlLmRpc2NvbnRpbnVpdHkmJnQ+MCl0aHJvdyBuZXcgRXJyb3IoXCJEaXNjb250aW51aXRpZXMgYWZ0ZXIgZmlyc3QgYXVkaW8gcGFja2V0IG5vdCBzdXBwb3J0ZWQuXCIpO3ZhciByPW5ldyBVaW50OEFycmF5KDQpO3JbMF09MTI5LG5ldyBEYXRhVmlldyhyLmJ1ZmZlcikuc2V0SW50MTYoMSxsKSxyWzNdPTEyODt2YXIgaT1uKGUuZGF0YSk7cmV0dXJuIHMrPWksbCs9aSpvKGUuZGF0YSksdS5lbmNvZGVFbGVtZW50KHUuSURTLlNpbXBsZUJsb2NrLGMoW3IsZS5kYXRhXSkpfSkscD1jKFt1LmVuY29kZUVsZW1lbnQodS5JRFMuRUJNTCxmdW5jdGlvbigpe3JldHVybiBjKFt1LmVuY29kZUVsZW1lbnQodS5JRFMuRUJNTFZlcnNpb24sZCgxKSksdS5lbmNvZGVFbGVtZW50KHUuSURTLkVCTUxSZWFkVmVyc2lvbixkKDEpKSx1LmVuY29kZUVsZW1lbnQodS5JRFMuRUJNTE1heElETGVuZ3RoLGQoNCkpLHUuZW5jb2RlRWxlbWVudCh1LklEUy5FQk1MTWF4U2l6ZUxlbmd0aCxkKDgpKSx1LmVuY29kZUVsZW1lbnQodS5JRFMuRG9jVHlwZSxuZXcgVWludDhBcnJheShbMTE5LDEwMSw5OCwxMDldKSksdS5lbmNvZGVFbGVtZW50KHUuSURTLkRvY1R5cGVWZXJzaW9uLGQoMSkpLHUuZW5jb2RlRWxlbWVudCh1LklEUy5Eb2NUeXBlUmVhZFZlcnNpb24sZCgyKSldKX0oKSksdS5lbmNvZGVFbGVtZW50KHUuSURTLlNlZ21lbnQsZnVuY3Rpb24oKXtyZXR1cm4gdS5lbmNvZGVFbGVtZW50KHUuSURTLkluZm8sZnVuY3Rpb24oKXtyZXR1cm4gdS5lbmNvZGVFbGVtZW50KHUuSURTLkR1cmF0aW9uLGZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoOCk7cmV0dXJuIG5ldyBEYXRhVmlldyhlLmJ1ZmZlcikuc2V0RmxvYXQ2NCgwLGwpLGV9KCkpfSgpKX0oKSksdS5lbmNvZGVFbGVtZW50KHUuSURTLlRyYWNrcyxmdW5jdGlvbigpe3JldHVybiB1LmVuY29kZUVsZW1lbnQodS5JRFMuVHJhY2tFbnRyeSxmdW5jdGlvbigpe3JldHVybiBjKFt1LmVuY29kZUVsZW1lbnQodS5JRFMuVHJhY2tOdW1iZXIsZCgxKSksdS5lbmNvZGVFbGVtZW50KHUuSURTLlRyYWNrVUlELGQoMSkpLHUuZW5jb2RlRWxlbWVudCh1LklEUy5GbGFnTGFjaW5nLGQoMCkpLHUuZW5jb2RlRWxlbWVudCh1LklEUy5Db2RlY0lELG5ldyBVaW50OEFycmF5KFs2NSw5NSw3OSw4MCw4NSw4M10pKSx1LmVuY29kZUVsZW1lbnQodS5JRFMuQ29kZWNEZWxheSxkKGEucHJlU2tpcC80OGUzKjFlOSkpLHUuZW5jb2RlRWxlbWVudCh1LklEUy5TZWVrUHJlUm9sbCxuZXcgVWludDhBcnJheShbNCwxOTYsMTgwLDBdKSksdS5lbmNvZGVFbGVtZW50KHUuSURTLlRyYWNrVHlwZSxkKDIpKSx1LmVuY29kZUVsZW1lbnQodS5JRFMuQXVkaW8sZnVuY3Rpb24oKXtyZXR1cm4gYyhbdS5lbmNvZGVFbGVtZW50KHUuSURTLkNoYW5uZWxzLGQoYS5jaGFubmVsQ291bnQpKSx1LmVuY29kZUVsZW1lbnQodS5JRFMuU2FtcGxpbmdGcmVxdWVuY3ksbmV3IFVpbnQ4QXJyYXkoWzY0LDIzMSwxMTIsMCwwLDAsMCwwXSkpXSl9KCkpLHUuZW5jb2RlRWxlbWVudCh1LklEUy5Db2RlY1ByaXZhdGUsdC5kYXRhKV0pfSgpKX0oKSldKSxoPXUuZW5jb2RlRWxlbWVudCh1LklEUy5DbHVzdGVyLGZ1bmN0aW9uKCl7dmFyIGU9W3UuZW5jb2RlRWxlbWVudCh1LklEUy5UaW1lY29kZSxkKDApKV07cmV0dXJuIGUucHVzaC5hcHBseShlLGYpLGMoZSl9KCkpO3JldHVybntpbml0RGF0YTpwLGRhdGE6aH19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9cigwKSx1PXIoMiksbD1zLmhlbHBlcnMuYXJyYXlCdWZmZXIsYz1sLmNvbWJpbmUsZD1sLm51bWJlclRvVWludDhBcnJheSxmPVsxMCwyMCw0MCw2MCwxMCwyMCw0MCw2MCwxMCwyMCw0MCw2MCwxMCwyMCwxMCwyMCwyLjUsNSwxMCwyMCwyLjUsNSwxMCwyMCwyLjUsNSwxMCwyMCwyLjUsNSwxMCwyMF07dC5idWlsZFdlYm09YX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0KXt2YXIgcj1zKGUpLG49dSh0LmJ5dGVMZW5ndGgpO3JldHVybiBhKFtyLG4sdF0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1vLmhlbHBlcnMuYXJyYXlCdWZmZXIsYT1pLmNvbWJpbmUscz1pLm51bWJlclRvVWludDhBcnJheSx1PWkuY3JlYXRlVmludEJ1ZmZlcjt0LklEUz17RUJNTDo0NDA3ODY4NTEsRUJNTFZlcnNpb246MTcwMzAsRUJNTFJlYWRWZXJzaW9uOjE3MTQzLEVCTUxNYXhJRExlbmd0aDoxNzEzOCxFQk1MTWF4U2l6ZUxlbmd0aDoxNzEzOSxEb2NUeXBlOjE3MDI2LERvY1R5cGVWZXJzaW9uOjE3MDMxLERvY1R5cGVSZWFkVmVyc2lvbjoxNzAyOSxTZWdtZW50OjQwODEyNTU0MyxJbmZvOjM1NzE0OTAzMCxEdXJhdGlvbjoxNzU0NSxUcmFja3M6Mzc0NjQ4NDI3LFRyYWNrRW50cnk6MTc0LFRyYWNrTnVtYmVyOjIxNSxUcmFja1VJRDoyOTYzNyxGbGFnTGFjaW5nOjE1NixDb2RlY0lEOjEzNCxDb2RlY0RlbGF5OjIyMTg2LFNlZWtQcmVSb2xsOjIyMjAzLFRyYWNrVHlwZToxMzEsQXVkaW86MjI1LENoYW5uZWxzOjE1OSxTYW1wbGluZ0ZyZXF1ZW5jeToxODEsQ29kZWNQcml2YXRlOjI1NTA2LENsdXN0ZXI6NTI0NTMxMzE3LFRpbWVjb2RlOjIzMSxTaW1wbGVCbG9jazoxNjN9LHQuZW5jb2RlRWxlbWVudD1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtmb3IodmFyIHIgaW4gZSl0Lmhhc093blByb3BlcnR5KHIpfHwodFtyXT1lW3JdKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnZlcnNpb249XCIxMy4wLjBcIix0LmJ1aWxkTnVtYmVyPTEwODUsbihyKDEpKX1dKX0pfSxmdW5jdGlvbihlLHQscil7IWZ1bmN0aW9uKHQsbil7ZS5leHBvcnRzPW4ocigyKSl9KHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIHQubT1lLHQuYz1yLHQuaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sdC5kPWZ1bmN0aW9uKGUscixuKXt0Lm8oZSxyKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sdC5uPWZ1bmN0aW9uKGUpe3ZhciByPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQocixcImFcIixyKSxyfSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD1cIlwiLHQodC5zPTgpfShbZnVuY3Rpb24odCxyKXt0LmV4cG9ydHM9ZX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuY2FsbCh0aGlzLFwiQW4gdW5yZWNvdmVyYWJsZSBlcnJvciBvY2N1cnJlZCB3aGlsc3QgZGVjb2RpbmcuXCIpfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiSFRNTDVfUExBWUVSLkRFQ09ERV9FUlJPUlwifSx0fShvLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKTt0LkRlY29kZUVycm9yPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDApLGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBlLmNhbGwodGhpcyxcIkFuIHVucmVjb3ZlcmFibGUgbmV0d29yayBlcnJvciBvY2N1cnJlZC5cIil8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuXCJIVE1MNV9QTEFZRVIuTkVUV09SS19FUlJPUlwifSx0fShvLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKTt0Lk5ldHdvcmtFcnJvcj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtmb3IodmFyIHQ9W10scj1lLmxlbmd0aCxuPTA7bjxyO24rKyl0LnB1c2goe2VuZDoxZTMqZS5lbmQobiksc3RhcnQ6MWUzKmUuc3RhcnQobil9KTtyZXR1cm4gby5UaW1lUmFuZ2Uubm9ybWFsaXplUmF3VGltZVJhbmdlcyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvLlRpbWVSYW5nZShlLnN0YXJ0LGUuZW5kLWUuc3RhcnQpfSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKTt0LmJ1aWxkVGltZVJhbmdlcz1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG4sbz1yKDEpLGk9cigyKTshZnVuY3Rpb24oZSl7ZS5EZWNvZGVFcnJvcj1vLkRlY29kZUVycm9yLGUuTmV0d29ya0Vycm9yPWkuTmV0d29ya0Vycm9yfShuPXQuZXJyb3JzfHwodC5lcnJvcnM9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuLG89cigzKTshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe2UuYnVpbGRUaW1lUmFuZ2VzPW8uYnVpbGRUaW1lUmFuZ2VzfSh0PWUudGltZVJhbmdlc3x8KGUudGltZVJhbmdlcz17fSkpfShuPXQuaGVscGVyc3x8KHQuaGVscGVycz17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtlLmxvYWQoKX12YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1yKDApLGE9cigxKSxzPXIoMiksdT1yKDMpLGw9cig3KSxjPWkuaGVscGVycy5kZWZlcnJlZC5idWlsZERlZmVycmVkLGQ9aS5oZWxwZXJzLnVybC5nZXRFeHRlbnNpb24sZj1pLmhlbHBlcnMuUHJvbWlzZSxwPWkuaGVscGVycy5jb21wYWN0LGg9aS5sb2dnZXIucHJlZml4TG9nZ2VyLF89aS5lcnJvcnMuTm90U3VwcG9ydGVkRXJyb3IsZz1pLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yLHk9bmV3IEVycm9yKFwiTWVkaWEgZWxlbWVudCB3YXMgcmV2b2tlZC5cIiksdj0xMCxtPTIwMCxFPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgbj1lLmNhbGwodGhpcyxyKXx8dGhpcztuLl9kdXJhdGlvbj1udWxsLG4uX3N0YWxsRGV0ZWN0ZWQ9ITEsbi5faW5pdGlhbGl6ZWQ9ITEsbi5fZGVmZXJyZWRQcm92aWRlTWVkaWFFbGVtZW50Q2FsbGJhY2s9bnVsbCxuLl9wbGF5SW5Qcm9ncmVzcz17aW5Qcm9ncmVzczohMX0sbi5fbGFzdFN0YWxsQ2hlY2tQb3M9bnVsbCxuLl9zdGFsbENoZWNrVGltZXJJZD1udWxsLG4uX2VuZGVkT3ZlcnJpZGU9ITEsbi5fdm9sdW1lPTEsbi5fbXV0ZWQ9ITEsbi5fcGF1c2VFdmVudFRpbWVyPW51bGwsbi5fcG9zaXRpb25XaGVuTWVkaWFFbGVtZW50UmV2b2tlZD0wLG4uX3BsYXlpbmdXaGVuTWVkaWFFbGVtZW50UmV2b2tlZD0hMSxuLl9wcm92aWRlTWVkaWFFbGVtZW50RGVmZXJyZWQ9bnVsbCxuLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZT1udWxsLG4uX2xpc3RlbmVycz1bXSxuLl9jdXJyZW50U2Vla0NhbGxiYWNrPW51bGwsbi5fcGxheURldGVjdGlvblBvc2l0aW9uPTAsbi5fcGxheURldGVjdGlvblRpbWVyPW51bGwsbi5fcGxheURldGVjdGlvblRpbWVyTnVtQXR0ZW1wdHM9MCxuLl9sb2dnZXI9aChuLl9sb2dnZXIsXCJIVE1MNVBsYXllclwiKSxuLl9kZXNjcmlwdG9yPXQsbi5fcGxheWVyRGVwZW5kZW5jaWVzPXIsbi5fbWltZVR5cGU9dC5nZXRGb3JtYXQoKS5taW1lVHlwZXx8bi5fYnVpbGRNaW1lVHlwZUFuZENvZGVjU3RyaW5nKHQuZ2V0Rm9ybWF0KCksbi5faW5mZXJGb3JtYXQodC5nZXRVcmwoKSkpO3ZhciBvPXZvaWQgMCE9PXIubWVkaWFFbGVtZW50P3IubWVkaWFFbGVtZW50Om4uX2NyZWF0ZURlZmF1bHRNZWRpYUVsZW1lbnQoKTtyZXR1cm4gbyYmbi5wcm92aWRlTWVkaWFFbGVtZW50KG8pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09eT92b2lkIG4uX2xvZ2dlci5kZWJ1ZyhcIkluaXRpYWwgcHJvdmlkZU1lZGlhRWxlbWVudCgpIGNhbGwgd2FzIGFib3J0ZWQuXCIpOnZvaWQgbi5fdHJpZ2dlckVycm9yKG5ldyBsLkluaXRpYWxpemVFcnJvcihlKSl9KSxuLl9sb2dnZXIuaW5mbyhcIkNoZWNraW5nIGlmIHRoZSBwbGF5ZXIgY2FuIHBsYXkgdGhlIHByb3ZpZGVkIGRlc2NyaXB0b3IuXCIpLG4uX2NhblBsYXlUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe24uX2NhblBsYXkoKS50aGVuKGZ1bmN0aW9uKGUpe2lmKCFuLmlzRGVhZCgpKXJldHVybiBlIGluc3RhbmNlb2YgaS5lcnJvcnMuTm90U3VwcG9ydGVkRXJyb3I/KG4uX2xvZ2dlci5pbmZvKFwiUGxheWVyIG5vdCBzdXBwb3J0ZWQuXCIsZSksdm9pZCBuLl90cmlnZ2VyRXJyb3IoZSkpOmU/KG4uX2xvZ2dlci5pbmZvKFwiUGxheWVyIHN1cHBvcnRlZC5cIiksdm9pZCBuLl9pbml0aWFsaXplKCkpOihuLl9sb2dnZXIuaW5mbyhcIlBsYXllciBub3Qgc3VwcG9ydGVkLlwiKSx2b2lkIG4uX3RyaWdnZXJFcnJvcihuZXcgXykpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5fbG9nZ2VyLmVycm9yKFwiVW5leHBlY3RlZCBlcnJvciBkdXJpbmcgY2FuIHBsYXkgY2hlY2suXCIsZSksbi5fdHJpZ2dlckVycm9yKG5ldyBnKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi5cIixlKSl9KX0sMCksbn1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLmdldE1lZGlhRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSYmdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudH0sdC5wcm90b3R5cGUucHJvdmlkZU1lZGlhRWxlbWVudD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX2Vuc3VyZU5vdERlYWQoKSx0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGhhdmUgYSBtZWRpYSBlbGVtZW50LlwiKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJwcm92aWRlTWVkaWFFbGVtZW50KCkgY2FsbGVkLlwiLGUpLHRoaXMuX2luaXRNZWRpYUVsZW1lbnRMb2NhbChlLG51bGwpO3ZhciByPXRoaXMuX3Byb3ZpZGVNZWRpYUVsZW1lbnREZWZlcnJlZD1jKCksbj10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZT17ZWxlbWVudDplLHN0YXRlOlwiSU5JVElBTElaSU5HXCJ9LG89ZnVuY3Rpb24oKXt0Ll9sb2dnZXIuZGVidWcoXCJJbml0aWFsaXppbmcgbWVkaWEgZWxlbWVudC5cIiksdC5faW5pdE1lZGlhRWxlbWVudChlLHQuX2Rlc2NyaXB0b3IuZ2V0VXJsKCkpLHQuX2F0dGFjaExpc3RlbmVycygpO3ZhciBvPXQuX2xpc3RlblRvT25jZShcImVycm9yXCIsZnVuY3Rpb24oKXt0Ll9wcm92aWRlTWVkaWFFbGVtZW50RGVmZXJyZWQ9bnVsbDt2YXIgbj1lLmVycm9yLmNvZGUrXCIgPSBcIisoZS5lcnJvci5tZXNzYWdlfHxcIlt1bmtub3duXVwiKTt0Ll9sb2dnZXIuZXJyb3IoXCJFcnJvciB3aGlsc3QgaW5pdGlhbGl6aW5nIG1lZGlhIGVsZW1lbnQuXCIsbiksdC5yZXZva2VNZWRpYUVsZW1lbnQoKSxyLnJlamVjdChuZXcgRXJyb3IoXCJFcnJvciB3aGVuIGluaXRpYWxpemluZyBtZWRpYSBlbGVtZW50LiBFcnJvcjogXCIrbikpfSx7ZWFybHlBdHRhY2g6ITB9KTt0Ll9saXN0ZW5Ub09uY2UoXCJsb2FkZWRkYXRhXCIsZnVuY3Rpb24oKXt0Ll9sb2dnZXIuZGVidWcoXCJHb3QgbG9hZGVkZGF0YSBldmVudCBmcm9tIG1lZGlhIGVsZW1lbnQuXCIpLGkoKX0se2Vhcmx5QXR0YWNoOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXt0Ll9sb2dnZXIuZGVidWcoXCJQdXR0aW5nIG1lZGlhIGVsZW1lbnQgaW4gdGhlIHN0YXRlIHRoYXQgaXMgZXhwZWN0ZWQuLi5cIiksYSgpfSxhPWZ1bmN0aW9uKCl7bnVsbD09PXQuX2dldFF1ZXVlZFNlZWtQb3NpdGlvbigpJiZ0Ll9wb3NpdGlvbldoZW5NZWRpYUVsZW1lbnRSZXZva2VkPjA/KHQuX2xvZ2dlci5kZWJ1ZyhcIlNlZWtpbmcgdG8gZXhwZWN0ZWQgcG9zaXRpb24uLi5cIiksdC5fcGVyZm9ybVNlZWsodC5fcG9zaXRpb25XaGVuTWVkaWFFbGVtZW50UmV2b2tlZCxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZT8odC5fcHJvdmlkZU1lZGlhRWxlbWVudERlZmVycmVkPW51bGwsdC5fbG9nZ2VyLmVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiB0cnlpbmcgdG8gc2VlayB0byB0aGUgZXhwZWN0ZWQgcG9zaXRpb24uXCIpLHQucmV2b2tlTWVkaWFFbGVtZW50KCksdm9pZCByLnJlamVjdChuZXcgRXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGVuIHRyeWluZyB0byByZXN0b3JlIHRoZSBwb3NpdGlvbi5cIikpKToodC5fbG9nZ2VyLmRlYnVnKFwiU2Vla2VkIHRvIGV4cGVjdGVkIHBvc2l0aW9uLlwiKSx2b2lkIHMoKSl9KSk6cygpfSxzPWZ1bmN0aW9uKCl7dC5pc1BsYXlpbmcoKT09PXQuaXNBY3R1YWxseVBsYXlpbmcoKSYmdC5fcGxheWluZ1doZW5NZWRpYUVsZW1lbnRSZXZva2VkPyh0Ll9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIHBsYXkgdG8gbWF0Y2ggcHJldmlvdXMgc3RhdGUuLi5cIiksdC5fcGxheSgpLmNhdGNoKGZ1bmN0aW9uKCl7dC5fcHJvdmlkZU1lZGlhRWxlbWVudERlZmVycmVkPW51bGwsdC5fbG9nZ2VyLmVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiB0cnlpbmcgdG8gcGxheS5cIiksbj09PXQuX21lZGlhRWxlbWVudEFuZFN0YXRlJiZ0LnJldm9rZU1lZGlhRWxlbWVudCgpLHIucmVqZWN0KG5ldyBFcnJvcihcIkJyb3dzZXIgcmVmdXNlZCBwbGF5KCkgcmVxdWVzdCBvbiBtZWRpYSBlbGVtZW50LlwiKSl9KSx0Ll9saXN0ZW5Ub09uY2UoXCJwbGF5XCIsZnVuY3Rpb24oKXt0Ll9sb2dnZXIuZGVidWcoXCJQbGF5IHN1Y2NlZWRlZC5cIiksdSgpfSx7ZWFybHlBdHRhY2g6ITB9KSk6dSgpfSx1PWZ1bmN0aW9uKCl7cmV0dXJuIHQuX21lZGlhRWxlbWVudEFuZFN0YXRlIT09bj92b2lkIHQuX3RyaWdnZXJFcnJvcihuZXcgZyhcIk1lZGlhIGVsZW1lbnQgc3dpdGNoZWQgdW5leHBlY3RlZGx5LlwiKSk6KHQuX3Byb3ZpZGVNZWRpYUVsZW1lbnREZWZlcnJlZD1udWxsLG8ucmVtb3ZlKCksci5yZXNvbHZlKHZvaWQgMCksdC5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGU9XCJTVEFCTEVcIix0Ll9sb2dnZXIuZGVidWcoXCJGaW5pc2hlZCBwdXR0aW5nIGVsZW1lbnQgaW4gZXhwZWN0ZWQgc3RhdGUuXCIpLHZvaWQobnVsbCE9PXQuX2R1cmF0aW9uJiZ0Ll91cGRhdGUoZnVuY3Rpb24oKXt0LmlzUmVhZHkoKXx8dC5fc2lnbmFsUmVhZHkoKSx0Ll9oYW5kbGVEZWZmZXJyZWRQYXVzZUFuZFNlZWsoKX0pKSl9fTtyZXR1cm4gdGhpcy5faW5pdGlhbGl6ZWQ/bygpOnRoaXMuX2RlZmVycmVkUHJvdmlkZU1lZGlhRWxlbWVudENhbGxiYWNrPW8sdGhpcy5fcHJvdmlkZU1lZGlhRWxlbWVudERlZmVycmVkLnByb21pc2V9LHQucHJvdG90eXBlLnJldm9rZU1lZGlhRWxlbWVudD1mdW5jdGlvbigpe2lmKCF0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBtZWRpYSBlbGVtZW50IHRvIHJldm9rZS5cIik7dGhpcy5fZGVmZXJyZWRQcm92aWRlTWVkaWFFbGVtZW50Q2FsbGJhY2s9bnVsbCx0aGlzLl9wcm92aWRlTWVkaWFFbGVtZW50RGVmZXJyZWQmJih0aGlzLl9wcm92aWRlTWVkaWFFbGVtZW50RGVmZXJyZWQucmVqZWN0KHkpLHRoaXMuX3Byb3ZpZGVNZWRpYUVsZW1lbnREZWZlcnJlZD1udWxsKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJyZXZva2VNZWRpYUVsZW1lbnQoKSBjYWxsZWQuXCIpLHRoaXMuX2RldGFjaExpc3RlbmVycygpO3ZhciBlPXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlLmVsZW1lbnQ7dGhpcy5pc0RlYWQoKXx8KHRoaXMuX3Bvc2l0aW9uV2hlbk1lZGlhRWxlbWVudFJldm9rZWQ9dGhpcy5nZXRQb3NpdGlvbigpLHRoaXMuX3BsYXlpbmdXaGVuTWVkaWFFbGVtZW50UmV2b2tlZD10aGlzLmlzUGxheWluZygpKSx0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZT1udWxsLHRoaXMuX2luaXRNZWRpYUVsZW1lbnQoZSxudWxsKSx0aGlzLmlzRGVhZCgpfHx0aGlzLl9oYW5kbGVTdGFsbGVkKCl9LHQucHJvdG90eXBlLmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWV9LHQucHJvdG90eXBlLmdldE11dGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX211dGVkfSx0LnByb3RvdHlwZS5zZXRNdXRlZD1mdW5jdGlvbihlKXt0aGlzLl9tdXRlZD1lLHRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlJiYodGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5tdXRlZD1lKX0sdC5wcm90b3R5cGUuZ2V0QnVmZmVyZWRUaW1lUmFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlJiZcIlVTQUJMRVwiPT09dGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGU/dS5idWlsZFRpbWVSYW5nZXModGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5idWZmZXJlZCk6W119LHQucHJvdG90eXBlLmdldE1heEJ1ZmZlckxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBudWxsfSx0LnByb3RvdHlwZS5fc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe3RoaXMuX3ZvbHVtZT1lLHRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlJiYodGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC52b2x1bWU9ZSl9LHQucHJvdG90eXBlLl9pbmZlckZvcm1hdD1mdW5jdGlvbihlKXt2YXIgdD1kKGUpO3N3aXRjaCh0KXtjYXNlXCJtcDNcIjpyZXR1cm57bWltZVR5cGU6XCJhdWRpby9tcGVnXCJ9O2Nhc2VcIm9wdXNcIjpyZXR1cm57bWltZVR5cGU6XCJhdWRpby9vZ2dcIixhdWRpb0NvZGVjOntpZDpcIm9wdXNcIn19O2Nhc2VcIm1wNFwiOnJldHVybnttaW1lVHlwZTpcInZpZGVvL21wNFwifTtjYXNlXCJtM3U4XCI6cmV0dXJue21pbWVUeXBlOlwiYXBwbGljYXRpb24veC1tcGVnVVJMXCJ9O2RlZmF1bHQ6cmV0dXJue319fSx0LnByb3RvdHlwZS5fYnVpbGRNaW1lVHlwZUFuZENvZGVjU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciByPWUubWltZVR5cGV8fHQubWltZVR5cGUsbj1lLmF1ZGlvQ29kZWN8fHQuYXVkaW9Db2RlYyxvPWUudmlkZW9Db2RlY3x8dC52aWRlb0NvZGVjLGk9cChbbixvXSksYT1pLmxlbmd0aD4wPyc7IGNvZGVjcz1cIicraS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWR9KS5qb2luKFwiLFwiKSsnXCInOlwiXCI7cmV0dXJuIHIrYX0sdC5wcm90b3R5cGUuX2dldFJlc29sdmVkTWltZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWltZVR5cGV9LHQucHJvdG90eXBlLl9jYW5QbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbWVUeXBlJiZ0aGlzLl9jYW5QbGF5UHJvdG9jb2wodGhpcy5fZGVzY3JpcHRvci5nZXRQcm90b2NvbCgpKSYmdGhpcy5fY2FuUGxheVR5cGUodGhpcy5fbWltZVR5cGUpP2YucmVzb2x2ZSghMCk6Zi5yZXNvbHZlKCExKX0sdC5wcm90b3R5cGUuX2NhblBsYXlQcm90b2NvbD1mdW5jdGlvbihlKXtyZXR1cm5bXCJodHRwXCIsXCJobHNcIl0uaW5kZXhPZihlLm5hbWUpPj0wfSx0LnByb3RvdHlwZS5fY2FuUGxheVR5cGU9ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtyZXR1cm4hIXQuY2FuUGxheVR5cGUoZSl9Y2F0Y2goZSl7cmV0dXJuITF9fSx0LnByb3RvdHlwZS5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5faW5pdGlhbGl6ZWQ9ITAsdGhpcy5fbGlzdGVuVG8oXCJlcnJvclwiLGZ1bmN0aW9uKCl7aWYoXCJJTklUSUFMSVpJTkdcIj09PWUuX21lZGlhRWxlbWVudEFuZFN0YXRlLnN0YXRlKXJldHVybiB2b2lkIGUuX2xvZ2dlci5kZWJ1ZyhcIkFuIGVycm9yIG9jY3VycmVkLCBidXQgdGhlIG1lZGlhIGVsZW1lbnQgaXMgaW5pdGlhbGl6aW5nLCBzbyBpZ25vcmluZy4uLlwiKTt2YXIgdD1lLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50LmVycm9yO3N3aXRjaCh0LmNvZGUpe2Nhc2UgMjplLl90cmlnZ2VyRXJyb3IobmV3IHMuTmV0d29ya0Vycm9yKTticmVhaztjYXNlIDM6ZS5fdHJpZ2dlckVycm9yKG5ldyBhLkRlY29kZUVycm9yKTticmVhaztkZWZhdWx0OmUuX3RyaWdnZXJFcnJvcihuZXcgaS5lcnJvcnMuUGxheWVyRmF0YWxFcnJvcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIsdCkpfX0se2Vhcmx5QXR0YWNoOiEwfSksdGhpcy5fbGlzdGVuVG8oXCJwbGF5XCIsZnVuY3Rpb24oKXtlLl9sb2dnZXIuZGVidWcoXCJNZWRpYSBlbGVtZW50IHBsYXkgZXZlbnQuXCIpLGUuaXNQbGF5aW5nKCl8fCFlLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZXx8ZS5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5wYXVzZWR8fChlLl9sb2dnZXIuZGVidWcoXCJDYWxsaW5nIHBsYXkoKSBiZWNhdXNlIHNvbWV0aGluZyBleHRlcm5hbCBjYWxsZWQgcGxheSgpIG9uIG1lZGlhIGVsZW1lbnQuXCIpLGUucGxheSgpKX0pLHRoaXMuX2xpc3RlblRvKFwicGxheWluZ1wiLGZ1bmN0aW9uKCl7ZS5fbG9nZ2VyLmRlYnVnKFwiTWVkaWEgZWxlbWVudCBwbGF5aW5nIGV2ZW50LlwiKSxlLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSYmIWUuX21lZGlhRWxlbWVudEFuZFN0YXRlLmVsZW1lbnQucGF1c2VkP2UuX2hhbmRsZVBsYXlpbmdFdmVudCgpOmUuX2xvZ2dlci5kZWJ1ZyhcIklnbm9yaW5nIHBsYXlpbmcgZXZlbnQgYmVjYXVzZSBtZWRpYSBlbGVtZW50IGlzIHJlcG9ydGluZyBpdCBpcyBwYXVzZWQuXCIpfSksdGhpcy5fbGlzdGVuVG8oXCJ0aW1ldXBkYXRlXCIsZnVuY3Rpb24oKXtyZXR1cm4gZS5fZGV0ZXJtaW5lSWZQbGF5aW5nKCl9KSx0aGlzLl9saXN0ZW5UbyhcInBhdXNlXCIsZnVuY3Rpb24oKXtlLl9sb2dnZXIuZGVidWcoXCJNZWRpYSBlbGVtZW50IHBhdXNlIGV2ZW50LlwiKSxlLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSYmZS5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5wYXVzZWQ/ZS5faGFuZGxlUGF1c2VFdmVudCgpOmUuX2xvZ2dlci5kZWJ1ZyhcIklnbm9yaW5nIHBhdXNlIGV2ZW50IGJlY2F1c2UgbWVkaWEgZWxlbWVudCBpcyByZXBvcnRpbmcgaXQgaXMgbm90IHBhdXNlZC5cIil9KSx0aGlzLl9saXN0ZW5UbyhcImVuZGVkXCIsZnVuY3Rpb24oKXtlLl9sb2dnZXIuZGVidWcoXCJNZWRpYSBlbGVtZW50IGVuZGVkIGV2ZW50LlwiKSxlLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSYmIWUuX21lZGlhRWxlbWVudEFuZFN0YXRlLmVsZW1lbnQuZW5kZWQ/ZS5faGFuZGxlRW5kZWRFdmVudCgpOmUuX2xvZ2dlci5kZWJ1ZyhcIklnbm9yaW5nIGVuZGVkIGV2ZW50IGJlY2F1c2UgbWVkaWEgZWxlbWVudCBpcyByZXBvcnRpbmcgaXQgaXMgbm90IGVuZGVkLlwiKX0pLHRoaXMuX2xpc3RlblRvKFwic3RhbGxlZFwiLGZ1bmN0aW9uKCl7ZS5fbG9nZ2VyLmRlYnVnKFwiTWVkaWEgZWxlbWVudCBzdGFsbGVkIGV2ZW50LlwiKSxlLl9jaGVja0lmU3RhbGxlZCgpfSksdGhpcy5fc3RhbGxDaGVja1RpbWVySWQ9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NoZWNrSWZTdGFsbGVkKCl9LDQwMCksdGhpcy5fcmV0cmlldmVEdXJhdGlvbigpLnRoZW4oZnVuY3Rpb24odCl7ZS5fbG9nZ2VyLmRlYnVnKFwiRHVyYXRpb24gcmV0cmlldmVkLlwiLHQpLGUuX2R1cmF0aW9uPXQsZS5fdXBkYXRlKGZ1bmN0aW9uKCl7ZS5fcHJvdmlkZUR1cmF0aW9uKHQpLGUuX21lZGlhRWxlbWVudEFuZFN0YXRlJiZcIlNUQUJMRVwiPT09ZS5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGUmJihlLl9zaWduYWxSZWFkeSgpLGUuX2hhbmRsZURlZmZlcnJlZFBhdXNlQW5kU2VlaygpKX0pfSkuY2F0Y2goZnVuY3Rpb24odCl7ZS5fdHJpZ2dlckVycm9yKG5ldyBpLmVycm9ycy5QbGF5ZXJGYXRhbEVycm9yKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCB3aGVuIGF0dGVtcHRpbmcgdG8gcmV0cmlldmUgdGhlIGR1cmF0aW9uLlwiLHQpKX0pLHRoaXMuX2RlZmVycmVkUHJvdmlkZU1lZGlhRWxlbWVudENhbGxiYWNrJiZ0aGlzLl9kZWZlcnJlZFByb3ZpZGVNZWRpYUVsZW1lbnRDYWxsYmFjaygpfSx0LnByb3RvdHlwZS5fY3JlYXRlRGVmYXVsdE1lZGlhRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuX3BsYXllckRlcGVuZGVuY2llcy5tZWRpYUVsZW1lbnRUeXBlfHxcImF1ZGlvXCIpfSx0LnByb3RvdHlwZS5faGFuZGxlUGF1c2VFdmVudD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlKXRocm93IG5ldyBFcnJvcihcIk1lZGlhIGVsZW1lbnQgc2hvdWxkIGV4aXN0LlwiKTt2YXIgdD10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50O3RoaXMuX3BhdXNlRXZlbnRUaW1lcnx8KHRoaXMuX3BhdXNlRXZlbnRUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuX3BhdXNlRXZlbnRUaW1lcj1udWxsLHQucGF1c2VkJiZlLmlzQWN0dWFsbHlQbGF5aW5nKCkmJmUuX3VwZGF0ZShmdW5jdGlvbigpe2UuaXNFbmRlZCgpfHwoZS5fbm90aWZ5Tm90U3RhbGxlZCgpLGUuX25vdGlmeVBsYXlpbmcoITEpKX0pfSwwKSl9LHQucHJvdG90eXBlLl9oYW5kbGVQbGF5aW5nRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fZHVyYXRpb247XG5pZihudWxsPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RpbmcgZHVyYXRpb24gdG8gZXhpc3QuXCIpO3ZhciByPXRoaXMuX2dldFRydWVQb3NpdGlvbigpO3JldHVybiByPj10P3ZvaWQgdGhpcy5fbG9nZ2VyLndhcm4oXCJHb3QgYSBtZWRpYSBlbGVtZW50IHBsYXlpbmcgZXZlbnQgYW5kIHRoZSBwb3NpdG9uIHdhcyA+PSB0aGUgZHVyYXRpb24uXCIscix0KTp0aGlzLmlzRW5kZWQoKXx8dGhpcy5fc2hvdWxkQmVFbmRlZCgpP3ZvaWQgdGhpcy5fbG9nZ2VyLndhcm4oXCJHb3QgYSBtZWRpYSBlbGVtZW50IHBsYXlpbmcgZXZlbnQgd2hlbiB0aGUgcGxheWVyIGlzL3Nob3VsZCBiZSBlbmRlZC5cIik6dm9pZCB0aGlzLl91cGRhdGUoZnVuY3Rpb24oKXtlLl9ub3RpZnlOb3RTdGFsbGVkKCksZS5fZGV0ZXJtaW5lSWZQbGF5aW5nKCksZS5pc0FjdHVhbGx5UGxheWluZygpfHwoZS5fcGxheURldGVjdGlvblRpbWVyTnVtQXR0ZW1wdHM9MCxlLl9wbGF5RGV0ZWN0aW9uVGltZXJ8fChlLl9wbGF5RGV0ZWN0aW9uVGltZXI9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2RldGVybWluZUlmUGxheWluZygpfSx2KSkpfSl9LHQucHJvdG90eXBlLl9oYW5kbGVFbmRlZEV2ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLl9nZXRRdWV1ZWRTZWVrUG9zaXRpb24oKT92b2lkIHRoaXMuX2xvZ2dlci53YXJuKFwiR290IGEgbWVkaWEgZWxlbWVudCBlbmRlZCBldmVudCBidXQgaWdub3JpbmcgYmVjYXVzZSBhIHNlZWsgaXMgaW4gcHJvZ3Jlc3MuXCIpOnZvaWQgdGhpcy5fdXBkYXRlKCl9LHQucHJvdG90eXBlLl9zaG91bGRCZUVuZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZGVkT3ZlcnJpZGV8fHRoaXMuX21lZGlhRWxlbWVudFJlcG9ydGluZ0VuZGVkKCl9LHQucHJvdG90eXBlLl9tZWRpYUVsZW1lbnRSZXBvcnRpbmdFbmRlZD1mdW5jdGlvbigpe3JldHVybiEhKHRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlJiZ0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50LmVuZGVkJiZ0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50LnBhdXNlZCl9LHQucHJvdG90eXBlLl9yZXRyaWV2ZUR1cmF0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGYoZnVuY3Rpb24odCl7ZS5fbGlzdGVuVG9PbmNlKFwibG9hZGVkbWV0YWRhdGFcIixmdW5jdGlvbigpe3ZhciByPWUuX21lZGlhRWxlbWVudEFuZFN0YXRlO3ImJnQoMWUzKnIuZWxlbWVudC5kdXJhdGlvbil9LHtyZWF0dGFjaDohMCxlYXJseUF0dGFjaDohMH0pfSl9LHQucHJvdG90eXBlLl9oYW5kbGVQbGF5UGF1c2VDaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLmlzRW5kZWQoKSkhZSYmdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUmJlwiVVNBQkxFXCI9PT10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5zdGF0ZSYmdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5wYXVzZSgpLHRoaXMuX25vdGlmeVBsYXlpbmcoZSk7ZWxzZSBpZih0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSYmXCJVU0FCTEVcIj09PXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlLnN0YXRlKXt2YXIgcj10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50LG49dGhpcy5fcGxheUluUHJvZ3Jlc3MuaW5Qcm9ncmVzc3x8IXIucGF1c2VkO2lmKG4hPT1lKWlmKGUpe3RoaXMuX3BsYXlEZXRlY3Rpb25Qb3NpdGlvbj10aGlzLl9nZXRUcnVlUG9zaXRpb24oKTt2YXIgbz17aW5Qcm9ncmVzczohMH07dGhpcy5fcGxheUluUHJvZ3Jlc3M9byx0aGlzLl9wbGF5KCkudGhlbihmdW5jdGlvbigpe3JldHVybiBvLmluUHJvZ3Jlc3M9ITF9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5fcGxheUluUHJvZ3Jlc3MhPT1vP3ZvaWQgdC5fbG9nZ2VyLmRlYnVnKFwiSWdub3JpbmcgcGxheSBlcnJvciBiZWNhdXNlIHBhdXNlZCBzaW5jZS5cIixlKTooby5pblByb2dyZXNzPSExLHZvaWQgdC5fbm90aWZ5UGxheVJlamVjdGlvbihlKSl9KX1lbHNlIHRoaXMuX3BsYXlJblByb2dyZXNzPXtpblByb2dyZXNzOiExfSxyLnBhdXNlKCksdGhpcy5fbm90aWZ5UGxheWluZyghMSk7ZWxzZSB0aGlzLl9wbGF5SW5Qcm9ncmVzcy5pblByb2dyZXNzfHx0aGlzLl9ub3RpZnlQbGF5aW5nKGUpfX0sdC5wcm90b3R5cGUuX2hhbmRsZVNlZWtDaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlO2lmKHImJlwiVVNBQkxFXCI9PT1yLnN0YXRlKXt2YXIgbj10aGlzLl9tZWRpYUVsZW1lbnRSZXBvcnRpbmdFbmRlZCgpO3RoaXMuX2VuZGVkT3ZlcnJpZGU9ITEsdGhpcy5fcGVyZm9ybVNlZWsoZSxmdW5jdGlvbihyKXtyZXR1cm4gdm9pZCAwIT09cj92b2lkIHQuX3RyaWdnZXJFcnJvcihuZXcgaS5lcnJvcnMuUGxheWVyRmF0YWxFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoZW4gdHJ5aW5nIHRvIHNlZWsuXCIscikpOihlPT09dC5fZHVyYXRpb24mJih0Ll9lbmRlZE92ZXJyaWRlPSEwKSx2b2lkIHQuX3NpZ25hbFNlZWtDb21wbGV0ZSgpKX0pLG4mJnRoaXMuX2hhbmRsZVBsYXlQYXVzZUNoYW5nZSh0aGlzLmlzUGxheWluZygpKX19LHQucHJvdG90eXBlLl9wZXJmb3JtU2Vlaz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZTtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJNZWRpYSBlbGVtZW50IGRvZXMgbm90IGV4aXN0LlwiKTt2YXIgbz10aGlzLl9jdXJyZW50U2Vla0NhbGxiYWNrO2lmKG8mJih0aGlzLl9jdXJyZW50U2Vla0NhbGxiYWNrPW51bGwsby5saXN0ZW5lckhhbmRsZS5yZW1vdmUoKSksbi5lbGVtZW50LmN1cnJlbnRUaW1lPT09ZS8xZTMpcmV0dXJuIHZvaWQgdCgpO24uZWxlbWVudC5jdXJyZW50VGltZT1lLzFlMzt2YXIgaT10aGlzLl9saXN0ZW5Ub09uY2UoXCJzZWVrZWRcIixmdW5jdGlvbigpe3IuX2N1cnJlbnRTZWVrQ2FsbGJhY2s9bnVsbCx0KCl9LHtlYXJseUF0dGFjaDohMH0pO3RoaXMuX2N1cnJlbnRTZWVrQ2FsbGJhY2s9e2xpc3RlbmVySGFuZGxlOmksY2FsbGJhY2s6dH19LHQucHJvdG90eXBlLl9nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBlPW51bGwhPT10aGlzLl9kdXJhdGlvbj90aGlzLl9kdXJhdGlvbjoxLzA7aWYoIXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlfHxcIlVTQUJMRVwiIT09dGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGUpcmV0dXJuIHRoaXMuX3Bvc2l0aW9uV2hlbk1lZGlhRWxlbWVudFJldm9rZWQ7dGhpcy5fZGV0ZXJtaW5lSWZQbGF5aW5nKCk7dmFyIHQ9TWF0aC5taW4odGhpcy5fZ2V0VHJ1ZVBvc2l0aW9uKCksZSk7cmV0dXJuIHRoaXMuX3Nob3VsZEJlRW5kZWQoKT9lOnR9LHQucHJvdG90eXBlLl9nZXRUcnVlUG9zaXRpb249ZnVuY3Rpb24oKXtpZighdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGV8fFwiVVNBQkxFXCIhPT10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJNZWRpYSBlbGVtZW50IGRvZXMgbm90IGV4aXN0IG9yIGlzIGluIGludmFsaWQgc3RhdGUuXCIpO3ZhciBlPXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlLmVsZW1lbnQ7cmV0dXJuIDFlMyplLmN1cnJlbnRUaW1lfSx0LnByb3RvdHlwZS5fa2lsbD1mdW5jdGlvbigpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fY2FuUGxheVRpbWVyKSx0aGlzLl9wbGF5RGV0ZWN0aW9uVGltZXImJndpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3BsYXlEZXRlY3Rpb25UaW1lciksdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUmJnRoaXMucmV2b2tlTWVkaWFFbGVtZW50KCksdGhpcy5fc3RhbGxDaGVja1RpbWVySWQmJndpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3N0YWxsQ2hlY2tUaW1lcklkKSx0aGlzLl9saXN0ZW5lcnM9W119LHQucHJvdG90eXBlLl9saXN0ZW5Ub09uY2U9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPXt9KTt2YXIgbj1yLnJlYXR0YWNoLG89ci5lYXJseUF0dGFjaDt2b2lkIDA9PT1uJiYobj0hMSksdm9pZCAwPT09byYmKG89ITEpO3ZhciBpPWZ1bmN0aW9uKGUpe2EucmVtb3ZlKCksdChlKX0sYT10aGlzLl9saXN0ZW5UbyhlLGkse3JlYXR0YWNoOm4sZWFybHlBdHRhY2g6b30pO3JldHVybiBhfSx0LnByb3RvdHlwZS5fbGlzdGVuVG89ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7dm9pZCAwPT09ciYmKHI9e30pO3ZhciBvPXIucmVhdHRhY2gsaT1yLmVhcmx5QXR0YWNoO3ZvaWQgMD09PW8mJihvPSEwKSx2b2lkIDA9PT1pJiYoaT0hMSk7dmFyIGE9ZnVuY3Rpb24oZSl7cy5hdHRhY2hlZD90KGUpOm4uX2xvZ2dlci53YXJuKFwiR290IG1lZGlhIGVsZW1lbnQgZXZlbnQgYWZ0ZXIgaGFuZGxlciB3YXMgcmVtb3ZlZC4gSWdub3JpbmcuXCIsZSl9LHM9e2F0dGFjaGVkOiExLGhhbmRsZXI6YSxldmVudFR5cGU6ZSxvbmNlOiExLHJlYXR0YWNoOm8sZWFybHlBdHRhY2g6aX07aWYodGhpcy5fbGlzdGVuZXJzLnB1c2gocyksIXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlfHxcIlVTQUJMRVwiIT09dGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGUmJiFpKXJldHVybntyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgZT1uLl9saXN0ZW5lcnMuaW5kZXhPZihzKTtlPj0wJiZuLl9saXN0ZW5lcnMuc3BsaWNlKGUsMSl9fTt2YXIgdT10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50O3JldHVybiB1LmFkZEV2ZW50TGlzdGVuZXIoZSxhLCExKSxzLmF0dGFjaGVkPSEwLHtyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgdD1uLl9saXN0ZW5lcnMuaW5kZXhPZihzKTt0Pj0wJiYobi5fbGlzdGVuZXJzLnNwbGljZSh0LDEpLHMuYXR0YWNoZWQ9ITEsdS5yZW1vdmVFdmVudExpc3RlbmVyKGUsYSwhMSkpfX19LHQucHJvdG90eXBlLl9ub3RpZnlOb3RTdGFsbGVkPWZ1bmN0aW9uKCl7dGhpcy5fc3RhbGxEZXRlY3RlZD0hMSx0aGlzLl9sYXN0U3RhbGxDaGVja1Bvcz1udWxsLHRoaXMuX2hhbmRsZVN0YWxsZWQoKX0sdC5wcm90b3R5cGUuX2luaXRNZWRpYUVsZW1lbnQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9pbml0TWVkaWFFbGVtZW50TG9jYWwoZSx0KX0sdC5wcm90b3R5cGUuX2RldGVybWluZUlmUGxheWluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcGxheURldGVjdGlvblRpbWVyJiYoIXRoaXMuaXNQbGF5aW5nKCl8fCsrdGhpcy5fcGxheURldGVjdGlvblRpbWVyTnVtQXR0ZW1wdHM+PW0pJiYod2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fcGxheURldGVjdGlvblRpbWVyKSx0aGlzLl9wbGF5RGV0ZWN0aW9uVGltZXI9bnVsbCksdGhpcy5fdXBkYXRlKGZ1bmN0aW9uKCl7ZS5fbWVkaWFFbGVtZW50QW5kU3RhdGUmJlwiVVNBQkxFXCI9PT1lLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5zdGF0ZSYmKGUuaXNEZWFkKCl8fCFlLmlzUmVhZHkoKXx8IWUuaXNQbGF5aW5nKCl8fGUuaXNBY3R1YWxseVBsYXlpbmcoKXx8ZS5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5wYXVzZWR8fGUuX2dldFRydWVQb3NpdGlvbigpPT09ZS5fcGxheURldGVjdGlvblBvc2l0aW9ufHwoZS5fbG9nZ2VyLmRlYnVnKFwiRGV0ZWN0ZWQgdGhhdCBwbGF5YmFjayBoYXMgc3RhcnRlZC5cIiksZS5fcGxheURldGVjdGlvblRpbWVyJiYod2luZG93LmNsZWFySW50ZXJ2YWwoZS5fcGxheURldGVjdGlvblRpbWVyKSxlLl9wbGF5RGV0ZWN0aW9uVGltZXI9bnVsbCksZS5fbm90aWZ5UGxheWluZyghMCkpKX0pfSx0LnByb3RvdHlwZS5faW5pdE1lZGlhRWxlbWVudExvY2FsPWZ1bmN0aW9uKGUsdCl7ZS5zZXRBdHRyaWJ1dGUoXCJtc0F1ZGlvQ2F0ZWdvcnlcIixcIkJhY2tncm91bmRDYXBhYmxlTWVkaWFcIiksZS5tb3pBdWRpb0NoYW5uZWxUeXBlPVwiY29udGVudFwiLGUucmVtb3ZlQXR0cmlidXRlKFwic3JjXCIpLG4oZSksdD8odGhpcy5fbG9nZ2VyLmRlYnVnKFwiU2V0dGluZyBtZWRpYSBlbGVtZW50IHNyYy5cIix0KSxlLnNyYz10KTp0aGlzLl9wYXVzZUV2ZW50VGltZXImJih0aGlzLl9sb2dnZXIuZGVidWcoXCJDbGVhcmluZyBwYXVzZSBldmVudCB0aW1lci5cIiksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9wYXVzZUV2ZW50VGltZXIpLHRoaXMuX3BhdXNlRXZlbnRUaW1lcj1udWxsKSxlLnZvbHVtZT10aGlzLl92b2x1bWUsZS5tdXRlZD10aGlzLl9tdXRlZCxlLnBsYXliYWNrUmF0ZT0xLGUuc2V0QXR0cmlidXRlKFwicHJlbG9hZFwiLFwibWV0YWRhdGFcIiksZS5wYXVzZSgpLGUubG9hZCgpfSx0LnByb3RvdHlwZS5fY2hlY2tJZlN0YWxsZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZSYmXCJVU0FCTEVcIj09PXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlLnN0YXRlKXt2YXIgZT10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50O2lmKCFlLnBhdXNlZCYmdGhpcy5pc0FjdHVhbGx5UGxheWluZygpKXt2YXIgdD1lLmN1cnJlbnRUaW1lO3RoaXMuX3N0YWxsRGV0ZWN0ZWQ9ZS5yZWFkeVN0YXRlPD0yfHx0aGlzLl9sYXN0U3RhbGxDaGVja1Bvcz09PXQsdGhpcy5fbGFzdFN0YWxsQ2hlY2tQb3M9dCx0aGlzLl9oYW5kbGVTdGFsbGVkKCl9fX0sdC5wcm90b3R5cGUuX2hhbmRsZVN0YWxsZWQ9ZnVuY3Rpb24oKXt0aGlzLl9zaG91bGRCZUVuZGVkKCkmJm51bGw9PT10aGlzLl9nZXRRdWV1ZWRTZWVrUG9zaXRpb24oKT90aGlzLmlzRW5kZWQoKXx8KHRoaXMuX2xvZ2dlci5kZWJ1ZyhcIlVwZGF0aW5nIGJlY2F1c2Ugc3RhbGxlZCBuZWFyIGVuZC5cIiksdGhpcy5fdXBkYXRlKCkpOnRoaXMuX25vdGlmeVN0YWxsZWQodGhpcy5fc3RhbGxEZXRlY3RlZHx8IXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlfHxcIlVTQUJMRVwiIT09dGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGUpfSx0LnByb3RvdHlwZS5fcGxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlKXRocm93IG5ldyBFcnJvcihcIk1lZGlhIGVsZW1lbnQgZG9lc24ndCBleGlzdC5cIik7aWYodGhpcy5fbWVkaWFFbGVtZW50UmVwb3J0aW5nRW5kZWQoKSlyZXR1cm4gdGhpcy5fbG9nZ2VyLmRlYnVnKFwiTm90IGNhbGxpbmcgcGxheSgpIGJlY2F1c2Ugd2UgYXJlIGF0IHRoZSBlbmQuIEl0IHdpbGwgYmUgY2FsbGVkIGFmdGVyIGEgc2Vlay5cIiksZi5yZXNvbHZlKCk7dmFyIHQ9dGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuZWxlbWVudC5wbGF5KCk7cmV0dXJuIG5ldyBmKGZ1bmN0aW9uKHIsbil7dD90LnRoZW4oZnVuY3Rpb24oKXtyKCl9KS5jYXRjaChmdW5jdGlvbih0KXtcIkFib3J0RXJyb3JcIj09PXQubmFtZT8oZS5fbG9nZ2VyLmRlYnVnKFwiTWVkaWEgZWxlbWVudCBwbGF5KCkgcHJvbWlzZSByZWplY3RlZCB3aXRoIEFib3J0RXJyb3IuXCIpLHIoKSk6bih0KX0pOnIoKX0pfSx0LnByb3RvdHlwZS5faGFuZGxlRGVmZmVycmVkUGF1c2VBbmRTZWVrPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGV8fFwiU1RBQkxFXCIhPT10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJNZWRpYSBlbGVtZW50IG11c3QgYmUgaW4gdGhlIFNUQUJMRSBzdGF0ZS5cIik7dGhpcy5fbG9nZ2VyLmRlYnVnKFwiSGFuZGxpbmcgZGVmZXJyZWQgcGF1c2UgYW5kIHNlZWsuLi5cIiksdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUuc3RhdGU9XCJVU0FCTEVcIix0aGlzLl9hdHRhY2hMaXN0ZW5lcnMoKSx0aGlzLl91cGRhdGUoZnVuY3Rpb24oKXtlLl9oYW5kbGVTdGFsbGVkKCk7dmFyIHQ9ZS5fZ2V0UXVldWVkU2Vla1Bvc2l0aW9uKCk7bnVsbCE9PXQmJmUuX2hhbmRsZVNlZWtDaGFuZ2UodCksZS5pc1BsYXlpbmcoKSE9PWUuaXNBY3R1YWxseVBsYXlpbmcoKSYmZS5faGFuZGxlUGxheVBhdXNlQ2hhbmdlKGUuaXNQbGF5aW5nKCkpfSl9LHQucHJvdG90eXBlLl9kZXRhY2hMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiTWVkaWEgZWxlbWVudCBkb2Vzbid0IGV4aXN0LlwiKTt2YXIgZT10aGlzLl9tZWRpYUVsZW1lbnRBbmRTdGF0ZS5lbGVtZW50O3RoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuYXR0YWNoZWQmJih0LmF0dGFjaGVkPSExLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LmV2ZW50VHlwZSx0LmhhbmRsZXIsITEpKX0pLHRoaXMuX2xpc3RlbmVycz10aGlzLl9saXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlYXR0YWNofSl9LHQucHJvdG90eXBlLl9hdHRhY2hMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5fbWVkaWFFbGVtZW50QW5kU3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiTWVkaWEgZWxlbWVudCBkb2Vzbid0IGV4aXN0LlwiKTt0aGlzLl9sb2dnZXIuZGVidWcoXCJBdHRhY2hpbmcgbGlzdGVuZXJzLi4uXCIpO3ZhciBlPXRoaXMuX21lZGlhRWxlbWVudEFuZFN0YXRlLHQ9ZS5lbGVtZW50LHI9ZS5zdGF0ZTt0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmF0dGFjaGVkfHwhZS5yZWF0dGFjaHx8XCJVU0FCTEVcIiE9PXImJiFlLmVhcmx5QXR0YWNofHwodC5hZGRFdmVudExpc3RlbmVyKGUuZXZlbnRUeXBlLGUuaGFuZGxlciwhMSksZS5hdHRhY2hlZD0hMCl9KSx0aGlzLl9sb2dnZXIuZGVidWcoXCJBdHRhY2hlZCBsaXN0ZW5lcnMuXCIpfSx0fShpLkJhc2VQbGF5ZXIpO3QuSFRNTDVQbGF5ZXI9RX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiBlLmNhbGwodGhpcyxcIkFuIGVycm9yIG9jY3VycmVkIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBtZWRpYSBlbGVtZW50LlwiLHQpfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVyblwiSFRNTDVfUExBWUVSLklOSVRJQUxJWkVfRVJST1JcIn0sdH0oby5lcnJvcnMuUGxheWVyRmF0YWxFcnJvcik7dC5Jbml0aWFsaXplRXJyb3I9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj1cIjEzLjAuMFwiLHQuYnVpbGROdW1iZXI9MTA4NTt2YXIgbj1yKDYpO3QuSFRNTDVQbGF5ZXI9bi5IVE1MNVBsYXllcjt2YXIgbz1yKDQpO3QuZXJyb3JzPW8uZXJyb3JzO3ZhciBpPXIoNSk7dC5oZWxwZXJzPWkuaGVscGVyc31dKX0pfSxmdW5jdGlvbihlLHQscil7IWZ1bmN0aW9uKHQsbil7ZS5leHBvcnRzPW4ocigyKSl9KHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIHQubT1lLHQuYz1yLHQuaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sdC5kPWZ1bmN0aW9uKGUscixuKXt0Lm8oZSxyKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sdC5uPWZ1bmN0aW9uKGUpe3ZhciByPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQocixcImFcIixyKSxyfSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD1cIlwiLHQodC5zPTYpfShbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoNSksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixuKXt2b2lkIDA9PT1yJiYocj17fSksdm9pZCAwPT09biYmKG49MmU0KTt2YXIgbz1lLmNhbGwodGhpcyl8fHRoaXM7aWYobjwwKXRocm93IG5ldyBFcnJvcihcIkludmFpZCB0aW1lb3V0LlwiKTtyZXR1cm4gby5fdGltZW91dFRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIG8uX29uTWFudWFsVGltZW91dCgpfSxuKSxvLl94aHI9bmV3IFhNTEh0dHBSZXF1ZXN0LG8uX3hoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX29uTG9hZCgpfSksby5feGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX29uQWJvcnQoKX0pLG8uX3hoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbigpe3JldHVybiBvLl9vbkVycm9yKCl9KSxvLl94aHIuYWRkRXZlbnRMaXN0ZW5lcihcInRpbWVvdXRcIixmdW5jdGlvbigpe3JldHVybiBvLl9vblRpbWVvdXQoKX0pLG8uX3hoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVuZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX29uTG9hZEVuZCgpfSksby5feGhyLm9wZW4oXCJHRVRcIix0LCEwKSxvLl94aHIudGltZW91dD1uLG8uX3hoci5yZXNwb25zZVR5cGU9by5fZ2V0UmVzcG9uc2VUeXBlKCksT2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gby5feGhyLnNldFJlcXVlc3RIZWFkZXIoZSxyW2VdKX0pLG8uX3NpZ25hbFJlcXVlc3RTdGFydCgpLG8uX3hoci5zZW5kKCksb31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLl9hYm9ydD1mdW5jdGlvbigpe3RoaXMuX3hoci5hYm9ydCgpfSx0LnByb3RvdHlwZS5fb25BYm9ydD1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkKCl8fHRoaXMuX3Byb3ZpZGVSZXNwb25zZShuZXcgRXJyb3IoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKSl9LHQucHJvdG90eXBlLl9vbk1hbnVhbFRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbXBsZXRlZCgpfHwodGhpcy5fcHJvdmlkZVJlc3BvbnNlKG51bGwpLHRoaXMuX3hoci5hYm9ydCgpKX0sdC5wcm90b3R5cGUuX29uVGltZW91dD1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkKCl8fHRoaXMuX3Byb3ZpZGVSZXNwb25zZShudWxsKX0sdC5wcm90b3R5cGUuX29uTG9hZD1mdW5jdGlvbigpe2lmKCF0aGlzLmhhc0NvbXBsZXRlZCgpKXt2YXIgZT10aGlzLl94aHI7dGhpcy5fcHJvdmlkZVJlc3BvbnNlKHtzdGF0dXNDb2RlOmUuc3RhdHVzLGRhdGE6dGhpcy5feGhyLnJlc3BvbnNlLGhlYWRlcnM6dGhpcy5fcGFyc2VIZWFkZXJzKGUuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fFwiXCIpfSl9fSx0LnByb3RvdHlwZS5fb25FcnJvcj1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkKCl8fCgwPT09dGhpcy5feGhyLnN0YXR1cz90aGlzLl9wcm92aWRlUmVzcG9uc2Uoe3N0YXR1c0NvZGU6MCxkYXRhOm51bGwsaGVhZGVyczp7fX0pOnRoaXMuX3Byb3ZpZGVSZXNwb25zZShuZXcgRXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZC5cIikpKX0sdC5wcm90b3R5cGUuX29uTG9hZEVuZD1mdW5jdGlvbigpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dFRpbWVyKSx0aGlzLmhhc0NvbXBsZXRlZCgpfHx0aGlzLl9wcm92aWRlUmVzcG9uc2UobmV3IEVycm9yKFwiVW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIikpfSx0LnByb3RvdHlwZS5fcGFyc2VIZWFkZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2lmKCFlKXJldHVybiB0O2Zvcih2YXIgcj1lLnNwbGl0KFwiXFxyXFxuXCIpLG49MCxvPXIubGVuZ3RoO248bztuKyspe3ZhciBpPXJbbl0sYT1pLmluZGV4T2YoXCI6IFwiKTtpZihhPjApe3ZhciBzPWkuc3Vic3RyaW5nKDAsYSkudHJpbSgpLHU9aS5zdWJzdHJpbmcoYSsyKTt0W3NdPXV9fXJldHVybiB0fSx0fShvLmxvYWRlci5Mb2FkZXJSZXF1ZXN0KTt0LkxvYWRlclJlcXVlc3Q9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyk7dC5hcnJheUJ1ZmZlckxvYWRlcj17cmVxdWVzdDpmdW5jdGlvbihlKXt2YXIgdD1lLnVybCxyPWUuaGVhZGVycyxvPWUudGltZW91dDtyZXR1cm4gbmV3IG4uQXJyYXlCdWZmZXJMb2FkZXJSZXF1ZXN0KHQscixvKX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0KTt0LnN0cmluZ0xvYWRlcj17cmVxdWVzdDpmdW5jdGlvbihlKXt2YXIgdD1lLnVybCxyPWUuaGVhZGVycyxvPWUudGltZW91dDtyZXR1cm4gbmV3IG4uU3RyaW5nTG9hZGVyUmVxdWVzdCh0LHIsbyl9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLl9nZXRSZXNwb25zZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm5cImFycmF5YnVmZmVyXCJ9LHR9KG8uTG9hZGVyUmVxdWVzdCk7dC5BcnJheUJ1ZmZlckxvYWRlclJlcXVlc3Q9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMCksaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLl9nZXRSZXNwb25zZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm5cInRleHRcIn0sdH0oby5Mb2FkZXJSZXF1ZXN0KTt0LlN0cmluZ0xvYWRlclJlcXVlc3Q9aX0sZnVuY3Rpb24odCxyKXt0LmV4cG9ydHM9ZX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj1cIjEzLjAuMFwiLHQuYnVpbGROdW1iZXI9MTA4NTt2YXIgbj1yKDIpO3Quc3RyaW5nTG9hZGVyPW4uc3RyaW5nTG9hZGVyO3ZhciBvPXIoMSk7dC5hcnJheUJ1ZmZlckxvYWRlcj1vLmFycmF5QnVmZmVyTG9hZGVyfV0pfSl9LGZ1bmN0aW9uKGUsdCxyKXshZnVuY3Rpb24odCxuKXtlLmV4cG9ydHM9bihyKDIpLHIoMSkpfSh0aGlzLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIHQubT1lLHQuYz1yLHQuaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sdC5kPWZ1bmN0aW9uKGUscixuKXt0Lm8oZSxyKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sdC5uPWZ1bmN0aW9uKGUpe3ZhciByPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQocixcImFcIixyKSxyfSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD1cIlwiLHQodC5zPTQpfShbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMiksaT1yKDMpLGE9cigxKSxzPW8uaGVscGVycy5hYm9ydGFibGVKb2IuQWJvcnRhYmxlSm9iLHU9by5oZWxwZXJzLmZpbmQsbD1vLmhlbHBlcnMudGltZSxjPTMwMCxkPW5ldyBhLkxpbWl0ZXIoYywzZTUpLGY9NWUzLHA9W2kucmVuZGl0aW9ucy5lbmNyeXB0ZWRIbHNPcHVzLGkucmVuZGl0aW9ucy5obHNPcHVzLGkucmVuZGl0aW9ucy5lbmNyeXB0ZWRIbHNNcDMsaS5yZW5kaXRpb25zLmhsc01wMyxpLnJlbmRpdGlvbnMuaHR0cE1wM10saD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPXQubG9hZGVyLG49dC5jbGllbnRJZCxvPXQudHJhY2tJZCxpPXQuc2VjcmV0VG9rZW4sYT12b2lkIDA9PT1pP251bGw6aSxzPXQucmVxdWVzdEF1dGhvcml6YXRpb24sdT12b2lkIDA9PT1zP251bGw6cyxsPXQuZXhjbHVkZWRSZW5kaXRpb25zLGM9dm9pZCAwPT09bD9bXTpsLGQ9dC5tYXhCaXRyYXRlLGY9dm9pZCAwPT09ZD8xLzA6ZCxwPXQuZW5kcG9pbnRCYXNlVXJsLGg9dm9pZCAwPT09cD9cImh0dHBzOi8vYXBpLnNvdW5kY2xvdWQuY29tL1wiOnAsXz10LmVuY3J5cHRlZFN0cmVhbXNFbmFibGVkLGc9dm9pZCAwIT09XyYmXyx5PWUuY2FsbCh0aGlzKXx8dGhpcztpZih5Ll9nZXRVcmxzSm9iPW51bGwseS5fY2xlYXJSZXNwb25zZVRpbWVyPW51bGwsIXIpdGhyb3cgbmV3IEVycm9yKFwibG9hZGVyIHJlcXVpcmVkLlwiKTtpZihcInN0cmluZ1wiIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoXCJjbGllbnRJZCBpbnZhbGlkLlwiKTtpZihcIm51bWJlclwiIT10eXBlb2Ygbyl0aHJvdyBuZXcgRXJyb3IoXCJ0cmFja0lkIGludmFsaWQuXCIpO2lmKG51bGwhPT1hJiZcInN0cmluZ1wiIT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoXCJzZWNyZXRUb2tlbiBpbnZhbGlkLlwiKTtpZihudWxsIT09dSYmXCJzdHJpbmdcIiE9dHlwZW9mIHUpdGhyb3cgbmV3IEVycm9yKFwicmVxdWVzdEF1dGhvcml6YXRvbiBpbnZhbGlkLlwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgZnx8Zjw9MCl0aHJvdyBuZXcgRXJyb3IoXCJtYXhCaXRyYXRlIG11c3QgYmUgPiAwLlwiKTtpZihcInN0cmluZ1wiIT10eXBlb2YgaCl0aHJvdyBuZXcgRXJyb3IoXCJlbmRwb2ludEJhc2VVcmwgbXVzdCBiZSA+IDAuXCIpO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgZyl0aHJvdyBuZXcgRXJyb3IoXCJlbmNyeXB0ZWRTdHJlYW1zRW5hYmxlZCBpbnZhbGlkLlwiKTtyZXR1cm4geS5fbG9hZGVyPXIseS5fY2xpZW50SWQ9bix5Ll9yZXF1ZXN0QXV0aG9yaXphdGlvbj11LHkuX3RyYWNrSWQ9byx5Ll9zZWNyZXRUb2tlbj1hLHkuX2VuZHBvaW50QmFzZVVybD1oLHkuX2VuY3J5cHRlZFN0cmVhbXNFbmFibGVkPWcseS5fZXhjbHVkZWRSZW5kaXRpb25zPWMseS5fZXhjbHVkZWRSZW5kaXRpb25zT25MYXN0VVJMUmVxdWVzdD1jLnNsaWNlKCkseS5fbWF4Qml0cmF0ZT1mLHl9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5nZXRUcmFja0lkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYWNrSWR9LHQucHJvdG90eXBlLmV4Y2x1ZGVSZW5kaXRpb249ZnVuY3Rpb24oZSl7dGhpcy5fZXhjbHVkZWRSZW5kaXRpb25zLmluZGV4T2YoZSk8MCYmdGhpcy5fZXhjbHVkZWRSZW5kaXRpb25zLnB1c2goZSl9LHQucHJvdG90eXBlLnVwZGF0ZVJlcXVlc3RBdXRob3JpemF0aW9uPWZ1bmN0aW9uKGUpe2lmKG51bGwhPT1lJiZcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJyZXF1ZXN0QXV0aG9yaXphdG9uIGludmFsaWQuXCIpO3RoaXMuX3JlcXVlc3RBdXRob3JpemF0aW9uPWV9LHQucHJvdG90eXBlLmNsZWFyQ2FjaGU9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhclJlc3BvbnNlVGltZXImJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2NsZWFyUmVzcG9uc2VUaW1lciksdGhpcy5fY2xlYXJSZXNwb25zZVRpbWVyPW51bGwpLHRoaXMuX2dldFVybHNKb2I9bnVsbH0sdC5wcm90b3R5cGUuZ2V0TWF4Qml0cmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhCaXRyYXRlfSx0LnByb3RvdHlwZS5zZXRNYXhCaXRyYXRlPWZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPD0wKXRocm93IG5ldyBFcnJvcihcIm1heEJpdHJhdGUgbXVzdCBiZSA+IDAuXCIpO3RoaXMuX21heEJpdHJhdGU9ZX0sdC5wcm90b3R5cGUuZ2V0VXJsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX21heEJpdHJhdGUscj10aGlzLl9leGNsdWRlZFJlbmRpdGlvbnMsbj1uZXcgcyhmdW5jdGlvbigpe2UuX2V4Y2x1ZGVkUmVuZGl0aW9uc09uTGFzdFVSTFJlcXVlc3QubGVuZ3RoPT09ZS5fZXhjbHVkZWRSZW5kaXRpb25zLmxlbmd0aD9lLmNsZWFyQ2FjaGUoKTplLl9leGNsdWRlZFJlbmRpdGlvbnNPbkxhc3RVUkxSZXF1ZXN0PWUuX2V4Y2x1ZGVkUmVuZGl0aW9ucy5zbGljZSgpO3ZhciBuPWUuX2dldFVybHMoKSxvPW4ud2hlbkNvbXBsZXRlKCkudGhlbihmdW5jdGlvbihlKXt2YXIgbj1lLnVybHMsbz1lLnRpbWVSZXRyaWV2ZWQsaT1udWxsO3JldHVybiBwLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gci5pbmRleE9mKGUpPDB9KS5zb21lKGZ1bmN0aW9uKGUpe3ZhciByPW4uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlbmRpdGlvbj09PWV9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue3VybDplLnVybCxiaXRyYXRlOmUuYml0cmF0ZX19KSxhPXUoci5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuYml0cmF0ZS1lLmJpdHJhdGV9KSxmdW5jdGlvbihlKXtyZXR1cm4gZS5iaXRyYXRlPD10fSk7cmV0dXJuISFhJiYoaT17dXJsOmEudXJsLHJlbmRpdGlvbjplLGJpdHJhdGU6YS5iaXRyYXRlLHRpbWVSZXRyaWV2ZWQ6b30sITApfSksaX0pO3JldHVybntyZXN1bHQ6byxhYm9ydDpmdW5jdGlvbigpe3JldHVybiBuLmFib3J0KCl9fX0pO3JldHVybiBuLnJ1bigpfSx0LnByb3RvdHlwZS5fZ2V0VXJscz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2dldFVybHNKb2J8fCh0aGlzLl9nZXRVcmxzSm9iPW5ldyBzKGZ1bmN0aW9uKCl7dmFyIHQ9by5oZWxwZXJzLmRlZmVycmVkLmJ1aWxkRGVmZXJyZWQoKSxyPW51bGwsbj1kLmV4ZWN1dGUoZnVuY3Rpb24oKXt2YXIgbj1lLl9yZXF1ZXN0QXV0aG9yaXphdGlvbj97QXV0aG9yaXphdGlvbjplLl9yZXF1ZXN0QXV0aG9yaXphdGlvbn06e30sbz1lLl9lbmRwb2ludEJhc2VVcmwrXCJpMS90cmFja3MvXCIrZW5jb2RlVVJJKGUuX3RyYWNrSWQrXCJcIikrXCIvc3RyZWFtcz9jbGllbnRfaWQ9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGUuX2NsaWVudElkKTtlLl9lbmNyeXB0ZWRTdHJlYW1zRW5hYmxlZCYmKG8rPVwiJndpdGhfZW5jcnlwdGVkX3N0cmVhbXM9dHJ1ZVwiKSxlLl9zZWNyZXRUb2tlbiYmKG8rPVwiJnNlY3JldF90b2tlbj1cIitlbmNvZGVVUklDb21wb25lbnQoZS5fc2VjcmV0VG9rZW4pKSxyPWUuX2xvYWRlci5yZXF1ZXN0KHt1cmw6byxoZWFkZXJzOm59KTt2YXIgYT1yLmdldFJlc3BvbnNlKCkudGhlbihmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgaS5SZXF1ZXN0RXJyb3IobnVsbCk7aWYoMjAwIT09ZS5zdGF0dXNDb2RlKXRocm93IG5ldyBpLlJlcXVlc3RFcnJvcihlLnN0YXR1c0NvZGUpO2lmKCFlLmRhdGEpdGhyb3cgbmV3IEVycm9yKFwiUmVzcG9uc2UgY29udGFpbmVkIG5vIGRhdGEuXCIpO3ZhciB0PWwubm93KCkscj1KU09OLnBhcnNlKGUuZGF0YSksbj1bXTtyZXR1cm4gT2JqZWN0LmtleXMocikubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoXCJfXCIpLG89dFswXSxpPXRbMV0sYT10WzJdLHM9cGFyc2VJbnQoYSwxMCk7aWYobyYmaSYmIWlzTmFOKHMpKXt2YXIgbD11KHAsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2NQcm90b2NvbD09PW8mJmUuc2NGb3JtYXQ9PT1pfSk7bCYmbi5wdXNoKHtyZW5kaXRpb246bCxiaXRyYXRlOnMsdXJsOnJbZV19KX19KSx7dXJsczpuLHRpbWVSZXRyaWV2ZWQ6dH19KTthLnRoZW4odC5yZXNvbHZlLHQucmVqZWN0KX0pO3JldHVybntyZXN1bHQ6dC5wcm9taXNlLGFib3J0OmZ1bmN0aW9uKCl7bi5hYm9ydCgpLHImJnIuYWJvcnQoKX19fSksdGhpcy5fY2xlYXJSZXNwb25zZVRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fY2xlYXJSZXNwb25zZVRpbWVyPW51bGwsZS5fZ2V0VXJsc0pvYj1udWxsfSxmKSksdGhpcy5fZ2V0VXJsc0pvYi5ydW4oKX0sdH0oaS5CYXNlU3RyZWFtVXJsUmV0cmlldmVyKTt0LlN0cmVhbVVybFJldHJpZXZlcj1ofSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9NmU0KSx0aGlzLl9saW1pdD1lLHRoaXMuX3BlcmlvZD10LHRoaXMuX2pvYnM9W10sdGhpcy5fam9ic1J1bkluUGVyaW9kPTAsZTw9MCl0aHJvdyBuZXcgRXJyb3IoXCJsaW1pdCBtdXN0IGJlID4gMC5cIik7aWYodDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJwZXJpb2QgbXVzdCBiZSA+IDAuXCIpfXJldHVybiBlLnByb3RvdHlwZS5leGVjdXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17am9iOmV9O3JldHVybiB0aGlzLl9qb2JzLnB1c2gociksdGhpcy5fZXhlY3V0ZU5leHRKb2IoKSx7YWJvcnQ6ZnVuY3Rpb24oKXt2YXIgZT10Ll9qb2JzLmluZGV4T2Yocik7ZT49MCYmdC5fam9icy5zcGxpY2UoZSwxKX19fSxlLnByb3RvdHlwZS5fZXhlY3V0ZU5leHRKb2I9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuX2pvYnNSdW5JblBlcmlvZDx0aGlzLl9saW1pdCl7dmFyIHQ9dGhpcy5fam9icy5zaGlmdCgpO3QmJih0aGlzLl9qb2JzUnVuSW5QZXJpb2QrKyx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuX2pvYnNSdW5JblBlcmlvZC0tLGUuX2V4ZWN1dGVOZXh0Sm9iKCl9LHRoaXMuX3BlcmlvZCksdC5qb2IoKSl9fSxlfSgpO3QuTGltaXRlcj1ufSxmdW5jdGlvbih0LHIpe3QuZXhwb3J0cz1lfSxmdW5jdGlvbihlLHIpe2UuZXhwb3J0cz10fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC52ZXJzaW9uPVwiMTIuMC4wXCIsdC5idWlsZE51bWJlcj00MDQ7dmFyIG49cigwKTt0LlN0cmVhbVVybFJldHJpZXZlcj1uLlN0cmVhbVVybFJldHJpZXZlcn1dKX0pfV0pfSxmdW5jdGlvbihlLHQscil7dmFyIG47KGZ1bmN0aW9uKGUsbyxpLGEpey8qIVxuXHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdCAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG5cdCAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcblx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0Vcblx0ICogQHZlcnNpb24gICAyLjMuMFxuXHQgKi9cbihmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHMoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZXx8XCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lfWZ1bmN0aW9uIHUoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiBsKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZX1mdW5jdGlvbiBjKGUpe0o9ZX1mdW5jdGlvbiBkKGUpe1o9ZX1mdW5jdGlvbiBmKCl7dmFyIHQ9ZS5uZXh0VGljayxyPWUudmVyc2lvbnMubm9kZS5tYXRjaCgvXig/OihcXGQrKVxcLik/KD86KFxcZCspXFwuKT8oXFwqfFxcZCspJC8pO3JldHVybiBBcnJheS5pc0FycmF5KHIpJiZcIjBcIj09PXJbMV0mJlwiMTBcIj09PXJbMl0mJih0PW8pLGZ1bmN0aW9uKCl7dCh5KX19ZnVuY3Rpb24gcCgpe3JldHVybiBmdW5jdGlvbigpe1coeSl9fWZ1bmN0aW9uIGgoKXt2YXIgZT0wLHQ9bmV3IHRlKHkpLHI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7cmV0dXJuIHQub2JzZXJ2ZShyLHtjaGFyYWN0ZXJEYXRhOiEwfSksZnVuY3Rpb24oKXtyLmRhdGE9ZT0rK2UlMn19ZnVuY3Rpb24gXygpe3ZhciBlPW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gZS5wb3J0MS5vbm1lc3NhZ2U9eSxmdW5jdGlvbigpe2UucG9ydDIucG9zdE1lc3NhZ2UoMCl9fWZ1bmN0aW9uIGcoKXtyZXR1cm4gZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHksMSl9fWZ1bmN0aW9uIHkoKXtmb3IodmFyIGU9MDtlPFg7ZSs9Mil7dmFyIHQ9b2VbZV0scj1vZVtlKzFdO3Qociksb2VbZV09dm9pZCAwLG9lW2UrMV09dm9pZCAwfVg9MH1mdW5jdGlvbiB2KCl7dHJ5e3ZhciBlPXIoMjkpO3JldHVybiBXPWUucnVuT25Mb29wfHxlLnJ1bk9uQ29udGV4dCxwKCl9Y2F0Y2goZSl7cmV0dXJuIGcoKX19ZnVuY3Rpb24gbSgpe31mdW5jdGlvbiBFKCl7cmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpfWZ1bmN0aW9uIGIoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIkEgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS5cIil9ZnVuY3Rpb24gdyhlKXt0cnl7cmV0dXJuIGUudGhlbn1jYXRjaChlKXtyZXR1cm4gdWUuZXJyb3I9ZSx1ZX19ZnVuY3Rpb24gUyhlLHQscixuKXt0cnl7ZS5jYWxsKHQscixuKX1jYXRjaChlKXtyZXR1cm4gZX19ZnVuY3Rpb24gUChlLHQscil7WihmdW5jdGlvbihlKXt2YXIgbj0hMSxvPVMocix0LGZ1bmN0aW9uKHIpe258fChuPSEwLHQhPT1yP3goZSxyKTpPKGUscikpfSxmdW5jdGlvbih0KXtufHwobj0hMCxNKGUsdCkpfSxcIlNldHRsZTogXCIrKGUuX2xhYmVsfHxcIiB1bmtub3duIHByb21pc2VcIikpOyFuJiZvJiYobj0hMCxNKGUsbykpfSxlKX1mdW5jdGlvbiBSKGUsdCl7dC5fc3RhdGU9PT1hZT9PKGUsdC5fcmVzdWx0KTp0Ll9zdGF0ZT09PXNlP00oZSx0Ll9yZXN1bHQpOkQodCx2b2lkIDAsZnVuY3Rpb24odCl7eChlLHQpfSxmdW5jdGlvbih0KXtNKGUsdCl9KX1mdW5jdGlvbiBUKGUsdCl7aWYodC5jb25zdHJ1Y3Rvcj09PWUuY29uc3RydWN0b3IpUihlLHQpO2Vsc2V7dmFyIHI9dyh0KTtyPT09dWU/TShlLHVlLmVycm9yKTp2b2lkIDA9PT1yP08oZSx0KTp1KHIpP1AoZSx0LHIpOk8oZSx0KX19ZnVuY3Rpb24geChlLHQpe2U9PT10P00oZSxFKCkpOnModCk/VChlLHQpOk8oZSx0KX1mdW5jdGlvbiBBKGUpe2UuX29uZXJyb3ImJmUuX29uZXJyb3IoZS5fcmVzdWx0KSxrKGUpfWZ1bmN0aW9uIE8oZSx0KXtlLl9zdGF0ZT09PWllJiYoZS5fcmVzdWx0PXQsZS5fc3RhdGU9YWUsMCE9PWUuX3N1YnNjcmliZXJzLmxlbmd0aCYmWihrLGUpKX1mdW5jdGlvbiBNKGUsdCl7ZS5fc3RhdGU9PT1pZSYmKGUuX3N0YXRlPXNlLGUuX3Jlc3VsdD10LFooQSxlKSl9ZnVuY3Rpb24gRChlLHQscixuKXt2YXIgbz1lLl9zdWJzY3JpYmVycyxpPW8ubGVuZ3RoO2UuX29uZXJyb3I9bnVsbCxvW2ldPXQsb1tpK2FlXT1yLG9baStzZV09biwwPT09aSYmZS5fc3RhdGUmJlooayxlKX1mdW5jdGlvbiBrKGUpe3ZhciB0PWUuX3N1YnNjcmliZXJzLHI9ZS5fc3RhdGU7aWYoMCE9PXQubGVuZ3RoKXtmb3IodmFyIG4sbyxpPWUuX3Jlc3VsdCxhPTA7YTx0Lmxlbmd0aDthKz0zKW49dFthXSxvPXRbYStyXSxuP0wocixuLG8saSk6byhpKTtlLl9zdWJzY3JpYmVycy5sZW5ndGg9MH19ZnVuY3Rpb24gSSgpe3RoaXMuZXJyb3I9bnVsbH1mdW5jdGlvbiBDKGUsdCl7dHJ5e3JldHVybiBlKHQpfWNhdGNoKGUpe3JldHVybiBsZS5lcnJvcj1lLGxlfX1mdW5jdGlvbiBMKGUsdCxyLG4pe3ZhciBvLGksYSxzLGw9dShyKTtpZihsKXtpZihvPUMocixuKSxvPT09bGU/KHM9ITAsaT1vLmVycm9yLG89bnVsbCk6YT0hMCx0PT09bylyZXR1cm4gdm9pZCBNKHQsYigpKX1lbHNlIG89bixhPSEwO3QuX3N0YXRlIT09aWV8fChsJiZhP3godCxvKTpzP00odCxpKTplPT09YWU/Tyh0LG8pOmU9PT1zZSYmTSh0LG8pKX1mdW5jdGlvbiBqKGUsdCl7dHJ5e3QoZnVuY3Rpb24odCl7eChlLHQpfSxmdW5jdGlvbih0KXtNKGUsdCl9KX1jYXRjaCh0KXtNKGUsdCl9fWZ1bmN0aW9uIE4oZSx0KXt2YXIgcj10aGlzO3IuX2luc3RhbmNlQ29uc3RydWN0b3I9ZSxyLnByb21pc2U9bmV3IGUobSksci5fdmFsaWRhdGVJbnB1dCh0KT8oci5faW5wdXQ9dCxyLmxlbmd0aD10Lmxlbmd0aCxyLl9yZW1haW5pbmc9dC5sZW5ndGgsci5faW5pdCgpLDA9PT1yLmxlbmd0aD9PKHIucHJvbWlzZSxyLl9yZXN1bHQpOihyLmxlbmd0aD1yLmxlbmd0aHx8MCxyLl9lbnVtZXJhdGUoKSwwPT09ci5fcmVtYWluaW5nJiZPKHIucHJvbWlzZSxyLl9yZXN1bHQpKSk6TShyLnByb21pc2Usci5fdmFsaWRhdGlvbkVycm9yKCkpfWZ1bmN0aW9uIFUoZSl7cmV0dXJuIG5ldyBjZSh0aGlzLGUpLnByb21pc2V9ZnVuY3Rpb24gRihlKXtmdW5jdGlvbiB0KGUpe3gobyxlKX1mdW5jdGlvbiByKGUpe00obyxlKX12YXIgbj10aGlzLG89bmV3IG4obSk7aWYoIVkoZSkpcmV0dXJuIE0obyxuZXcgVHlwZUVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLlwiKSksbztmb3IodmFyIGk9ZS5sZW5ndGgsYT0wO28uX3N0YXRlPT09aWUmJmE8aTthKyspRChuLnJlc29sdmUoZVthXSksdm9pZCAwLHQscik7cmV0dXJuIG99ZnVuY3Rpb24gQihlKXt2YXIgdD10aGlzO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yPT09dClyZXR1cm4gZTt2YXIgcj1uZXcgdChtKTtyZXR1cm4geChyLGUpLHJ9ZnVuY3Rpb24gcShlKXt2YXIgdD10aGlzLHI9bmV3IHQobSk7cmV0dXJuIE0ocixlKSxyfWZ1bmN0aW9uIEgoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvclwiKX1mdW5jdGlvbiB6KCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKX1mdW5jdGlvbiBHKGUpe3RoaXMuX2lkPV9lKyssdGhpcy5fc3RhdGU9dm9pZCAwLHRoaXMuX3Jlc3VsdD12b2lkIDAsdGhpcy5fc3Vic2NyaWJlcnM9W10sbSE9PWUmJih1KGUpfHxIKCksdGhpcyBpbnN0YW5jZW9mIEd8fHooKSxqKHRoaXMsZSkpfWZ1bmN0aW9uIFYoKXt2YXIgZTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgaSllPWk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZillPXNlbGY7ZWxzZSB0cnl7ZT1GdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwicG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50XCIpfXZhciB0PWUuUHJvbWlzZTt0JiZcIltvYmplY3QgUHJvbWlzZV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0LnJlc29sdmUoKSkmJiF0LmNhc3R8fChlLlByb21pc2U9Z2UpfXZhciBLO0s9QXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5OmZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX07dmFyIFcsSixRLFk9SyxYPTAsWj0oe30udG9TdHJpbmcsZnVuY3Rpb24oZSx0KXtvZVtYXT1lLG9lW1grMV09dCxYKz0yLDI9PT1YJiYoSj9KKHkpOlEoKSl9KSwkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnZvaWQgMCxlZT0kfHx7fSx0ZT1lZS5NdXRhdGlvbk9ic2VydmVyfHxlZS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHJlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZcIltvYmplY3QgcHJvY2Vzc11cIj09PXt9LnRvU3RyaW5nLmNhbGwoZSksbmU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgaW1wb3J0U2NyaXB0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsLG9lPW5ldyBBcnJheSgxZTMpO1E9cmU/ZigpOnRlP2goKTpuZT9fKCk6dm9pZCAwPT09JD92KCk6ZygpO3ZhciBpZT12b2lkIDAsYWU9MSxzZT0yLHVlPW5ldyBJLGxlPW5ldyBJO04ucHJvdG90eXBlLl92YWxpZGF0ZUlucHV0PWZ1bmN0aW9uKGUpe3JldHVybiBZKGUpfSxOLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFcnJvcihcIkFycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheVwiKX0sTi5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24oKXt0aGlzLl9yZXN1bHQ9bmV3IEFycmF5KHRoaXMubGVuZ3RoKX07dmFyIGNlPU47Ti5wcm90b3R5cGUuX2VudW1lcmF0ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHQ9ZS5sZW5ndGgscj1lLnByb21pc2Usbj1lLl9pbnB1dCxvPTA7ci5fc3RhdGU9PT1pZSYmbzx0O28rKyllLl9lYWNoRW50cnkobltvXSxvKX0sTi5wcm90b3R5cGUuX2VhY2hFbnRyeT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1yLl9pbnN0YW5jZUNvbnN0cnVjdG9yO2woZSk/ZS5jb25zdHJ1Y3Rvcj09PW4mJmUuX3N0YXRlIT09aWU/KGUuX29uZXJyb3I9bnVsbCxyLl9zZXR0bGVkQXQoZS5fc3RhdGUsdCxlLl9yZXN1bHQpKTpyLl93aWxsU2V0dGxlQXQobi5yZXNvbHZlKGUpLHQpOihyLl9yZW1haW5pbmctLSxyLl9yZXN1bHRbdF09ZSl9LE4ucHJvdG90eXBlLl9zZXR0bGVkQXQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz1uLnByb21pc2U7by5fc3RhdGU9PT1pZSYmKG4uX3JlbWFpbmluZy0tLGU9PT1zZT9NKG8scik6bi5fcmVzdWx0W3RdPXIpLDA9PT1uLl9yZW1haW5pbmcmJk8obyxuLl9yZXN1bHQpfSxOLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztEKGUsdm9pZCAwLGZ1bmN0aW9uKGUpe3IuX3NldHRsZWRBdChhZSx0LGUpfSxmdW5jdGlvbihlKXtyLl9zZXR0bGVkQXQoc2UsdCxlKX0pfTt2YXIgZGU9VSxmZT1GLHBlPUIsaGU9cSxfZT0wLGdlPUc7Ry5hbGw9ZGUsRy5yYWNlPWZlLEcucmVzb2x2ZT1wZSxHLnJlamVjdD1oZSxHLl9zZXRTY2hlZHVsZXI9YyxHLl9zZXRBc2FwPWQsRy5fYXNhcD1aLEcucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpHLHRoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ci5fc3RhdGU7aWYobj09PWFlJiYhZXx8bj09PXNlJiYhdClyZXR1cm4gdGhpczt2YXIgbz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihtKSxpPXIuX3Jlc3VsdDtpZihuKXt2YXIgYT1hcmd1bWVudHNbbi0xXTtaKGZ1bmN0aW9uKCl7TChuLG8sYSxpKX0pfWVsc2UgRChyLG8sZSx0KTtyZXR1cm4gb30sY2F0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGUpfX07dmFyIHllPVYsdmU9e1Byb21pc2U6Z2UscG9seWZpbGw6eWV9O3IoMjMpLmFtZD8obj1mdW5jdGlvbigpe3JldHVybiB2ZX0uY2FsbCh0LHIsdCxhKSwhKHZvaWQgMCE9PW4mJihhLmV4cG9ydHM9bikpKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgYSYmYS5leHBvcnRzP2EuZXhwb3J0cz12ZTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcyYmKHRoaXMuRVM2UHJvbWlzZT12ZSkseWUoKX0pLmNhbGwodGhpcyl9KS5jYWxsKHQscig2KSxyKDI1KS5zZXRJbW1lZGlhdGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSxyKDI0KShlKSl9LGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9e29hdXRoX3Rva2VuOnZvaWQgMCxiYXNlVVJMOlwiaHR0cHM6Ly9hcGkuc291bmRjbG91ZC5jb21cIixjb25uZWN0VVJMOlwiLy9jb25uZWN0LnNvdW5kY2xvdWQuY29tXCIsY2xpZW50X2lkOnZvaWQgMCxyZWRpcmVjdF91cmk6dm9pZCAwfTtlLmV4cG9ydHM9e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gcltlXX0sc2V0OmZ1bmN0aW9uKGUsdCl7dCYmKHJbZV09dCl9fX0sZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDMpLG89cigyMCksaT1yKDIpLlByb21pc2UsYT1mdW5jdGlvbihlLHIsbixvKXt2YXIgYT12b2lkIDAscz1uZXcgaShmdW5jdGlvbihpKXt2YXIgcz10LkZvcm1EYXRhJiZuIGluc3RhbmNlb2YgRm9ybURhdGE7YT1uZXcgWE1MSHR0cFJlcXVlc3QsYS51cGxvYWQmJmEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLG8pLGEub3BlbihlLHIsITApLHN8fGEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpLGEub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWEucmVhZHlTdGF0ZSYmaSh7cmVzcG9uc2VUZXh0OmEucmVzcG9uc2VUZXh0LHJlcXVlc3Q6YX0pfSxhLnNlbmQobil9KTtyZXR1cm4gcy5yZXF1ZXN0PWEsc30scz1mdW5jdGlvbihlKXt2YXIgdD1lLnJlc3BvbnNlVGV4dCxyPWUucmVxdWVzdCxuPXZvaWQgMCxvPXZvaWQgMDt0cnl7bz1KU09OLnBhcnNlKHQpfWNhdGNoKGUpe31yZXR1cm4gbz9vLmVycm9ycyYmKG49e21lc3NhZ2U6XCJcIn0sby5lcnJvcnNbMF0mJm8uZXJyb3JzWzBdLmVycm9yX21lc3NhZ2UmJihuPXttZXNzYWdlOm8uZXJyb3JzWzBdLmVycm9yX21lc3NhZ2V9KSk6bj1yP3ttZXNzYWdlOlwiSFRUUCBFcnJvcjogXCIrci5zdGF0dXN9OnttZXNzYWdlOlwiVW5rbm93biBlcnJvclwifSxuJiYobi5zdGF0dXM9ci5zdGF0dXMpLHtqc29uOm8sZXJyb3I6bn19LHU9ZnVuY3Rpb24gZSh0LHIsbixvKXt2YXIgaT1hKHQscixuLG8pLHU9aS50aGVuKGZ1bmN0aW9uKHQpe3ZhciByPXQucmVzcG9uc2VUZXh0LG49dC5yZXF1ZXN0LG89cyh7cmVzcG9uc2VUZXh0OnIscmVxdWVzdDpufSk7aWYoby5qc29uJiZcIjMwMiAtIEZvdW5kXCI9PT1vLmpzb24uc3RhdHVzKXJldHVybiBlKFwiR0VUXCIsby5qc29uLmxvY2F0aW9uLG51bGwpO2lmKDIwMCE9PW4uc3RhdHVzJiZvLmVycm9yKXRocm93IG8uZXJyb3I7cmV0dXJuIG8uanNvbn0pO3JldHVybiB1LnJlcXVlc3Q9aS5yZXF1ZXN0LHV9LGw9ZnVuY3Rpb24oZSx0LHIpe09iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7cj9lLmFwcGVuZChuLHRbbl0pOmVbbl09dFtuXX0pfTtlLmV4cG9ydHM9e3JlcXVlc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPD0yfHx2b2lkIDA9PT1hcmd1bWVudHNbMl0/e306YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzLmxlbmd0aDw9M3x8dm9pZCAwPT09YXJndW1lbnRzWzNdP2Z1bmN0aW9uKCl7fTphcmd1bWVudHNbM10scz1uLmdldChcIm9hdXRoX3Rva2VuXCIpLGM9bi5nZXQoXCJjbGllbnRfaWRcIiksZD17fSxmPXQuRm9ybURhdGEmJmkgaW5zdGFuY2VvZiBGb3JtRGF0YSxwPXZvaWQgMCxoPXZvaWQgMDtyZXR1cm4gZC5mb3JtYXQ9XCJqc29uXCIscz9kLm9hdXRoX3Rva2VuPXM6ZC5jbGllbnRfaWQ9YyxsKGksZCxmKSxcIkdFVFwiIT09ZSYmKHA9Zj9pOm8uZW5jb2RlKGkpLGk9e29hdXRoX3Rva2VuOnN9KSxyPVwiL1wiIT09clswXT9cIi9cIityOnIsaD1cIlwiK24uZ2V0KFwiYmFzZVVSTFwiKStyK1wiP1wiK28uZW5jb2RlKGkpLHUoZSxoLHAsYSl9LG9FbWJlZDpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/e306YXJndW1lbnRzWzFdLHI9dC5lbGVtZW50O2RlbGV0ZSB0LmVsZW1lbnQsdC51cmw9ZTt2YXIgbj1cImh0dHBzOi8vc291bmRjbG91ZC5jb20vb2VtYmVkLmpzb24/XCIrby5lbmNvZGUodCk7cmV0dXJuIHUoXCJHRVRcIixuLG51bGwpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHImJmUuaHRtbCYmKHIuaW5uZXJIVE1MPWUuaHRtbCksZX0pfSx1cGxvYWQ6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdLHQ9ZS5hc3NldF9kYXRhfHxlLmZpbGUscj1uLmdldChcIm9hdXRoX3Rva2VuXCIpJiZlLnRpdGxlJiZ0O2lmKCFyKXJldHVybiBuZXcgaShmdW5jdGlvbihlLHQpe3Qoe3N0YXR1czowLGVycm9yX21lc3NhZ2U6XCJvYXV0aF90b2tlbiBuZWVkcyB0byBiZSBwcmVzZW50IGFuZCB0aXRsZSBhbmQgYXNzZXRfZGF0YSAvIGZpbGUgcGFzc2VkIGFzIHBhcmFtZXRlcnNcIn0pfSk7dmFyIG89T2JqZWN0LmtleXMoZSksYT1uZXcgRm9ybURhdGE7cmV0dXJuIG8uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lW3RdO1wiZmlsZVwiPT09dCYmKHQ9XCJhc3NldF9kYXRhXCIscj1lLmZpbGUpLGEuYXBwZW5kKFwidHJhY2tbXCIrdCtcIl1cIixyKX0pLHRoaXMucmVxdWVzdChcIlBPU1RcIixcIi90cmFja3NcIixhLGUucHJvZ3Jlc3MpfSxyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcXVlc3QoXCJHRVRcIixcIi9yZXNvbHZlXCIse3VybDplLF9zdGF0dXNfY29kZV9tYXA6ezMwMjoyMDB9fSl9fX0pLmNhbGwodCxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjt2YXIgcj17fTtlLmV4cG9ydHM9e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gcltlXX0sc2V0OmZ1bmN0aW9uKGUsdCl7cltlXT10fX19LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3Rocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gbigpe3Rocm93IG5ldyBFcnJvcihcImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBvKGUpe2lmKGM9PT1zZXRUaW1lb3V0KXJldHVybiBzZXRUaW1lb3V0KGUsMCk7aWYoKGM9PT1yfHwhYykmJnNldFRpbWVvdXQpcmV0dXJuIGM9c2V0VGltZW91dCxzZXRUaW1lb3V0KGUsMCk7dHJ5e3JldHVybiBjKGUsMCl9Y2F0Y2godCl7dHJ5e3JldHVybiBjLmNhbGwobnVsbCxlLDApfWNhdGNoKHQpe3JldHVybiBjLmNhbGwodGhpcyxlLDApfX19ZnVuY3Rpb24gaShlKXtpZihkPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoZSk7aWYoKGQ9PT1ufHwhZCkmJmNsZWFyVGltZW91dClyZXR1cm4gZD1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtyZXR1cm4gZChlKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGQuY2FsbChudWxsLGUpfWNhdGNoKHQpe3JldHVybiBkLmNhbGwodGhpcyxlKX19fWZ1bmN0aW9uIGEoKXtfJiZwJiYoXz0hMSxwLmxlbmd0aD9oPXAuY29uY2F0KGgpOmc9LTEsaC5sZW5ndGgmJnMoKSl9ZnVuY3Rpb24gcygpe2lmKCFfKXt2YXIgZT1vKGEpO189ITA7Zm9yKHZhciB0PWgubGVuZ3RoO3Q7KXtmb3IocD1oLGg9W107KytnPHQ7KXAmJnBbZ10ucnVuKCk7Zz0tMSx0PWgubGVuZ3RofXA9bnVsbCxfPSExLGkoZSl9fWZ1bmN0aW9uIHUoZSx0KXt0aGlzLmZ1bj1lLHRoaXMuYXJyYXk9dH1mdW5jdGlvbiBsKCl7fXZhciBjLGQsZj1lLmV4cG9ydHM9e307IWZ1bmN0aW9uKCl7dHJ5e2M9XCJmdW5jdGlvblwiPT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0OnJ9Y2F0Y2goZSl7Yz1yfXRyeXtkPVwiZnVuY3Rpb25cIj09dHlwZW9mIGNsZWFyVGltZW91dD9jbGVhclRpbWVvdXQ6bn1jYXRjaChlKXtkPW59fSgpO3ZhciBwLGg9W10sXz0hMSxnPS0xO2YubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTtoLnB1c2gobmV3IHUoZSx0KSksMSE9PWgubGVuZ3RofHxffHxvKHMpfSx1LnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSxmLnRpdGxlPVwiYnJvd3NlclwiLGYuYnJvd3Nlcj0hMCxmLmVudj17fSxmLmFyZ3Y9W10sZi52ZXJzaW9uPVwiXCIsZi52ZXJzaW9ucz17fSxmLm9uPWwsZi5hZGRMaXN0ZW5lcj1sLGYub25jZT1sLGYub2ZmPWwsZi5yZW1vdmVMaXN0ZW5lcj1sLGYucmVtb3ZlQWxsTGlzdGVuZXJzPWwsZi5lbWl0PWwsZi5wcmVwZW5kTGlzdGVuZXI9bCxmLnByZXBlbmRPbmNlTGlzdGVuZXI9bCxmLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm5bXX0sZi5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxmLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxmLmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sZi51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMjIpO3QuZXh0cmFjdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdChcIj9cIilbMV18fFwiXCJ9LHQucGFyc2U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGU/e306KGU9ZS50cmltKCkucmVwbGFjZSgvXihcXD98I3wmKS8sXCJcIiksZT9lLnNwbGl0KFwiJlwiKS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXt2YXIgcj10LnJlcGxhY2UoL1xcKy9nLFwiIFwiKS5zcGxpdChcIj1cIiksbj1yLnNoaWZ0KCksbz1yLmxlbmd0aD4wP3Iuam9pbihcIj1cIik6dm9pZCAwO3JldHVybiBuPWRlY29kZVVSSUNvbXBvbmVudChuKSxvPXZvaWQgMD09PW8/bnVsbDpkZWNvZGVVUklDb21wb25lbnQobyksZS5oYXNPd25Qcm9wZXJ0eShuKT9BcnJheS5pc0FycmF5KGVbbl0pP2Vbbl0ucHVzaChvKTplW25dPVtlW25dLG9dOmVbbl09byxlfSx7fSk6e30pfSx0LnN0cmluZ2lmeT1mdW5jdGlvbihlKXtyZXR1cm4gZT9PYmplY3Qua2V5cyhlKS5zb3J0KCkubWFwKGZ1bmN0aW9uKHQpe3ZhciByPWVbdF07cmV0dXJuIEFycmF5LmlzQXJyYXkocik/ci5zb3J0KCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuKHQpK1wiPVwiK24oZSl9KS5qb2luKFwiJlwiKTpuKHQpK1wiPVwiK24ocil9KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoPjB9KS5qb2luKFwiJlwiKTpcIlwifX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNyksbz1yKDUpO2UuZXhwb3J0cz17bm90aWZ5RGlhbG9nOmZ1bmN0aW9uKGUpe3ZhciB0PW4ucGFyc2UoZS5zZWFyY2gpLHI9bi5wYXJzZShlLmhhc2gpLGk9e29hdXRoX3Rva2VuOnQuYWNjZXNzX3Rva2VufHxyLmFjY2Vzc190b2tlbixkaWFsb2dfaWQ6dC5zdGF0ZXx8ci5zdGF0ZSxlcnJvcjp0LmVycm9yfHxyLmVycm9yLGVycm9yX2Rlc2NyaXB0aW9uOnQuZXJyb3JfZGVzY3JpcHRpb258fHIuZXJyb3JfZGVzY3JpcHRpb259LGE9by5nZXQoaS5kaWFsb2dfaWQpO2EmJmEuaGFuZGxlQ29ubmVjdFJlc3BvbnNlKGkpfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDMpLG89cigxMSksaT1yKDIpLlByb21pc2UsYT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zZXQoXCJvYXV0aF90b2tlblwiLGUub2F1dGhfdG9rZW4pLGV9O2UuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF0sdD1uLmdldChcIm9hdXRoX3Rva2VuXCIpO2lmKHQpcmV0dXJuIG5ldyBpKGZ1bmN0aW9uKGUpe2Uoe29hdXRoX3Rva2VuOnR9KX0pO3ZhciByPXtjbGllbnRfaWQ6ZS5jbGllbnRfaWR8fG4uZ2V0KFwiY2xpZW50X2lkXCIpLHJlZGlyZWN0X3VyaTplLnJlZGlyZWN0X3VyaXx8bi5nZXQoXCJyZWRpcmVjdF91cmlcIikscmVzcG9uc2VfdHlwZTpcImNvZGVfYW5kX3Rva2VuXCIsc2NvcGU6ZS5zY29wZXx8XCJub24tZXhwaXJpbmdcIixkaXNwbGF5OlwicG9wdXBcIn07aWYoIXIuY2xpZW50X2lkfHwhci5yZWRpcmVjdF91cmkpdGhyb3cgbmV3IEVycm9yKFwiT3B0aW9ucyBjbGllbnRfaWQgYW5kIHJlZGlyZWN0X3VyaSBtdXN0IGJlIHBhc3NlZFwiKTt2YXIgcz1uZXcgbyhyKTtyZXR1cm4gcy5vcGVuKCkudGhlbihhKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDIpLlByb21pc2U7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGUucHJvbWlzZT1uZXcgbihmdW5jdGlvbih0LHIpe2UucmVzb2x2ZT10LGUucmVqZWN0PXJ9KSxlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCksaT1yKDEwKSxhPXIoNSkscz1yKDEyKSx1PXIoNyksbD1cIlNvdW5kQ2xvdWRfRGlhbG9nXCIsYz1mdW5jdGlvbigpe3JldHVybltsLE1hdGguY2VpbCgxZTYqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMTYpXS5qb2luKFwiX1wiKX0sZD1mdW5jdGlvbihlKXtyZXR1cm5cImh0dHBzOi8vc291bmRjbG91ZC5jb20vY29ubmVjdD9cIit1LnN0cmluZ2lmeShlKX0sZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdO24odGhpcyxlKSx0aGlzLmlkPWMoKSx0aGlzLm9wdGlvbnM9dCx0aGlzLm9wdGlvbnMuc3RhdGU9dGhpcy5pZCx0aGlzLndpZHRoPTQyMCx0aGlzLmhlaWdodD02NzAsdGhpcy5kZWZlcnJlZD1pKCl9cmV0dXJuIG8oZSxbe2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWQodGhpcy5vcHRpb25zKTtyZXR1cm4gdGhpcy5wb3B1cD1zLm9wZW4oZSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSxhLnNldCh0aGlzLmlkLHRoaXMpLHRoaXMuZGVmZXJyZWQucHJvbWlzZX19LHtrZXk6XCJoYW5kbGVDb25uZWN0UmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmVycm9yO3Q/dGhpcy5kZWZlcnJlZC5yZWplY3QoZSk6dGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpLHRoaXMucG9wdXAuY2xvc2UoKX19XSksZX0oKTtlLmV4cG9ydHM9Zn0sZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9e29wZW46ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9LG89dm9pZCAwO3JldHVybiBuLmxvY2F0aW9uPTEsbi53aWR0aD10LG4uaGVpZ2h0PXIsbi5sZWZ0PXdpbmRvdy5zY3JlZW5YKyh3aW5kb3cub3V0ZXJXaWR0aC10KS8yLG4udG9wPXdpbmRvdy5zY3JlZW5ZKyh3aW5kb3cub3V0ZXJIZWlnaHQtcikvMixuLnRvb2xiYXI9XCJub1wiLG4uc2Nyb2xsYmFycz1cInllc1wiLG89T2JqZWN0LmtleXMobikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlK1wiPVwiK25bZV19KS5qb2luKFwiLCBcIiksd2luZG93Lm9wZW4oZSxuLm5hbWUsbyl9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTkpLG89cigxKS5NYWVzdHJvQ29yZSxpPW8uZXJyb3JzLlBsYXllckZhdGFsRXJyb3IsYT1vLlN0YXRlLHM9cigxKS5TQ0F1ZGlvLmVycm9ycyx1PXMuR2VvQmxvY2tlZEVycm9yLGw9cy5Ob1N0cmVhbXNFcnJvcixjPXMuVGltZWRPdXRFcnJvcixkPXMuTm90U3VwcG9ydGVkRXJyb3IsZj0xZTMvNjA7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtzd2l0Y2goZS5nZXRTdGF0ZSgpKXtjYXNlIGEuUExBWUlORzpyZXR1cm5cInBsYXlpbmdcIjtjYXNlIGEuUEFVU0VEOnJldHVybiBlLmlzRW5kZWQoKT9cImVuZGVkXCI6XCJwYXVzZWRcIjtjYXNlIGEuREVBRDpyZXR1cm4gZS5nZXRGYXRhbEVycm9yKCk/XCJlcnJvclwiOlwiZGVhZFwiO2Nhc2UgYS5MT0FESU5HOmRlZmF1bHQ6cmV0dXJuXCJsb2FkaW5nXCJ9fWZ1bmN0aW9uIHIoKXtmdW5jdGlvbiB0KCl7d2luZG93LmNsZWFyVGltZW91dChyKSxlLmlzUGxheWluZygpJiYhZS5pc0VuZGVkKCkmJihyPXdpbmRvdy5zZXRUaW1lb3V0KHQsZikpO3ZhciBvPWUuZ2V0UG9zaXRpb24oKTtvIT09biYmKG49byxzLnRyaWdnZXIoXCJ0aW1lXCIsbykpfXZhciByPTAsbj1udWxsO2Uub25DaGFuZ2Uuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciBuPWUucGxheWluZyxvPWUuc2Vla2luZyxpPWUuZGVhZDtpP3dpbmRvdy5jbGVhclRpbWVvdXQocik6dm9pZCAwPT09biYmdm9pZCAwPT09b3x8dCgpfSl9dmFyIG89ITE7ZS5vblN0YXRlQ2hhbmdlLnN1YnNjcmliZShmdW5jdGlvbigpe3JldHVybiBzLnRyaWdnZXIoXCJzdGF0ZS1jaGFuZ2VcIix0KCkpfSksZS5vblBsYXkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7cy50cmlnZ2VyKG8/XCJwbGF5LXJlc3VtZVwiOlwicGxheS1zdGFydFwiKSxvPSEwfSksZS5vblBsYXlJbnRlbnQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7cmV0dXJuIHMudHJpZ2dlcihcInBsYXlcIil9KSxlLm9uUGxheVJlamVjdGlvbi5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7cmV0dXJuIHMudHJpZ2dlcihcInBsYXktcmVqZWN0aW9uXCIsZSl9KSxlLm9uUGF1c2VJbnRlbnQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7cmV0dXJuIHMudHJpZ2dlcihcInBhdXNlXCIpfSksZS5vblNlZWsuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7cmV0dXJuIHMudHJpZ2dlcihcInNlZWtlZFwiKX0pLGUub25TZWVrUmVqZWN0aW9uLnN1YnNjcmliZShmdW5jdGlvbihlKXtyZXR1cm4gcy50cmlnZ2VyKFwic2Vlay1yZWplY3Rpb25cIixlKX0pLGUub25Mb2FkU3RhcnQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7cmV0dXJuIHMudHJpZ2dlcihcImJ1ZmZlcmluZ19zdGFydFwiKX0pLGUub25Mb2FkRW5kLnN1YnNjcmliZShmdW5jdGlvbigpe3JldHVybiBzLnRyaWdnZXIoXCJidWZmZXJpbmdfZW5kXCIpfSksZS5vbkVuZGVkLnN1YnNjcmliZShmdW5jdGlvbigpe3JldHVybiBzLnRyaWdnZXIoXCJmaW5pc2hcIil9KSxlLm9uRXJyb3Iuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiB1P3MudHJpZ2dlcihcImdlb19ibG9ja2VkXCIpOmUgaW5zdGFuY2VvZiBsP3MudHJpZ2dlcihcIm5vX3N0cmVhbXNcIik6ZSBpbnN0YW5jZW9mIGM/cy50cmlnZ2VyKFwibm9fY29ubmVjdGlvblwiKTplIGluc3RhbmNlb2YgZD9zLnRyaWdnZXIoXCJub19wcm90b2NvbFwiKTplIGluc3RhbmNlb2YgaSYmcy50cmlnZ2VyKFwiYXVkaW9fZXJyb3JcIil9KTt2YXIgcz17cGxheTplLnBsYXkuYmluZChlKSxwYXVzZTplLnBhdXNlLmJpbmQoZSksc2VlazplLnNlZWsuYmluZChlKSxnZXRWb2x1bWU6ZS5nZXRWb2x1bWUuYmluZChlKSxzZXRWb2x1bWU6ZS5zZXRWb2x1bWUuYmluZChlKSxjdXJyZW50VGltZTplLmdldFBvc2l0aW9uLmJpbmQoZSksZ2V0RHVyYXRpb246ZS5nZXREdXJhdGlvbi5iaW5kKGUpLGlzQnVmZmVyaW5nOmUuaXNMb2FkaW5nLmJpbmQoZSksaXNQbGF5aW5nOmUuaXNQbGF5aW5nLmJpbmQoZSksaXNBY3R1YWxseVBsYXlpbmc6ZS5pc0FjdHVhbGx5UGxheWluZy5iaW5kKGUpLGlzRW5kZWQ6ZS5pc0VuZGVkLmJpbmQoZSksaXNEZWFkOmUuaXNEZWFkLmJpbmQoZSksa2lsbDplLmtpbGwuYmluZChlKSxoYXNFcnJvcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFlLmdldEZhdGFsRXJyb3IoKX0sZ2V0U3RhdGU6dH07cmV0dXJuIG4ubWl4aW4ocykscigpLHN9fSxmdW5jdGlvbihlLHQpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgcj10LkF1ZGlvQ29udGV4dHx8dC53ZWJraXRBdWRpb0NvbnRleHQsbj1udWxsO2UuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBuP246bj1uZXcgcn19KS5jYWxsKHQsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKGUsdCl7KGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciByPXQubmF2aWdhdG9yLmdldFVzZXJNZWRpYXx8dC5uYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhfHx0Lm5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWE7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsbixvKXtyLmNhbGwodC5uYXZpZ2F0b3IsZSxuLG8pfX0pLmNhbGwodCxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCksaT1yKDE0KSxhPXIoMTUpLHM9cigyKS5Qcm9taXNlLHU9cigyOCksbD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmNvbnRleHQ7cmV0dXJuIG5ldyBzKGZ1bmN0aW9uKHIsbil7ZS5zb3VyY2U/ZS5zb3VyY2UgaW5zdGFuY2VvZiBBdWRpb05vZGU/cihlLnNvdXJjZSk6bihuZXcgRXJyb3IoXCJzb3VyY2UgbmVlZHMgdG8gYmUgYW4gaW5zdGFuY2Ugb2YgQXVkaW9Ob2RlXCIpKTphKHthdWRpbzohMH0sZnVuY3Rpb24obil7ZS5zdHJlYW09bixlLnNvdXJjZT10LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG4pLHIoZS5zb3VyY2UpfS5iaW5kKGUpLG4pfSl9LGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXTtuKHRoaXMsZSksdGhpcy5jb250ZXh0PXQuY29udGV4dHx8aSgpLHRoaXMuX3JlY29yZGVyPW51bGwsdGhpcy5zb3VyY2U9dC5zb3VyY2UsdGhpcy5zdHJlYW09bnVsbH1yZXR1cm4gbyhlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGwuY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9yZWNvcmRlcj1uZXcgdSh0KSxlLl9yZWNvcmRlci5yZWNvcmQoKSx0fSl9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fcmVjb3JkZXImJnRoaXMuX3JlY29yZGVyLnN0b3AoKSx0aGlzLnN0cmVhbSlpZih0aGlzLnN0cmVhbS5zdG9wKXRoaXMuc3RyZWFtLnN0b3AoKTtlbHNlIGlmKHRoaXMuc3RyZWFtLmdldFRyYWNrcyl7dmFyIGU9dGhpcy5zdHJlYW0uZ2V0VHJhY2tzKClbMF07ZSYmZS5zdG9wKCl9fX0se2tleTpcImdldEJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHMoZnVuY3Rpb24odCxyKXtlLl9yZWNvcmRlcj9lLl9yZWNvcmRlci5nZXRCdWZmZXIoZnVuY3Rpb24ocil7dmFyIG49ZS5jb250ZXh0LnNhbXBsZVJhdGUsbz1lLmNvbnRleHQuY3JlYXRlQnVmZmVyKDIsclswXS5sZW5ndGgsbik7by5nZXRDaGFubmVsRGF0YSgwKS5zZXQoclswXSksby5nZXRDaGFubmVsRGF0YSgxKS5zZXQoclsxXSksdChvKX0uYmluZChlKSk6cihuZXcgRXJyb3IoXCJOb3RoaW5nIGhhcyBiZWVuIHJlY29yZGVkIHlldC5cIikpfSl9fSx7a2V5OlwiZ2V0V0FWXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgcyhmdW5jdGlvbih0LHIpe2UuX3JlY29yZGVyP2UuX3JlY29yZGVyLmV4cG9ydFdBVihmdW5jdGlvbihlKXt0KGUpfSk6cihuZXcgRXJyb3IoXCJOb3RoaW5nIGhhcyBiZWVuIHJlY29yZGVkIHlldC5cIikpfSl9fSx7a2V5OlwicGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5nZXRCdWZmZXIoKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciByPWUuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtyZXR1cm4gci5idWZmZXI9dCxyLmNvbm5lY3QoZS5jb250ZXh0LmRlc3RpbmF0aW9uKSxyLnN0YXJ0KDApLHJ9KX19LHtrZXk6XCJzYXZlQXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRXQVYoKS50aGVuKGZ1bmN0aW9uKHQpe3UuZm9yY2VEb3dubG9hZCh0LGUpfSl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZWNvcmRlciYmKHRoaXMuX3JlY29yZGVyLnN0b3AoKSx0aGlzLl9yZWNvcmRlci5jbGVhcigpLHRoaXMuX3JlY29yZGVyPW51bGwpLHRoaXMuc3RyZWFtJiZ0aGlzLnN0cmVhbS5zdG9wKCl9fV0pLGV9KCk7ZS5leHBvcnRzPWN9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDQpLG89cigzKSxpPXIoMTMpLGE9cigxKS5TQ0F1ZGlvLHM9cigxKS5TQ0F1ZGlvUHVibGljQXBpU3RyZWFtVVJMUmV0cmlldmVyLlN0cmVhbVVybFJldHJpZXZlcix1PXIoMSkuTWFlc3Ryb0hUTUw1UGxheWVyLkhUTUw1UGxheWVyLGw9cigxKS5NYWVzdHJvSExTTVNFUGxheWVyLkhMU01TRVBsYXllcixjPXIoMSkuTWFlc3Ryb0xvYWRlcnMuc3RyaW5nTG9hZGVyLGQ9M2UzO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPXQ/e3NlY3JldF90b2tlbjp0fTp7fTtyZXR1cm4gbi5yZXF1ZXN0KFwiR0VUXCIsZSxyKS50aGVuKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIoKXt2YXIgcj1uK1wiL3RyYWNrcy9cIitlbmNvZGVVUklDb21wb25lbnQoZS5pZCkrXCIvcGxheXM/Y2xpZW50X2lkPVwiK2VuY29kZVVSSUNvbXBvbmVudChmKTt0JiYocis9XCImc2VjcmV0X3Rva2VuPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSk7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O28ub3BlbihcIlBPU1RcIixyLCEwKSxvLnNlbmQoKX12YXIgbj1vLmdldChcImJhc2VVUkxcIiksZj1vLmdldChcImNsaWVudF9pZFwiKSxwPW8uZ2V0KFwib2F1dGhfdG9rZW5cIiksaD0hMSxfPW5ldyBzKHtjbGllbnRJZDpmLHNlY3JldFRva2VuOnQsdHJhY2tJZDplLmlkLHJlcXVlc3RBdXRob3JpemF0aW9uOnA/XCJPQXV0aCBcIitwOm51bGwsbG9hZGVyOmN9KSxnPWEuYnVpbGRQbGF5ZXIoe3BsYXllckNsYXNzZXM6W3UsbF0sc3RyZWFtVXJsUmV0cmlldmVyOl8sZmFkZU91dER1cmF0aW9uOlwiU05JUFwiPT09ZS5wb2xpY3k/ZDowfSk7cmV0dXJuIGcub25QbGF5LnN1YnNjcmliZShmdW5jdGlvbigpe2h8fChoPSEwLHIoKSl9KSxnLm9uRW5kZWQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7Zy5wYXVzZSgpfSksZy5vblBsYXlJbnRlbnQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7Zy5pc0VuZGVkKCkmJmcuc2VlaygwKX0pLGkoZyl9KX0sZS5leHBvcnRzLmFjdGl2YXRlQXVkaW9FbGVtZW50PWZ1bmN0aW9uKCl7YS5hY3RpdmF0ZUF1ZGlvRWxlbWVudCgpfX0sZnVuY3Rpb24oZSx0LHIpeyFmdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXtyZXR1cm57a2V5czpPYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGV8fG51bGw9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJrZXlzKCkgY2FsbGVkIG9uIGEgbm9uLW9iamVjdFwiKTt2YXIgdCxyPVtdO2Zvcih0IGluIGUpZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKHJbci5sZW5ndGhdPXQpO3JldHVybiByfSx1bmlxdWVJZDpmdW5jdGlvbihlKXt2YXIgdD0rK3MrXCJcIjtyZXR1cm4gZT9lK3Q6dH0saGFzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkuY2FsbChlLHQpfSxlYWNoOmZ1bmN0aW9uKGUsdCxyKXtpZihudWxsIT1lKWlmKG8mJmUuZm9yRWFjaD09PW8pZS5mb3JFYWNoKHQscik7ZWxzZSBpZihlLmxlbmd0aD09PStlLmxlbmd0aClmb3IodmFyIG49MCxpPWUubGVuZ3RoO248aTtuKyspdC5jYWxsKHIsZVtuXSxuLGUpO2Vsc2UgZm9yKHZhciBhIGluIGUpdGhpcy5oYXMoZSxhKSYmdC5jYWxsKHIsZVthXSxhLGUpfSxvbmNlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHI/dDoocj0hMCx0PWUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGU9bnVsbCx0KX19fX12YXIgbixvPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLGk9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxhPUFycmF5LnByb3RvdHlwZS5zbGljZSxzPTAsdT1yKCk7bj17b246ZnVuY3Rpb24oZSx0LHIpe2lmKCFjKHRoaXMsXCJvblwiLGUsW3Qscl0pfHwhdClyZXR1cm4gdGhpczt0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pO3ZhciBuPXRoaXMuX2V2ZW50c1tlXXx8KHRoaXMuX2V2ZW50c1tlXT1bXSk7cmV0dXJuIG4ucHVzaCh7Y2FsbGJhY2s6dCxjb250ZXh0OnIsY3R4OnJ8fHRoaXN9KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKGUsdCxyKXtpZighYyh0aGlzLFwib25jZVwiLGUsW3Qscl0pfHwhdClyZXR1cm4gdGhpczt2YXIgbj10aGlzLG89dS5vbmNlKGZ1bmN0aW9uKCl7bi5vZmYoZSxvKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO3JldHVybiBvLl9jYWxsYmFjaz10LHRoaXMub24oZSxvLHIpfSxvZmY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxhLHMsbCxkLGY7aWYoIXRoaXMuX2V2ZW50c3x8IWModGhpcyxcIm9mZlwiLGUsW3Qscl0pKXJldHVybiB0aGlzO2lmKCFlJiYhdCYmIXIpcmV0dXJuIHRoaXMuX2V2ZW50cz17fSx0aGlzO2ZvcihhPWU/W2VdOnUua2V5cyh0aGlzLl9ldmVudHMpLHM9MCxsPWEubGVuZ3RoO3M8bDtzKyspaWYoZT1hW3NdLGk9dGhpcy5fZXZlbnRzW2VdKXtpZih0aGlzLl9ldmVudHNbZV09bj1bXSx0fHxyKWZvcihkPTAsZj1pLmxlbmd0aDtkPGY7ZCsrKW89aVtkXSwodCYmdCE9PW8uY2FsbGJhY2smJnQhPT1vLmNhbGxiYWNrLl9jYWxsYmFja3x8ciYmciE9PW8uY29udGV4dCkmJm4ucHVzaChvKTtuLmxlbmd0aHx8ZGVsZXRlIHRoaXMuX2V2ZW50c1tlXX1yZXR1cm4gdGhpc30sdHJpZ2dlcjpmdW5jdGlvbihlKXtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO3ZhciB0PWEuY2FsbChhcmd1bWVudHMsMSk7aWYoIWModGhpcyxcInRyaWdnZXJcIixlLHQpKXJldHVybiB0aGlzO3ZhciByPXRoaXMuX2V2ZW50c1tlXSxuPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIHImJmQocix0KSxuJiZkKG4sYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLl9saXN0ZW5lcnM7aWYoIW4pcmV0dXJuIHRoaXM7dmFyIG89IXQmJiFyO1wib2JqZWN0XCI9PXR5cGVvZiB0JiYocj10aGlzKSxlJiYoKG49e30pW2UuX2xpc3RlbmVySWRdPWUpO2Zvcih2YXIgaSBpbiBuKW5baV0ub2ZmKHQscix0aGlzKSxvJiZkZWxldGUgdGhpcy5fbGlzdGVuZXJzW2ldO3JldHVybiB0aGlzfX07dmFyIGw9L1xccysvLGM9ZnVuY3Rpb24oZSx0LHIsbil7aWYoIXIpcmV0dXJuITA7aWYoXCJvYmplY3RcIj09dHlwZW9mIHIpe2Zvcih2YXIgbyBpbiByKWVbdF0uYXBwbHkoZSxbbyxyW29dXS5jb25jYXQobikpO3JldHVybiExfWlmKGwudGVzdChyKSl7Zm9yKHZhciBpPXIuc3BsaXQobCksYT0wLHM9aS5sZW5ndGg7YTxzO2ErKyllW3RdLmFwcGx5KGUsW2lbYV1dLmNvbmNhdChuKSk7cmV0dXJuITF9cmV0dXJuITB9LGQ9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPS0xLG89ZS5sZW5ndGgsaT10WzBdLGE9dFsxXSxzPXRbMl07c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6Zm9yKDsrK248bzspKHI9ZVtuXSkuY2FsbGJhY2suY2FsbChyLmN0eCk7cmV0dXJuO2Nhc2UgMTpmb3IoOysrbjxvOykocj1lW25dKS5jYWxsYmFjay5jYWxsKHIuY3R4LGkpO3JldHVybjtjYXNlIDI6Zm9yKDsrK248bzspKHI9ZVtuXSkuY2FsbGJhY2suY2FsbChyLmN0eCxpLGEpO3JldHVybjtjYXNlIDM6Zm9yKDsrK248bzspKHI9ZVtuXSkuY2FsbGJhY2suY2FsbChyLmN0eCxpLGEscyk7cmV0dXJuO2RlZmF1bHQ6Zm9yKDsrK248bzspKHI9ZVtuXSkuY2FsbGJhY2suYXBwbHkoci5jdHgsdCl9fSxmPXtsaXN0ZW5UbzpcIm9uXCIsbGlzdGVuVG9PbmNlOlwib25jZVwifTt1LmVhY2goZixmdW5jdGlvbihlLHQpe25bdF09ZnVuY3Rpb24odCxyLG4pe3ZhciBvPXRoaXMuX2xpc3RlbmVyc3x8KHRoaXMuX2xpc3RlbmVycz17fSksaT10Ll9saXN0ZW5lcklkfHwodC5fbGlzdGVuZXJJZD11LnVuaXF1ZUlkKFwibFwiKSk7cmV0dXJuIG9baV09dCxcIm9iamVjdFwiPT10eXBlb2YgciYmKG49dGhpcyksdFtlXShyLG4sdGhpcyksdGhpc319KSxuLmJpbmQ9bi5vbixuLnVuYmluZD1uLm9mZixuLm1peGluPWZ1bmN0aW9uKGUpe3ZhciB0PVtcIm9uXCIsXCJvbmNlXCIsXCJvZmZcIixcInRyaWdnZXJcIixcInN0b3BMaXN0ZW5pbmdcIixcImxpc3RlblRvXCIsXCJsaXN0ZW5Ub09uY2VcIixcImJpbmRcIixcInVuYmluZFwiXTtyZXR1cm4gdS5lYWNoKHQsZnVuY3Rpb24odCl7ZVt0XT10aGlzW3RdfSx0aGlzKSxlfSxcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmZS5leHBvcnRzJiYodD1lLmV4cG9ydHM9biksdC5CYWNrYm9uZUV2ZW50cz1ufSh0aGlzKX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDE4KX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e2VuY29kZTpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLmxlbmd0aH0pLmpvaW4oXCImXCIpfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9T2JqZWN0LmtleXMoZSk7cmV0dXJuIGQ/dC5zb3J0KCk6dH1mdW5jdGlvbiBvKGUsdCl7dmFyIG89XCI6bmFtZVs6cHJvcF1cIjtyZXR1cm4gcihuKHQpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gYShvLnJlcGxhY2UoLzpuYW1lLyxlKS5yZXBsYWNlKC86cHJvcC8sciksdFtyXSl9KSl9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPVwiOm5hbWVbXVwiO3JldHVybiByKHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBhKG4ucmVwbGFjZSgvOm5hbWUvLGUpLHQpfSkpfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj0vJTIwL2csbj1lbmNvZGVVUklDb21wb25lbnQsYT10eXBlb2YgdCxzPW51bGw7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/cz1pKGUsdCk6XCJzdHJpbmdcIj09PWE/cz1uKGUpK1wiPVwiK3UodCk6XCJudW1iZXJcIj09PWE/cz1uKGUpK1wiPVwiK24odCkucmVwbGFjZShyLFwiK1wiKTpcImJvb2xlYW5cIj09PWE/cz1uKGUpK1wiPVwiK3Q6XCJvYmplY3RcIj09PWEmJihudWxsIT09dD9zPW8oZSx0KTpjfHwocz1uKGUpK1wiPW51bGxcIikpLHN9ZnVuY3Rpb24gcyhlKXtyZXR1cm5cIiVcIisoXCIwXCIrZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpLnRvVXBwZXJDYXNlKCl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gZS5yZXBsYWNlKC9bXiAhJygpflxcKl0qL2csZW5jb2RlVVJJQ29tcG9uZW50KS5yZXBsYWNlKC8gL2csXCIrXCIpLnJlcGxhY2UoL1shJygpflxcKl0vZyxzKX12YXIgbD1cIm9iamVjdFwiPT10eXBlb2YgdD90Ont9LGM9bC5pZ25vcmVudWxsfHwhMSxkPWwuc29ydGVkfHwhMTtyZXR1cm4gcihuKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gYSh0LGVbdF0pfSkpfX19LGZ1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24oZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJihlPW5ldyBGdW5jdGlvbihcIlwiK2UpKTtmb3IodmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSkscj0wO3I8dC5sZW5ndGg7cisrKXRbcl09YXJndW1lbnRzW3IrMV07dmFyIG49e2NhbGxiYWNrOmUsYXJnczp0fTtyZXR1cm4gX1toXT1uLHAoaCksaCsrfWZ1bmN0aW9uIG8oZSl7ZGVsZXRlIF9bZV19ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmNhbGxiYWNrLG49ZS5hcmdzO3N3aXRjaChuLmxlbmd0aCl7Y2FzZSAwOnQoKTticmVhaztjYXNlIDE6dChuWzBdKTticmVhaztjYXNlIDI6dChuWzBdLG5bMV0pO2JyZWFrO2Nhc2UgMzp0KG5bMF0sblsxXSxuWzJdKTticmVhaztkZWZhdWx0OnQuYXBwbHkocixuKX19ZnVuY3Rpb24gYShlKXtpZihnKXNldFRpbWVvdXQoYSwwLGUpO2Vsc2V7dmFyIHQ9X1tlXTtpZih0KXtnPSEwO3RyeXtpKHQpfWZpbmFsbHl7byhlKSxnPSExfX19fWZ1bmN0aW9uIHMoKXtwPWZ1bmN0aW9uKGUpe3QubmV4dFRpY2soZnVuY3Rpb24oKXthKGUpfSl9fWZ1bmN0aW9uIHUoKXtpZihlLnBvc3RNZXNzYWdlJiYhZS5pbXBvcnRTY3JpcHRzKXt2YXIgdD0hMCxyPWUub25tZXNzYWdlO3JldHVybiBlLm9ubWVzc2FnZT1mdW5jdGlvbigpe3Q9ITF9LGUucG9zdE1lc3NhZ2UoXCJcIixcIipcIiksZS5vbm1lc3NhZ2U9cix0fX1mdW5jdGlvbiBsKCl7dmFyIHQ9XCJzZXRJbW1lZGlhdGUkXCIrTWF0aC5yYW5kb20oKStcIiRcIixyPWZ1bmN0aW9uKHIpe3Iuc291cmNlPT09ZSYmXCJzdHJpbmdcIj09dHlwZW9mIHIuZGF0YSYmMD09PXIuZGF0YS5pbmRleE9mKHQpJiZhKCtyLmRhdGEuc2xpY2UodC5sZW5ndGgpKX07ZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixyLCExKTplLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIscikscD1mdW5jdGlvbihyKXtlLnBvc3RNZXNzYWdlKHQrcixcIipcIil9fWZ1bmN0aW9uIGMoKXt2YXIgZT1uZXcgTWVzc2FnZUNoYW5uZWw7ZS5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhO2EodCl9LHA9ZnVuY3Rpb24odCl7ZS5wb3J0Mi5wb3N0TWVzc2FnZSh0KX19ZnVuY3Rpb24gZCgpe3ZhciBlPXkuZG9jdW1lbnRFbGVtZW50O3A9ZnVuY3Rpb24odCl7dmFyIHI9eS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3Iub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7YSh0KSxyLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGUucmVtb3ZlQ2hpbGQocikscj1udWxsfSxlLmFwcGVuZENoaWxkKHIpfX1mdW5jdGlvbiBmKCl7cD1mdW5jdGlvbihlKXtzZXRUaW1lb3V0KGEsMCxlKX19aWYoIWUuc2V0SW1tZWRpYXRlKXt2YXIgcCxoPTEsXz17fSxnPSExLHk9ZS5kb2N1bWVudCx2PU9iamVjdC5nZXRQcm90b3R5cGVPZiYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3Y9diYmdi5zZXRUaW1lb3V0P3Y6ZSxcIltvYmplY3QgcHJvY2Vzc11cIj09PXt9LnRvU3RyaW5nLmNhbGwoZS5wcm9jZXNzKT9zKCk6dSgpP2woKTplLk1lc3NhZ2VDaGFubmVsP2MoKTp5JiZcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4geS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpP2QoKTpmKCksdi5zZXRJbW1lZGlhdGU9bix2LmNsZWFySW1tZWRpYXRlPW99fShcInVuZGVmaW5lZFwiPT10eXBlb2Ygc2VsZj9cInVuZGVmaW5lZFwiPT10eXBlb2YgZT90aGlzOmU6c2VsZil9KS5jYWxsKHQsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSxyKDYpKX0sZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC9bIScoKSpdL2csZnVuY3Rpb24oZSl7cmV0dXJuXCIlXCIrZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfSl9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlLndlYnBhY2tQb2x5ZmlsbHx8KGUuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSxlLnBhdGhzPVtdLGUuY2hpbGRyZW49W10sZS53ZWJwYWNrUG9seWZpbGw9MSksZX19LGZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKGUsdCl7dGhpcy5faWQ9ZSx0aGlzLl9jbGVhckZuPXR9dmFyIG89RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O3Quc2V0VGltZW91dD1mdW5jdGlvbigpe3JldHVybiBuZXcgbihvLmNhbGwoc2V0VGltZW91dCx3aW5kb3csYXJndW1lbnRzKSxjbGVhclRpbWVvdXQpfSx0LnNldEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKG8uY2FsbChzZXRJbnRlcnZhbCx3aW5kb3csYXJndW1lbnRzKSxjbGVhckludGVydmFsKX0sdC5jbGVhclRpbWVvdXQ9dC5jbGVhckludGVydmFsPWZ1bmN0aW9uKGUpe2UmJmUuY2xvc2UoKX0sbi5wcm90b3R5cGUudW5yZWY9bi5wcm90b3R5cGUucmVmPWZ1bmN0aW9uKCl7fSxuLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csdGhpcy5faWQpfSx0LmVucm9sbD1mdW5jdGlvbihlLHQpe2NsZWFyVGltZW91dChlLl9pZGxlVGltZW91dElkKSxlLl9pZGxlVGltZW91dD10fSx0LnVuZW5yb2xsPWZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChlLl9pZGxlVGltZW91dElkKSxlLl9pZGxlVGltZW91dD0tMX0sdC5fdW5yZWZBY3RpdmU9dC5hY3RpdmU9ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KGUuX2lkbGVUaW1lb3V0SWQpO3ZhciB0PWUuX2lkbGVUaW1lb3V0O3Q+PTAmJihlLl9pZGxlVGltZW91dElkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9vblRpbWVvdXQmJmUuX29uVGltZW91dCgpfSx0KSl9LHIoMjEpLHQuc2V0SW1tZWRpYXRlPXNldEltbWVkaWF0ZSx0LmNsZWFySW1tZWRpYXRlPWNsZWFySW1tZWRpYXRlfSxmdW5jdGlvbihlLHQpe3ZhciByPXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkw7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dHJ5e3RyeXt2YXIgbjt0cnl7dmFyIG89d2luZG93LkJsb2JCdWlsZGVyfHx3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXI7bj1uZXcgbyxuLmFwcGVuZChlKSxuPW4uZ2V0QmxvYigpfWNhdGNoKHQpe249bmV3IEJsb2IoW2VdKX1yZXR1cm4gbmV3IFdvcmtlcihyLmNyZWF0ZU9iamVjdFVSTChuKSl9Y2F0Y2godCl7cmV0dXJuIG5ldyBXb3JrZXIoXCJkYXRhOmFwcGxpY2F0aW9uL2phdmFzY3JpcHQsXCIrZW5jb2RlVVJJQ29tcG9uZW50KGUpKX19Y2F0Y2goZSl7cmV0dXJuIG5ldyBXb3JrZXIodCl9fX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiByKDI2KSgnIWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBhPWVbcl09e2V4cG9ydHM6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiB0W3JdLmNhbGwoYS5leHBvcnRzLGEsYS5leHBvcnRzLG4pLGEubG9hZGVkPSEwLGEuZXhwb3J0c312YXIgZT17fTtyZXR1cm4gbi5tPXQsbi5jPWUsbi5wPVwiXCIsbigwKX0oW2Z1bmN0aW9uKHQsbil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4odCl7aD10LnNhbXBsZVJhdGUsdj10Lm51bUNoYW5uZWxzLHMoKX1mdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj0wO248djtuKyspcFtuXS5wdXNoKHRbbl0pO2crPXRbMF0ubGVuZ3RofWZ1bmN0aW9uIHIodCl7Zm9yKHZhciBuPVtdLGU9MDtlPHY7ZSsrKW4ucHVzaChpKHBbZV0sZykpO2lmKDI9PT12KXZhciByPWYoblswXSxuWzFdKTtlbHNlIHZhciByPW5bMF07dmFyIGE9bChyKSxvPW5ldyBCbG9iKFthXSx7dHlwZTp0fSk7dGhpcy5wb3N0TWVzc2FnZShvKX1mdW5jdGlvbiBhKCl7Zm9yKHZhciB0PVtdLG49MDtuPHY7bisrKXQucHVzaChpKHBbbl0sZykpO3RoaXMucG9zdE1lc3NhZ2UodCl9ZnVuY3Rpb24gbygpe2c9MCxwPVtdLHMoKX1mdW5jdGlvbiBzKCl7Zm9yKHZhciB0PTA7dDx2O3QrKylwW3RdPVtdfWZ1bmN0aW9uIGkodCxuKXtmb3IodmFyIGU9bmV3IEZsb2F0MzJBcnJheShuKSxyPTAsYT0wO2E8dC5sZW5ndGg7YSsrKWUuc2V0KHRbYV0scikscis9dFthXS5sZW5ndGg7cmV0dXJuIGV9ZnVuY3Rpb24gZih0LG4pe2Zvcih2YXIgZT10Lmxlbmd0aCtuLmxlbmd0aCxyPW5ldyBGbG9hdDMyQXJyYXkoZSksYT0wLG89MDthPGU7KXJbYSsrXT10W29dLHJbYSsrXT1uW29dLG8rKztyZXR1cm4gcn1mdW5jdGlvbiBjKHQsbixlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyxuKz0yKXt2YXIgYT1NYXRoLm1heCgtMSxNYXRoLm1pbigxLGVbcl0pKTt0LnNldEludDE2KG4sYTwwPzMyNzY4KmE6MzI3NjcqYSwhMCl9fWZ1bmN0aW9uIHUodCxuLGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXQuc2V0VWludDgobityLGUuY2hhckNvZGVBdChyKSl9ZnVuY3Rpb24gbCh0KXt2YXIgbj1uZXcgQXJyYXlCdWZmZXIoNDQrMip0Lmxlbmd0aCksZT1uZXcgRGF0YVZpZXcobik7cmV0dXJuIHUoZSwwLFwiUklGRlwiKSxlLnNldFVpbnQzMig0LDM2KzIqdC5sZW5ndGgsITApLHUoZSw4LFwiV0FWRVwiKSx1KGUsMTIsXCJmbXQgXCIpLGUuc2V0VWludDMyKDE2LDE2LCEwKSxlLnNldFVpbnQxNigyMCwxLCEwKSxlLnNldFVpbnQxNigyMix2LCEwKSxlLnNldFVpbnQzMigyNCxoLCEwKSxlLnNldFVpbnQzMigyOCw0KmgsITApLGUuc2V0VWludDE2KDMyLDIqdiwhMCksZS5zZXRVaW50MTYoMzQsMTYsITApLHUoZSwzNixcImRhdGFcIiksZS5zZXRVaW50MzIoNDAsMip0Lmxlbmd0aCwhMCksYyhlLDQ0LHQpLGV9dmFyIGgsdixnPTAscD1bXTt0Lm9ubWVzc2FnZT1mdW5jdGlvbih0KXtzd2l0Y2godC5kYXRhLmNvbW1hbmQpe2Nhc2VcImluaXRcIjpuKHQuZGF0YS5jb25maWcpO2JyZWFrO2Nhc2VcInJlY29yZFwiOmUodC5kYXRhLmJ1ZmZlcik7YnJlYWs7Y2FzZVwiZXhwb3J0V0FWXCI6cih0LmRhdGEudHlwZSk7YnJlYWs7Y2FzZVwiZ2V0QnVmZmVyXCI6YSgpO2JyZWFrO2Nhc2VcImNsZWFyXCI6bygpfX19KS5jYWxsKG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9XSk7XFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9OWY5YWFjMzJjOWE3NDMyYjU1NTUud29ya2VyLmpzLm1hcCcsci5wK1wiOWY5YWFjMzJjOWE3NDMyYjU1NTUud29ya2VyLmpzXCIpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjcpLG89ZnVuY3Rpb24oZSx0KXt2YXIgcj10fHx7fSxvPXIuYnVmZmVyTGVufHw0MDk2LGk9ci5udW1DaGFubmVsc3x8Mjt0aGlzLmNvbnRleHQ9ZS5jb250ZXh0LHRoaXMubm9kZT0odGhpcy5jb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcnx8dGhpcy5jb250ZXh0LmNyZWF0ZUphdmFTY3JpcHROb2RlKS5jYWxsKHRoaXMuY29udGV4dCxvLGksaSk7dmFyIGE9bmV3IG47YS5wb3N0TWVzc2FnZSh7Y29tbWFuZDpcImluaXRcIixjb25maWc6e3NhbXBsZVJhdGU6dGhpcy5jb250ZXh0LnNhbXBsZVJhdGUsbnVtQ2hhbm5lbHM6aX19KTt2YXIgcyx1PSExO3RoaXMubm9kZS5vbmF1ZGlvcHJvY2Vzcz1mdW5jdGlvbihlKXtpZih1KXtmb3IodmFyIHQ9W10scj0wO3I8aTtyKyspdC5wdXNoKGUuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEocikpO2EucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJyZWNvcmRcIixidWZmZXI6dH0pfX0sdGhpcy5jb25maWd1cmU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKHJbdF09ZVt0XSl9LHRoaXMucmVjb3JkPWZ1bmN0aW9uKCl7dT0hMH0sdGhpcy5zdG9wPWZ1bmN0aW9uKCl7dT0hMX0sdGhpcy5jbGVhcj1mdW5jdGlvbigpe2EucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJjbGVhclwifSl9LHRoaXMuZ2V0QnVmZmVyPWZ1bmN0aW9uKGUpe3M9ZXx8ci5jYWxsYmFjayxhLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwiZ2V0QnVmZmVyXCJ9KX0sdGhpcy5leHBvcnRXQVY9ZnVuY3Rpb24oZSx0KXtpZihzPWV8fHIuY2FsbGJhY2ssdD10fHxyLnR5cGV8fFwiYXVkaW8vd2F2XCIsIXMpdGhyb3cgbmV3IEVycm9yKFwiQ2FsbGJhY2sgbm90IHNldFwiKTthLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwiZXhwb3J0V0FWXCIsdHlwZTp0fSl9LGEub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YTtzKHQpfSxlLmNvbm5lY3QodGhpcy5ub2RlKSx0aGlzLm5vZGUuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pfTtvLmZvcmNlRG93bmxvYWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj0od2luZG93LlVSTHx8d2luZG93LndlYmtpdFVSTCkuY3JlYXRlT2JqZWN0VVJMKGUpLG49d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO24uaHJlZj1yLG4uZG93bmxvYWQ9dHx8XCJvdXRwdXQud2F2XCI7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtvLmluaXRFdmVudChcImNsaWNrXCIsITAsITApLG4uZGlzcGF0Y2hFdmVudChvKX0sZS5leHBvcnRzPW99LGZ1bmN0aW9uKGUsdCl7fV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZGsuanMubWFwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/soundcloud/sdk.js\n");

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(/*! setimmediate */ \"./node_modules/setimmediate/setImmediate.js\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzPzUxMTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNjb3BlID0gKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYpIHx8XG4gICAgICAgICAgICB3aW5kb3c7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWRpYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/timers-browserify/main.js\n");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! ./sass/index.scss */ \"./src/sass/index.scss\");\n\n__webpack_require__(/*! ./js/index.js */ \"./src/js/index.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2luZGV4LmpzPzEyZDUiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8vIHN0eWxlc1xyXG5pbXBvcnQgJy4vc2Fzcy9pbmRleC5zY3NzJztcclxuXHJcbi8vIGpzXHJcbmltcG9ydCAnLi9qcy9pbmRleC5qcyc7XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7O0FBRUE7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/js/common/init.js":
/*!*******************************!*\
  !*** ./src/js/common/init.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _svg = __webpack_require__(/*! ../events/svg.events */ \"./src/js/events/svg.events.js\");\n\nvar _modifyForGenreSVG = __webpack_require__(/*! ../svg/modifyForGenreSVG */ \"./src/js/svg/modifyForGenreSVG.js\");\n\nvar _modifyForTrackSVG = __webpack_require__(/*! ../svg/modifyForTrackSVG */ \"./src/js/svg/modifyForTrackSVG.js\");\n\nvar _tracks = __webpack_require__(/*! ../events/tracks.events */ \"./src/js/events/tracks.events.js\");\n\nvar init = function init() {\n\tvar svgTrianglesNodes = window.document.querySelectorAll('.svgTriangle');\n\tvar svgTrianglesElements = Array.prototype.slice.call(svgTrianglesNodes);\n\n\t/**\r\n  * @description This will load the genres in the SVG and add the events for click to the tracks\r\n  */\n\n\tvar screenLoad = function screenLoad() {\n\t\t(0, _modifyForGenreSVG.modifyForGenreSVG)(svgTrianglesElements);\n\t\t(0, _svg.genreSVGEvents)(svgTrianglesElements);\n\t};\n\n\t/**\r\n  * @description once a user has selected the genre they want to load\r\n  * @param {string} genre\r\n  */\n\tvar trackLoad = function trackLoad(genre) {\n\t\tconsole.log(genre);\n\t\t(0, _modifyForTrackSVG.modifyForTrackSVG)(svgTrianglesElements, genre);\n\t\t(0, _tracks.tracksEvents)(svgTrianglesElements);\n\t};\n\n\treturn {\n\t\tscreenLoad: screenLoad,\n\t\ttrackLoad: trackLoad\n\t};\n};\n\nexports.default = init;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvY29tbW9uL2luaXQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2NvbW1vbi9pbml0LmpzPzMyODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VucmVTVkdFdmVudHMgfSBmcm9tIFwiLi4vZXZlbnRzL3N2Zy5ldmVudHNcIjtcclxuaW1wb3J0IHsgbW9kaWZ5Rm9yR2VucmVTVkcgfSBmcm9tICcuLi9zdmcvbW9kaWZ5Rm9yR2VucmVTVkcnO1xyXG5pbXBvcnQgeyBtb2RpZnlGb3JUcmFja1NWRyB9IGZyb20gXCIuLi9zdmcvbW9kaWZ5Rm9yVHJhY2tTVkdcIjtcclxuaW1wb3J0IHt0cmFja3NFdmVudHN9IGZyb20gXCIuLi9ldmVudHMvdHJhY2tzLmV2ZW50c1wiO1xyXG5cclxuXHJcblxyXG5jb25zdCBpbml0ID0gKCkgPT4ge1xyXG5cdGNvbnN0IHN2Z1RyaWFuZ2xlc05vZGVzID0gd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdmdUcmlhbmdsZScpO1xyXG5cdGNvbnN0IHN2Z1RyaWFuZ2xlc0VsZW1lbnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoc3ZnVHJpYW5nbGVzTm9kZXMpO1xyXG5cclxuXHJcblx0LyoqXHJcblx0ICogQGRlc2NyaXB0aW9uIFRoaXMgd2lsbCBsb2FkIHRoZSBnZW5yZXMgaW4gdGhlIFNWRyBhbmQgYWRkIHRoZSBldmVudHMgZm9yIGNsaWNrIHRvIHRoZSB0cmFja3NcclxuXHQgKi9cclxuXHJcblx0Y29uc3Qgc2NyZWVuTG9hZCA9ICgpID0+IHtcclxuXHRcdG1vZGlmeUZvckdlbnJlU1ZHKHN2Z1RyaWFuZ2xlc0VsZW1lbnRzKTtcclxuXHRcdGdlbnJlU1ZHRXZlbnRzKHN2Z1RyaWFuZ2xlc0VsZW1lbnRzKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBAZGVzY3JpcHRpb24gb25jZSBhIHVzZXIgaGFzIHNlbGVjdGVkIHRoZSBnZW5yZSB0aGV5IHdhbnQgdG8gbG9hZFxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBnZW5yZVxyXG5cdCAqL1xyXG5cdGNvbnN0IHRyYWNrTG9hZCA9IChnZW5yZSkgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2coZ2VucmUpO1xyXG5cdFx0bW9kaWZ5Rm9yVHJhY2tTVkcoc3ZnVHJpYW5nbGVzRWxlbWVudHMsIGdlbnJlKTtcclxuXHRcdHRyYWNrc0V2ZW50cyhzdmdUcmlhbmdsZXNFbGVtZW50cyk7XHJcblx0fTtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHNjcmVlbkxvYWQ6IHNjcmVlbkxvYWQsXHJcblx0XHR0cmFja0xvYWQ6IHRyYWNrTG9hZCxcclxuXHR9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBpbml0O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/common/init.js\n");

/***/ }),

/***/ "./src/js/config/genreList.js":
/*!************************************!*\
  !*** ./src/js/config/genreList.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n});\nvar genres = {\n\t\ttype: 'genres',\n\t\t// This will build the svg with the init genres user can choose \n\t\tpredefinedGenres: {\n\t\t\t\thipHop: 'Hip-Hop',\n\t\t\t\tfolk: 'Folk',\n\t\t\t\tfunk: 'Funk',\n\t\t\t\thouse: 'House',\n\t\t\t\tbeats: 'Beats',\n\t\t\t\tcountry: 'Country',\n\t\t\t\trock: 'Rock',\n\t\t\t\telectronic: 'Electronic',\n\t\t\t\tfutureBeats: 'Future-Beats'\n\t\t}\n};\n\nexports.default = genres;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvY29uZmlnL2dlbnJlTGlzdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvY29uZmlnL2dlbnJlTGlzdC5qcz84MGI2Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdlbnJlcyA9IHtcclxuXHR0eXBlOiAnZ2VucmVzJyxcclxuXHQvLyBUaGlzIHdpbGwgYnVpbGQgdGhlIHN2ZyB3aXRoIHRoZSBpbml0IGdlbnJlcyB1c2VyIGNhbiBjaG9vc2UgXHJcblx0cHJlZGVmaW5lZEdlbnJlczoge1xyXG5cdFx0XHRoaXBIb3A6ICdIaXAtSG9wJyxcclxuXHRcdFx0Zm9sazogJ0ZvbGsnLFxyXG5cdFx0XHRmdW5rOiAnRnVuaycsXHJcblx0XHRcdGhvdXNlOiAnSG91c2UnLFxyXG5cdFx0XHRiZWF0czogJ0JlYXRzJyxcclxuXHRcdFx0Y291bnRyeTogJ0NvdW50cnknLFxyXG5cdFx0XHRyb2NrOiAnUm9jaycsXHJcblx0XHRcdGVsZWN0cm9uaWM6ICdFbGVjdHJvbmljJyxcclxuXHRcdFx0ZnV0dXJlQmVhdHM6ICdGdXR1cmUtQmVhdHMnLFxyXG5cdFx0fSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdlbnJlcztcclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFIQTtBQUNBO0FBZUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/config/genreList.js\n");

/***/ }),

/***/ "./src/js/events/svg.events.js":
/*!*************************************!*\
  !*** ./src/js/events/svg.events.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.genreSVGEvents = undefined;\n\nvar _init = __webpack_require__(/*! ../common/init */ \"./src/js/common/init.js\");\n\nvar _init2 = _interopRequireDefault(_init);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * @author nomadmystics@gmail.com\r\n * @description This will add the events needed for the svgs to load genres and tracks\r\n * @return void\r\n */\n\nvar genreSVGEvents = exports.genreSVGEvents = function genreSVGEvents(svgTrianglesElements) {\n\tvar triangleArrayLength = svgTrianglesElements.length;\n\n\tvar svgShapesClickEvent = function svgShapesClickEvent(event) {\n\t\tevent.stopPropagation();\n\n\t\tif (event.target && event.target.tagName === 'text' || event.target.tagName === 'rect') {\n\t\t\t// console.log(event.)\n\t\t\tconsole.log(event);\n\n\t\t\t(0, _init2.default)().trackLoad(event.target.dataset.genre);\n\t\t}\n\t};\n\n\tfor (var i = 0; i < triangleArrayLength; i++) {\n\t\tsvgTrianglesElements[i].addEventListener('click', svgShapesClickEvent, false);\n\t}\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvZXZlbnRzL3N2Zy5ldmVudHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2V2ZW50cy9zdmcuZXZlbnRzLmpzP2Q2Y2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGluaXQgZnJvbSAnLi4vY29tbW9uL2luaXQnO1xyXG5cclxuLyoqXHJcbiAqIEBhdXRob3Igbm9tYWRteXN0aWNzQGdtYWlsLmNvbVxyXG4gKiBAZGVzY3JpcHRpb24gVGhpcyB3aWxsIGFkZCB0aGUgZXZlbnRzIG5lZWRlZCBmb3IgdGhlIHN2Z3MgdG8gbG9hZCBnZW5yZXMgYW5kIHRyYWNrc1xyXG4gKiBAcmV0dXJuIHZvaWRcclxuICovXHJcblxyXG5leHBvcnQgY29uc3QgZ2VucmVTVkdFdmVudHMgPSAoc3ZnVHJpYW5nbGVzRWxlbWVudHMpID0+IHtcclxuXHRjb25zdCB0cmlhbmdsZUFycmF5TGVuZ3RoID0gc3ZnVHJpYW5nbGVzRWxlbWVudHMubGVuZ3RoO1xyXG5cclxuXHRjb25zdCBzdmdTaGFwZXNDbGlja0V2ZW50ID0gKGV2ZW50KSA9PiB7XHJcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcblx0XHRpZiAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC50YWdOYW1lID09PSAndGV4dCcgfHwgZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09ICdyZWN0Jykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhldmVudC4pXHJcblx0XHRcdGNvbnNvbGUubG9nKGV2ZW50KTtcclxuXHJcblx0XHRcdGluaXQoKS50cmFja0xvYWQoZXZlbnQudGFyZ2V0LmRhdGFzZXQuZ2VucmUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVBcnJheUxlbmd0aDsgaSsrKSB7XHJcblx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN2Z1NoYXBlc0NsaWNrRXZlbnQsIGZhbHNlKTtcclxuXHR9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/events/svg.events.js\n");

/***/ }),

/***/ "./src/js/events/tracks.events.js":
/*!****************************************!*\
  !*** ./src/js/events/tracks.events.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.tracksEvents = undefined;\n\nvar _streamTrack = __webpack_require__(/*! ../utils/streamTrack */ \"./src/js/utils/streamTrack.js\");\n\nvar queryString = __webpack_require__(/*! querystring */ \"./node_modules/querystring-es3/index.js\");\n\n/**\r\n * @author nomadmystics@gmail.com\r\n * @param {HTMLElement} tracksContainer\r\n * @return void\r\n */\n\nvar tracksEvents = exports.tracksEvents = function tracksEvents(svgTrianglesElements) {\n\tvar svgTrianglesElementsLength = svgTrianglesElements.length;\n\n\tvar svgTrianglesElementEvent = function svgTrianglesElementEvent(event) {\n\t\t// console.log(event);\n\t\tif (event.target && event.target.tagName === 'text' || event.target.tagName === 'rect') {\n\t\t\t// console.log(event);\n\t\t\tvar parsedURL = document.createElement('a');\n\t\t\tparsedURL.href = event.target.dataset.trackUri;\n\n\t\t\tconsole.log(queryString.parse(event.target.dataset.trackUri));\n\n\t\t\tconsole.log(parsedURL.pathname);\n\t\t\tvar trackURL = parsedURL.pathname;\n\n\t\t\tconsole.log('' + trackURL);\n\t\t\t(0, _streamTrack.streamTrack)(trackURL);\n\t\t}\n\t};\n\n\tfor (var i = 0; i < svgTrianglesElementsLength; i++) {\n\t\tsvgTrianglesElements[i].addEventListener('click', svgTrianglesElementEvent, false);\n\t}\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvZXZlbnRzL3RyYWNrcy5ldmVudHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2V2ZW50cy90cmFja3MuZXZlbnRzLmpzPzk4MjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RyZWFtVHJhY2sgfSBmcm9tICcuLi91dGlscy9zdHJlYW1UcmFjayc7XHJcblxyXG5cclxuY29uc3QgcXVlcnlTdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAYXV0aG9yIG5vbWFkbXlzdGljc0BnbWFpbC5jb21cclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdHJhY2tzQ29udGFpbmVyXHJcbiAqIEByZXR1cm4gdm9pZFxyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCB0cmFja3NFdmVudHMgPSAoc3ZnVHJpYW5nbGVzRWxlbWVudHMpID0+IHtcclxuXHRjb25zdCBzdmdUcmlhbmdsZXNFbGVtZW50c0xlbmd0aCA9IHN2Z1RyaWFuZ2xlc0VsZW1lbnRzLmxlbmd0aDtcclxuXHJcblx0Y29uc3Qgc3ZnVHJpYW5nbGVzRWxlbWVudEV2ZW50ID0gKGV2ZW50KSA9PiB7XHJcblx0XHQvLyBjb25zb2xlLmxvZyhldmVudCk7XHJcblx0XHRpZiAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC50YWdOYW1lID09PSAndGV4dCcgfHwgZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09ICdyZWN0Jykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhldmVudCk7XHJcblx0XHRcdGNvbnN0IHBhcnNlZFVSTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuXHRcdFx0cGFyc2VkVVJMLmhyZWYgPSBldmVudC50YXJnZXQuZGF0YXNldC50cmFja1VyaTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKHF1ZXJ5U3RyaW5nLnBhcnNlKGV2ZW50LnRhcmdldC5kYXRhc2V0LnRyYWNrVXJpKSk7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhwYXJzZWRVUkwucGF0aG5hbWUpO1xyXG5cdFx0XHRsZXQgdHJhY2tVUkwgPSBwYXJzZWRVUkwucGF0aG5hbWU7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhgJHt0cmFja1VSTH1gKTtcclxuXHRcdFx0c3RyZWFtVHJhY2sodHJhY2tVUkwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgc3ZnVHJpYW5nbGVzRWxlbWVudHNMZW5ndGg7IGkrKykge1xyXG5cdFx0c3ZnVHJpYW5nbGVzRWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdmdUcmlhbmdsZXNFbGVtZW50RXZlbnQsIGZhbHNlKTtcclxuXHR9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/events/tracks.events.js\n");

/***/ }),

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _getPromise = __webpack_require__(/*! ./utils/getPromise */ \"./src/js/utils/getPromise.js\");\n\nvar _getPromise2 = _interopRequireDefault(_getPromise);\n\nvar _keys = __webpack_require__(/*! ../../config/keys */ \"./config/keys.js\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _genreList = __webpack_require__(/*! ./config/genreList */ \"./src/js/config/genreList.js\");\n\nvar _genreList2 = _interopRequireDefault(_genreList);\n\nvar _svg = __webpack_require__(/*! ./events/svg.events */ \"./src/js/events/svg.events.js\");\n\nvar _init = __webpack_require__(/*! ./common/init */ \"./src/js/common/init.js\");\n\nvar _init2 = _interopRequireDefault(_init);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// depends\nvar SC = __webpack_require__(/*! soundcloud */ \"./node_modules/soundcloud/sdk.js\");\n\n// Utils\n\n\n// keys\n\n\n(0, _init2.default)().screenLoad();\n\n// testing to see if this will work out of the box\n// genreSVGEvents();\n\n\n// genres();\n\n\n// getPromise('http://localhost:8000/api/genre/hip-hop')\n// .then((res) => {\n// \tbuildBoxes(res);\n// })\n// .catch((error) => {\n// \tconsole.log(error);\n// });\n//\n// SC.initialize({\n// \tclient_id: keys.soundcloudKey,\n// });\n//\n// const buildBoxes = (res) => {\n//\n//\n// \tboxesEvents();\n//\n//\n//\n// };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2luZGV4LmpzPzAyN2QiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVwZW5kc1xyXG5jb25zdCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTtcclxuXHJcbi8vIFV0aWxzXHJcbmltcG9ydCBnZXRQcm9taXNlIGZyb20gJy4vdXRpbHMvZ2V0UHJvbWlzZSc7XHJcblxyXG4vLyBrZXlzXHJcbmltcG9ydCBrZXlzIGZyb20gJy4uLy4uL2NvbmZpZy9rZXlzJztcclxuXHJcblxyXG5pbXBvcnQgZ2VucmVzIGZyb20gJy4vY29uZmlnL2dlbnJlTGlzdCc7XHJcbmltcG9ydCB7IGdlbnJlU1ZHRXZlbnRzIH0gZnJvbSAnLi9ldmVudHMvc3ZnLmV2ZW50cyc7XHJcblxyXG5pbXBvcnQgaW5pdCBmcm9tICcuL2NvbW1vbi9pbml0JztcclxuXHJcbmluaXQoKS5zY3JlZW5Mb2FkKCk7XHJcblxyXG5cclxuLy8gdGVzdGluZyB0byBzZWUgaWYgdGhpcyB3aWxsIHdvcmsgb3V0IG9mIHRoZSBib3hcclxuLy8gZ2VucmVTVkdFdmVudHMoKTtcclxuXHJcblxyXG4vLyBnZW5yZXMoKTtcclxuXHJcblxyXG5cclxuXHJcbi8vIGdldFByb21pc2UoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvZ2VucmUvaGlwLWhvcCcpXHJcbi8vIC50aGVuKChyZXMpID0+IHtcclxuLy8gXHRidWlsZEJveGVzKHJlcyk7XHJcbi8vIH0pXHJcbi8vIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuLy8gXHRjb25zb2xlLmxvZyhlcnJvcik7XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyBTQy5pbml0aWFsaXplKHtcclxuLy8gXHRjbGllbnRfaWQ6IGtleXMuc291bmRjbG91ZEtleSxcclxuLy8gfSk7XHJcbi8vXHJcbi8vIGNvbnN0IGJ1aWxkQm94ZXMgPSAocmVzKSA9PiB7XHJcbi8vXHJcbi8vXHJcbi8vIFx0Ym94ZXNFdmVudHMoKTtcclxuLy9cclxuLy9cclxuLy9cclxuLy8gfTtcclxuXHJcblxyXG5cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFJQTtBQUNBOzs7QUFFQTtBQUNBOzs7QUFFQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/index.js\n");

/***/ }),

/***/ "./src/js/svg/modifyForGenreSVG.js":
/*!*****************************************!*\
  !*** ./src/js/svg/modifyForGenreSVG.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.modifyForGenreSVG = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _genreList = __webpack_require__(/*! ../config/genreList */ \"./src/js/config/genreList.js\");\n\nvar _genreList2 = _interopRequireDefault(_genreList);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * @author nomadmystics@gmail.com\r\n * @param {array} svgTrianglesElements\r\n */\n\nvar modifyForGenreSVG = exports.modifyForGenreSVG = function modifyForGenreSVG(svgTrianglesElements) {\n\tvar count = 0;\n\tconsole.log(svgTrianglesElements);\n\tif ((typeof _genreList2.default === 'undefined' ? 'undefined' : _typeof(_genreList2.default)) === 'object' && 'genres' === _genreList2.default.type) {\n\t\tvar genreValues = _genreList2.default.predefinedGenres;\n\t\tfor (var genre in genreValues) {\n\t\t\tif (genreValues.hasOwnProperty(genre)) {\n\t\t\t\tsvgTrianglesElements[count].children[1].textContent = genreValues[genre];\n\t\t\t\tsvgTrianglesElements[count].children[0].dataset.genre = genreValues[genre].toLowerCase();\n\t\t\t\tsvgTrianglesElements[count].children[1].dataset.genre = genreValues[genre].toLowerCase();\n\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t}\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvc3ZnL21vZGlmeUZvckdlbnJlU1ZHLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9qcy9zdmcvbW9kaWZ5Rm9yR2VucmVTVkcuanM/NDU3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2VucmVzICBmcm9tICcuLi9jb25maWcvZ2VucmVMaXN0JztcclxuXHJcblxyXG4vKipcclxuICogQGF1dGhvciBub21hZG15c3RpY3NAZ21haWwuY29tXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHN2Z1RyaWFuZ2xlc0VsZW1lbnRzXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IG1vZGlmeUZvckdlbnJlU1ZHID0gKHN2Z1RyaWFuZ2xlc0VsZW1lbnRzKSA9PiB7XHJcblx0bGV0IGNvdW50ID0gMDtcclxuXHRjb25zb2xlLmxvZyhzdmdUcmlhbmdsZXNFbGVtZW50cyk7XHJcblx0aWYgKHR5cGVvZiBnZW5yZXMgPT09ICdvYmplY3QnICYmICdnZW5yZXMnID09PSBnZW5yZXMudHlwZSkge1xyXG5cdFx0Y29uc3QgZ2VucmVWYWx1ZXMgPSBnZW5yZXMucHJlZGVmaW5lZEdlbnJlcztcclxuXHRcdGZvciAobGV0IGdlbnJlIGluIGdlbnJlVmFsdWVzKSB7XHJcblx0XHRcdGlmIChnZW5yZVZhbHVlcy5oYXNPd25Qcm9wZXJ0eShnZW5yZSkpIHtcclxuXHRcdFx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tjb3VudF0uY2hpbGRyZW5bMV0udGV4dENvbnRlbnQgPSBnZW5yZVZhbHVlc1tnZW5yZV07XHJcblx0XHRcdFx0c3ZnVHJpYW5nbGVzRWxlbWVudHNbY291bnRdLmNoaWxkcmVuWzBdLmRhdGFzZXQuZ2VucmUgPSBnZW5yZVZhbHVlc1tnZW5yZV0udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tjb3VudF0uY2hpbGRyZW5bMV0uZGF0YXNldC5nZW5yZSA9IGdlbnJlVmFsdWVzW2dlbnJlXS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0XHRjb3VudCsrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/svg/modifyForGenreSVG.js\n");

/***/ }),

/***/ "./src/js/svg/modifyForTrackSVG.js":
/*!*****************************************!*\
  !*** ./src/js/svg/modifyForTrackSVG.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.modifyForTrackSVG = undefined;\n\nvar _genreList = __webpack_require__(/*! ../config/genreList */ \"./src/js/config/genreList.js\");\n\nvar _genreList2 = _interopRequireDefault(_genreList);\n\nvar _getPromise = __webpack_require__(/*! ../utils/getPromise */ \"./src/js/utils/getPromise.js\");\n\nvar _getPromise2 = _interopRequireDefault(_getPromise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import getPromise  from '../utils/getPromise';\n\n/**\r\n *\r\n * @param {array} svgTrianglesElements\r\n * @param {string} genre\r\n */\n\nvar modifyForTrackSVG = exports.modifyForTrackSVG = function modifyForTrackSVG(svgTrianglesElements, genre) {\n\n\tvar URLForListOfTracks = \"http://localhost:3000/api/genre/\" + genre;\n\n\t(0, _getPromise2.default)(URLForListOfTracks).then(function (tracks) {\n\t\tbuildTrackInfo(tracks);\n\t}).catch(function (error) {\n\t\tconsole.error(error);\n\t});\n\n\tvar buildTrackInfo = function buildTrackInfo(tracks) {\n\t\t// console.log(tracks);\n\n\t\tvar count = 0;\n\t\tconsole.log(svgTrianglesElements);\n\t\t// @TODO figure out more validation\n\t\t// make sure there are 9 tracks\n\t\tif (tracks) {\n\t\t\t// const genreValues = genres.predefinedGenres;\n\t\t\ttracks.forEach(function (track, index) {\n\n\t\t\t\t// console.log(track);\n\t\t\t\t// if (genreValues.hasOwnProperty(genre)) {\n\t\t\t\tsvgTrianglesElements[index].children[1].textContent = index += 1;\n\n\t\t\t\tsvgTrianglesElements[index].children[0].dataset.trackUri = track.uri.toLowerCase();\n\t\t\t\tsvgTrianglesElements[index].children[1].dataset.trackUri = track.uri.toLowerCase();\n\n\t\t\t\tsvgTrianglesElements[index].children[0].dataset.trackTitle = track.title;\n\t\t\t\tsvgTrianglesElements[index].children[1].dataset.trackTitle = track.title;\n\n\t\t\t\tsvgTrianglesElements[index].children[0].dataset.artworkUrl = track.artwork_url;\n\t\t\t\tsvgTrianglesElements[index].children[1].dataset.artworkUrl = track.artwork_url;\n\n\t\t\t\tsvgTrianglesElements[index].children[0].dataset.trackUser = track.user.username;\n\t\t\t\tsvgTrianglesElements[index].children[1].dataset.trackUser = track.user.username;\n\n\t\t\t\tsvgTrianglesElements[index].children[0].dataset.trackWaveform = track.waveform_url;\n\t\t\t\tsvgTrianglesElements[index].children[1].dataset.trackWaveform = track.waveform_url;\n\n\t\t\t\t// data-uri=\"${track.uri}\"\n\t\t\t\t// data-track-title=\"${track.title}\"\n\t\t\t\t// data-track-artwork-url=\"${track.artwork_url}\"\n\t\t\t\t// data-track-user=\"${track.user.username}\"\n\t\t\t\t// data-track-waveform=\"${track.waveform_url}\"\n\t\t\t\tcount++;\n\n\t\t\t\t// if (count >= 9) {\n\t\t\t\t// \tbreak;\n\t\t\t\t// }\n\t\t\t\t// }\n\t\t\t});\n\t\t}\n\t};\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvc3ZnL21vZGlmeUZvclRyYWNrU1ZHLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9qcy9zdmcvbW9kaWZ5Rm9yVHJhY2tTVkcuanM/MjVkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2VucmVzIGZyb20gXCIuLi9jb25maWcvZ2VucmVMaXN0XCI7XHJcbmltcG9ydCBnZXRQcm9taXNlIGZyb20gXCIuLi91dGlscy9nZXRQcm9taXNlXCI7XHJcblxyXG4vLyBpbXBvcnQgZ2V0UHJvbWlzZSAgZnJvbSAnLi4vdXRpbHMvZ2V0UHJvbWlzZSc7XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHthcnJheX0gc3ZnVHJpYW5nbGVzRWxlbWVudHNcclxuICogQHBhcmFtIHtzdHJpbmd9IGdlbnJlXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IG1vZGlmeUZvclRyYWNrU1ZHID0gKHN2Z1RyaWFuZ2xlc0VsZW1lbnRzLCBnZW5yZSkgPT4ge1xyXG5cclxuXHRjb25zdCBVUkxGb3JMaXN0T2ZUcmFja3MgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9nZW5yZS8ke2dlbnJlfWA7XHJcblxyXG5cdGdldFByb21pc2UoVVJMRm9yTGlzdE9mVHJhY2tzKVxyXG5cdFx0LnRoZW4oKHRyYWNrcykgPT4ge1xyXG5cdFx0XHRidWlsZFRyYWNrSW5mbyh0cmFja3MpO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxuXHJcblx0Y29uc3QgYnVpbGRUcmFja0luZm8gPSAodHJhY2tzKSA9PiB7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh0cmFja3MpO1xyXG5cclxuXHRcdGxldCBjb3VudCA9IDA7XHJcblx0XHRjb25zb2xlLmxvZyhzdmdUcmlhbmdsZXNFbGVtZW50cyk7XHJcblx0XHQvLyBAVE9ETyBmaWd1cmUgb3V0IG1vcmUgdmFsaWRhdGlvblxyXG5cdFx0Ly8gbWFrZSBzdXJlIHRoZXJlIGFyZSA5IHRyYWNrc1xyXG5cdFx0aWYgKHRyYWNrcykge1xyXG5cdFx0XHQvLyBjb25zdCBnZW5yZVZhbHVlcyA9IGdlbnJlcy5wcmVkZWZpbmVkR2VucmVzO1xyXG5cdFx0XHR0cmFja3MuZm9yRWFjaCgodHJhY2ssIGluZGV4KSA9PiB7XHJcblxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHRyYWNrKTtcclxuXHRcdFx0XHQvLyBpZiAoZ2VucmVWYWx1ZXMuaGFzT3duUHJvcGVydHkoZ2VucmUpKSB7XHJcblx0XHRcdFx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tpbmRleF0uY2hpbGRyZW5bMV0udGV4dENvbnRlbnQgPSBpbmRleCArPSAxO1xyXG5cclxuXHRcdFx0XHRcdHN2Z1RyaWFuZ2xlc0VsZW1lbnRzW2luZGV4XS5jaGlsZHJlblswXS5kYXRhc2V0LnRyYWNrVXJpID0gdHJhY2sudXJpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tpbmRleF0uY2hpbGRyZW5bMV0uZGF0YXNldC50cmFja1VyaSA9IHRyYWNrLnVyaS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0XHRcdHN2Z1RyaWFuZ2xlc0VsZW1lbnRzW2luZGV4XS5jaGlsZHJlblswXS5kYXRhc2V0LnRyYWNrVGl0bGUgPSB0cmFjay50aXRsZTtcclxuXHRcdFx0XHRcdHN2Z1RyaWFuZ2xlc0VsZW1lbnRzW2luZGV4XS5jaGlsZHJlblsxXS5kYXRhc2V0LnRyYWNrVGl0bGUgPSB0cmFjay50aXRsZTtcclxuXHJcblx0XHRcdFx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tpbmRleF0uY2hpbGRyZW5bMF0uZGF0YXNldC5hcnR3b3JrVXJsID0gdHJhY2suYXJ0d29ya191cmw7XHJcblx0XHRcdFx0XHRzdmdUcmlhbmdsZXNFbGVtZW50c1tpbmRleF0uY2hpbGRyZW5bMV0uZGF0YXNldC5hcnR3b3JrVXJsID0gdHJhY2suYXJ0d29ya191cmw7XHJcblxyXG5cdFx0XHRcdFx0c3ZnVHJpYW5nbGVzRWxlbWVudHNbaW5kZXhdLmNoaWxkcmVuWzBdLmRhdGFzZXQudHJhY2tVc2VyID0gdHJhY2sudXNlci51c2VybmFtZTtcclxuXHRcdFx0XHRcdHN2Z1RyaWFuZ2xlc0VsZW1lbnRzW2luZGV4XS5jaGlsZHJlblsxXS5kYXRhc2V0LnRyYWNrVXNlciA9IHRyYWNrLnVzZXIudXNlcm5hbWU7XHJcblxyXG5cdFx0XHRcdFx0c3ZnVHJpYW5nbGVzRWxlbWVudHNbaW5kZXhdLmNoaWxkcmVuWzBdLmRhdGFzZXQudHJhY2tXYXZlZm9ybSA9IHRyYWNrLndhdmVmb3JtX3VybDtcclxuXHRcdFx0XHRcdHN2Z1RyaWFuZ2xlc0VsZW1lbnRzW2luZGV4XS5jaGlsZHJlblsxXS5kYXRhc2V0LnRyYWNrV2F2ZWZvcm0gPSB0cmFjay53YXZlZm9ybV91cmw7XHJcblxyXG5cclxuXHJcblx0XHRcdFx0XHQvLyBkYXRhLXVyaT1cIiR7dHJhY2sudXJpfVwiXHJcblx0XHRcdFx0XHQvLyBkYXRhLXRyYWNrLXRpdGxlPVwiJHt0cmFjay50aXRsZX1cIlxyXG5cdFx0XHRcdFx0Ly8gZGF0YS10cmFjay1hcnR3b3JrLXVybD1cIiR7dHJhY2suYXJ0d29ya191cmx9XCJcclxuXHRcdFx0XHRcdC8vIGRhdGEtdHJhY2stdXNlcj1cIiR7dHJhY2sudXNlci51c2VybmFtZX1cIlxyXG5cdFx0XHRcdFx0Ly8gZGF0YS10cmFjay13YXZlZm9ybT1cIiR7dHJhY2sud2F2ZWZvcm1fdXJsfVwiXHJcblx0XHRcdFx0XHRjb3VudCsrO1xyXG5cclxuXHRcdFx0XHRcdC8vIGlmIChjb3VudCA+PSA5KSB7XHJcblx0XHRcdFx0XHQvLyBcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdC8vIH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHJcbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/svg/modifyForTrackSVG.js\n");

/***/ }),

/***/ "./src/js/utils/getPromise.js":
/*!************************************!*\
  !*** ./src/js/utils/getPromise.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n\n/**\r\n * @author nomadmystics@gmail.com\r\n * @param {string} url\r\n */\n\nvar getPromise = function getPromise(url) {\n\treturn new Promise(function (resolve, reject) {\n\t\tfetch(url).then(function (res) {\n\n\t\t\tif (res.status === 200) {\n\t\t\t\tresolve(res.json());\n\t\t\t} else {\n\t\t\t\treject(new Error(res.statusText));\n\t\t\t}\n\t\t}).catch(function (error) {\n\t\t\treject(\"There was an error in fetching \" + url + \". Error: \" + error);\n\t\t});\n\t});\n};\n\nexports.default = getPromise;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvdXRpbHMvZ2V0UHJvbWlzZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdXRpbHMvZ2V0UHJvbWlzZS5qcz80ZTA1Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3Igbm9tYWRteXN0aWNzQGdtYWlsLmNvbVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcbiAqL1xyXG5cclxuY29uc3QgZ2V0UHJvbWlzZSA9IGZ1bmN0aW9uKHVybCkge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRmZXRjaCh1cmwpXHJcblx0XHRcdC50aGVuKChyZXMpID0+IHtcclxuXHJcblx0XHRcdFx0aWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG5cdFx0XHRcdFx0cmVzb2x2ZShyZXMuanNvbigpKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihyZXMuc3RhdHVzVGV4dCkpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0pXHJcblx0XHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRyZWplY3QoYFRoZXJlIHdhcyBhbiBlcnJvciBpbiBmZXRjaGluZyAke3VybH0uIEVycm9yOiAke2Vycm9yfWApO1xyXG5cdFx0XHR9KTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBnZXRQcm9taXNlO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/utils/getPromise.js\n");

/***/ }),

/***/ "./src/js/utils/streamTrack.js":
/*!*************************************!*\
  !*** ./src/js/utils/streamTrack.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.streamTrack = undefined;\n\nvar _keys = __webpack_require__(/*! ../../../config/keys */ \"./config/keys.js\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// depends\nvar SC = __webpack_require__(/*! soundcloud */ \"./node_modules/soundcloud/sdk.js\");\n\n// keys\n\n\nSC.initialize({\n\tclient_id: _keys2.default.soundcloudKey\n});\n\n/**\r\n * @author nomadmystics@gmail.com\r\n * @param {string} trackNumber\r\n * @return void\r\n */\n\nvar streamTrack = exports.streamTrack = function streamTrack(trackNumber) {\n\n\tSC.stream('' + trackNumber).then(function (player) {\n\t\tconsole.log(player);\n\t\tplayer.play().then(function () {\n\n\t\t\tconsole.log('Playback started!');\n\t\t}).catch(function (e) {\n\n\t\t\tconsole.error('Playback rejected. Try calling play() from a user interaction.', e);\n\t\t});\n\t});\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvdXRpbHMvc3RyZWFtVHJhY2suanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL3N0cmVhbVRyYWNrLmpzPzRhY2YiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVwZW5kc1xyXG5jb25zdCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTtcclxuXHJcbi8vIGtleXNcclxuaW1wb3J0IGtleXMgZnJvbSAnLi4vLi4vLi4vY29uZmlnL2tleXMnO1xyXG5cclxuXHJcblxyXG5TQy5pbml0aWFsaXplKHtcclxuXHRjbGllbnRfaWQ6IGtleXMuc291bmRjbG91ZEtleSxcclxufSk7XHJcblxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3Igbm9tYWRteXN0aWNzQGdtYWlsLmNvbVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHJhY2tOdW1iZXJcclxuICogQHJldHVybiB2b2lkXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0cmVhbVRyYWNrID0gKHRyYWNrTnVtYmVyKSA9PiB7XHJcblxyXG5cdFNDLnN0cmVhbShgJHt0cmFja051bWJlcn1gKS50aGVuKGZ1bmN0aW9uKHBsYXllcikge1xyXG5cdFx0Y29uc29sZS5sb2cocGxheWVyKTtcclxuXHRcdHBsYXllci5wbGF5KCkudGhlbigoKSA9PiAge1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coJ1BsYXliYWNrIHN0YXJ0ZWQhJyk7XHJcblxyXG5cdFx0fSkuY2F0Y2goKGUpID0+IHtcclxuXHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1BsYXliYWNrIHJlamVjdGVkLiBUcnkgY2FsbGluZyBwbGF5KCkgZnJvbSBhIHVzZXIgaW50ZXJhY3Rpb24uJywgZSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUlBO0FBQ0E7Ozs7O0FBTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFJQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/utils/streamTrack.js\n");

/***/ }),

/***/ "./src/sass/index.scss":
/*!*****************************!*\
  !*** ./src/sass/index.scss ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2Fzcy9pbmRleC5zY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3Nhc3MvaW5kZXguc2Nzcz9hNzc5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/sass/index.scss\n");

/***/ })

/******/ });